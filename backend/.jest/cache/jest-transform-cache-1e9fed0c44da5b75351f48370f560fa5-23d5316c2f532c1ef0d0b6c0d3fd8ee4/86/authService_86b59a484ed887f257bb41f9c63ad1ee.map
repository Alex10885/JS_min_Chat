{"version":3,"names":["cov_hs23rl6zq","actualCoverage","jwt","s","require","crypto","User","config","logger","winston","redisManager","rateLimit","RedisStore","e","AuthService","constructor","f","_initializeRateLimiters","initializeRedis","isClientReady","b","connect","info","error","redisStore","getClient","authRateLimiter","store","client","prefix","expiry","windowMs","max","process","env","NODE_ENV","CYPRESS_API_SKIP","message","standardHeaders","legacyHeaders","skip","req","get","includes","onLimitReached","_res","warn","ip","userAgent","identifier","body","apiRateLimiter","undefined","redisDisabled","generalRateLimiter","passwordResetRateLimiter","dynamicRateLimiter","calculateDynamicLimit","user","role","_createMemoryRateLimiters","userId","_id","toString","behaviorScore","getUserBehaviorScore","behaviorKey","score","getCache","setCache","parseInt","updateUserBehaviorScore","action","currentScore","Math","min","registerUser","userData","nickname","email","password","existingUser","findOne","$or","conflictField","errorMessage","Error","status","save","loginUser","captchaToken","isAccountLocked","lockTimeRemaining","ceil","accountLockedUntil","Date","captchaRequired","isPasswordValid","comparePassword","incFailedAttempts","attempts","failedLoginAttempts","lockedUntil","resetFailedAttempts","generateToken","sessionId","csrfToken","token","sign","security","jwtSecret","expiresIn","generateCsrfToken","randomBytes","logoutUser","findByIdAndUpdate","lastActive","getUserFromToken","decoded","verify","findById","validateSession","session","authenticated","enable2FA","secret","generate2FASecret","qrCodeUrl","base32","backupCodes","confirm2FA","code","twoFactorSecret","isValid","verify2FACode","success","disable2FA","twoFactorEnabled","authenticateSession","res","next","console","log","url","method","sessionID","sessionExists","sessionData","loginTime","substring","getSessionData","sid","id","sessionValid","sessionUser","lastActivity","toISOString","setSessionData","lastSessionCheck","deleteSessionData","redisSessionFound","authenticateToken","authHeader","headers","split","hasAuthHeader","hasToken","json","name","requireModerator","hasModeratorPrivileges","requireAdmin","hasAdminPrivileges","verifyJWTToken","valid","createSession","fingerprint","csrfTokenHash","createHash","update","digest","setSession","userAgentLength","length","expires","cookie","destroySession","hasSessionAuth","sessionUserId","deleteSession","Promise","resolve","reject","destroy","err","getSession","data","ttl","validateAndEnhanceSession","handleLoginWithSession","_connectionManager","hasPassword","errors","msg","banned","reason","banReason","banExpires","sessionInfo","responseUser","handleRegistrationWithSession","module","exports"],"sources":["authService.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\nconst crypto = require('crypto');\nconst User = require('../models/User');\nconst config = require('../config');\nconst { logger } = require('../middleware/auth');\n// Removed unused imports\nconst winston = require('winston');\nconst { redisManager } = require('../config/redis');\nconst rateLimit = require('express-rate-limit');\nlet RedisStore;\ntry {\n  RedisStore = require('rate-limit-redis');\n} catch (e) {\n  // rate-limit-redis not available, use memory store\n  RedisStore = null;\n}\n\nclass AuthService {\n  constructor() {\n    this.logger = logger;\n    this.redisManager = redisManager;\n    this._initializeRateLimiters();\n  }\n\n  async initializeRedis() {\n    try {\n      if (!this.redisManager.isClientReady()) {\n        await this.redisManager.connect();\n      }\n      this.logger.info('AuthService Redis connection established for session management');\n    } catch (error) {\n      this.logger.error('Failed to initialize Redis in AuthService:', error);\n      throw error;\n    }\n  }\n\n  _initializeRateLimiters() {\n    try {\n      const redisStore = redisManager.getClient();\n\n      if (redisStore && RedisStore) {\n        // Enhanced authentication rate limiter with Redis store\n        this.authRateLimiter = rateLimit({\n          store: new RedisStore({\n            client: redisStore,\n            prefix: 'auth_limit:',\n            // Reset key every 15 minutes\n            expiry: 15 * 60\n          }),\n          windowMs: 15 * 60 * 1000, // 15 minutes\n          max: process.env.NODE_ENV === 'test' || process.env.CYPRESS_API_SKIP ? 20000 : 10,\n          message: { error: 'Too many authentication attempts, please try again later.' },\n          standardHeaders: true,\n          legacyHeaders: false,\n          skip: (req) => {\n            return req.get('User-Agent') && req.get('User-Agent').includes('Cypress');\n          },\n          onLimitReached: (req, _res) => {\n            this.logger.warn('Authentication rate limit reached', {\n              ip: req.ip,\n              userAgent: req.get('User-Agent'),\n              identifier: req.body?.identifier || 'unknown'\n            });\n          }\n        });\n\n        // API rate limiter\n        this.apiRateLimiter = rateLimit({\n          store: RedisStore ? new RedisStore({\n            client: redisStore,\n            prefix: 'api_limit:',\n            expiry: 15 * 60\n          }) : undefined, // Will fallback to memory store\n          windowMs: 15 * 60 * 1000, // 15 minutes\n          max: config.redisDisabled ? 1000 : 200, // Increased for better reliability\n          message: { error: 'Too many requests, please try again later.' },\n          standardHeaders: true,\n          legacyHeaders: false\n        });\n\n        // General rate limiter\n        this.generalRateLimiter = rateLimit({\n          store: new RedisStore({\n            client: redisStore,\n            prefix: 'general_limit:',\n            expiry: 60 * 60\n          }),\n          windowMs: 60 * 60 * 1000, // 1 hour\n          max: config.redisDisabled ? 10000 : 2000,\n          message: { error: 'Too many requests from this IP, please try again later.' },\n          standardHeaders: true,\n          legacyHeaders: false\n        });\n\n        // Password reset rate limiter\n        this.passwordResetRateLimiter = rateLimit({\n          store: new RedisStore({\n            client: redisStore,\n            prefix: 'password_reset_limit:',\n            expiry: 15 * 60\n          }),\n          windowMs: 15 * 60 * 1000, // 15 minutes\n          max: 5,\n          message: { error: 'Too many password reset requests, please try again later.' },\n          standardHeaders: true,\n          legacyHeaders: false\n        });\n\n        // Dynamic rate limiter based on user behavior\n        this.dynamicRateLimiter = rateLimit({\n          store: new RedisStore({\n            client: redisStore,\n            prefix: 'dynamic_limit:',\n            expiry: 5 * 60 // 5 minutes\n          }),\n          windowMs: 5 * 60 * 1000, // 5 minutes\n          max: async (req, _res) => {\n            return await this.calculateDynamicLimit(req);\n          },\n          message: { error: 'Rate limit exceeded based on behavior analysis' },\n          standardHeaders: true,\n          legacyHeaders: false,\n          skip: (req) => {\n            // Skip rate limiting for admins and known good users\n            return req.user && req.user.role === 'admin';\n          }\n        });\n\n        this.logger.info('Redis-based rate limiters initialized successfully');\n      } else {\n        // Fallback to memory store if Redis is not available\n        this.logger.warn('Redis not available, using memory-based rate limiters');\n        this._createMemoryRateLimiters();\n      }\n    } catch (error) {\n      this.logger.error('Failed to initialize rate limiters:', error);\n      this._createMemoryRateLimiters();\n    }\n  }\n\n  _createMemoryRateLimiters() {\n    this.authRateLimiter = rateLimit({\n      windowMs: 15 * 60 * 1000,\n      max: process.env.NODE_ENV === 'test' || process.env.CYPRESS_API_SKIP ? 20000 : 10,\n      message: { error: 'Too many authentication attempts, please try again later.' },\n      standardHeaders: true,\n      legacyHeaders: false,\n      skip: (req) => req.get('User-Agent') && req.get('User-Agent').includes('Cypress')\n    });\n\n    this.apiRateLimiter = rateLimit({\n      windowMs: 15 * 60 * 1000,\n      max: 200,\n      message: { error: 'Too many requests, please try again later.' },\n      standardHeaders: true,\n      legacyHeaders: false\n    });\n\n    this.generalRateLimiter = rateLimit({\n      windowMs: 60 * 60 * 1000,\n      max: 2000,\n      message: { error: 'Too many requests from this IP, please try again later.' },\n      standardHeaders: true,\n      legacyHeaders: false\n    });\n\n    this.passwordResetRateLimiter = rateLimit({\n      windowMs: 15 * 60 * 1000,\n      max: 5,\n      message: { error: 'Too many password reset requests, please try again later.' },\n      standardHeaders: true,\n      legacyHeaders: false\n    });\n  }\n\n  // Calculate dynamic rate limit based on user behavior\n  async calculateDynamicLimit(req) {\n    try {\n      if (!req.user) {\n        return 10; // Low limit for unauthenticated users\n      }\n\n      const userId = req.user._id.toString();\n      const behaviorScore = await this.getUserBehaviorScore(userId);\n\n      // Adjust limit based on behavior score\n      if (behaviorScore >= 90) {\n        return 500; // High trust user\n      } else if (behaviorScore >= 70) {\n        return 200; // Good behavior\n      } else if (behaviorScore >= 50) {\n        return 50; // Moderate\n      } else if (behaviorScore >= 30) {\n        return 20; // Needs monitoring\n      } else {\n        return 5; // Suspicious or new user\n      }\n    } catch (error) {\n      this.logger.warn('Error calculating dynamic limit:', error);\n      return 25; // Safe default\n    }\n  }\n\n  // Get user behavior score for dynamic rate limiting\n  async getUserBehaviorScore(userId) {\n    try {\n      if (!redisManager.isClientReady()) {\n        return 50; // Neutral score if Redis is not available\n      }\n\n      const behaviorKey = `behavior_score:${userId}`;\n      const score = await redisManager.getCache(behaviorKey);\n\n      if (!score) {\n        // Initialize behavior score for new users\n        await redisManager.setCache(behaviorKey, 50, 86400); // 24 hours\n        return 50;\n      }\n\n      return parseInt(score);\n    } catch (error) {\n      this.logger.error('Error getting user behavior score:', error);\n      return 50;\n    }\n  }\n\n  // Update user behavior score\n  async updateUserBehaviorScore(userId, action) {\n    try {\n      if (!redisManager.isClientReady()) {\n        return;\n      }\n\n      const behaviorKey = `behavior_score:${userId}`;\n      let currentScore = await this.getUserBehaviorScore(userId);\n\n      switch (action) {\n        case 'successful_request':\n          currentScore = Math.min(100, currentScore + 1);\n          break;\n        case 'failed_request':\n          currentScore = Math.max(0, currentScore - 5);\n          break;\n        case 'suspicious_activity':\n          currentScore = Math.max(0, currentScore - 15);\n          break;\n        case 'authentication_failure':\n          currentScore = Math.max(0, currentScore - 10);\n          break;\n        default:\n          break;\n      }\n\n      await redisManager.setCache(behaviorKey, currentScore, 86400); // 24 hours\n    } catch (error) {\n      this.logger.error('Error updating user behavior score:', error);\n    }\n  }\n\n  async registerUser(userData) {\n    try {\n      const { nickname, email, password } = userData;\n\n      // Check if user exists\n      const existingUser = await User.findOne({\n        $or: [{ nickname }, { email }]\n      });\n\n      if (existingUser) {\n        const conflictField = existingUser.nickname === nickname ? 'nickname' : 'email';\n        const errorMessage = conflictField === 'nickname' ? 'Nickname already taken' : 'Email already registered';\n        throw new Error(errorMessage);\n      }\n\n      // Create user\n      const user = new User({ nickname, email, password, role: 'member', status: 'online' });\n      await user.save();\n\n      this.logger.info(`User registered: ${user.nickname}`);\n      return user;\n    } catch (error) {\n      this.logger.error('Registration error:', error);\n      throw error;\n    }\n  }\n\n  async loginUser(identifier, password, captchaToken = null) {\n    try {\n      // Find user by nickname or email\n      const user = await User.findOne({\n        $or: [{ nickname: identifier }, { email: identifier }]\n      });\n\n      if (!user) {\n        // Log IP-based attempt for tracking\n        this.logger.warn('Login attempt with non-existent user', { identifier, ip: 'tracked' });\n        throw new Error('Invalid credentials');\n      }\n\n      // Check if account is locked\n      if (user.isAccountLocked()) {\n        const lockTimeRemaining = Math.ceil((user.accountLockedUntil - new Date()) / 1000 / 60);\n        throw new Error(`Account temporarily locked due to multiple failed attempts. Try again in ${lockTimeRemaining} minutes.`);\n      }\n\n      // Check if CAPTCHA is required\n      if (user.captchaRequired && !captchaToken) {\n        // For now, simulate CAPTCHA by requiring a specific token\n        // In production, integrate with Google reCAPTCHA or similar\n        throw new Error('CAPTCHA verification required due to previous failed attempts.');\n      }\n\n      // Compare password\n      const isPasswordValid = await user.comparePassword(password);\n\n      if (!isPasswordValid) {\n        // Increment failed attempts\n        await user.incFailedAttempts();\n\n        // Log security event\n        this.logger.warn('Failed login attempt', {\n          userId: user._id,\n          nickname: user.nickname,\n          attempts: user.failedLoginAttempts,\n          captchaRequired: user.captchaRequired,\n          lockedUntil: user.accountLockedUntil\n        });\n\n        throw new Error('Invalid credentials');\n      }\n\n      // Successful login - reset failed attempts\n      await user.resetFailedAttempts();\n\n      // Update user status to online\n      user.status = 'online';\n      await user.save();\n\n      this.logger.info(`User logged in successfully: ${user.nickname}`);\n      return user;\n    } catch (error) {\n      this.logger.error('Login error:', error);\n      throw error;\n    }\n  }\n\n  generateToken(user, sessionId, csrfToken) {\n    const token = jwt.sign(\n      {\n        userId: user._id,\n        nickname: user.nickname,\n        role: user.role,\n        csrfToken: csrfToken,\n        sessionId: sessionId\n      },\n      config.security.jwtSecret,\n      { expiresIn: '24h' }\n    );\n    return token;\n  }\n\n  generateCsrfToken() {\n    return crypto.randomBytes(32).toString('hex');\n  }\n\n  async logoutUser(userId) {\n    try {\n      await User.findByIdAndUpdate(userId, {\n        status: 'offline',\n        lastActive: new Date()\n      });\n      this.logger.info(`User logged out: ${userId}`);\n    } catch (error) {\n      this.logger.error('Logout error:', error);\n      throw error;\n    }\n  }\n\n  async getUserFromToken(token) {\n    try {\n      const decoded = jwt.verify(token, config.security.jwtSecret);\n      const user = await User.findById(decoded.userId);\n\n      if (!user) {\n        throw new Error('User not found');\n      }\n\n      return user;\n    } catch (error) {\n      this.logger.warn('Token verification failed:', error.message);\n      throw error;\n    }\n  }\n\n  async validateSession(session) {\n    try {\n      if (!session || !session.authenticated || !session.userId) {\n        return null;\n      }\n\n      const user = await User.findById(session.userId);\n      if (!user) {\n        return null;\n      }\n\n      return user;\n    } catch (error) {\n      this.logger.error('Session validation error:', error);\n      return null;\n    }\n  }\n\n  // Enable 2FA for user\n  async enable2FA(userId) {\n    try {\n      const user = await User.findById(userId);\n      if (!user) {\n        throw new Error('User not found');\n      }\n\n      const secret = await user.generate2FASecret();\n      const qrCodeUrl = `otpauth://totp/Chat-JS(${user.nickname})?secret=${secret.base32}&issuer=Chat-JS`;\n\n      return {\n        secret: secret.base32,\n        qrCodeUrl: qrCodeUrl,\n        backupCodes: user.backupCodes\n      };\n    } catch (error) {\n      this.logger.error('Enable 2FA error:', error);\n      throw error;\n    }\n  }\n\n  // Confirm 2FA setup\n  async confirm2FA(userId, code) {\n    try {\n      const user = await User.findById(userId);\n      if (!user || !user.twoFactorSecret) {\n        throw new Error('2FA not initialized');\n      }\n\n      const isValid = user.verify2FACode(code);\n      if (!isValid) {\n        throw new Error('Invalid 2FA code');\n      }\n\n      await user.enable2FA();\n      return { success: true, message: '2FA enabled successfully' };\n    } catch (error) {\n      this.logger.error('Confirm 2FA error:', error);\n      throw error;\n    }\n  }\n\n  // Disable 2FA for user\n  async disable2FA(userId, password) {\n    try {\n      const user = await User.findById(userId);\n      if (!user) {\n        throw new Error('User not found');\n      }\n\n      // Verify password before disabling\n      const isPasswordValid = await user.comparePassword(password);\n      if (!isPasswordValid) {\n        throw new Error('Invalid password');\n      }\n\n      await user.disable2FA();\n      return { success: true, message: '2FA disabled successfully' };\n    } catch (error) {\n      this.logger.error('Disable 2FA error:', error);\n      throw error;\n    }\n  }\n\n  // Verify 2FA code for login\n  async verify2FACode(userId, code) {\n    try {\n      const user = await User.findById(userId);\n      if (!user || !user.twoFactorEnabled) {\n        return { success: false, message: '2FA not enabled' };\n      }\n\n      const isValid = user.verify2FACode(code) || user.verify2FACode(code, true);\n      if (!isValid) {\n        throw new Error('Invalid 2FA code');\n      }\n\n      return { success: true, message: '2FA verified successfully' };\n    } catch (error) {\n      this.logger.error('Verify 2FA error:', error);\n      throw error;\n    }\n  }\n\n  // ***** AUTHENTICATION MIDDLEWARE METHODS *****\n\n  // Enhanced session authentication middleware with Redis support\n  async authenticateSession(req, res, next) {\n    try {\n      console.log('üîê Session authentication middleware called:', {\n        url: req.url,\n        method: req.method,\n        sessionId: req.sessionID,\n        sessionExists: !!req.session,\n        sessionData: req.session ? {\n          authenticated: req.session.authenticated,\n          userId: req.session.userId,\n          nickname: req.session.nickname,\n          role: req.session.role,\n          loginTime: req.session.loginTime,\n          csrfToken: req.session.csrfToken?.substring(0, 8) + '...'\n        } : null\n      });\n\n      let sessionData = null;\n\n      // First try to get session from Redis\n      if (this.redisManager.isClientReady() && req.sessionID) {\n        sessionData = await this.getSessionData(req.sessionID);\n      }\n\n      // Fallback to Express session if Redis session not found\n      if (!sessionData && req.session && req.session.authenticated) {\n        sessionData = {\n          authenticated: req.session.authenticated,\n          userId: req.session.userId,\n          nickname: req.session.nickname,\n          role: req.session.role,\n          loginTime: req.session.loginTime,\n          csrfToken: req.session.csrfToken,\n          userAgent: req.session.userAgent\n        };\n      }\n\n      // Check if session exists and has authenticated user\n      if (sessionData && sessionData.authenticated && sessionData.userId) {\n        console.log('üéØ Found authenticated session for userId:', sessionData.userId);\n        console.log('üîì Session fingerprint check:', {\n          sid: req.sessionID,\n          csrfToken: sessionData.csrfToken?.substring(0, 4) + '...',\n          userAgent: sessionData.userAgent?.substring(0, 20) + '...',\n          loginTime: sessionData.loginTime\n        });\n\n        const user = await User.findById(sessionData.userId);\n        if (user) {\n          console.log('‚úÖ Session user found in DB:', {\n            nickname: user.nickname,\n            id: user._id,\n            status: user.status,\n            sessionValid: true\n          });\n          req.sessionUser = user; // Store in req.sessionUser to avoid conflict with JWT req.user\n\n          // Update session last activity in Redis\n          if (this.redisManager.isClientReady()) {\n            sessionData.lastActivity = new Date().toISOString();\n            await this.setSessionData(req.sessionID, sessionData);\n          }\n\n          // Update Express session as well\n          if (req.session.csrfToken && req.session.userAgent) {\n            req.session.lastSessionCheck = new Date().toISOString();\n            console.log('üîê Session fingerprint verified and updated');\n          }\n        } else {\n          console.log('‚ö†Ô∏è Session user not found in DB, cleaning session:', sessionData.userId);\n          // Clean invalid session from Redis\n          if (this.redisManager.isClientReady()) {\n            await this.deleteSessionData(req.sessionID);\n          }\n          // Clean Express session\n          delete req.session.authenticated;\n          delete req.session.userId;\n          delete req.session.nickname;\n          delete req.session.role;\n        }\n      } else {\n        console.log('üîç No authenticated session found or session not initialized', {\n          sessionId: req.sessionID,\n          session: !!req.session,\n          authenticated: req.session?.authenticated,\n          userId: req.session?.userId,\n          redisSessionFound: !!sessionData\n        });\n        req.sessionUser = null; // Explicitly set to null when no session\n      }\n      next();\n    } catch (error) {\n      winston.warn('Session authentication error:', {\n        error: error.message,\n        sessionId: req.sessionID,\n        ip: req.ip\n      });\n      req.sessionUser = null; // Set to null on error\n      next();\n    }\n  }\n\n  // JWT authentication middleware (extracted from server.js)\n  async authenticateToken(req, res, next) {\n    try {\n      console.log('üîê JWT authentication middleware called:', { url: req.url, method: req.method });\n      const authHeader = req.headers['authorization'];\n      const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN\n\n      console.log('üîë Token extraction result:', { hasAuthHeader: !!authHeader, hasToken: !!token });\n\n      if (!token) {\n        console.log('‚ùå No token provided');\n        return res.status(401).json({\n          error: 'Access token required',\n          code: 'NO_TOKEN'\n        });\n      }\n\n      const decoded = jwt.verify(token, config.security.jwtSecret);\n      console.log('‚úÖ JWT decoded:', { userId: decoded.userId, nickname: decoded.nickname });\n      const user = await User.findById(decoded.userId);\n\n      if (!user) {\n        console.log('‚ùå User not found in DB for JWT userId:', decoded.userId);\n        return res.status(401).json({\n          error: 'User not found',\n          code: 'USER_NOT_FOUND'\n        });\n      }\n\n      req.user = user;\n      console.log('‚úÖ JWT authentication successful for user:', user.nickname, { id: user._id, status: user.status });\n      next();\n    } catch (error) {\n      winston.warn('JWT authentication failed:', {\n        error: error.message,\n        ip: req.ip\n      });\n\n      if (error.name === 'JsonWebTokenError') {\n        return res.status(401).json({\n          error: 'Invalid token format',\n          code: 'INVALID_TOKEN_FORMAT'\n        });\n      }\n\n      if (error.name === 'TokenExpiredError') {\n        return res.status(401).json({\n          error: 'Token has expired',\n          code: 'TOKEN_EXPIRED'\n        });\n      }\n\n      return res.status(401).json({\n        error: 'Token verification failed',\n        code: 'TOKEN_VERIFICATION_FAILED'\n      });\n    }\n  }\n\n  // Role-based access control middleware - Moderator required\n  async requireModerator(req, res, next) {\n    try {\n      if (!req.user) {\n        return res.status(401).json({\n          error: 'Authentication required',\n          code: 'AUTH_REQUIRED'\n        });\n      }\n\n      if (!req.user.hasModeratorPrivileges()) {\n        return res.status(403).json({\n          error: 'Moderator privileges required',\n          code: 'MODERATOR_REQUIRED'\n        });\n      }\n\n      next();\n    } catch (error) {\n      winston.error('Moderator check error:', error);\n      res.status(500).json({\n        error: 'Server error during authorization check',\n        code: 'AUTH_CHECK_ERROR'\n      });\n    }\n  }\n\n  // Role-based access control middleware - Admin required\n  async requireAdmin(req, res, next) {\n    try {\n      if (!req.user) {\n        return res.status(401).json({\n          error: 'Authentication required',\n          code: 'AUTH_REQUIRED'\n        });\n      }\n\n      if (!req.user.hasAdminPrivileges()) {\n        return res.status(403).json({\n          error: 'Administrator privileges required',\n          code: 'ADMIN_REQUIRED'\n        });\n      }\n\n      next();\n    } catch (error) {\n      winston.error('Admin check error:', error);\n      res.status(500).json({\n        error: 'Server error during authorization check',\n        code: 'AUTH_CHECK_ERROR'\n      });\n    }\n  }\n\n  // JWT token verification utility\n  async verifyJWTToken(token) {\n    try {\n      const decoded = jwt.verify(token, config.security.jwtSecret);\n      const user = await User.findById(decoded.userId);\n\n      if (!user) {\n        throw new Error('User not found');\n      }\n\n      return { valid: true, user, decoded };\n    } catch (error) {\n      return {\n        valid: false,\n        error: error.message,\n        user: null,\n        decoded: null\n      };\n    }\n  }\n\n  // ***** SESSION MANAGEMENT METHODS *****\n\n  // Create new user session with enhanced security features\n  async createSession(req, user, csrfToken) {\n    try {\n      console.log('üîè Creating and storing user session for user:', user.nickname);\n      console.log('üè∑Ô∏è Generating sessionId:', req.sessionId);\n\n      const sessionData = {\n        authenticated: true,\n        userId: user._id.toString(),\n        nickname: user.nickname,\n        role: user.role,\n        csrfToken: csrfToken,\n        loginTime: new Date().toISOString(),\n        userAgent: req.get('User-Agent'),\n        fingerprint: {\n          csrfTokenHash: crypto.createHash('sha256').update(csrfToken).digest('hex').substring(0, 16),\n          loginTime: new Date().toISOString()\n        }\n      };\n\n      // Store in Redis with proper TTL\n      if (this.redisManager.isClientReady()) {\n        await this.redisManager.setSession(req.sessionId, sessionData, 86400); // 24 hours\n      }\n\n      // Also store in Express session for backward compatibility\n      req.session.authenticated = true;\n      req.session.userId = user._id.toString();\n      req.session.nickname = user.nickname;\n      req.session.role = user.role;\n      req.session.csrfToken = csrfToken;\n      req.session.loginTime = sessionData.loginTime;\n      req.session.userAgent = sessionData.userAgent;\n\n      console.log('üîì Session fingerprint generated:', {\n        csrfTokenHash: crypto.createHash('sha256').update(csrfToken).digest('hex').substring(0, 8),\n        userAgentLength: req.session.userAgent?.length,\n        loginTime: req.session.loginTime\n      });\n\n      return {\n        authenticated: true,\n        id: req.sessionId,\n        expires: req.session.cookie.expires,\n        userAgent: req.session.userAgent,\n        fingerprint: sessionData.fingerprint\n      };\n    } catch (error) {\n      this.logger.error('Error creating user session:', error);\n      throw error;\n    }\n  }\n\n  // Destroy user session from both Redis and Express session\n  async destroySession(req) {\n    try {\n      console.log('üö™ Session logout request, sessionId:', req.sessionId);\n\n      // Check if there's an authenticated session\n      const hasSessionAuth = req.sessionUser || (req.session && req.session.authenticated);\n\n      if (hasSessionAuth) {\n        const sessionUserId = req.session && req.session.userId;\n\n        if (sessionUserId) {\n          const sessionUser = await User.findById(sessionUserId);\n          const nickname = sessionUser ? sessionUser.nickname : 'unknown';\n\n          console.log('‚úÖ Session logout: Destroying session for user:', nickname);\n\n          // Destroy from Redis\n          if (this.redisManager.isClientReady()) {\n            await this.redisManager.deleteSession(req.sessionId);\n          }\n\n          // Destroy Express session\n          await new Promise((resolve, reject) => {\n            req.session.destroy((err) => {\n              if (err) {\n                console.error('‚ùå Session destroy error:', err);\n                reject(err);\n              } else {\n                console.log('‚úÖ Session destroyed successfully');\n                resolve();\n              }\n            });\n          });\n\n          this.logger.info(`Session logged out: ${nickname}`, {\n            sessionId: req.sessionId,\n            ip: req.ip\n          });\n\n          return { success: true, message: 'Session logged out successfully' };\n        }\n      }\n\n      console.log('‚ö†Ô∏è Session logout: No authenticated session to destroy');\n      return { success: true, message: 'No active session to log out' };\n    } catch (error) {\n      this.logger.error('Session logout error:', error);\n      throw error;\n    }\n  }\n\n  // Get session from Redis with fallback to Express session\n  async getSessionData(sessionId) {\n    try {\n      if (this.redisManager.isClientReady()) {\n        return await this.redisManager.getSession(sessionId);\n      }\n      return null;\n    } catch (error) {\n      this.logger.warn('Error retrieving session from Redis:', error);\n      return null;\n    }\n  }\n\n  // Store session data in Redis\n  async setSessionData(sessionId, data, ttl = 86400) {\n    try {\n      if (this.redisManager.isClientReady()) {\n        await this.redisManager.setSession(sessionId, data, ttl);\n      }\n    } catch (error) {\n      this.logger.error('Error storing session in Redis:', error);\n    }\n  }\n\n  // Delete session from Redis\n  async deleteSessionData(sessionId) {\n    try {\n      if (this.redisManager.isClientReady()) {\n        await this.redisManager.deleteSession(sessionId);\n      }\n    } catch (error) {\n      this.logger.error('Error deleting session from Redis:', error);\n    }\n  }\n\n  // Validate and enhance session\n  async validateAndEnhanceSession(req, res, next) {\n    try {\n      // Basic authentication middleware already handled session validation\n      // This method can be used to add additional session validation logic\n      if (req.sessionUser) {\n        // Update session last activity\n        req.session.lastActivity = new Date().toISOString();\n        await new Promise((resolve) => {\n          req.session.save((err) => {\n            if (!err) {\n              console.log('üìù Session last activity updated');\n            }\n            resolve();\n          });\n        });\n      }\n\n      next();\n    } catch (error) {\n      winston.warn('Session validation error:', error);\n      next();\n    }\n  }\n\n  // Handle login with session creation (extracted from server.js)\n  async handleLoginWithSession(identifier, password, req, res, _connectionManager = null) {\n    try {\n      console.log('üîë Incoming login request:', { identifier: identifier, hasPassword: !!password, ip: req.ip });\n\n      // Validate input\n      if (!identifier || !password) {\n        return res.status(400).json({ errors: [{ msg: 'Identifier and password are required' }] });\n      }\n\n      // Authenticate user\n      const user = await this.loginUser(identifier, password);\n\n      // Handle banned users\n      if (user.banned) {\n        return res.status(403).json({\n          error: 'Account is banned',\n          reason: user.banReason,\n          expires: user.banExpires\n        });\n      }\n\n      // Generate CSRF token\n      const csrfToken = this.generateCsrfToken();\n\n      // Create session\n      const sessionInfo = await this.createSession(req, user, csrfToken);\n\n      // Generate JWT token\n      console.log('üîè Generating JWT token for user:', user.nickname);\n      const token = this.generateToken(user, req.sessionId, csrfToken);\n\n      console.log('‚úÖ JWT token generated successfully');\n\n      this.logger.info(`User logged in: ${user.nickname}`);\n\n      console.log('üì§ Sending login response');\n\n      // Clean user data for response\n      const responseUser = {\n        id: user._id,\n        nickname: user.nickname,\n        email: user.email,\n        role: user.role,\n        status: user.status\n      };\n\n      return res.json({\n        token, // JWT for API calls and WebSockets\n        user: responseUser,\n        session: sessionInfo\n      });\n    } catch (error) {\n      this.logger.error('Login error:', error);\n\n      // Handle specific error types\n      if (error.message.includes('Invalid credentials')) {\n        return res.status(400).json({ error: 'Invalid credentials' });\n      }\n\n      if (error.message.includes('Account temporarily locked')) {\n        return res.status(429).json({\n          error: error.message,\n          code: 'ACCOUNT_LOCKED'\n        });\n      }\n\n      return res.status(500).json({ error: 'Server error during login' });\n    }\n  }\n\n  // Handle registration with session creation (extracted from server.js)\n  async handleRegistrationWithSession(userData, req, res) {\n    try {\n      const { nickname, email, password } = userData;\n\n      // Validate input\n      if (!nickname || !email || !password) {\n        return res.status(400).json({ errors: [{ msg: 'Nickname, email, and password are required' }] });\n      }\n\n      // Register user\n      const user = await this.registerUser(userData);\n\n      // Generate CSRF token\n      const csrfToken = this.generateCsrfToken();\n\n      // Create session\n      const sessionInfo = await this.createSession(req, user, csrfToken);\n\n      console.log('JWT_SECRET present:', !!config.security.jwtSecret);\n      const token = this.generateToken(user, req.sessionId, csrfToken);\n\n      console.log('JWT token generated successfully');\n      this.logger.info(`User registered: ${user.nickname}`);\n\n      return res.status(201).json({\n        token, // JWT for API calls and WebSockets\n        user: {\n          id: user._id,\n          nickname: user.nickname,\n          email: user.email,\n          role: user.role,\n          status: user.status\n        },\n        session: sessionInfo\n      });\n    } catch (error) {\n      this.logger.error('Registration error:', error);\n\n      if (error.message.includes('already taken') || error.message.includes('already registered')) {\n        return res.status(409).json({ error: error.message });\n      }\n\n      return res.status(500).json({ error: 'Server error during registration' });\n    }\n  }\n}\n\nmodule.exports = new AuthService();"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}