6f2a49924738d524729db142a576be45
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
// Import crypto for generating secure tokens
const crypto = require('crypto');
const session = require('express-session');
const RedisStore = require('connect-redis');
const {
  redisManager
} = require('./src/config/redis');
const {
  connectDB,
  closeDB
} = require('./db/connection');
const emailService = require('./services/emailService');
const {
  performanceMonitor,
  apiPerformanceMiddleware,
  getHealthCheck,
  getPerformanceDashboard
} = require('./src/middleware/performanceMonitor');
const {
  externalServiceBreaker,
  circuitBreakerMiddleware,
  asyncOptimize,
  protectEmail,
  getCircuitBreakerStatuses
} = require('./src/middleware/circuitBreaker');

// Import AuthService for extracted authentication logic
const authService = require('./src/services/authService');

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);

// Rate limiters are now handled by AuthService
const io = socketIo(server, {
  cors: {
    origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"],
    credentials: true
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling'],
  // Connection settings for better reliability
  connectTimeout: 20000,
  // 20 seconds
  pingTimeout: 5000,
  // 5 seconds for ping
  pingInterval: 10000,
  // 10 seconds between pings
  upgradeTimeout: 10000,
  allowUpgrades: true,
  cookieHttpOnly: true,
  cookieSameSite: 'lax'
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('🔌 Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '20mb',
  strict: false
})); // Increased limit and disabled strict parsing for better error tolerance
app.use(express.urlencoded({
  extended: true,
  limit: '20mb'
})); // Handle form data with increased limit

// Session configuration with Redis store for enhanced performance
let sessionMiddleware;
try {
  const redisClient = redisManager.getClient();
  if (redisClient && redisManager.isClientReady()) {
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      store: new RedisStore({
        client: redisClient,
        prefix: 'sess:',
        ttl: 86400,
        // 24 hours
        disableTouch: false // Allow automatic touch
      }),
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
    console.log('✅ Redis session store initialized successfully');
  } else {
    // Fallback to memory store if Redis is not available
    console.log('⚠️ Redis not available, using memory-based session store');
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
  }
} catch (error) {
  console.log('❌ Redis session store initialization failed, using memory store:', error.message);
  sessionMiddleware = session({
    secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
    resave: false,
    saveUninitialized: false,
    cookie: {
      secure: process.env.NODE_ENV === 'production',
      httpOnly: true,
      maxAge: 24 * 60 * 60 * 1000,
      sameSite: 'lax'
    },
    name: 'chatSession',
    rolling: false,
    unset: 'destroy'
  });
}
app.use(sessionMiddleware);

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// Session authentication middleware now uses AuthService

// JWT authentication middleware now uses AuthService

// Role-based access control middleware now uses AuthService

// Error handling middleware

// Use AuthService session authentication middleware
app.use(authService.authenticateSession.bind(authService));

// General rate limiting (applied to all HTTP requests) - using AuthService
app.use(authService.generalRateLimiter);

// Performance monitoring middleware
app.use(apiPerformanceMiddleware());

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Administrative endpoints - require moderator privileges
console.log('🔧 Administrative API endpoints registered at startup');

// GET /api/admin/users - List all users with moderation info
app.get('/api/admin/users', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 50;
    const skip = (page - 1) * limit;
    const users = await User.find({}).select('-password -resetPasswordToken -resetPasswordExpires -moderationToken -moderationTokenExpires').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const total = await User.countDocuments();
    logger.info(`Admin user list requested by ${req.user.nickname}`, {
      adminId: req.user._id,
      page,
      limit,
      total
    });
    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    logger.error('Error fetching users for admin:', error);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// POST /api/admin/users/:userId/ban - Ban a user
app.post('/api/admin/users/:userId/ban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
}) // Max 1 year in seconds
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent banning yourself
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot ban yourself'
      });
    }

    // Prevent non-admin from banning admin
    if (user.role === 'admin' && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Cannot ban administrator'
      });
    }
    await user.ban(reason, duration, req.user._id);
    logger.info(`User ${user.nickname} banned by ${req.user.nickname}`, {
      bannedUserId: userId,
      bannedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been banned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: true,
        banReason: reason,
        banExpires: user.banExpires
      }
    });
  } catch (error) {
    logger.error('Error banning user:', error);
    res.status(500).json({
      error: 'Failed to ban user'
    });
  }
});

// POST /api/admin/users/:userId/unban - Unban a user
app.post('/api/admin/users/:userId/unban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.banned) {
      return res.status(400).json({
        error: 'User is not banned'
      });
    }
    await user.unban();
    logger.info(`User ${user.nickname} unbanned by ${req.user.nickname}`, {
      unbannedUserId: userId,
      unbannedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unbanned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: false
      }
    });
  } catch (error) {
    logger.error('Error unbanning user:', error);
    res.status(500).json({
      error: 'Failed to unban user'
    });
  }
});

// POST /api/admin/users/:userId/warn - Issue warning to user
app.post('/api/admin/users/:userId/warn', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.warn(reason, req.user._id, duration);
    await user.save();
    logger.info(`Warning issued to user ${user.nickname} by ${req.user.nickname}`, {
      warnedUserId: userId,
      warnedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `Warning issued to user ${user.nickname}`,
      warning: {
        reason,
        issuedBy: req.user.nickname,
        issuedAt: new Date(),
        expires: duration ? new Date(Date.now() + duration) : null
      },
      user: {
        id: user._id,
        nickname: user.nickname,
        warningsCount: user.getActiveWarningsCount()
      }
    });
  } catch (error) {
    logger.error('Error warning user:', error);
    res.status(500).json({
      error: 'Failed to warn user'
    });
  }
});

// POST /api/admin/users/:userId/role - Change user role
app.post('/api/admin/users/:userId/role', authService.authenticateToken.bind(authService), authService.requireAdmin.bind(authService), apiRateLimiter, [body('role').isIn(['member', 'moderator', 'admin'])], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      role: newRole
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent modifying your own role in potentially problematic ways
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot modify your own role'
      });
    }

    // Prevent non-admin from promoting to admin or demoting admin
    if ((newRole === 'admin' || user.role === 'admin') && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Only administrators can manage admin roles'
      });
    }
    const oldRole = user.role;
    user.role = newRole;
    await user.save();
    logger.info(`User ${user.nickname} role changed from ${oldRole} to ${newRole} by ${req.user.nickname}`, {
      changedUserId: userId,
      changedById: req.user._id,
      oldRole,
      newRole
    });
    res.json({
      message: `User ${user.nickname} role changed to ${newRole}`,
      user: {
        id: user._id,
        nickname: user.nickname,
        role: newRole
      }
    });
  } catch (error) {
    logger.error('Error changing user role:', error);
    res.status(500).json({
      error: 'Failed to change user role'
    });
  }
});

// POST /api/admin/users/:userId/mute - Mute user
app.post('/api/admin/users/:userId/mute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('duration').isInt({
  min: 60,
  max: 86400
}) // 1 minute to 24 hours
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.mute(duration);
    logger.info(`User ${user.nickname} muted by ${req.user.nickname}`, {
      mutedUserId: userId,
      mutedById: req.user._id,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been muted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: user.muteExpires
      }
    });
  } catch (error) {
    logger.error('Error muting user:', error);
    res.status(500).json({
      error: 'Failed to mute user'
    });
  }
});

// POST /api/admin/users/:userId/unmute - Unmute user
app.post('/api/admin/users/:userId/unmute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.isMuted()) {
      return res.status(400).json({
        error: 'User is not muted'
      });
    }
    await user.unmute();
    logger.info(`User ${user.nickname} unmuted by ${req.user.nickname}`, {
      unmutedUserId: userId,
      unmutedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unmuted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: null
      }
    });
  } catch (error) {
    logger.error('Error unmuting user:', error);
    res.status(500).json({
      error: 'Failed to unmute user'
    });
  }
});

/**
 * @swagger
 * /api/users:
 *   get:
 *     tags:
 *       - Users
 *     summary: Get list of all registered users
 *     description: Retrieves a list of all users with their roles and online status
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of users successfully retrieved
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 type: object
 *                 properties:
 *                   id:
 *                     type: string
 *                     description: User's unique identifier
 *                   nickname:
 *                     type: string
 *                     description: User's display name
 *                   role:
 *                     type: string
 *                     enum: [admin, moderator, member]
 *                     description: User's role level
 *                   status:
 *                     type: string
 *                     enum: [online, offline]
 *                     description: User's online status
 *                   createdAt:
 *                     type: string
 *                     format: date-time
 *                     description: User registration date
 *                   lastActive:
 *                     type: string
 *                     format: date-time
 *                     description: Last activity timestamp
 *             example:
 *               - id: "507f1f77bcf86cd799439011"
 *                 nickname: "john_doe"
 *                 role: "member"
 *                 status: "online"
 *                 createdAt: "2024-09-07T10:30:00Z"
 *                 lastActive: "2024-09-07T22:15:00Z"
 *       401:
 *         description: Authentication required
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       500:
 *         description: Server error
 */
console.log('🔧 GET /api/users route registered at startup');
app.get('/api/users', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const users = await User.find({}).select('_id nickname role status createdAt lastActive').sort({
      nickname: 1
    });
    logger.info(`Users list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      totalUsers: users.length
    });
    console.log('📤 Returning users data:', users.length);
    res.json(users);
  } catch (error) {
    logger.error('Error fetching users:', error);
    console.error('❌ Error in GET /api/users:', error.message);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('🔄 Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('⚠️ Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('❌ Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Performance monitoring endpoints
app.get('/api/health/detailed', getHealthCheck);
app.get('/api/performance/dashboard', (req, res) => {
  // Check if user is admin/moderator
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  getPerformanceDashboard(req, res);
});

// Performance alerts endpoint
app.get('/api/performance/alerts', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }

  // Run alerts check
  performanceMonitor.checkAlerts();
  res.json({
    timestamp: new Date().toISOString(),
    alerts_checked: true,
    message: 'Performance alerts checked - see server logs for any alerts'
  });
});

// Circuit breaker status endpoint
app.get('/api/circuit-breaker/status', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  const status = getCircuitBreakerStatuses();
  res.json({
    timestamp: new Date().toISOString(),
    services: status
  });
});

// Resource usage optimization endpoint
app.get('/api/optimization/status', async (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  try {
    const optimization = {
      timestamp: new Date().toISOString(),
      async_processes: process._getActiveHandles().length,
      memory_usage: process.memoryUsage(),
      connection_metrics: getCachedStats ? await getCachedStats() : {},
      performance_metrics: performanceMonitor.getDetailedStats ? performanceMonitor.getDetailedStats() : {},
      circuit_breakers: getCircuitBreakerStatuses()
    };
    res.json(optimization);
  } catch (error) {
    logger.error('Error getting optimization status:', error);
    res.status(500).json({
      error: 'Failed to get optimization status',
      message: error.message
    });
  }
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`🔍 Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('🔧 POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  // Use AuthService for login handling
  await authService.handleLoginWithSession(req.body.identifier, req.body.password, req, res);
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authService.authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  // Use AuthService for registration handling
  await authService.handleRegistrationWithSession(req.body, req, res);
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('🔧 GET /api/channels route registered at startup');
app.get('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  console.log('🚀 GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('📤 Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('❌ Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/logout route registered at startup');
app.post('/api/logout', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Logout request from user:', req.user.nickname, {
      userId: req.user._id
    });

    // Disconnect all Socket.IO connections for this user
    const sockets = onlineUsers;
    let disconnectedCount = 0;
    for (const [socketId, socketData] of sockets.entries()) {
      if (socketData.userId === req.user._id.toString()) {
        const socket = io.sockets.sockets.get(socketId);
        if (socket) {
          socket.disconnect();
          disconnectedCount++;
        }
      }
    }

    // Update user status to offline
    await User.findByIdAndUpdate(req.user._id, {
      status: 'offline',
      lastActive: new Date()
    });
    console.log(`✅ User ${req.user.nickname} logged out successfully, ${disconnectedCount} connections disconnected`);
    logger.info(`User logged out: ${req.user.nickname}`, {
      userId: req.user._id,
      disconnectedSockets: disconnectedCount
    });
    res.json({
      success: true,
      message: 'Logged out successfully',
      disconnectedCount
    });
  } catch (error) {
    logger.error('Logout error:', error);
    res.status(500).json({
      error: 'Server error during logout'
    });
  }
});

/**
 * Session logout endpoint - destroys session
 * This complements JWT logout to handle session-based authentication
 */
app.post('/api/logout_session', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Session logout request, sessionId:', req.sessionId);

    // Check if there's an authenticated session or JWT user
    const hasJwtAuth = !!req.user; // From JWT middleware
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    console.log('🤔 Session logout check:', {
      hasJwtAuth,
      hasSessionAuth,
      sessionUserId,
      sessionId: req.sessionId
    });
    if (hasSessionAuth) {
      const sessionUser = sessionUserId ? await User.findById(sessionUserId) : null;
      const nickname = sessionUser ? sessionUser.nickname : 'unknown';
      console.log('✅ Session logout: Destroying session for user:', nickname);

      // Disconnect Socket.IO connections for this session user
      if (sessionUserId) {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === sessionUserId) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
      }

      // Destroy the session
      await new Promise((resolve, reject) => {
        req.session.destroy(err => {
          if (err) {
            console.error('❌ Session destroy error:', err);
            reject(err);
          } else {
            console.log('✅ Session destroyed successfully');
            resolve();
          }
        });
      });
      logger.info(`Session logged out: ${nickname}`, {
        sessionId: req.sessionId,
        ip: req.ip
      });
      res.json({
        success: true,
        message: 'Session logged out successfully',
        type: 'session_logout',
        sessionDestroyed: true
      });
    } else {
      console.log('⚠️ Session logout: No authenticated session to destroy');
      res.json({
        success: true,
        message: 'No active session to log out',
        type: 'session_logout',
        sessionDestroyed: false
      });
    }
  } catch (error) {
    logger.error('Session logout error:', error);
    res.status(500).json({
      error: 'Server error during session logout',
      code: 'SESSION_LOGOUT_ERROR'
    });
  }
});

// Hybrid logout endpoint - handles both JWT and session logout
app.post('/api/logout_complete', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Complete logout request (JWT + Session), sessionId:', req.sessionId);
    const hasJwtAuth = !!req.user;
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    let jwtLogoutResult = null;
    let sessionLogoutResult = null;

    // Handle JWT logout if JWT is provided
    if (hasJwtAuth) {
      try {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === req.user._id.toString()) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        await User.findByIdAndUpdate(req.user._id, {
          status: 'offline',
          lastActive: new Date()
        });
        jwtLogoutResult = {
          success: true,
          disconnectedCount
        };
      } catch (jwtError) {
        jwtLogoutResult = {
          success: false,
          error: jwtError.message
        };
      }
    }

    // Handle session logout if session exists
    if (hasSessionAuth) {
      try {
        if (sessionUserId) {
          const sessionUser = await User.findById(sessionUserId);
          console.log('✅ Session logout: Destroying session for user:', sessionUser ? sessionUser.nickname : 'unknown');

          // Disconnect Socket.IO connections for this session user
          const sockets = onlineUsers;
          let disconnectedCount = 0;
          for (const [socketId, socketData] of sockets.entries()) {
            if (socketData.userId === sessionUserId) {
              const socket = io.sockets.sockets.get(socketId);
              if (socket) {
                socket.disconnect();
                disconnectedCount++;
              }
            }
          }
          console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
        }

        // Destroy the session
        await new Promise((resolve, reject) => {
          req.session.destroy(err => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
        sessionLogoutResult = {
          success: true,
          sessionDestroyed: true
        };
      } catch (sessionError) {
        sessionLogoutResult = {
          success: false,
          error: sessionError.message
        };
      }
    }
    const overallSuccess = (!jwtLogoutResult || jwtLogoutResult.success) && (!sessionLogoutResult || sessionLogoutResult.success);
    res.json({
      success: overallSuccess,
      message: 'Complete logout processed',
      type: 'complete_logout',
      jwt: jwtLogoutResult,
      session: sessionLogoutResult
    });
  } catch (error) {
    logger.error('Complete logout error:', error);
    res.status(500).json({
      error: 'Server error during complete logout',
      code: 'COMPLETE_LOGOUT_ERROR'
    });
  }
});

//  404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('❌ Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

// Improved Socket.IO session middleware with proper res object handling
io.use((socket, next) => {
  // Create a more complete mock res object if missing
  if (!socket.request.res) {
    socket.request.res = {
      setHeader: () => {},
      getHeader: () => {},
      writeHead: () => {},
      end: () => {},
      headersSent: false,
      statusCode: 200
    };
  }

  // Apply session middleware with error handling
  sessionMiddleware(socket.request, socket.request.res, err => {
    if (err) {
      console.error('Session middleware error for Socket.IO:', err);
      return next(err);
    }
    next();
  });
});

// Socket.IO authentication middleware
io.use(async (socket, next) => {
  const {
    csrfToken,
    sessionId
  } = socket.handshake.auth;
  let session = socket.request.session;

  // console.log('🔑 Socket authentication attempt with session and CSRF fingerprint check');
  // console.log('🔍 Raw socket auth data:', {
  //   csrfTokenProvided: !!csrfToken,
  //   sessionIdProvided: !!sessionId,
  //   sessionIdLength: sessionId?.length,
  //   sessionIdFromAuth: sessionId
  // });

  // If sessionId is provided in auth, try to recover the session from MongoDB store
  if (sessionId && (!session || !session.authenticated)) {
    // console.log('🔄 Attempting session recovery from MongoDB store using sessionId:', sessionId);

    try {
      // Load session from MongoDB store using the sessionId from JWT auth
      const MongoStoreInstance = sessionMiddleware.store;
      if (MongoStoreInstance && typeof MongoStoreInstance.get === 'function') {
        const sessionData = await new Promise((resolve, reject) => {
          MongoStoreInstance.get(sessionId, (err, data) => {
            if (err) reject(err);else resolve(data);
          });
        });

        // console.log('🔄 MongoDB session lookup result:', {
        //   sessionFound: !!sessionData,
        //   sessionAuthenticated: sessionData?.authenticated,
        //   sessionUserId: sessionData?.userId,
        //   sessionCsrfToken: !!sessionData?.csrfToken,
        //   csrfTokenMatches: csrfToken && sessionData?.csrfToken && csrfToken === sessionData.csrfToken
        // });

        if (sessionData && sessionData.authenticated) {
          // Replace socket.request.session with loaded session
          socket.request.session = sessionData;
          session = sessionData;
          console.log('✅ Socket session recovered from MongoDB');
        } else {
          console.log('⚠️ Socket session not found in MongoDB store');
        }
      }
    } catch (error) {
      console.error('❌ Error loading SOCKET session from MongoDB:', error.message);
    }
  }
  console.log('🔓 Fingerprint verification:', {
    sid: socket.request.sessionId,
    providedCsrfToken: csrfToken?.substring(0, 8) + '...',
    sessionCsrfToken: session?.csrfToken?.substring(0, 8) + '...',
    userAgent: socket.request.session?.userAgent?.substring(0, 20) + '...',
    loginTime: session?.loginTime,
    registrationTime: session?.registrationTime
  });

  // Validate session exists and has authentication
  if (!session || !session.authenticated || !session.userId) {
    console.log('❌ Socket authentication failed: No authenticated session found');
    console.log('📋 Session details:', {
      sessionId: socket.request.sessionId,
      session: !!session,
      authenticated: session?.authenticated,
      userId: session?.userId
    });
    return next(new Error('Session authentication required'));
  }

  // Validate CSRF token for additional security (must match session's unique CSRF token)
  if (!csrfToken || !session.csrfToken || csrfToken !== session.csrfToken) {
    console.log('❌ Socket authentication failed: Invalid CSRF token fingerprint');
    console.log('🔒 Fingerprint mismatch details:', {
      provided: csrfToken?.substring(0, 8) + '...',
      expected: session.csrfToken?.substring(0, 8) + '...',
      match: csrfToken === session.csrfToken
    });
    return next(new Error('CSRF validation failed'));
  }
  console.log('✅ Socket fingerprint verification successful');
  try {
    // Verify user exists in database
    const user = await User.findById(session.userId);
    if (!user) {
      console.log('❌ Socket authentication failed: User not found in DB');
      return next(new Error('User not found in session'));
    }

    // Handle user status update based on connection count
    const userId = session.userId;
    const connectionCount = userConnections.get(userId) || 0;
    const newConnectionCount = connectionCount + 1;
    userConnections.set(userId, newConnectionCount);

    // Check if user is banned
    if (user.isBanned()) {
      console.log('❌ Socket authentication failed: User is banned', {
        userId: userId,
        nickname: user.nickname,
        banReason: user.banReason,
        banExpires: user.banExpires
      });
      socket.emit('banned', {
        reason: user.banReason || 'You have been banned from the server',
        expires: user.banExpires
      });
      return next(new Error('User is banned'));
    }

    // Check if user is muted and enforce mute in chat
    const isMuted = user.isMuted();
    console.log('🔇 User mute status checked:', {
      nickname: user.nickname,
      isMuted,
      muteExpires: user.muteExpires
    });

    // Update user status with connection count tracking
    const updateResult = await User.findOneAndUpdate({
      _id: userId
    }, {
      $set: {
        status: newConnectionCount > 0 ? 'online' : 'offline',
        lastActive: new Date()
      }
    }, {
      new: true,
      runValidators: true
    });
    if (updateResult) {
      console.log(`🔄 Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
      logger.info(`User status updated to online via socket auth`, {
        userId: userId,
        nickname: user.nickname,
        connections: newConnectionCount,
        socketId: socket.id,
        timestamp: new Date()
      });
    }

    // Override local user object with updated data
    user.status = updateResult ? updateResult.status : 'online';
    user.lastActive = updateResult ? updateResult.lastActive : new Date();

    // Set socket properties for authenticated user
    socket.userId = session.userId;
    socket.nickname = session.nickname;
    socket.role = session.role || 'member';
    console.log(`🎉 Socket authenticated via session: ${socket.nickname} (userId: ${socket.userId})`);
    console.log('Socket authentication successful');
    return next();
  } catch (error) {
    console.error('❌ Socket authentication error:', error.message);
    logger.error(`Socket auth failed: ${error.message}`, {
      socketId: socket.id,
      sessionId: session?.id,
      ip: socket.handshake.address
    });
    return next(new Error('Socket authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`🧹 Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`🔄 User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('🚀 Socket connection established');
  console.log(`👤 User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`📊 Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Enhanced heartbeat mechanism with reconnection logic
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      const now = Date.now();
      user.lastHeartbeat = now;
      console.log(`💓 Heartbeat received from user ${socket.nickname} at ${new Date(now).toISOString()}`);
    } else {
      logger.warn(`Heartbeat received from unknown socket: ${socket.id}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };

  // Send heartbeat to client periodically
  const heartbeatInterval = setInterval(() => {
    if (socket.connected) {
      socket.emit('heartbeat_request');
    }
  }, 15000); // Send heartbeat every 15 seconds

  // Clear interval on disconnect
  socket.on('disconnect', () => {
    clearInterval(heartbeatInterval);
    // ... rest of disconnect logic
  });

  // Utility function for retrying database operations
  const retryDatabaseOperation = async (operation, retries = 3) => {
    for (let i = 0; i <= retries; i++) {
      try {
        return await operation();
      } catch (error) {
        if (i === retries) throw error;
        logger.warn(`Database operation failed, retry ${i + 1}/${retries}:`, error.message);
        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1))); // Exponential backoff
      }
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      await retryDatabaseOperation(async () => {
        // Verify channel exists
        const channel = await Channel.findOne({
          id: room
        });
        if (!channel) {
          logger.warn('Join room failed: Channel not found', {
            userId: socket.userId,
            nickname: socket.nickname,
            room
          });
          socket.emit('error', {
            message: `Channel '${room}' not found`,
            code: 'CHANNEL_NOT_FOUND',
            room,
            timestamp: new Date().toISOString()
          });
          throw new Error('Channel not found');
        }

        // Leave previous room
        if (socket.room) {
          socket.leave(socket.room);
          onlineUsers.set(socket.id, {
            ...onlineUsers.get(socket.id),
            room: null
          });

          // Update online users in previous room
          const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
            nickname: u.nickname,
            role: u.role
          }));
          io.to(socket.room).emit('online_users', previousRoomUsers);
        }
        socket.room = room;
        socket.join(socket.room);

        // Update user tracking
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: socket.room
        });
        logger.info(`User ${socket.nickname} joined room ${socket.room}`);

        // Send system message about joining
        const joinMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} joined the channel.`,
          type: 'system'
        });
        await joinMessage.save();
        io.to(socket.room).emit('message', {
          author: joinMessage.author,
          channel: joinMessage.channel,
          text: joinMessage.text,
          type: joinMessage.type,
          timestamp: joinMessage.timestamp
        });

        // Send online users in current room
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);

        // Send message history
        const history = await Message.find({
          channel: socket.room,
          $or: [{
            type: 'public'
          }, {
            type: 'system'
          }, {
            author: socket.nickname
          }, {
            target: socket.nickname
          }]
        }).sort({
          timestamp: -1
        }).limit(100).sort({
          timestamp: 1
        }); // Resort for chronological order

        socket.emit('history', history.map(msg => ({
          author: msg.author,
          room: msg.channel,
          text: msg.text,
          type: msg.type,
          target: msg.target,
          timestamp: msg.timestamp
        })));
      });
    } catch (error) {
      logger.error('Error in join_room after retries:', error);
      socket.emit('error', {
        message: 'Failed to join room after multiple attempts',
        code: 'JOIN_ROOM_FAILED',
        timestamp: new Date().toISOString()
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;

    // Check if user is muted
    const currentUser = await User.findById(socket.userId);
    if (currentUser && currentUser.isMuted()) {
      socket.emit('error', {
        message: 'You are muted and cannot send messages',
        code: 'USER_MUTED',
        muteExpires: currentUser.muteExpires
      });
      return;
    }
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`🔄 User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`✅ User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Optimize critical server functions
const optimizedInitializeDatabase = asyncOptimize(initializeServer, {
  concurrency: 1,
  timeout: 60000,
  slowThreshold: 10000
});

// Start the server with async optimization
optimizedInitializeDatabase().catch(err => {
  logger.error('Unhandled error during server startup:', err);
  process.exit(1);
});

// Memory cleanup on long-running operations
setInterval(() => {
  if (global.gc) {
    global.gc();
    logger.debug('Manual garbage collection triggered');
  }
}, 300000); // Every 5 minutes

// Handle uncaught exceptions with circuit breaker protection
process.on('uncaughtException', error => {
  logger.error('Uncaught Exception:', error);
  // Don't exit immediately, let circuit breaker handle recovery
  setTimeout(() => {
    if (externalServiceBreaker.databaseBreaker.failureCount > 10) {
      logger.error('Multiple uncaught exceptions detected, forcing graceful shutdown');
      process.exit(1);
    }
  }, 1000);
});

// Handle unhandled promise rejections
process.on('unhandledRejection', (reason, promise) => {
  logger.error('Unhandled Rejection at:', promise, 'reason:', reason);
  // Don't exit, just log and let circuit breaker handle
});

// Graceful shutdown with resource cleanup
process.on('SIGTERM', async () => {
  logger.info('SIGTERM received, starting graceful shutdown...');
  try {
    // Close external service connections
    const circuitStatus = getCircuitBreakerStatuses();
    logger.info('Circuit breaker final status:', circuitStatus);

    // Clean up any remaining resources
    await closeDB();

    // Log final metrics
    const finalMetrics = performanceMonitor.getDetailedStats();
    logger.info('Final performance metrics:', {
      uptime: finalMetrics.uptime,
      totalRequests: finalMetrics.endpointStats ? Object.values(finalMetrics.endpointStats).reduce((acc, endpoint) => acc + (endpoint.count || 0), 0) : 0,
      memoryPeak: finalMetrics.memory?.heapTotal || 0
    });
    io.close(() => {
      logger.info('Server graceful shutdown complete');
      process.exit(0);
    });
  } catch (error) {
    logger.error('Error during graceful shutdown:', error);
    process.exit(1);
  }
});

// Periodic health self-assessment
setInterval(() => {
  const healthData = performanceMonitor.getHealthData();

  // Self-monitor critical metrics
  if (healthData.requests.averageResponseTime > 5000) {
    logger.warn('🚨 Self-monitor: High average response time detected', {
      avgTime: `${healthData.requests.averageResponseTime}ms`,
      threshold: '5000ms',
      timestamp: new Date().toISOString()
    });
  }
  if (healthData.memory.usagePercent > 0.9) {
    logger.warn('🚨 Self-monitor: High memory usage detected', {
      usage: healthData.memory.percentage,
      threshold: '90%',
      timestamp: new Date().toISOString()
    });

    // Trigger proactive cleanup
    if (global.gc) {
      global.gc();
      logger.info('🧹 Proactive garbage collection triggered');
    }
  }

  // Check circuit breaker status
  const circuitStatus = getCircuitBreakerStatuses();
  if (circuitStatus.database?.state === 'open') {
    logger.warn('🚨 Self-monitor: Database circuit breaker is OPEN', circuitStatus.database);
  }
  if (circuitStatus.redis?.state === 'open') {
    logger.warn('🚨 Self-monitor: Redis circuit breaker is OPEN', circuitStatus.redis);
  }
}, 60000); // Check every minute
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNyeXB0byIsInNlc3Npb24iLCJSZWRpc1N0b3JlIiwicmVkaXNNYW5hZ2VyIiwiY29ubmVjdERCIiwiY2xvc2VEQiIsImVtYWlsU2VydmljZSIsInBlcmZvcm1hbmNlTW9uaXRvciIsImFwaVBlcmZvcm1hbmNlTWlkZGxld2FyZSIsImdldEhlYWx0aENoZWNrIiwiZ2V0UGVyZm9ybWFuY2VEYXNoYm9hcmQiLCJleHRlcm5hbFNlcnZpY2VCcmVha2VyIiwiY2lyY3VpdEJyZWFrZXJNaWRkbGV3YXJlIiwiYXN5bmNPcHRpbWl6ZSIsInByb3RlY3RFbWFpbCIsImdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMiLCJhdXRoU2VydmljZSIsIlVzZXIiLCJNZXNzYWdlIiwiQ2hhbm5lbCIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImVycm9ycyIsInN0YWNrIiwianNvbiIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJDb25zb2xlIiwiY29sb3JpemUiLCJzaW1wbGUiLCJhcHAiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsIm9yaWdpbiIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIkFMTE9XRURfT1JJR0lOUyIsInNwbGl0IiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJjb25uZWN0VGltZW91dCIsInBpbmdUaW1lb3V0IiwicGluZ0ludGVydmFsIiwidXBncmFkZVRpbWVvdXQiLCJhbGxvd1VwZ3JhZGVzIiwiY29va2llSHR0cE9ubHkiLCJjb29raWVTYW1lU2l0ZSIsImVuZ2luZSIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJtZXNzYWdlIiwiZXJyb3IiLCJodHRwU3RhdHVzIiwic3RhdHVzIiwiaGVhZGVycyIsInJlcSIsInVzZSIsImxpbWl0Iiwic3RyaWN0IiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2Vzc2lvbk1pZGRsZXdhcmUiLCJyZWRpc0NsaWVudCIsImdldENsaWVudCIsImlzQ2xpZW50UmVhZHkiLCJzZWNyZXQiLCJTRVNTSU9OX1NFQ1JFVCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic3RvcmUiLCJjbGllbnQiLCJwcmVmaXgiLCJ0dGwiLCJkaXNhYmxlVG91Y2giLCJjb29raWUiLCJzZWN1cmUiLCJodHRwT25seSIsIm1heEFnZSIsInNhbWVTaXRlIiwibmFtZSIsInJvbGxpbmciLCJ1bnNldCIsImVycm9ySGFuZGxlciIsInJlcyIsIm5leHQiLCJ1cmwiLCJtZXRob2QiLCJpcCIsInVzZXJBZ2VudCIsImdldCIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsImUiLCJmaWVsZCIsInBhdGgiLCJ2YWx1ZSIsImRldGFpbHMiLCJrZXlzIiwia2V5VmFsdWUiLCJyZXF1ZXN0SWQiLCJpZCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImR1cmF0aW9uIiwiaW5mbyIsInN0YXR1c0NvZGUiLCJ1c2VyIiwibmlja25hbWUiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwiYXV0aGVudGljYXRlU2Vzc2lvbiIsImJpbmQiLCJnZW5lcmFsUmF0ZUxpbWl0ZXIiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJkaXJlY3RpdmVzIiwiZGVmYXVsdFNyYyIsInN0eWxlU3JjIiwiZm9udFNyYyIsImltZ1NyYyIsInNjcmlwdFNyYyIsImNvbm5lY3RTcmMiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5Iiwic3dhZ2dlck9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsInRpdGxlIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiY29udGFjdCIsInNlcnZlcnMiLCJjb21wb25lbnRzIiwic2NoZW1hcyIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZW1haWwiLCJyb2xlIiwiZW51bSIsImRlZmF1bHQiLCJjcmVhdGVkQXQiLCJsYXN0QWN0aXZlIiwicmVxdWlyZWQiLCJjcmVhdGVkQnkiLCJwb3NpdGlvbiIsIlJlZ2lzdGVyUmVxdWVzdCIsInBhc3N3b3JkIiwiTG9naW5SZXF1ZXN0IiwiaWRlbnRpZmllciIsIkF1dGhSZXNwb25zZSIsInRva2VuIiwiJHJlZiIsIkNoYW5uZWxSZXF1ZXN0IiwiRXJyb3JSZXNwb25zZSIsIml0ZW1zIiwibXNnIiwicGFyYW0iLCJsb2NhdGlvbiIsInNlY3VyaXR5U2NoZW1lcyIsImJlYXJlckF1dGgiLCJzY2hlbWUiLCJiZWFyZXJGb3JtYXQiLCJzZWN1cml0eSIsImFwaXMiLCJzd2FnZ2VyU3BlYyIsInJlbW92ZUhlYWRlciIsInNlcnZlIiwic2V0dXAiLCJhdXRoZW50aWNhdGVUb2tlbiIsInJlcXVpcmVNb2RlcmF0b3IiLCJhcGlSYXRlTGltaXRlciIsInBhZ2UiLCJwYXJzZUludCIsInF1ZXJ5Iiwic2tpcCIsInVzZXJzIiwiZmluZCIsInNlbGVjdCIsInNvcnQiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYWRtaW5JZCIsIl9pZCIsInBhZ2luYXRpb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwicG9zdCIsImlzTGVuZ3RoIiwibWluIiwibWF4IiwidHJpbSIsIm9wdGlvbmFsIiwiaXNJbnQiLCJpc0VtcHR5IiwiYXJyYXkiLCJ1c2VySWQiLCJwYXJhbXMiLCJyZWFzb24iLCJmaW5kQnlJZCIsInRvU3RyaW5nIiwiYmFuIiwiYmFubmVkVXNlcklkIiwiYmFubmVkQnlJZCIsImJhbm5lZCIsImJhblJlYXNvbiIsImJhbkV4cGlyZXMiLCJ1bmJhbiIsInVuYmFubmVkVXNlcklkIiwidW5iYW5uZWRCeUlkIiwid2FybiIsInNhdmUiLCJ3YXJuZWRVc2VySWQiLCJ3YXJuZWRCeUlkIiwid2FybmluZyIsImlzc3VlZEJ5IiwiaXNzdWVkQXQiLCJleHBpcmVzIiwid2FybmluZ3NDb3VudCIsImdldEFjdGl2ZVdhcm5pbmdzQ291bnQiLCJyZXF1aXJlQWRtaW4iLCJpc0luIiwibmV3Um9sZSIsIm9sZFJvbGUiLCJjaGFuZ2VkVXNlcklkIiwiY2hhbmdlZEJ5SWQiLCJtdXRlIiwibXV0ZWRVc2VySWQiLCJtdXRlZEJ5SWQiLCJtdXRlRXhwaXJlcyIsImlzTXV0ZWQiLCJ1bm11dGUiLCJ1bm11dGVkVXNlcklkIiwidW5tdXRlZEJ5SWQiLCJ0b3RhbFVzZXJzIiwibGVuZ3RoIiwic2V0SGVhZGVyIiwic2VuZCIsImF1dGhMaW1pdGVyU3RvcmUiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJyZXNldEFsbCIsInN1Y2Nlc3MiLCJ0b0lTT1N0cmluZyIsInVwdGltZSIsImNoZWNrQWxlcnRzIiwiYWxlcnRzX2NoZWNrZWQiLCJzZXJ2aWNlcyIsIm9wdGltaXphdGlvbiIsImFzeW5jX3Byb2Nlc3NlcyIsIl9nZXRBY3RpdmVIYW5kbGVzIiwibWVtb3J5X3VzYWdlIiwibWVtb3J5VXNhZ2UiLCJjb25uZWN0aW9uX21ldHJpY3MiLCJnZXRDYWNoZWRTdGF0cyIsInBlcmZvcm1hbmNlX21ldHJpY3MiLCJnZXREZXRhaWxlZFN0YXRzIiwiY2lyY3VpdF9icmVha2VycyIsImhhbmRsZUxvZ2luV2l0aFNlc3Npb24iLCJlc2NhcGUiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJoYW5kbGVSZWdpc3RyYXRpb25XaXRoU2Vzc2lvbiIsImF1dGhvcml6YXRpb24iLCJjaGFubmVscyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJzb2NrZXRzIiwib25saW5lVXNlcnMiLCJkaXNjb25uZWN0ZWRDb3VudCIsInNvY2tldElkIiwic29ja2V0RGF0YSIsImVudHJpZXMiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJkaXNjb25uZWN0ZWRTb2NrZXRzIiwic2Vzc2lvbklkIiwiaGFzSnd0QXV0aCIsImhhc1Nlc3Npb25BdXRoIiwic2Vzc2lvblVzZXIiLCJhdXRoZW50aWNhdGVkIiwic2Vzc2lvblVzZXJJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGVzdHJveSIsInNlc3Npb25EZXN0cm95ZWQiLCJqd3RMb2dvdXRSZXN1bHQiLCJzZXNzaW9uTG9nb3V0UmVzdWx0Iiwiand0RXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJvdmVyYWxsU3VjY2VzcyIsIk1hcCIsInVzZXJDb25uZWN0aW9ucyIsInZvaWNlQ2hhbm5lbHMiLCJyZXF1ZXN0IiwiZ2V0SGVhZGVyIiwid3JpdGVIZWFkIiwiZW5kIiwiaGVhZGVyc1NlbnQiLCJjc3JmVG9rZW4iLCJoYW5kc2hha2UiLCJhdXRoIiwiTW9uZ29TdG9yZUluc3RhbmNlIiwic2Vzc2lvbkRhdGEiLCJkYXRhIiwic2lkIiwicHJvdmlkZWRDc3JmVG9rZW4iLCJzdWJzdHJpbmciLCJzZXNzaW9uQ3NyZlRva2VuIiwibG9naW5UaW1lIiwicmVnaXN0cmF0aW9uVGltZSIsIkVycm9yIiwicHJvdmlkZWQiLCJleHBlY3RlZCIsIm1hdGNoIiwiY29ubmVjdGlvbkNvdW50IiwibmV3Q29ubmVjdGlvbkNvdW50Iiwic2V0IiwiaXNCYW5uZWQiLCJlbWl0IiwidXBkYXRlUmVzdWx0IiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRzZXQiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiY29ubmVjdGlvbnMiLCJhZGRyZXNzIiwiY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMiLCJ0aW1lb3V0IiwibGFzdEhlYXJ0YmVhdCIsImNvbm5lY3Rpb25zTGVmdCIsImNhdGNoIiwiZGVsZXRlIiwic2V0SW50ZXJ2YWwiLCJyb29tIiwic2l6ZSIsInVwZGF0ZUhlYXJ0YmVhdCIsImhlYXJ0YmVhdEludGVydmFsIiwiY29ubmVjdGVkIiwiY2xlYXJJbnRlcnZhbCIsInJldHJ5RGF0YWJhc2VPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJyZXRyaWVzIiwiaSIsInNldFRpbWVvdXQiLCJmaW5kT25lIiwibGVhdmUiLCJwcmV2aW91c1Jvb21Vc2VycyIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsInUiLCJ0byIsImpvaW4iLCJqb2luTWVzc2FnZSIsImF1dGhvciIsInRleHQiLCJyb29tVXNlcnMiLCJoaXN0b3J5IiwiJG9yIiwidGFyZ2V0IiwiY3VycmVudFVzZXIiLCJtZXNzYWdlRGF0YSIsImRlYnVnIiwidHJpbW1lZFRleHQiLCJ0YXJnZXROaWNrbmFtZSIsInNlbmRlclJvb20iLCJzZW5kZXJTb2NrZXRJZCIsInRhcmdldFVzZXIiLCJ0YXJnZXRGb3VuZCIsInRhcmdldFJvb20iLCJvbmxpbmVVc2Vyc0luUm9vbSIsIm9ubGluZVVzZXJzSW5TZW5kZXJSb29tIiwiYXZhaWxhYmxlVXNlcnMiLCJ0YXJnZXRTb2NrZXRJZCIsInNlbmRlciIsIm1lc3NhZ2VJZCIsIm9ubGluZVVzZXJzQ291bnQiLCJtZXNzYWdlTGVuZ3RoIiwic3BlYWtpbmciLCJoYXMiLCJjaGFubmVsUGVlcnMiLCJwZWVyQ29ubmVjdGlvbiIsInN0cmVhbSIsInZvaWNlQ2hhbm5lbCIsIm9mZmVyIiwiZnJvbU5pY2tuYW1lIiwiYW5zd2VyIiwiY2FuZGlkYXRlIiwiY3VycmVudENvdW50IiwibmV3Q291bnQiLCJsZWF2ZU1lc3NhZ2UiLCJyZW1haW5pbmdDb25uZWN0aW9ucyIsImluaXRpYWxpemVTZXJ2ZXIiLCJkZWZhdWx0Q2hhbm5lbHMiLCJjaGFubmVsRGF0YSIsInVwc2VydCIsIlBPUlQiLCJsaXN0ZW4iLCJleGl0IiwiY2xvc2UiLCJvcHRpbWl6ZWRJbml0aWFsaXplRGF0YWJhc2UiLCJjb25jdXJyZW5jeSIsInNsb3dUaHJlc2hvbGQiLCJnbG9iYWwiLCJnYyIsImRhdGFiYXNlQnJlYWtlciIsImZhaWx1cmVDb3VudCIsInByb21pc2UiLCJjaXJjdWl0U3RhdHVzIiwiZmluYWxNZXRyaWNzIiwidG90YWxSZXF1ZXN0cyIsImVuZHBvaW50U3RhdHMiLCJyZWR1Y2UiLCJhY2MiLCJlbmRwb2ludCIsImNvdW50IiwibWVtb3J5UGVhayIsIm1lbW9yeSIsImhlYXBUb3RhbCIsImhlYWx0aERhdGEiLCJnZXRIZWFsdGhEYXRhIiwicmVxdWVzdHMiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwiYXZnVGltZSIsInRocmVzaG9sZCIsInVzYWdlUGVyY2VudCIsInVzYWdlIiwicGVyY2VudGFnZSIsImRhdGFiYXNlIiwic3RhdGUiLCJyZWRpcyJdLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xuY29uc3Qgc29ja2V0SW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IHdpbnN0b24gPSByZXF1aXJlKCd3aW5zdG9uJyk7XG5jb25zdCBzd2FnZ2VySnNkb2MgPSByZXF1aXJlKCdzd2FnZ2VyLWpzZG9jJyk7XG5jb25zdCBzd2FnZ2VyVWkgPSByZXF1aXJlKCdzd2FnZ2VyLXVpLWV4cHJlc3MnKTtcbmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpO1xuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7XG5jb25zdCB7IGJvZHksIHZhbGlkYXRpb25SZXN1bHQgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7XG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG4vLyBJbXBvcnQgY3J5cHRvIGZvciBnZW5lcmF0aW5nIHNlY3VyZSB0b2tlbnNcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuY29uc3Qgc2Vzc2lvbiA9IHJlcXVpcmUoJ2V4cHJlc3Mtc2Vzc2lvbicpO1xuY29uc3QgUmVkaXNTdG9yZSA9IHJlcXVpcmUoJ2Nvbm5lY3QtcmVkaXMnKTtcbmNvbnN0IHsgcmVkaXNNYW5hZ2VyIH0gPSByZXF1aXJlKCcuL3NyYy9jb25maWcvcmVkaXMnKTtcbmNvbnN0IHsgY29ubmVjdERCLCBjbG9zZURCIH0gPSByZXF1aXJlKCcuL2RiL2Nvbm5lY3Rpb24nKTtcbmNvbnN0IGVtYWlsU2VydmljZSA9IHJlcXVpcmUoJy4vc2VydmljZXMvZW1haWxTZXJ2aWNlJyk7XG5jb25zdCB7XG4gIHBlcmZvcm1hbmNlTW9uaXRvcixcbiAgYXBpUGVyZm9ybWFuY2VNaWRkbGV3YXJlLFxuICBnZXRIZWFsdGhDaGVjayxcbiAgZ2V0UGVyZm9ybWFuY2VEYXNoYm9hcmRcbn0gPSByZXF1aXJlKCcuL3NyYy9taWRkbGV3YXJlL3BlcmZvcm1hbmNlTW9uaXRvcicpO1xuY29uc3Qge1xuICBleHRlcm5hbFNlcnZpY2VCcmVha2VyLFxuICBjaXJjdWl0QnJlYWtlck1pZGRsZXdhcmUsXG4gIGFzeW5jT3B0aW1pemUsXG4gIHByb3RlY3RFbWFpbCxcbiAgZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlc1xufSA9IHJlcXVpcmUoJy4vc3JjL21pZGRsZXdhcmUvY2lyY3VpdEJyZWFrZXInKTtcblxuLy8gSW1wb3J0IEF1dGhTZXJ2aWNlIGZvciBleHRyYWN0ZWQgYXV0aGVudGljYXRpb24gbG9naWNcbmNvbnN0IGF1dGhTZXJ2aWNlID0gcmVxdWlyZSgnLi9zcmMvc2VydmljZXMvYXV0aFNlcnZpY2UnKTtcblxuLy8gSW1wb3J0IG1vZGVsc1xuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IE1lc3NhZ2UgPSByZXF1aXJlKCcuL21vZGVscy9NZXNzYWdlJyk7XG5jb25zdCBDaGFubmVsID0gcmVxdWlyZSgnLi9tb2RlbHMvQ2hhbm5lbCcpO1xuXG4vLyBMb2dnZXIgc2V0dXBcbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6ICdpbmZvJyxcbiAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgIHdpbnN0b24uZm9ybWF0LnRpbWVzdGFtcCgpLFxuICAgIHdpbnN0b24uZm9ybWF0LmVycm9ycyh7IHN0YWNrOiB0cnVlIH0pLFxuICAgIHdpbnN0b24uZm9ybWF0Lmpzb24oKVxuICApLFxuICBkZWZhdWx0TWV0YTogeyBzZXJ2aWNlOiAnY2hhdC1zZXJ2ZXInIH0sXG4gIHRyYW5zcG9ydHM6IFtcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3Mvc2VydmVyLmxvZycgfSksXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuY29sb3JpemUoKSxcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuc2ltcGxlKClcbiAgICAgIClcbiAgICB9KVxuICBdXG59KTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcblxuLy8gUmF0ZSBsaW1pdGVycyBhcmUgbm93IGhhbmRsZWQgYnkgQXV0aFNlcnZpY2VcbmNvbnN0IGlvID0gc29ja2V0SW8oc2VydmVyLCB7XG4gIGNvcnM6IHtcbiAgICBvcmlnaW46IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IGZhbHNlXG4gICAgICA6IFtcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwM1wiLCBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiXSxcbiAgICBtZXRob2RzOiBbXCJHRVRcIiwgXCJQT1NUXCJdLFxuICAgIGFsbG93ZWRIZWFkZXJzOiBbXCJhdXRob3JpemF0aW9uXCIsIFwiY29udGVudC10eXBlXCJdLFxuICAgIGNyZWRlbnRpYWxzOiB0cnVlXG4gIH0sXG4gIC8vIEVuc3VyZSBib3RoIHRyYW5zcG9ydHMgYXJlIHN1cHBvcnRlZFxuICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sXG4gIC8vIENvbm5lY3Rpb24gc2V0dGluZ3MgZm9yIGJldHRlciByZWxpYWJpbGl0eVxuICBjb25uZWN0VGltZW91dDogMjAwMDAsIC8vIDIwIHNlY29uZHNcbiAgcGluZ1RpbWVvdXQ6IDUwMDAsIC8vIDUgc2Vjb25kcyBmb3IgcGluZ1xuICBwaW5nSW50ZXJ2YWw6IDEwMDAwLCAvLyAxMCBzZWNvbmRzIGJldHdlZW4gcGluZ3NcbiAgdXBncmFkZVRpbWVvdXQ6IDEwMDAwLFxuICBhbGxvd1VwZ3JhZGVzOiB0cnVlLFxuICBjb29raWVIdHRwT25seTogdHJ1ZSxcbiAgY29va2llU2FtZVNpdGU6ICdsYXgnXG59KTtcblxuLy8gTG9nIHNvY2tldCBjb25uZWN0aW9uIGVycm9ycyBmb3IgZGVidWdnaW5nXG5pby5lbmdpbmUub24oJ2Nvbm5lY3Rpb25fZXJyb3InLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5SMIFNvY2tldCBlbmdpbmUgY29ubmVjdGlvbiBlcnJvcjonLCBlcnIuY29kZSwgZXJyLm1lc3NhZ2UpO1xuICBsb2dnZXIuZXJyb3IoJ1NvY2tldCBjb25uZWN0aW9uIGVycm9yOicsIHtcbiAgICBjb2RlOiBlcnIuY29kZSxcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBodHRwU3RhdHVzOiBlcnIuc3RhdHVzLFxuICAgIGhlYWRlcnM6IGVyci5yZXE/LmhlYWRlcnNcbiAgfSk7XG59KTtcblxuLy8gQ09SUyBjb25maWd1cmF0aW9uXG5hcHAudXNlKGNvcnMoe1xuICBvcmlnaW46IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICA/IHByb2Nlc3MuZW52LkFMTE9XRURfT1JJR0lOUz8uc3BsaXQoJywnKSB8fCBmYWxzZVxuICAgIDogdHJ1ZSxcbiAgY3JlZGVudGlhbHM6IHRydWVcbn0pKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oeyBsaW1pdDogJzIwbWInLCBzdHJpY3Q6IGZhbHNlIH0pKTsgLy8gSW5jcmVhc2VkIGxpbWl0IGFuZCBkaXNhYmxlZCBzdHJpY3QgcGFyc2luZyBmb3IgYmV0dGVyIGVycm9yIHRvbGVyYW5jZVxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSwgbGltaXQ6ICcyMG1iJyB9KSk7IC8vIEhhbmRsZSBmb3JtIGRhdGEgd2l0aCBpbmNyZWFzZWQgbGltaXRcblxuLy8gU2Vzc2lvbiBjb25maWd1cmF0aW9uIHdpdGggUmVkaXMgc3RvcmUgZm9yIGVuaGFuY2VkIHBlcmZvcm1hbmNlXG5sZXQgc2Vzc2lvbk1pZGRsZXdhcmU7XG50cnkge1xuICBjb25zdCByZWRpc0NsaWVudCA9IHJlZGlzTWFuYWdlci5nZXRDbGllbnQoKTtcbiAgaWYgKHJlZGlzQ2xpZW50ICYmIHJlZGlzTWFuYWdlci5pc0NsaWVudFJlYWR5KCkpIHtcbiAgICBzZXNzaW9uTWlkZGxld2FyZSA9IHNlc3Npb24oe1xuICAgICAgc2VjcmV0OiBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCAneW91ci12ZXJ5LWxvbmctc2VjdXJlLXNlY3JldC1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24nLFxuICAgICAgcmVzYXZlOiBmYWxzZSxcbiAgICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgIHN0b3JlOiBuZXcgUmVkaXNTdG9yZSh7XG4gICAgICAgIGNsaWVudDogcmVkaXNDbGllbnQsXG4gICAgICAgIHByZWZpeDogJ3Nlc3M6JyxcbiAgICAgICAgdHRsOiA4NjQwMCwgLy8gMjQgaG91cnNcbiAgICAgICAgZGlzYWJsZVRvdWNoOiBmYWxzZSAvLyBBbGxvdyBhdXRvbWF0aWMgdG91Y2hcbiAgICAgIH0pLFxuICAgICAgY29va2llOiB7XG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgc2FtZVNpdGU6ICdsYXgnXG4gICAgICB9LFxuICAgICAgbmFtZTogJ2NoYXRTZXNzaW9uJyxcbiAgICAgIHJvbGxpbmc6IGZhbHNlLFxuICAgICAgdW5zZXQ6ICdkZXN0cm95J1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCfinIUgUmVkaXMgc2Vzc2lvbiBzdG9yZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjayB0byBtZW1vcnkgc3RvcmUgaWYgUmVkaXMgaXMgbm90IGF2YWlsYWJsZVxuICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUmVkaXMgbm90IGF2YWlsYWJsZSwgdXNpbmcgbWVtb3J5LWJhc2VkIHNlc3Npb24gc3RvcmUnKTtcbiAgICBzZXNzaW9uTWlkZGxld2FyZSA9IHNlc3Npb24oe1xuICAgICAgc2VjcmV0OiBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCAneW91ci12ZXJ5LWxvbmctc2VjdXJlLXNlY3JldC1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24nLFxuICAgICAgcmVzYXZlOiBmYWxzZSxcbiAgICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgIGNvb2tpZToge1xuICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgIHNhbWVTaXRlOiAnbGF4J1xuICAgICAgfSxcbiAgICAgIG5hbWU6ICdjaGF0U2Vzc2lvbicsXG4gICAgICByb2xsaW5nOiBmYWxzZSxcbiAgICAgIHVuc2V0OiAnZGVzdHJveSdcbiAgICB9KTtcbiAgfVxufSBjYXRjaCAoZXJyb3IpIHtcbiAgY29uc29sZS5sb2coJ+KdjCBSZWRpcyBzZXNzaW9uIHN0b3JlIGluaXRpYWxpemF0aW9uIGZhaWxlZCwgdXNpbmcgbWVtb3J5IHN0b3JlOicsIGVycm9yLm1lc3NhZ2UpO1xuICBzZXNzaW9uTWlkZGxld2FyZSA9IHNlc3Npb24oe1xuICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgfHwgJ3lvdXItdmVyeS1sb25nLXNlY3VyZS1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJyxcbiAgICByZXNhdmU6IGZhbHNlLFxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgICBjb29raWU6IHtcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICAgc2FtZVNpdGU6ICdsYXgnXG4gICAgfSxcbiAgICBuYW1lOiAnY2hhdFNlc3Npb24nLFxuICAgIHJvbGxpbmc6IGZhbHNlLFxuICAgIHVuc2V0OiAnZGVzdHJveSdcbiAgfSk7XG59XG5cbmFwcC51c2Uoc2Vzc2lvbk1pZGRsZXdhcmUpO1xuXG4vLyBFcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXG5jb25zdCBlcnJvckhhbmRsZXIgPSAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvcjonLCB7XG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgc3RhY2s6IGVyci5zdGFjayxcbiAgICB1cmw6IHJlcS51cmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGlwOiByZXEuaXAsXG4gICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JylcbiAgfSk7XG5cbiAgLy8gTW9uZ29vc2UgdmFsaWRhdGlvbiBlcnJvcnNcbiAgaWYgKGVyci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJykge1xuICAgIGNvbnN0IGVycm9ycyA9IE9iamVjdC52YWx1ZXMoZXJyLmVycm9ycykubWFwKGUgPT4gKHtcbiAgICAgIGZpZWxkOiBlLnBhdGgsXG4gICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICB2YWx1ZTogZS52YWx1ZVxuICAgIH0pKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuanNvbih7XG4gICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgIGRldGFpbHM6IGVycm9ycyxcbiAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJ1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTW9uZ29vc2UgZHVwbGljYXRlIGtleSBlcnJvclxuICBpZiAoZXJyLmNvZGUgPT09IDExMDAwKSB7XG4gICAgY29uc3QgZmllbGQgPSBPYmplY3Qua2V5cyhlcnIua2V5VmFsdWUpWzBdO1xuICAgIGNvbnN0IHZhbHVlID0gZXJyLmtleVZhbHVlW2ZpZWxkXTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgZXJyb3I6IGAke2ZpZWxkfSAnJHt2YWx1ZX0nIGFscmVhZHkgZXhpc3RzYCxcbiAgICAgIGNvZGU6ICdEVVBMSUNBVEVfRVJST1InXG4gICAgfSk7XG4gIH1cblxuICAvLyBKV1QgZXJyb3JzXG4gIGlmIChlcnIubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBlcnJvcjogJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbicsXG4gICAgICBjb2RlOiAnSU5WQUxJRF9UT0tFTidcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChlcnIubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBlcnJvcjogJ1Rva2VuIGhhcyBleHBpcmVkJyxcbiAgICAgIGNvZGU6ICdUT0tFTl9FWFBJUkVEJ1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRGVmYXVsdCBzZXJ2ZXIgZXJyb3JcbiAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICBjb2RlOiAnSU5URVJOQUxfRVJST1InLFxuICAgIHJlcXVlc3RJZDogcmVxLmlkIHx8ICd1bmtub3duJ1xuICB9KTtcbn07XG5cbi8vIFJlcXVlc3QgbG9nZ2luZyBtaWRkbGV3YXJlXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG5cbiAgcmVzLm9uKCdmaW5pc2gnLCAoKSA9PiB7XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgbG9nZ2VyLmluZm8oYCR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfSAtICR7cmVzLnN0YXR1c0NvZGV9ICgke2R1cmF0aW9ufW1zKWAsIHtcbiAgICAgIGlwOiByZXEuaXAsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICAgIHVzZXI6IHJlcS51c2VyPy5uaWNrbmFtZSB8fCAnYW5vbnltb3VzJyxcbiAgICAgIGJvZHk6IHJlcS5tZXRob2QgIT09ICdHRVQnID8gSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0pO1xuXG4gIG5leHQoKTtcbn0pO1xuXG4vLyBTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgbm93IHVzZXMgQXV0aFNlcnZpY2VcblxuLy8gSldUIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgbm93IHVzZXMgQXV0aFNlcnZpY2VcblxuLy8gUm9sZS1iYXNlZCBhY2Nlc3MgY29udHJvbCBtaWRkbGV3YXJlIG5vdyB1c2VzIEF1dGhTZXJ2aWNlXG5cbi8vIEVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcblxuLy8gVXNlIEF1dGhTZXJ2aWNlIHNlc3Npb24gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuYXBwLnVzZShhdXRoU2VydmljZS5hdXRoZW50aWNhdGVTZXNzaW9uLmJpbmQoYXV0aFNlcnZpY2UpKTtcblxuLy8gR2VuZXJhbCByYXRlIGxpbWl0aW5nIChhcHBsaWVkIHRvIGFsbCBIVFRQIHJlcXVlc3RzKSAtIHVzaW5nIEF1dGhTZXJ2aWNlXG5hcHAudXNlKGF1dGhTZXJ2aWNlLmdlbmVyYWxSYXRlTGltaXRlcik7XG5cbi8vIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgbWlkZGxld2FyZVxuYXBwLnVzZShhcGlQZXJmb3JtYW5jZU1pZGRsZXdhcmUoKSk7XG5cbi8vIEhlbG1ldCBzZWN1cml0eSBoZWFkZXJzXG5hcHAudXNlKFxuICBoZWxtZXQoe1xuICAgIGNvbnRlbnRTZWN1cml0eVBvbGljeToge1xuICAgICAgZGlyZWN0aXZlczoge1xuICAgICAgICBkZWZhdWx0U3JjOiBbXCInc2VsZidcIl0sXG4gICAgICAgIHN0eWxlU3JjOiBbXCInc2VsZidcIiwgXCIndW5zYWZlLWlubGluZSdcIiwgXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tXCJdLFxuICAgICAgICBmb250U3JjOiBbXCInc2VsZidcIiwgXCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCJdLFxuICAgICAgICBpbWdTcmM6IFtcIidzZWxmJ1wiLCBcImRhdGE6XCJdLFxuICAgICAgICBzY3JpcHRTcmM6IFtcIidzZWxmJ1wiLCBcIid1bnNhZmUtaW5saW5lJ1wiXSxcbiAgICAgICAgY29ubmVjdFNyYzogW1wiJ3NlbGYnXCJdXG4gICAgICB9XG4gICAgfSxcbiAgICBjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5OiBmYWxzZVxuICB9KVxuKTtcblxuLy8gU3dhZ2dlciBjb25maWd1cmF0aW9uXG5jb25zdCBzd2FnZ2VyT3B0aW9ucyA9IHtcbiAgZGVmaW5pdGlvbjoge1xuICAgIG9wZW5hcGk6ICczLjAuMCcsXG4gICAgaW5mbzoge1xuICAgICAgdGl0bGU6ICdDaGF0LUpTIEFQSScsXG4gICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZGVzY3JpcHRpb246ICdSRVNUIEFQSSBmb3IgQ2hhdC1KUyBhcHBsaWNhdGlvbiB3aXRoIHJlYWwtdGltZSBtZXNzYWdpbmcgYW5kIHZvaWNlIGNoYW5uZWxzJyxcbiAgICAgIGNvbnRhY3Q6IHtcbiAgICAgICAgbmFtZTogJ0NoYXQtSlMgU3VwcG9ydCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHNlcnZlcnM6IFtcbiAgICAgIHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAxJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdEZXZlbG9wbWVudCBzZXJ2ZXInXG4gICAgICB9XG4gICAgXSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICBzY2hlbWFzOiB7XG4gICAgICAgIFVzZXI6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHVuaXF1ZSBpZGVudGlmaWVyJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgbmlja25hbWUnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDMsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZW1haWwnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgZW1haWwgYWRkcmVzcydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByb2xlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ2FkbWluJywgJ21lbWJlciddLFxuICAgICAgICAgICAgICBkZWZhdWx0OiAnbWVtYmVyJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHJvbGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgY3JlYXRpb24gdGltZXN0YW1wJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ29ubGluZScsICdvZmZsaW5lJ10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBvbmxpbmUgc3RhdHVzJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmlja25hbWUnLCAnZW1haWwnLCAncGFzc3dvcmQnLCAncm9sZSddXG4gICAgICAgIH0sXG4gICAgICAgIENoYW5uZWw6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHVuaXF1ZSBpZGVudGlmaWVyIChhdXRvLWdlbmVyYXRlZCBmcm9tIG5hbWUpJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkaXNwbGF5IG5hbWUnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDEsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogMTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWyd0ZXh0JywgJ3ZvaWNlJ10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB0eXBlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZWRCeToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdG9yIG5pY2tuYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGlzcGxheSBwb3NpdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2lkJywgJ25hbWUnLCAndHlwZScsICdjcmVhdGVkQnknXVxuICAgICAgICB9LFxuICAgICAgICBSZWdpc3RlclJlcXVlc3Q6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICByZXF1aXJlZDogWyduaWNrbmFtZScsICdlbWFpbCcsICdwYXNzd29yZCddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDMsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVW5pcXVlIHVzZXJuYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdlbWFpbCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWQgZW1haWwgYWRkcmVzcydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiA2LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgcGFzc3dvcmQnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBMb2dpblJlcXVlc3Q6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICByZXF1aXJlZDogWydpZGVudGlmaWVyJywgJ3Bhc3N3b3JkJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWRlbnRpZmllcjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VybmFtZSBvciBlbWFpbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHBhc3N3b3JkJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgQXV0aFJlc3BvbnNlOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSldUIGFjY2VzcyB0b2tlbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgQ2hhbm5lbFJlcXVlc3Q6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICByZXF1aXJlZDogWyduYW1lJywgJ3R5cGUnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDEsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogMTAwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGlzcGxheSBuYW1lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsndGV4dCcsICd2b2ljZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdHlwZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MDAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3B0aW9uYWwgY2hhbm5lbCBkZXNjcmlwdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIEVycm9yUmVzcG9uc2U6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFcnJvciBtZXNzYWdlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yczoge1xuICAgICAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIG1zZzogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgcGFyYW06IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGlvbiBlcnJvcnMgYXJyYXknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2VjdXJpdHlTY2hlbWVzOiB7XG4gICAgICAgIGJlYXJlckF1dGg6IHtcbiAgICAgICAgICB0eXBlOiAnaHR0cCcsXG4gICAgICAgICAgc2NoZW1lOiAnYmVhcmVyJyxcbiAgICAgICAgICBiZWFyZXJGb3JtYXQ6ICdKV1QnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNlY3VyaXR5OiBbXG4gICAgICB7XG4gICAgICAgIGJlYXJlckF1dGg6IFtdXG4gICAgICB9XG4gICAgXVxuICB9LFxuICBhcGlzOiBbJy4vc2VydmVyLmpzJ10gLy8gUGF0aCB0byB0aGUgQVBJIHJvdXRlc1xufTtcblxuY29uc3Qgc3dhZ2dlclNwZWMgPSBzd2FnZ2VySnNkb2Moc3dhZ2dlck9wdGlvbnMpO1xuXG4vLyBTd2FnZ2VyIFVJIHdpdGggQ1NQIGRpc2FibGVkIGZvciB0aGlzIHJvdXRlXG5hcHAudXNlKCcvYXBpLWRvY3MnLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gRGlzYWJsZSBDU1AgZm9yIFN3YWdnZXIgVUlcbiAgcmVzLnJlbW92ZUhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knKTtcbiAgbmV4dCgpO1xufSwgc3dhZ2dlclVpLnNlcnZlLCBzd2FnZ2VyVWkuc2V0dXAoc3dhZ2dlclNwZWMpKTtcblxuLy8gQWRtaW5pc3RyYXRpdmUgZW5kcG9pbnRzIC0gcmVxdWlyZSBtb2RlcmF0b3IgcHJpdmlsZWdlc1xuY29uc29sZS5sb2coJ/CflKcgQWRtaW5pc3RyYXRpdmUgQVBJIGVuZHBvaW50cyByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcblxuLy8gR0VUIC9hcGkvYWRtaW4vdXNlcnMgLSBMaXN0IGFsbCB1c2VycyB3aXRoIG1vZGVyYXRpb24gaW5mb1xuYXBwLmdldCgnL2FwaS9hZG1pbi91c2VycycsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5hcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlKSB8fCAxO1xuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0KSB8fCA1MDtcbiAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoe30pXG4gICAgICAuc2VsZWN0KCctcGFzc3dvcmQgLXJlc2V0UGFzc3dvcmRUb2tlbiAtcmVzZXRQYXNzd29yZEV4cGlyZXMgLW1vZGVyYXRpb25Ub2tlbiAtbW9kZXJhdGlvblRva2VuRXhwaXJlcycpXG4gICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgIC5za2lwKHNraXApXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgY29uc3QgdG90YWwgPSBhd2FpdCBVc2VyLmNvdW50RG9jdW1lbnRzKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgQWRtaW4gdXNlciBsaXN0IHJlcXVlc3RlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIGFkbWluSWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHRvdGFsXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICB1c2VycyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VycyBmb3IgYWRtaW46JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdXNlcnMnLCBjb2RlOiAnREFUQUJBU0VfRVJST1InIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvYmFuIC0gQmFuIGEgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9iYW4nLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UuYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgncmVhc29uJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAwIH0pLnRyaW0oKSxcbiAgYm9keSgnZHVyYXRpb24nKS5vcHRpb25hbCgpLmlzSW50KHsgbWluOiAxLCBtYXg6IDMxNTM2MDAwIH0pIC8vIE1heCAxIHllYXIgaW4gc2Vjb25kc1xuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHJlYXNvbiwgZHVyYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgYmFubmluZyB5b3Vyc2VsZlxuICAgIGlmICh1c2VyLl9pZC50b1N0cmluZygpID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgYmFuIHlvdXJzZWxmJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG5vbi1hZG1pbiBmcm9tIGJhbm5pbmcgYWRtaW5cbiAgICBpZiAodXNlci5yb2xlID09PSAnYWRtaW4nICYmIHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQ2Fubm90IGJhbiBhZG1pbmlzdHJhdG9yJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLmJhbihyZWFzb24sIGR1cmF0aW9uLCByZXEudXNlci5faWQpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBiYW5uZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICBiYW5uZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIGJhbm5lZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIHJlYXNvbixcbiAgICAgIGR1cmF0aW9uXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIGJhbm5lZGAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGJhbm5lZDogdHJ1ZSxcbiAgICAgICAgYmFuUmVhc29uOiByZWFzb24sXG4gICAgICAgIGJhbkV4cGlyZXM6IHVzZXIuYmFuRXhwaXJlc1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgYmFubmluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGJhbiB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VuYmFuIC0gVW5iYW4gYSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VuYmFuJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyLmJhbm5lZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdVc2VyIGlzIG5vdCBiYW5uZWQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIudW5iYW4oKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gdW5iYW5uZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1bmJhbm5lZFVzZXJJZDogdXNlcklkLFxuICAgICAgdW5iYW5uZWRCeUlkOiByZXEudXNlci5faWRcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gdW5iYW5uZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBiYW5uZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciB1bmJhbm5pbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1bmJhbiB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3dhcm4gLSBJc3N1ZSB3YXJuaW5nIHRvIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvd2FybicsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdyZWFzb24nKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MDAgfSkudHJpbSgpLFxuICBib2R5KCdkdXJhdGlvbicpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDEsIG1heDogMzE1MzYwMDAgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyByZWFzb24sIGR1cmF0aW9uIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLndhcm4ocmVhc29uLCByZXEudXNlci5faWQsIGR1cmF0aW9uKTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBXYXJuaW5nIGlzc3VlZCB0byB1c2VyICR7dXNlci5uaWNrbmFtZX0gYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB3YXJuZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIHdhcm5lZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIHJlYXNvbixcbiAgICAgIGR1cmF0aW9uXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgV2FybmluZyBpc3N1ZWQgdG8gdXNlciAke3VzZXIubmlja25hbWV9YCxcbiAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgcmVhc29uLFxuICAgICAgICBpc3N1ZWRCeTogcmVxLnVzZXIubmlja25hbWUsXG4gICAgICAgIGlzc3VlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBleHBpcmVzOiBkdXJhdGlvbiA/IG5ldyBEYXRlKERhdGUubm93KCkgKyBkdXJhdGlvbikgOiBudWxsXG4gICAgICB9LFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICB3YXJuaW5nc0NvdW50OiB1c2VyLmdldEFjdGl2ZVdhcm5pbmdzQ291bnQoKVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3Igd2FybmluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHdhcm4gdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9yb2xlIC0gQ2hhbmdlIHVzZXIgcm9sZVxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9yb2xlJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVBZG1pbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgncm9sZScpLmlzSW4oWydtZW1iZXInLCAnbW9kZXJhdG9yJywgJ2FkbWluJ10pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcm9sZTogbmV3Um9sZSB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBtb2RpZnlpbmcgeW91ciBvd24gcm9sZSBpbiBwb3RlbnRpYWxseSBwcm9ibGVtYXRpYyB3YXlzXG4gICAgaWYgKHVzZXIuX2lkLnRvU3RyaW5nKCkgPT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBtb2RpZnkgeW91ciBvd24gcm9sZScgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBub24tYWRtaW4gZnJvbSBwcm9tb3RpbmcgdG8gYWRtaW4gb3IgZGVtb3RpbmcgYWRtaW5cbiAgICBpZiAoKG5ld1JvbGUgPT09ICdhZG1pbicgfHwgdXNlci5yb2xlID09PSAnYWRtaW4nKSAmJiByZXEudXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ09ubHkgYWRtaW5pc3RyYXRvcnMgY2FuIG1hbmFnZSBhZG1pbiByb2xlcycgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkUm9sZSA9IHVzZXIucm9sZTtcbiAgICB1c2VyLnJvbGUgPSBuZXdSb2xlO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSByb2xlIGNoYW5nZWQgZnJvbSAke29sZFJvbGV9IHRvICR7bmV3Um9sZX0gYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICBjaGFuZ2VkVXNlcklkOiB1c2VySWQsXG4gICAgICBjaGFuZ2VkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgb2xkUm9sZSxcbiAgICAgIG5ld1JvbGVcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gcm9sZSBjaGFuZ2VkIHRvICR7bmV3Um9sZX1gLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICByb2xlOiBuZXdSb2xlXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjaGFuZ2luZyB1c2VyIHJvbGU6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY2hhbmdlIHVzZXIgcm9sZScgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9tdXRlIC0gTXV0ZSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL211dGUnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgnZHVyYXRpb24nKS5pc0ludCh7IG1pbjogNjAsIG1heDogODY0MDAgfSkgLy8gMSBtaW51dGUgdG8gMjQgaG91cnNcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyBkdXJhdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci5tdXRlKGR1cmF0aW9uKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gbXV0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICBtdXRlZFVzZXJJZDogdXNlcklkLFxuICAgICAgbXV0ZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICBkdXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiBtdXRlZGAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIG11dGVFeHBpcmVzOiB1c2VyLm11dGVFeHBpcmVzXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBtdXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBtdXRlIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5tdXRlIC0gVW5tdXRlIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5tdXRlJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyLmlzTXV0ZWQoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdVc2VyIGlzIG5vdCBtdXRlZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci51bm11dGUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gdW5tdXRlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVubXV0ZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIHVubXV0ZWRCeUlkOiByZXEudXNlci5faWRcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gdW5tdXRlZGAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIG11dGVFeHBpcmVzOiBudWxsXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciB1bm11dGluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVubXV0ZSB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvdXNlcnM6XG4gKiAgIGdldDpcbiAqICAgICB0YWdzOlxuICogICAgICAgLSBVc2Vyc1xuICogICAgIHN1bW1hcnk6IEdldCBsaXN0IG9mIGFsbCByZWdpc3RlcmVkIHVzZXJzXG4gKiAgICAgZGVzY3JpcHRpb246IFJldHJpZXZlcyBhIGxpc3Qgb2YgYWxsIHVzZXJzIHdpdGggdGhlaXIgcm9sZXMgYW5kIG9ubGluZSBzdGF0dXNcbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMaXN0IG9mIHVzZXJzIHN1Y2Nlc3NmdWxseSByZXRyaWV2ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBhcnJheVxuICogICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgICAgaWQ6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIHVuaXF1ZSBpZGVudGlmaWVyXG4gKiAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3MgZGlzcGxheSBuYW1lXG4gKiAgICAgICAgICAgICAgICAgICByb2xlOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZW51bTogW2FkbWluLCBtb2RlcmF0b3IsIG1lbWJlcl1cbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyByb2xlIGxldmVsXG4gKiAgICAgICAgICAgICAgICAgICBzdGF0dXM6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBlbnVtOiBbb25saW5lLCBvZmZsaW5lXVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIG9ubGluZSBzdGF0dXNcbiAqICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogZGF0ZS10aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIHJlZ2lzdHJhdGlvbiBkYXRlXG4gKiAgICAgICAgICAgICAgICAgICBsYXN0QWN0aXZlOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBkYXRlLXRpbWVcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IExhc3QgYWN0aXZpdHkgdGltZXN0YW1wXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICAtIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gKiAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAqICAgICAgICAgICAgICAgICBzdGF0dXM6IFwib25saW5lXCJcbiAqICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IFwiMjAyNC0wOS0wN1QxMDozMDowMFpcIlxuICogICAgICAgICAgICAgICAgIGxhc3RBY3RpdmU6IFwiMjAyNC0wOS0wN1QyMjoxNTowMFpcIlxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQXV0aGVudGljYXRpb24gcmVxdWlyZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICovXG5jb25zb2xlLmxvZygn8J+UpyBHRVQgL2FwaS91c2VycyByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5nZXQoJy9hcGkvdXNlcnMnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KVxuICAgICAgLnNlbGVjdCgnX2lkIG5pY2tuYW1lIHJvbGUgc3RhdHVzIGNyZWF0ZWRBdCBsYXN0QWN0aXZlJylcbiAgICAgIC5zb3J0KHsgbmlja25hbWU6IDEgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlcnMgbGlzdCByZXF1ZXN0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIHRvdGFsVXNlcnM6IHVzZXJzLmxlbmd0aFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfk6QgUmV0dXJuaW5nIHVzZXJzIGRhdGE6JywgdXNlcnMubGVuZ3RoKTtcbiAgICByZXMuanNvbih1c2Vycyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyczonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluIEdFVCAvYXBpL3VzZXJzOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdXNlcnMnLCBjb2RlOiAnREFUQUJBU0VfRVJST1InIH0pO1xuICB9XG59KTtcblxuLy8gU3dhZ2dlciBKU09OIGVuZHBvaW50XG5hcHAuZ2V0KCcvYXBpLWRvY3MuanNvbicsIChyZXEsIHJlcykgPT4ge1xuICByZXMucmVtb3ZlSGVhZGVyKCdDb250ZW50LVNlY3VyaXR5LVBvbGljeScpO1xuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICByZXMuc2VuZChzd2FnZ2VyU3BlYyk7XG59KTtcblxuLy8gRGV2ZWxvcG1lbnQgYW5kIHRlc3QgZW5kcG9pbnQgdG8gcmVzZXQgcmF0ZSBsaW1pdGluZ1xuYXBwLnBvc3QoJy9hcGkvcmVzZXQtcmF0ZWxpbWl0JywgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIEluIGEgcmVhbCBhcHBsaWNhdGlvbiwgeW91J2Qgd2FudCB0byBnZXQgdGhlIHN0b3JlIGZyb20gdGhlIGxpbWl0ZXIgaW5zdGFuY2VcbiAgLy8gRm9yIGV4cHJlc3MtcmF0ZS1saW1pdCB2NyssIHlvdSBjYW4gYWNjZXNzIHRoZSBzdG9yZSBsaWtlIHRoaXM6XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aExpbWl0ZXJTdG9yZSA9IGF1dGhSYXRlTGltaXRlci5zdG9yZTtcbiAgICBpZiAoYXV0aExpbWl0ZXJTdG9yZSAmJiB0eXBlb2YgYXV0aExpbWl0ZXJTdG9yZS5yZXNldEFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXV0aExpbWl0ZXJTdG9yZS5yZXNldEFsbCgpO1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgUmF0ZSBsaW1pdGluZyByZXNldCBmb3IgdGVzdGluZyBwdXJwb3NlcycpO1xuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnUmF0ZSBsaW1pdGluZyBoYXMgYmVlbiByZXNldCcgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHN0b3JlIGRvZXNuJ3QgZXhwb3NlIHJlc2V0QWxsLCBjcmVhdGUgYSB0ZW1wb3Jhcnkgd29ya2Fyb3VuZFxuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBSYXRlIGxpbWl0ZXIgc3RvcmUgZG9lc25cXCd0IHN1cHBvcnQgcmVzZXRBbGwgLSByYXRlIGxpbWl0aW5nIHdpbGwgZXhwaXJlIG5hdHVyYWxseScpO1xuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Nhbm5vdCByZXNldCByYXRlIGxpbWl0aW5nIGF1dG9tYXRpY2FsbHksIHdhaXQgZm9yIHRpbWVvdXQnIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIEVycm9yIHJlc2V0dGluZyByYXRlIGxpbWl0aW5nOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIHJlc2V0IHJhdGUgbGltaXRpbmcnIH0pO1xuICB9XG59KTtcblxuLy8gSGVhbHRoIGNoZWNrIGVuZHBvaW50XG5hcHAuZ2V0KCcvaGVhbHRoJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB1cHRpbWU6IHByb2Nlc3MudXB0aW1lKClcbiAgfSk7XG59KTtcblxuLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBlbmRwb2ludHNcbmFwcC5nZXQoJy9hcGkvaGVhbHRoL2RldGFpbGVkJywgZ2V0SGVhbHRoQ2hlY2spO1xuXG5hcHAuZ2V0KCcvYXBpL3BlcmZvcm1hbmNlL2Rhc2hib2FyZCcsIChyZXEsIHJlcykgPT4ge1xuICAvLyBDaGVjayBpZiB1c2VyIGlzIGFkbWluL21vZGVyYXRvclxuICBpZiAoIXJlcS51c2VyIHx8IChyZXEudXNlci5yb2xlICE9PSAnYWRtaW4nICYmIHJlcS51c2VyLnJvbGUgIT09ICdtb2RlcmF0b3InKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KTtcbiAgfVxuICBnZXRQZXJmb3JtYW5jZURhc2hib2FyZChyZXEsIHJlcyk7XG59KTtcblxuLy8gUGVyZm9ybWFuY2UgYWxlcnRzIGVuZHBvaW50XG5hcHAuZ2V0KCcvYXBpL3BlcmZvcm1hbmNlL2FsZXJ0cycsIChyZXEsIHJlcykgPT4ge1xuICBpZiAoIXJlcS51c2VyIHx8IChyZXEudXNlci5yb2xlICE9PSAnYWRtaW4nICYmIHJlcS51c2VyLnJvbGUgIT09ICdtb2RlcmF0b3InKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KTtcbiAgfVxuXG4gIC8vIFJ1biBhbGVydHMgY2hlY2tcbiAgcGVyZm9ybWFuY2VNb25pdG9yLmNoZWNrQWxlcnRzKCk7XG5cbiAgcmVzLmpzb24oe1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGFsZXJ0c19jaGVja2VkOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdQZXJmb3JtYW5jZSBhbGVydHMgY2hlY2tlZCAtIHNlZSBzZXJ2ZXIgbG9ncyBmb3IgYW55IGFsZXJ0cydcbiAgfSk7XG59KTtcblxuLy8gQ2lyY3VpdCBicmVha2VyIHN0YXR1cyBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS9jaXJjdWl0LWJyZWFrZXIvc3RhdHVzJywgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLnVzZXIgfHwgKHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ21vZGVyYXRvcicpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pO1xuICB9XG5cbiAgY29uc3Qgc3RhdHVzID0gZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlcygpO1xuICByZXMuanNvbih7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgc2VydmljZXM6IHN0YXR1c1xuICB9KTtcbn0pO1xuXG4vLyBSZXNvdXJjZSB1c2FnZSBvcHRpbWl6YXRpb24gZW5kcG9pbnRcbmFwcC5nZXQoJy9hcGkvb3B0aW1pemF0aW9uL3N0YXR1cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBpZiAoIXJlcS51c2VyIHx8IChyZXEudXNlci5yb2xlICE9PSAnYWRtaW4nICYmIHJlcS51c2VyLnJvbGUgIT09ICdtb2RlcmF0b3InKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3Qgb3B0aW1pemF0aW9uID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBhc3luY19wcm9jZXNzZXM6IHByb2Nlc3MuX2dldEFjdGl2ZUhhbmRsZXMoKS5sZW5ndGgsXG4gICAgICBtZW1vcnlfdXNhZ2U6IHByb2Nlc3MubWVtb3J5VXNhZ2UoKSxcbiAgICAgIGNvbm5lY3Rpb25fbWV0cmljczogZ2V0Q2FjaGVkU3RhdHMgPyBhd2FpdCBnZXRDYWNoZWRTdGF0cygpIDoge30sXG4gICAgICBwZXJmb3JtYW5jZV9tZXRyaWNzOiBwZXJmb3JtYW5jZU1vbml0b3IuZ2V0RGV0YWlsZWRTdGF0cyA/IHBlcmZvcm1hbmNlTW9uaXRvci5nZXREZXRhaWxlZFN0YXRzKCkgOiB7fSxcbiAgICAgIGNpcmN1aXRfYnJlYWtlcnM6IGdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMoKVxuICAgIH07XG5cbiAgICByZXMuanNvbihvcHRpbWl6YXRpb24pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBvcHRpbWl6YXRpb24gc3RhdHVzOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGdldCBvcHRpbWl6YXRpb24gc3RhdHVzJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxufSk7XG5cbi8vIExvZyBtaWRkbGV3YXJlIHRvIGNoZWNrIGluY29taW5nIHJlcXVlc3RzXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuaW5mbyhg8J+UjSBJbmNvbWluZyByZXF1ZXN0OiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICBoZWFkZXJzOiByZXEuaGVhZGVyc1xuICB9KTtcbiAgbmV4dCgpO1xufSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAgICogQHN3YWdnZXJcbiAgICogL2FwaS9sb2dpbjpcbiAgICogICBwb3N0OlxuICAgKiAgICAgdGFnczpcbiAgICogICAgICAgLSBBdXRoZW50aWNhdGlvblxuICAgKiAgICAgc3VtbWFyeTogTG9naW4gZXhpc3RpbmcgdXNlclxuICAgKiAgICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0ZXMgYW5kIGxvZ3MgaW4gYW4gZXhpc3RpbmcgdXNlciB3aXRoIEpXVCB0b2tlblxuICAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAqICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgICogICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0xvZ2luUmVxdWVzdCdcbiAgICogICAgIHJlc3BvbnNlczpcbiAgICogICAgICAgMjAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMb2dpbiBzdWNjZXNzZnVsXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQXV0aFJlc3BvbnNlJ1xuICAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICAqICAgICAgICAgICAgICAgdXNlcjpcbiAgICogICAgICAgICAgICAgICAgIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICAqICAgICAgICAgICAgICAgICBlbWFpbDogXCJqb2huQGV4YW1wbGUuY29tXCJcbiAgICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAgICogICAgICAgNDAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnZhbGlkIGNyZWRlbnRpYWxzIG9yIHZhbGlkYXRpb24gZXJyb3JzXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAgICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgICogICAgICAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCJcbiAgICogICAgICAgNTAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgICovXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvbG9naW4gcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAucG9zdCgnL2FwaS9sb2dpbicsIFtcbiAgYm9keSgnaWRlbnRpZmllcicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwIH0pLnRyaW0oKSxcbiAgYm9keSgncGFzc3dvcmQnKS5pc0xlbmd0aCh7IG1pbjogNiwgbWF4OiAxMDAgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBVc2UgQXV0aFNlcnZpY2UgZm9yIGxvZ2luIGhhbmRsaW5nXG4gIGF3YWl0IGF1dGhTZXJ2aWNlLmhhbmRsZUxvZ2luV2l0aFNlc3Npb24ocmVxLmJvZHkuaWRlbnRpZmllciwgcmVxLmJvZHkucGFzc3dvcmQsIHJlcSwgcmVzKTtcbn0pO1xuXG4vKipcbiAgICogQHN3YWdnZXJcbiAgICogL2FwaS9yZWdpc3RlcjpcbiAgKiAgIHBvc3Q6XG4gICogICAgIHRhZ3M6XG4gICogICAgICAgLSBBdXRoZW50aWNhdGlvblxuICAqICAgICBzdW1tYXJ5OiBSZWdpc3RlciBuZXcgdXNlclxuICAqICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlcyBhIG5ldyB1c2VyIGFjY291bnQgYW5kIHJldHVybnMgSldUIHRva2VuXG4gICogICAgIHJlcXVlc3RCb2R5OlxuICAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICogICAgICAgY29udGVudDpcbiAgKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgIHNjaGVtYTpcbiAgKiAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvUmVnaXN0ZXJSZXF1ZXN0J1xuICAqICAgICAgICAgICBleGFtcGxlOlxuICAqICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAgKiAgICAgICAgICAgICBlbWFpbDogXCJqb2huQGV4YW1wbGUuY29tXCJcbiAgKiAgICAgICAgICAgICBwYXNzd29yZDogXCJzZWN1cmVQYXNzMTIzXCJcbiAgKiAgICAgcmVzcG9uc2VzOlxuICAqICAgICAgIDIwMTpcbiAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bFxuICAqICAgICAgICAgY29udGVudDpcbiAgKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQXV0aFJlc3BvbnNlJ1xuICAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gICogICAgICAgICAgICAgICB0b2tlbjogXCJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuLi5cIlxuICAqICAgICAgICAgICAgICAgdXNlcjpcbiAgKiAgICAgICAgICAgICAgICAgaWQ6IFwiNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDExXCJcbiAgKiAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAqICAgICAgICAgICAgICAgICBlbWFpbDogXCJqb2huQGV4YW1wbGUuY29tXCJcbiAgKiAgICAgICAgICAgICAgICAgcm9sZTogXCJtZW1iZXJcIlxuICAqICAgICAgIDQwMDpcbiAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBWYWxpZGF0aW9uIGVycm9ycyBvciB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICogICAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gICogICAgICAgICAgICAgICBlcnJvcjogXCJOaWNrbmFtZSBhbHJlYWR5IHRha2VuXCJcbiAgKiAgICAgICA1MDA6XG4gICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gICovXG5hcHAucG9zdCgnL2FwaS9yZWdpc3RlcicsIGF1dGhTZXJ2aWNlLmF1dGhSYXRlTGltaXRlciwgW1xuICBib2R5KCduaWNrbmFtZScpLmlzTGVuZ3RoKHsgbWluOiAzLCBtYXg6IDUwIH0pLnRyaW0oKS5lc2NhcGUoKSxcbiAgYm9keSgnZW1haWwnKS5pc0VtYWlsKCkubm9ybWFsaXplRW1haWwoKSxcbiAgYm9keSgncGFzc3dvcmQnKS5pc0xlbmd0aCh7IG1pbjogNiB9KVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIFVzZSBBdXRoU2VydmljZSBmb3IgcmVnaXN0cmF0aW9uIGhhbmRsaW5nXG4gIGF3YWl0IGF1dGhTZXJ2aWNlLmhhbmRsZVJlZ2lzdHJhdGlvbldpdGhTZXNzaW9uKHJlcS5ib2R5LCByZXEsIHJlcyk7XG59KTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS9jaGFubmVsczpcbiAqICAgZ2V0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIENoYW5uZWxzXG4gKiAgICAgc3VtbWFyeTogR2V0IGxpc3Qgb2YgY2hhbm5lbHNcbiAqICAgICBkZXNjcmlwdGlvbjogUmV0cmlldmVzIGEgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIGNoYW5uZWxzXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiBjaGFubmVsc1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgLSBpZDogXCJnZW5lcmFsXCJcbiAqICAgICAgICAgICAgICAgICBuYW1lOiBcIkdlbmVyYWxcIlxuICogICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiXCJcbiAqICAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IFwic3lzdGVtXCJcbiAqICAgICAgICAgICAgICAgICBwb3NpdGlvbjogMFxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBlcnJvcjogXCJBY2Nlc3MgdG9rZW4gcmVxdWlyZWRcIlxuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogSW50ZXJuYWwgc2VydmVyIGVycm9yXG4gKi9cbmNvbnNvbGUubG9nKCfwn5SnIEdFVCAvYXBpL2NoYW5uZWxzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLmdldCgnL2FwaS9jaGFubmVscycsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5qAIEdFVCAvYXBpL2NoYW5uZWxzIGVuZHBvaW50IGNhbGxlZCcsIHsgbWV0aG9kOiByZXEubWV0aG9kLCB1cmw6IHJlcS51cmwsIGhlYWRlcnM6IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPyAnYXV0aCBoZWFkZXIgcHJlc2VudCcgOiAnbm8gYXV0aCBoZWFkZXInIH0pO1xuICB0cnkge1xuICAgIGNvbnN0IGNoYW5uZWxzID0gYXdhaXQgQ2hhbm5lbC5maW5kKHt9KVxuICAgICAgLnNlbGVjdCgnLV9pZCBpZCBuYW1lIHR5cGUgZGVzY3JpcHRpb24gY3JlYXRlZEJ5IHBvc2l0aW9uJylcbiAgICAgIC5zb3J0KHsgcG9zaXRpb246IDEgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhgQ2hhbm5lbHMgbGlzdCByZXF1ZXN0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGNoYW5uZWxDb3VudDogY2hhbm5lbHMubGVuZ3RoXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBSZXR1cm5pbmcgY2hhbm5lbHMgZGF0YTonLCBjaGFubmVscy5sZW5ndGgpO1xuICAgIHJlcy5qc29uKGNoYW5uZWxzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYW5uZWxzOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gR0VUIC9hcGkvY2hhbm5lbHM6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjaGFubmVscycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvY2hhbm5lbHMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvY2hhbm5lbHM6XG4gKiAgIHBvc3Q6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gQ2hhbm5lbHNcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSBuZXcgY2hhbm5lbFxuICogICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVzIGEgbmV3IHRleHQgb3Igdm9pY2UgY2hhbm5lbFxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWxSZXF1ZXN0J1xuICogICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICBuYW1lOiBcIk5ld0NoYW5uZWxcIlxuICogICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlc2NyaXB0aW9uIG9mIHRoZSBuZXcgY2hhbm5lbFwiXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ2hhbm5lbCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgaWQ6IFwibmV3Y2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIG5hbWU6IFwiTmV3Q2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlc2NyaXB0aW9uIG9mIHRoZSBuZXcgY2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogXCJqb2huX2RvZVwiXG4gKiAgICAgICAgICAgICAgIHBvc2l0aW9uOiAxMFxuICogICAgICAgNDAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogSW52YWxpZCByZXF1ZXN0IGRhdGFcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgNDA5OlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ2hhbm5lbCBuYW1lIGFscmVhZHkgZXhpc3RzXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAqL1xuYXBwLnBvc3QoJy9hcGkvY2hhbm5lbHMnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgnbmFtZScpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDEwMCB9KS50cmltKCkuZXNjYXBlKCksXG4gIGJvZHkoJ3R5cGUnKS5pc0luKFsndGV4dCcsICd2b2ljZSddKS50cmltKCksXG4gIGJvZHkoJ2Rlc2NyaXB0aW9uJykub3B0aW9uYWwoKS5pc0xlbmd0aCh7IG1heDogNTAwIH0pLnRyaW0oKVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IG5hbWUsIHR5cGUsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keTtcbiAgICBjb25zdCBjcmVhdGVkQnkgPSByZXEudXNlci5uaWNrbmFtZTtcblxuICAgIC8vIENyZWF0ZSBuZXcgY2hhbm5lbCAoSUQgd2lsbCBiZSBhdXRvLWdlbmVyYXRlZCBpbiBwcmUtc2F2ZSBtaWRkbGV3YXJlKVxuICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbCh7XG4gICAgICBuYW1lLFxuICAgICAgdHlwZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY3JlYXRlZEJ5XG4gICAgfSk7XG5cbiAgICBhd2FpdCBjaGFubmVsLnNhdmUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBDaGFubmVsICcke25hbWV9JyBjcmVhdGVkIGJ5ICR7Y3JlYXRlZEJ5fWAsIHtcbiAgICAgIGNoYW5uZWxJZDogY2hhbm5lbC5pZCxcbiAgICAgIHR5cGUsXG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgaWQ6IGNoYW5uZWwuaWQsXG4gICAgICBuYW1lOiBjaGFubmVsLm5hbWUsXG4gICAgICB0eXBlOiBjaGFubmVsLnR5cGUsXG4gICAgICBkZXNjcmlwdGlvbjogY2hhbm5lbC5kZXNjcmlwdGlvbixcbiAgICAgIGNyZWF0ZWRCeTogY2hhbm5lbC5jcmVhdGVkQnksXG4gICAgICBwb3NpdGlvbjogY2hhbm5lbC5wb3NpdGlvblxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyBjaGFubmVsOicsIGVycm9yKTtcblxuICAgIGlmIChlcnJvci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGNoYW5uZWwgZGF0YScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdDaGFubmVsIG5hbWUgYWxyZWFkeSBleGlzdHMnLFxuICAgICAgICBjb2RlOiAnRFVQTElDQVRFX0NIQU5ORUwnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY2hhbm5lbCcsXG4gICAgICBjb2RlOiAnREFUQUJBU0VfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvbG9nb3V0IHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLnBvc3QoJy9hcGkvbG9nb3V0JywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+aqiBMb2dvdXQgcmVxdWVzdCBmcm9tIHVzZXI6JywgcmVxLnVzZXIubmlja25hbWUsIHsgdXNlcklkOiByZXEudXNlci5faWQgfSk7XG5cbiAgICAvLyBEaXNjb25uZWN0IGFsbCBTb2NrZXQuSU8gY29ubmVjdGlvbnMgZm9yIHRoaXMgdXNlclxuICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBvZmZsaW5lXG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEudXNlci5faWQsIHtcbiAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBVc2VyICR7cmVxLnVzZXIubmlja25hbWV9IGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5LCAke2Rpc2Nvbm5lY3RlZENvdW50fSBjb25uZWN0aW9ucyBkaXNjb25uZWN0ZWRgKTtcbiAgICBsb2dnZXIuaW5mbyhgVXNlciBsb2dnZWQgb3V0OiAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgZGlzY29ubmVjdGVkU29ja2V0czogZGlzY29ubmVjdGVkQ291bnRcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnTG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknLFxuICAgICAgZGlzY29ubmVjdGVkQ291bnRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0xvZ291dCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgbG9nb3V0JyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogU2Vzc2lvbiBsb2dvdXQgZW5kcG9pbnQgLSBkZXN0cm95cyBzZXNzaW9uXG4gKiBUaGlzIGNvbXBsZW1lbnRzIEpXVCBsb2dvdXQgdG8gaGFuZGxlIHNlc3Npb24tYmFzZWQgYXV0aGVudGljYXRpb25cbiAqL1xuYXBwLnBvc3QoJy9hcGkvbG9nb3V0X3Nlc3Npb24nLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogU2Vzc2lvbiBsb2dvdXQgcmVxdWVzdCwgc2Vzc2lvbklkOicsIHJlcS5zZXNzaW9uSWQpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbiBhdXRoZW50aWNhdGVkIHNlc3Npb24gb3IgSldUIHVzZXJcbiAgICBjb25zdCBoYXNKd3RBdXRoID0gISFyZXEudXNlcjsgLy8gRnJvbSBKV1QgbWlkZGxld2FyZVxuICAgIGNvbnN0IGhhc1Nlc3Npb25BdXRoID0gcmVxLnNlc3Npb25Vc2VyIHx8IChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkKTtcbiAgICBjb25zdCBzZXNzaW9uVXNlcklkID0gcmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24udXNlcklkO1xuXG4gICAgY29uc29sZS5sb2coJ/CfpJQgU2Vzc2lvbiBsb2dvdXQgY2hlY2s6Jywge1xuICAgICAgaGFzSnd0QXV0aCxcbiAgICAgIGhhc1Nlc3Npb25BdXRoLFxuICAgICAgc2Vzc2lvblVzZXJJZCxcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZFxuICAgIH0pO1xuXG4gICAgaWYgKGhhc1Nlc3Npb25BdXRoKSB7XG4gICAgICBjb25zdCBzZXNzaW9uVXNlciA9IHNlc3Npb25Vc2VySWQgPyBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb25Vc2VySWQpIDogbnVsbDtcbiAgICAgIGNvbnN0IG5pY2tuYW1lID0gc2Vzc2lvblVzZXIgPyBzZXNzaW9uVXNlci5uaWNrbmFtZSA6ICd1bmtub3duJztcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGxvZ291dDogRGVzdHJveWluZyBzZXNzaW9uIGZvciB1c2VyOicsIG5pY2tuYW1lKTtcblxuICAgICAgLy8gRGlzY29ubmVjdCBTb2NrZXQuSU8gY29ubmVjdGlvbnMgZm9yIHRoaXMgc2Vzc2lvbiB1c2VyXG4gICAgICBpZiAoc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCfl5HvuI8gU2Vzc2lvbiBsb2dvdXQ6IERpc2Nvbm5lY3RlZCAke2Rpc2Nvbm5lY3RlZENvdW50fSBzb2NrZXQgY29ubmVjdGlvbnNgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVzdHJveSB0aGUgc2Vzc2lvblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICByZXEuc2Vzc2lvbi5kZXN0cm95KChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgU2Vzc2lvbiBkZXN0cm95IGVycm9yOicsIGVycik7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGRlc3Ryb3llZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBTZXNzaW9uIGxvZ2dlZCBvdXQ6ICR7bmlja25hbWV9YCwge1xuICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgIGlwOiByZXEuaXBcbiAgICAgIH0pO1xuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgdHlwZTogJ3Nlc3Npb25fbG9nb3V0JyxcbiAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gU2Vzc2lvbiBsb2dvdXQ6IE5vIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiB0byBkZXN0cm95Jyk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdObyBhY3RpdmUgc2Vzc2lvbiB0byBsb2cgb3V0JyxcbiAgICAgICAgdHlwZTogJ3Nlc3Npb25fbG9nb3V0JyxcbiAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignU2Vzc2lvbiBsb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBzZXNzaW9uIGxvZ291dCcsXG4gICAgICBjb2RlOiAnU0VTU0lPTl9MT0dPVVRfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBIeWJyaWQgbG9nb3V0IGVuZHBvaW50IC0gaGFuZGxlcyBib3RoIEpXVCBhbmQgc2Vzc2lvbiBsb2dvdXRcbmFwcC5wb3N0KCcvYXBpL2xvZ291dF9jb21wbGV0ZScsIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+aqiBDb21wbGV0ZSBsb2dvdXQgcmVxdWVzdCAoSldUICsgU2Vzc2lvbiksIHNlc3Npb25JZDonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIGNvbnN0IGhhc0p3dEF1dGggPSAhIXJlcS51c2VyO1xuICAgIGNvbnN0IGhhc1Nlc3Npb25BdXRoID0gcmVxLnNlc3Npb25Vc2VyIHx8IChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkKTtcbiAgICBjb25zdCBzZXNzaW9uVXNlcklkID0gcmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24udXNlcklkO1xuXG4gICAgbGV0IGp3dExvZ291dFJlc3VsdCA9IG51bGw7XG4gICAgbGV0IHNlc3Npb25Mb2dvdXRSZXN1bHQgPSBudWxsO1xuXG4gICAgLy8gSGFuZGxlIEpXVCBsb2dvdXQgaWYgSldUIGlzIHByb3ZpZGVkXG4gICAgaWYgKGhhc0p3dEF1dGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICAgICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBbc29ja2V0SWQsIHNvY2tldERhdGFdIG9mIHNvY2tldHMuZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEudXNlci5faWQsIHtcbiAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGp3dExvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50XG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChqd3RFcnJvcikge1xuICAgICAgICBqd3RMb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGp3dEVycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2Vzc2lvbiBsb2dvdXQgaWYgc2Vzc2lvbiBleGlzdHNcbiAgICBpZiAoaGFzU2Vzc2lvbkF1dGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb25Vc2VySWQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBsb2dvdXQ6IERlc3Ryb3lpbmcgc2Vzc2lvbiBmb3IgdXNlcjonLCBzZXNzaW9uVXNlciA/IHNlc3Npb25Vc2VyLm5pY2tuYW1lIDogJ3Vua25vd24nKTtcblxuICAgICAgICAgIC8vIERpc2Nvbm5lY3QgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHNlc3Npb24gdXNlclxuICAgICAgICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICAgICAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSBzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFNlc3Npb24gbG9nb3V0OiBEaXNjb25uZWN0ZWQgJHtkaXNjb25uZWN0ZWRDb3VudH0gc29ja2V0IGNvbm5lY3Rpb25zYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXN0cm95IHRoZSBzZXNzaW9uXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICByZXEuc2Vzc2lvbi5kZXN0cm95KChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlc3Npb25Mb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzZXNzaW9uRGVzdHJveWVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgc2Vzc2lvbkxvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogc2Vzc2lvbkVycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvdmVyYWxsU3VjY2VzcyA9ICghand0TG9nb3V0UmVzdWx0IHx8IGp3dExvZ291dFJlc3VsdC5zdWNjZXNzKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoIXNlc3Npb25Mb2dvdXRSZXN1bHQgfHwgc2Vzc2lvbkxvZ291dFJlc3VsdC5zdWNjZXNzKTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IG92ZXJhbGxTdWNjZXNzLFxuICAgICAgbWVzc2FnZTogJ0NvbXBsZXRlIGxvZ291dCBwcm9jZXNzZWQnLFxuICAgICAgdHlwZTogJ2NvbXBsZXRlX2xvZ291dCcsXG4gICAgICBqd3Q6IGp3dExvZ291dFJlc3VsdCxcbiAgICAgIHNlc3Npb246IHNlc3Npb25Mb2dvdXRSZXN1bHRcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignQ29tcGxldGUgbG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgY29tcGxldGUgbG9nb3V0JyxcbiAgICAgIGNvZGU6ICdDT01QTEVURV9MT0dPVVRfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyAgNDA0IGhhbmRsZXIgKG11c3QgYmUgYmVmb3JlIGdsb2JhbCBlcnJvciBoYW5kbGVyKVxuYXBwLnVzZSgocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS53YXJuKCfinYwgRmluYWwgNDA0IGhhbmRsZXIgZXhlY3V0ZWQgLSByb3V0ZSBub3QgZm91bmQhJywgeyBtZXRob2Q6IHJlcS5tZXRob2QsIHVybDogcmVxLnVybCB9KTtcbiAgbG9nZ2VyLndhcm4oYDQwNCAtICR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfWAsIHtcbiAgICBpcDogcmVxLmlwLFxuICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICBlcnJvcjogJ0VuZHBvaW50IG5vdCBmb3VuZCcsXG4gICAgcGF0aDogcmVxLnVybCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgY29kZTogJ05PVF9GT1VORCdcbiAgfSk7XG59KTtcblxuLy8gR2xvYmFsIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmUgKG11c3QgYmUgbGFzdClcbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuXG5cblxuXG5cblxuXG5cbi8vIEdsb2JhbCB1c2VycyBtYXAgZm9yIHNvY2tldCBtYW5hZ2VtZW50IHtzb2NrZXRJZDoge3VzZXJJZCwgbmlja25hbWUsIHJvb219fVxubGV0IG9ubGluZVVzZXJzID0gbmV3IE1hcCgpO1xuXG4vLyBVc2VyIGNvbm5lY3Rpb24gY291bnRlciB7dXNlcklkOiBjb25uZWN0aW9uQ291bnR9XG5sZXQgdXNlckNvbm5lY3Rpb25zID0gbmV3IE1hcCgpO1xuXG4vLyBWb2ljZSBjaGFubmVscyBtYW5hZ2VtZW50XG5jb25zdCB2b2ljZUNoYW5uZWxzID0gbmV3IE1hcCgpOyAvLyBjaGFubmVsSWQgLT4geyBzb2NrZXRJZDogeyBwZWVyQ29ubmVjdGlvbiwgc3RyZWFtIH0gfVxuXG4vLyBJbXByb3ZlZCBTb2NrZXQuSU8gc2Vzc2lvbiBtaWRkbGV3YXJlIHdpdGggcHJvcGVyIHJlcyBvYmplY3QgaGFuZGxpbmdcbmlvLnVzZSgoc29ja2V0LCBuZXh0KSA9PiB7XG4gIC8vIENyZWF0ZSBhIG1vcmUgY29tcGxldGUgbW9jayByZXMgb2JqZWN0IGlmIG1pc3NpbmdcbiAgaWYgKCFzb2NrZXQucmVxdWVzdC5yZXMpIHtcbiAgICBzb2NrZXQucmVxdWVzdC5yZXMgPSB7XG4gICAgICBzZXRIZWFkZXI6ICgpID0+IHt9LFxuICAgICAgZ2V0SGVhZGVyOiAoKSA9PiB7fSxcbiAgICAgIHdyaXRlSGVhZDogKCkgPT4ge30sXG4gICAgICBlbmQ6ICgpID0+IHt9LFxuICAgICAgaGVhZGVyc1NlbnQ6IGZhbHNlLFxuICAgICAgc3RhdHVzQ29kZTogMjAwXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFwcGx5IHNlc3Npb24gbWlkZGxld2FyZSB3aXRoIGVycm9yIGhhbmRsaW5nXG4gIHNlc3Npb25NaWRkbGV3YXJlKHNvY2tldC5yZXF1ZXN0LCBzb2NrZXQucmVxdWVzdC5yZXMsIChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTZXNzaW9uIG1pZGRsZXdhcmUgZXJyb3IgZm9yIFNvY2tldC5JTzonLCBlcnIpO1xuICAgICAgcmV0dXJuIG5leHQoZXJyKTtcbiAgICB9XG4gICAgbmV4dCgpO1xuICB9KTtcbn0pO1xuXG4vLyBTb2NrZXQuSU8gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuaW8udXNlKGFzeW5jIChzb2NrZXQsIG5leHQpID0+IHtcbiAgY29uc3QgeyBjc3JmVG9rZW4sIHNlc3Npb25JZCB9ID0gc29ja2V0LmhhbmRzaGFrZS5hdXRoO1xuICBsZXQgc2Vzc2lvbiA9IHNvY2tldC5yZXF1ZXN0LnNlc3Npb247XG5cbiAgLy8gY29uc29sZS5sb2coJ/CflJEgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGF0dGVtcHQgd2l0aCBzZXNzaW9uIGFuZCBDU1JGIGZpbmdlcnByaW50IGNoZWNrJyk7XG4gIC8vIGNvbnNvbGUubG9nKCfwn5SNIFJhdyBzb2NrZXQgYXV0aCBkYXRhOicsIHtcbiAgLy8gICBjc3JmVG9rZW5Qcm92aWRlZDogISFjc3JmVG9rZW4sXG4gIC8vICAgc2Vzc2lvbklkUHJvdmlkZWQ6ICEhc2Vzc2lvbklkLFxuICAvLyAgIHNlc3Npb25JZExlbmd0aDogc2Vzc2lvbklkPy5sZW5ndGgsXG4gIC8vICAgc2Vzc2lvbklkRnJvbUF1dGg6IHNlc3Npb25JZFxuICAvLyB9KTtcblxuICAvLyBJZiBzZXNzaW9uSWQgaXMgcHJvdmlkZWQgaW4gYXV0aCwgdHJ5IHRvIHJlY292ZXIgdGhlIHNlc3Npb24gZnJvbSBNb25nb0RCIHN0b3JlXG4gIGlmIChzZXNzaW9uSWQgJiYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmF1dGhlbnRpY2F0ZWQpKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ/CflIQgQXR0ZW1wdGluZyBzZXNzaW9uIHJlY292ZXJ5IGZyb20gTW9uZ29EQiBzdG9yZSB1c2luZyBzZXNzaW9uSWQ6Jywgc2Vzc2lvbklkKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBMb2FkIHNlc3Npb24gZnJvbSBNb25nb0RCIHN0b3JlIHVzaW5nIHRoZSBzZXNzaW9uSWQgZnJvbSBKV1QgYXV0aFxuICAgICAgY29uc3QgTW9uZ29TdG9yZUluc3RhbmNlID0gc2Vzc2lvbk1pZGRsZXdhcmUuc3RvcmU7XG4gICAgICBpZiAoTW9uZ29TdG9yZUluc3RhbmNlICYmIHR5cGVvZiBNb25nb1N0b3JlSW5zdGFuY2UuZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIE1vbmdvU3RvcmVJbnN0YW5jZS5nZXQoc2Vzc2lvbklkLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIGVsc2UgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ/CflIQgTW9uZ29EQiBzZXNzaW9uIGxvb2t1cCByZXN1bHQ6Jywge1xuICAgICAgICAvLyAgIHNlc3Npb25Gb3VuZDogISFzZXNzaW9uRGF0YSxcbiAgICAgICAgLy8gICBzZXNzaW9uQXV0aGVudGljYXRlZDogc2Vzc2lvbkRhdGE/LmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgIC8vICAgc2Vzc2lvblVzZXJJZDogc2Vzc2lvbkRhdGE/LnVzZXJJZCxcbiAgICAgICAgLy8gICBzZXNzaW9uQ3NyZlRva2VuOiAhIXNlc3Npb25EYXRhPy5jc3JmVG9rZW4sXG4gICAgICAgIC8vICAgY3NyZlRva2VuTWF0Y2hlczogY3NyZlRva2VuICYmIHNlc3Npb25EYXRhPy5jc3JmVG9rZW4gJiYgY3NyZlRva2VuID09PSBzZXNzaW9uRGF0YS5jc3JmVG9rZW5cbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgaWYgKHNlc3Npb25EYXRhICYmIHNlc3Npb25EYXRhLmF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICAvLyBSZXBsYWNlIHNvY2tldC5yZXF1ZXN0LnNlc3Npb24gd2l0aCBsb2FkZWQgc2Vzc2lvblxuICAgICAgICAgIHNvY2tldC5yZXF1ZXN0LnNlc3Npb24gPSBzZXNzaW9uRGF0YTtcbiAgICAgICAgICBzZXNzaW9uID0gc2Vzc2lvbkRhdGE7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTb2NrZXQgc2Vzc2lvbiByZWNvdmVyZWQgZnJvbSBNb25nb0RCJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBTb2NrZXQgc2Vzc2lvbiBub3QgZm91bmQgaW4gTW9uZ29EQiBzdG9yZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBsb2FkaW5nIFNPQ0tFVCBzZXNzaW9uIGZyb20gTW9uZ29EQjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBjb25zb2xlLmxvZygn8J+UkyBGaW5nZXJwcmludCB2ZXJpZmljYXRpb246Jywge1xuICAgIHNpZDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbklkLFxuICAgIHByb3ZpZGVkQ3NyZlRva2VuOiBjc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgIHNlc3Npb25Dc3JmVG9rZW46IHNlc3Npb24/LmNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgdXNlckFnZW50OiBzb2NrZXQucmVxdWVzdC5zZXNzaW9uPy51c2VyQWdlbnQ/LnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyxcbiAgICBsb2dpblRpbWU6IHNlc3Npb24/LmxvZ2luVGltZSxcbiAgICByZWdpc3RyYXRpb25UaW1lOiBzZXNzaW9uPy5yZWdpc3RyYXRpb25UaW1lXG4gIH0pO1xuXG4gIC8vIFZhbGlkYXRlIHNlc3Npb24gZXhpc3RzIGFuZCBoYXMgYXV0aGVudGljYXRpb25cbiAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmF1dGhlbnRpY2F0ZWQgfHwgIXNlc3Npb24udXNlcklkKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBObyBhdXRoZW50aWNhdGVkIHNlc3Npb24gZm91bmQnKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBTZXNzaW9uIGRldGFpbHM6Jywge1xuICAgICAgc2Vzc2lvbklkOiBzb2NrZXQucmVxdWVzdC5zZXNzaW9uSWQsXG4gICAgICBzZXNzaW9uOiAhIXNlc3Npb24sXG4gICAgICBhdXRoZW50aWNhdGVkOiBzZXNzaW9uPy5hdXRoZW50aWNhdGVkLFxuICAgICAgdXNlcklkOiBzZXNzaW9uPy51c2VySWRcbiAgICB9KTtcbiAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ1Nlc3Npb24gYXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSk7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBDU1JGIHRva2VuIGZvciBhZGRpdGlvbmFsIHNlY3VyaXR5IChtdXN0IG1hdGNoIHNlc3Npb24ncyB1bmlxdWUgQ1NSRiB0b2tlbilcbiAgaWYgKCFjc3JmVG9rZW4gfHwgIXNlc3Npb24uY3NyZlRva2VuIHx8IGNzcmZUb2tlbiAhPT0gc2Vzc2lvbi5jc3JmVG9rZW4pIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IEludmFsaWQgQ1NSRiB0b2tlbiBmaW5nZXJwcmludCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SSIEZpbmdlcnByaW50IG1pc21hdGNoIGRldGFpbHM6Jywge1xuICAgICAgcHJvdmlkZWQ6IGNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgICBleHBlY3RlZDogc2Vzc2lvbi5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgICAgbWF0Y2g6IGNzcmZUb2tlbiA9PT0gc2Vzc2lvbi5jc3JmVG9rZW5cbiAgICB9KTtcbiAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0NTUkYgdmFsaWRhdGlvbiBmYWlsZWQnKSk7XG4gIH1cblxuICBjb25zb2xlLmxvZygn4pyFIFNvY2tldCBmaW5nZXJwcmludCB2ZXJpZmljYXRpb24gc3VjY2Vzc2Z1bCcpO1xuXG4gIHRyeSB7XG4gICAgLy8gVmVyaWZ5IHVzZXIgZXhpc3RzIGluIGRhdGFiYXNlXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoc2Vzc2lvbi51c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBVc2VyIG5vdCBmb3VuZCBpbiBEQicpO1xuICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCBpbiBzZXNzaW9uJykpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB1c2VyIHN0YXR1cyB1cGRhdGUgYmFzZWQgb24gY29ubmVjdGlvbiBjb3VudFxuICAgIGNvbnN0IHVzZXJJZCA9IHNlc3Npb24udXNlcklkO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25Db3VudCA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgIGNvbnN0IG5ld0Nvbm5lY3Rpb25Db3VudCA9IGNvbm5lY3Rpb25Db3VudCArIDE7XG4gICAgdXNlckNvbm5lY3Rpb25zLnNldCh1c2VySWQsIG5ld0Nvbm5lY3Rpb25Db3VudCk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGJhbm5lZFxuICAgIGlmICh1c2VyLmlzQmFubmVkKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogVXNlciBpcyBiYW5uZWQnLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgYmFuUmVhc29uOiB1c2VyLmJhblJlYXNvbixcbiAgICAgICAgYmFuRXhwaXJlczogdXNlci5iYW5FeHBpcmVzXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdiYW5uZWQnLCB7XG4gICAgICAgIHJlYXNvbjogdXNlci5iYW5SZWFzb24gfHwgJ1lvdSBoYXZlIGJlZW4gYmFubmVkIGZyb20gdGhlIHNlcnZlcicsXG4gICAgICAgIGV4cGlyZXM6IHVzZXIuYmFuRXhwaXJlc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ1VzZXIgaXMgYmFubmVkJykpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbXV0ZWQgYW5kIGVuZm9yY2UgbXV0ZSBpbiBjaGF0XG4gICAgY29uc3QgaXNNdXRlZCA9IHVzZXIuaXNNdXRlZCgpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SHIFVzZXIgbXV0ZSBzdGF0dXMgY2hlY2tlZDonLCB7IG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLCBpc011dGVkLCBtdXRlRXhwaXJlczogdXNlci5tdXRlRXhwaXJlcyB9KTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB3aXRoIGNvbm5lY3Rpb24gY291bnQgdHJhY2tpbmdcbiAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCBVc2VyLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICB7IF9pZDogdXNlcklkIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBzdGF0dXM6IG5ld0Nvbm5lY3Rpb25Db3VudCA+IDAgPyAnb25saW5lJyA6ICdvZmZsaW5lJyxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcnVuVmFsaWRhdG9yczogdHJ1ZVxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAodXBkYXRlUmVzdWx0KSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBTb2NrZXQgYXV0aDogVXNlciAke3VzZXIubmlja25hbWV9IHN0YXR1cyBzZXQgdG8gb25saW5lIChjb25uZWN0aW9uczogJHtuZXdDb25uZWN0aW9uQ291bnR9KWApO1xuICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHVwZGF0ZWQgdG8gb25saW5lIHZpYSBzb2NrZXQgYXV0aGAsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBjb25uZWN0aW9uczogbmV3Q29ubmVjdGlvbkNvdW50LFxuICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIGxvY2FsIHVzZXIgb2JqZWN0IHdpdGggdXBkYXRlZCBkYXRhXG4gICAgdXNlci5zdGF0dXMgPSB1cGRhdGVSZXN1bHQgPyB1cGRhdGVSZXN1bHQuc3RhdHVzIDogJ29ubGluZSc7XG4gICAgdXNlci5sYXN0QWN0aXZlID0gdXBkYXRlUmVzdWx0ID8gdXBkYXRlUmVzdWx0Lmxhc3RBY3RpdmUgOiBuZXcgRGF0ZSgpO1xuXG4gICAgLy8gU2V0IHNvY2tldCBwcm9wZXJ0aWVzIGZvciBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICBzb2NrZXQudXNlcklkID0gc2Vzc2lvbi51c2VySWQ7XG4gICAgc29ja2V0Lm5pY2tuYW1lID0gc2Vzc2lvbi5uaWNrbmFtZTtcbiAgICBzb2NrZXQucm9sZSA9IHNlc3Npb24ucm9sZSB8fCAnbWVtYmVyJztcbiAgICBjb25zb2xlLmxvZyhg8J+OiSBTb2NrZXQgYXV0aGVudGljYXRlZCB2aWEgc2Vzc2lvbjogJHtzb2NrZXQubmlja25hbWV9ICh1c2VySWQ6ICR7c29ja2V0LnVzZXJJZH0pYCk7XG4gICAgY29uc29sZS5sb2coJ1NvY2tldCBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsJyk7XG4gICAgcmV0dXJuIG5leHQoKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgbG9nZ2VyLmVycm9yKGBTb2NrZXQgYXV0aCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCB7XG4gICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uPy5pZCxcbiAgICAgIGlwOiBzb2NrZXQuaGFuZHNoYWtlLmFkZHJlc3NcbiAgICB9KTtcbiAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ1NvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQnKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIENsZWFudXAgaW5hY3RpdmUgY29ubmVjdGlvbnMgYmFzZWQgb24gaGVhcnRiZWF0XG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBJbmFjdGl2ZUNvbm5lY3Rpb25zKCkge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCB0aW1lb3V0ID0gNjAwMDA7IC8vIDYwIHNlY29uZHMgdGltZW91dFxuXG4gIGZvciAoY29uc3QgW3NvY2tldElkLCB1c2VyXSBvZiBvbmxpbmVVc2Vycy5lbnRyaWVzKCkpIHtcbiAgICBpZiAobm93IC0gdXNlci5sYXN0SGVhcnRiZWF0ID4gdGltZW91dCkge1xuICAgICAgY29uc29sZS5sb2coYPCfp7kgQ2xlYW5zaW5nIGRlYWQgY29ubmVjdGlvbiBmb3IgdXNlciAke3VzZXIubmlja25hbWV9YCk7XG5cbiAgICAgIC8vIEZvcmNlIGRpc2Nvbm5lY3Qgc29ja2V0XG4gICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB1c2VyIGNvbm5lY3Rpb25zIGNvdW50XG4gICAgICBjb25zdCBjb25uZWN0aW9uc0xlZnQgPSAodXNlckNvbm5lY3Rpb25zLmdldCh1c2VyLnVzZXJJZCkgfHwgMCkgLSAxO1xuICAgICAgdXNlckNvbm5lY3Rpb25zLnNldCh1c2VyLnVzZXJJZCwgTWF0aC5tYXgoMCwgY29ubmVjdGlvbnNMZWZ0KSk7XG5cbiAgICAgIC8vIFNldCBzdGF0dXMgdG8gb2ZmbGluZSBpZiBsYXN0IGNvbm5lY3Rpb25cbiAgICAgIGlmIChjb25uZWN0aW9uc0xlZnQgPD0gMCkge1xuICAgICAgICBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXIudXNlcklkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gbG9nZ2VyLmVycm9yKCdFcnJvciB1cGRhdGluZyBzdGF0dXMgb24gY2xlYW51cDonLCBlcnIpKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBVc2VyICR7dXNlci5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvZmZsaW5lIChkZWFkIGNvbm5lY3Rpb24pYCk7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHN0YXR1cyBzZXQgdG8gb2ZmbGluZSBkdWUgdG8gZGVhZCBjb25uZWN0aW9uYCwge1xuICAgICAgICAgIHVzZXJJZDogdXNlci51c2VySWQsXG4gICAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgICAgc29ja2V0SWQ6IHNvY2tldElkXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBvbmxpbmVVc2Vycy5kZWxldGUoc29ja2V0SWQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBSdW4gY2xlYW51cCBldmVyeSAzMCBzZWNvbmRzIC0gRElTQUJMRUQgZm9yIHRlc3QgZW52aXJvbm1lbnRcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gIHNldEludGVydmFsKGNsZWFudXBJbmFjdGl2ZUNvbm5lY3Rpb25zLCAzMDAwMCk7XG59XG5cbmlvLm9uKCdjb25uZWN0aW9uJywgYXN5bmMgKHNvY2tldCkgPT4ge1xuICBjb25zb2xlLmxvZygn8J+agCBTb2NrZXQgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xuICBjb25zb2xlLmxvZyhg8J+RpCBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBjb25uZWN0ZWRgKTtcblxuICAvLyBUcmFjayBvbmxpbmUgdXNlclxuICBvbmxpbmVVc2Vycy5zZXQoc29ja2V0LmlkLCB7XG4gICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgcm9sZTogc29ja2V0LnJvbGUsXG4gICAgcm9vbTogbnVsbCxcbiAgICBsYXN0SGVhcnRiZWF0OiBEYXRlLm5vdygpXG4gIH0pO1xuXG4gIC8vIExvZyBjdXJyZW50IGFjdGl2ZSBjb25uZWN0aW9ucyBjb3VudFxuICBjb25zb2xlLmxvZyhg8J+TiiBBY3RpdmUgc29ja2V0IGNvbm5lY3Rpb25zOiAke29ubGluZVVzZXJzLnNpemV9IC0gYXV0aCBzdWNjZXNzIGZvciAke3NvY2tldC5uaWNrbmFtZX1gKTtcblxuICAvLyBFbmhhbmNlZCBoZWFydGJlYXQgbWVjaGFuaXNtIHdpdGggcmVjb25uZWN0aW9uIGxvZ2ljXG4gIHNvY2tldC5vbignaGVhcnRiZWF0JywgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBvbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIHVzZXIubGFzdEhlYXJ0YmVhdCA9IG5vdztcbiAgICAgIGNvbnNvbGUubG9nKGDwn5KTIEhlYXJ0YmVhdCByZWNlaXZlZCBmcm9tIHVzZXIgJHtzb2NrZXQubmlja25hbWV9IGF0ICR7bmV3IERhdGUobm93KS50b0lTT1N0cmluZygpfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIud2FybihgSGVhcnRiZWF0IHJlY2VpdmVkIGZyb20gdW5rbm93biBzb2NrZXQ6ICR7c29ja2V0LmlkfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVXBkYXRlIGhlYXJ0YmVhdCBvbiB1c2VyIGFjdGl2aXR5XG4gIGNvbnN0IHVwZGF0ZUhlYXJ0YmVhdCA9ICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gb25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHVzZXIubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNlbmQgaGVhcnRiZWF0IHRvIGNsaWVudCBwZXJpb2RpY2FsbHlcbiAgY29uc3QgaGVhcnRiZWF0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgaWYgKHNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgIHNvY2tldC5lbWl0KCdoZWFydGJlYXRfcmVxdWVzdCcpO1xuICAgIH1cbiAgfSwgMTUwMDApOyAvLyBTZW5kIGhlYXJ0YmVhdCBldmVyeSAxNSBzZWNvbmRzXG5cbiAgLy8gQ2xlYXIgaW50ZXJ2YWwgb24gZGlzY29ubmVjdFxuICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChoZWFydGJlYXRJbnRlcnZhbCk7XG4gICAgLy8gLi4uIHJlc3Qgb2YgZGlzY29ubmVjdCBsb2dpY1xuICB9KTtcblxuICAvLyBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyeWluZyBkYXRhYmFzZSBvcGVyYXRpb25zXG4gIGNvbnN0IHJldHJ5RGF0YWJhc2VPcGVyYXRpb24gPSBhc3luYyAob3BlcmF0aW9uLCByZXRyaWVzID0gMykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHJldHJpZXM7IGkrKykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGkgPT09IHJldHJpZXMpIHRocm93IGVycm9yO1xuICAgICAgICBsb2dnZXIud2FybihgRGF0YWJhc2Ugb3BlcmF0aW9uIGZhaWxlZCwgcmV0cnkgJHtpICsgMX0vJHtyZXRyaWVzfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCAqIChpICsgMSkpKTsgLy8gRXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBzb2NrZXQub24oJ2pvaW5fcm9vbScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgY29uc3QgeyByb29tIH0gPSBkYXRhO1xuICAgIGlmICghcm9vbSkge1xuICAgICAgbG9nZ2VyLndhcm4oJ0pvaW4gcm9vbSBmYWlsZWQ6IE5vIHJvb20gc3BlY2lmaWVkJywge1xuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnUm9vbSBuYW1lIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ01JU1NJTkdfUk9PTScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJvb20gIT09ICdzdHJpbmcnIHx8IHJvb20udHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ0pvaW4gcm9vbSBmYWlsZWQ6IEludmFsaWQgcm9vbSBmb3JtYXQnLCB7XG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgcm9vbVxuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHJvb20gbmFtZSBmb3JtYXQnLFxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9ST09NX0ZPUk1BVCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcmV0cnlEYXRhYmFzZU9wZXJhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIFZlcmlmeSBjaGFubmVsIGV4aXN0c1xuICAgICAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kT25lKHsgaWQ6IHJvb20gfSk7XG4gICAgICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgICAgIGxvZ2dlci53YXJuKCdKb2luIHJvb20gZmFpbGVkOiBDaGFubmVsIG5vdCBmb3VuZCcsIHtcbiAgICAgICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgICByb29tXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgbWVzc2FnZTogYENoYW5uZWwgJyR7cm9vbX0nIG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQ0hBTk5FTF9OT1RfRk9VTkQnLFxuICAgICAgICAgICAgcm9vbSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFubmVsIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTGVhdmUgcHJldmlvdXMgcm9vbVxuICAgICAgICBpZiAoc29ja2V0LnJvb20pIHtcbiAgICAgICAgICBzb2NrZXQubGVhdmUoc29ja2V0LnJvb20pO1xuICAgICAgICAgIG9ubGluZVVzZXJzLnNldChzb2NrZXQuaWQsIHsgLi4ub25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCksIHJvb206IG51bGwgfSk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgb25saW5lIHVzZXJzIGluIHByZXZpb3VzIHJvb21cbiAgICAgICAgICBjb25zdCBwcmV2aW91c1Jvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcHJldmlvdXNSb29tVXNlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgc29ja2V0LnJvb20gPSByb29tO1xuICAgICAgICBzb2NrZXQuam9pbihzb2NrZXQucm9vbSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHVzZXIgdHJhY2tpbmdcbiAgICAgICAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwge1xuICAgICAgICAgIC4uLm9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBqb2luZWQgcm9vbSAke3NvY2tldC5yb29tfWApO1xuXG4gICAgICAgIC8vIFNlbmQgc3lzdGVtIG1lc3NhZ2UgYWJvdXQgam9pbmluZ1xuICAgICAgICBjb25zdCBqb2luTWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgICBhdXRob3I6ICdTeXN0ZW0nLFxuICAgICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAgIHRleHQ6IGAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHRoZSBjaGFubmVsLmAsXG4gICAgICAgICAgdHlwZTogJ3N5c3RlbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGpvaW5NZXNzYWdlLnNhdmUoKTtcblxuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnbWVzc2FnZScsIHtcbiAgICAgICAgICBhdXRob3I6IGpvaW5NZXNzYWdlLmF1dGhvcixcbiAgICAgICAgICBjaGFubmVsOiBqb2luTWVzc2FnZS5jaGFubmVsLFxuICAgICAgICAgIHRleHQ6IGpvaW5NZXNzYWdlLnRleHQsXG4gICAgICAgICAgdHlwZTogam9pbk1lc3NhZ2UudHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IGpvaW5NZXNzYWdlLnRpbWVzdGFtcFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZW5kIG9ubGluZSB1c2VycyBpbiBjdXJyZW50IHJvb21cbiAgICAgICAgY29uc3Qgcm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvbGU6IHUucm9sZSB9KSk7XG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCByb29tVXNlcnMpO1xuXG4gICAgICAgIC8vIFNlbmQgbWVzc2FnZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBNZXNzYWdlLmZpbmQoe1xuICAgICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAgICRvcjogW1xuICAgICAgICAgICAgeyB0eXBlOiAncHVibGljJyB9LFxuICAgICAgICAgICAgeyB0eXBlOiAnc3lzdGVtJyB9LFxuICAgICAgICAgICAgeyBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSB9LFxuICAgICAgICAgICAgeyB0YXJnZXQ6IHNvY2tldC5uaWNrbmFtZSB9XG4gICAgICAgICAgXVxuICAgICAgICB9KVxuICAgICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAtMSB9KVxuICAgICAgICAgIC5saW1pdCgxMDApXG4gICAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IDEgfSk7IC8vIFJlc29ydCBmb3IgY2hyb25vbG9naWNhbCBvcmRlclxuXG4gICAgICAgIHNvY2tldC5lbWl0KCdoaXN0b3J5JywgaGlzdG9yeS5tYXAobXNnID0+ICh7XG4gICAgICAgICAgYXV0aG9yOiBtc2cuYXV0aG9yLFxuICAgICAgICAgIHJvb206IG1zZy5jaGFubmVsLFxuICAgICAgICAgIHRleHQ6IG1zZy50ZXh0LFxuICAgICAgICAgIHR5cGU6IG1zZy50eXBlLFxuICAgICAgICAgIHRhcmdldDogbXNnLnRhcmdldCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG1zZy50aW1lc3RhbXBcbiAgICAgICAgfSkpKTtcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gam9pbl9yb29tIGFmdGVyIHJldHJpZXM6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGpvaW4gcm9vbSBhZnRlciBtdWx0aXBsZSBhdHRlbXB0cycsXG4gICAgICAgIGNvZGU6ICdKT0lOX1JPT01fRkFJTEVEJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTG9hZCBoaXN0b3J5IChmYWxsYmFjaywgaWYgbmVlZGVkKVxuICBzb2NrZXQub24oJ2dldF9oaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgIGlmICghc29ja2V0LnJvb20pIHtcbiAgICAgIHNvY2tldC5lbWl0KCdoaXN0b3J5JywgW10pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgTWVzc2FnZS5maW5kKHtcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICRvcjogW1xuICAgICAgICAgIHsgdHlwZTogJ3B1YmxpYycgfSxcbiAgICAgICAgICB7IHR5cGU6ICdzeXN0ZW0nIH0sXG4gICAgICAgICAgeyBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSB9LFxuICAgICAgICAgIHsgdGFyZ2V0OiBzb2NrZXQubmlja25hbWUgfVxuICAgICAgICBdXG4gICAgICB9KVxuICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogLTEgfSlcbiAgICAgICAgLmxpbWl0KDEwMClcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IDEgfSk7IC8vIFJlc29ydCBmb3IgY2hyb25vbG9naWNhbCBvcmRlclxuXG4gICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIGhpc3RvcnkubWFwKG1zZyA9PiAoe1xuICAgICAgICBhdXRob3I6IG1zZy5hdXRob3IsXG4gICAgICAgIHJvb206IG1zZy5jaGFubmVsLCAvLyBVc2luZyBjaGFubmVsIGluc3RlYWQgb2Ygcm9vbSBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgdGV4dDogbXNnLnRleHQsXG4gICAgICAgIHR5cGU6IG1zZy50eXBlLFxuICAgICAgICB0YXJnZXQ6IG1zZy50YXJnZXQsXG4gICAgICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcFxuICAgICAgfSkpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGxvYWQgbWVzc2FnZSBoaXN0b3J5JyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBtZXNzYWdlXG4gIHNvY2tldC5vbignbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQucm9vbSB8fCAhZGF0YS50ZXh0Py50cmltKCkpIHJldHVybjtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbXV0ZWRcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoc29ja2V0LnVzZXJJZCk7XG4gICAgaWYgKGN1cnJlbnRVc2VyICYmIGN1cnJlbnRVc2VyLmlzTXV0ZWQoKSkge1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnWW91IGFyZSBtdXRlZCBhbmQgY2Fubm90IHNlbmQgbWVzc2FnZXMnLFxuICAgICAgICBjb2RlOiAnVVNFUl9NVVRFRCcsXG4gICAgICAgIG11dGVFeHBpcmVzOiBjdXJyZW50VXNlci5tdXRlRXhwaXJlc1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG4gICAgICAgIGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgdGV4dDogZGF0YS50ZXh0LnRyaW0oKSxcbiAgICAgICAgdHlwZTogJ3B1YmxpYydcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBtZXNzYWdlLnNhdmUoKTtcblxuICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB7XG4gICAgICAgIGF1dGhvcjogbWVzc2FnZS5hdXRob3IsXG4gICAgICAgIHJvb206IG1lc3NhZ2UuY2hhbm5lbCwgLy8gS2VlcGluZyAncm9vbScgZm9yIGZyb250ZW5kIGNvbXBhdGliaWxpdHlcbiAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wLFxuICAgICAgICBzdGF0dXM6ICdkZWxpdmVyZWQnLFxuICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGVcbiAgICAgIH07XG5cbiAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZURhdGEpO1xuICAgICAgbG9nZ2VyLmRlYnVnKGBNZXNzYWdlIHNhdmVkIGZyb20gJHtzb2NrZXQubmlja25hbWV9IGluICR7c29ja2V0LnJvb219YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2F2aW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHNlbmQgbWVzc2FnZScgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQcml2YXRlIG1lc3NhZ2VcbiAgc29ja2V0Lm9uKCdwcml2YXRlX21lc3NhZ2UnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGlmICghc29ja2V0LnJvb20gfHwgIWRhdGEudG8gfHwgIWRhdGEudGV4dD8udHJpbSgpKSByZXR1cm47XG5cbiAgICBjb25zdCB0cmltbWVkVGV4dCA9IGRhdGEudGV4dC50cmltKCk7XG4gICAgY29uc3QgdGFyZ2V0Tmlja25hbWUgPSBkYXRhLnRvLnRyaW0oKTtcblxuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuZGVidWcoYFByaXZhdGUgbWVzc2FnZSBhdHRlbXB0IGZyb20gJHtzb2NrZXQubmlja25hbWV9IHRvICR7dGFyZ2V0Tmlja25hbWV9YCwge1xuICAgICAgICBzZW5kZXJSb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgc2VuZGVyU29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkXG4gICAgICB9KTtcblxuICAgICAgLy8gVmFsaWRhdGUgdGFyZ2V0IG5pY2tuYW1lIGZvcm1hdFxuICAgICAgaWYgKHRhcmdldE5pY2tuYW1lLmxlbmd0aCA9PT0gMCB8fCB0YXJnZXROaWNrbmFtZS5sZW5ndGggPiA1MCkge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgdGFyZ2V0IHVzZXIgbmlja25hbWUnLFxuICAgICAgICAgIGNvZGU6ICdJTlZBTElEX1RBUkdFVF9OSUNLTkFNRSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJldmVudCBzZWxmLW1lc3NhZ2luZ1xuICAgICAgaWYgKHRhcmdldE5pY2tuYW1lID09PSBzb2NrZXQubmlja25hbWUpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6ICdDYW5ub3Qgc2VuZCBwcml2YXRlIG1lc3NhZ2UgdG8geW91cnNlbGYnLFxuICAgICAgICAgIGNvZGU6ICdTRUxGX01FU1NBR0VfTk9UX0FMTE9XRUQnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgdGFyZ2V0IHVzZXIgaW4gc2FtZSByb29tIHdpdGggZGV0YWlsZWQgbG9nZ2luZ1xuICAgICAgY29uc3QgdGFyZ2V0VXNlciA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpLmZpbmQoXG4gICAgICAgIHUgPT4gdS5uaWNrbmFtZSA9PT0gdGFyZ2V0Tmlja25hbWUgJiYgdS5yb29tID09PSBzb2NrZXQucm9vbVxuICAgICAgKTtcblxuICAgICAgbG9nZ2VyLmRlYnVnKGBQcml2YXRlIG1lc3NhZ2UgdGFyZ2V0IHNlYXJjaCByZXN1bHQgZm9yICR7dGFyZ2V0Tmlja25hbWV9YCwge1xuICAgICAgICB0YXJnZXRGb3VuZDogISF0YXJnZXRVc2VyLFxuICAgICAgICB0YXJnZXRSb29tOiB0YXJnZXRVc2VyPy5yb29tLFxuICAgICAgICBzZW5kZXJSb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgb25saW5lVXNlcnNJblJvb206IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb29tOiB1LnJvb20gfSkpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0YXJnZXRVc2VyKSB7XG4gICAgICAgIC8vIEVuaGFuY2VkIGVycm9yIG1lc3NhZ2Ugd2l0aCBtb3JlIGNvbnRleHRcbiAgICAgICAgY29uc3Qgb25saW5lVXNlcnNJblNlbmRlclJvb20gPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiB1Lm5pY2tuYW1lKTtcblxuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogYFVzZXIgJyR7dGFyZ2V0Tmlja25hbWV9JyBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgY2hhbm5lbC4gQXZhaWxhYmxlIHVzZXJzOiAke29ubGluZVVzZXJzSW5TZW5kZXJSb29tLmpvaW4oJywgJykgfHwgJ25vbmUnfWAsXG4gICAgICAgICAgY29kZTogJ1RBUkdFVF9VU0VSX05PVF9JTl9ST09NJyxcbiAgICAgICAgICB0YXJnZXQ6IHRhcmdldE5pY2tuYW1lLFxuICAgICAgICAgIGF2YWlsYWJsZVVzZXJzOiBvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbSxcbiAgICAgICAgICBzZW5kZXJSb29tOiBzb2NrZXQucm9vbVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgbWVzc2FnZSBvYmplY3RcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG4gICAgICAgIGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgdGV4dDogdHJpbW1lZFRleHQsXG4gICAgICAgIHR5cGU6ICdwcml2YXRlJyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROaWNrbmFtZVxuICAgICAgfSk7XG4gICAgICBhd2FpdCBtZXNzYWdlLnNhdmUoKTtcblxuICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB7XG4gICAgICAgIGF1dGhvcjogbWVzc2FnZS5hdXRob3IsXG4gICAgICAgIHJvb206IG1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wLFxuICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsXG4gICAgICAgIHRhcmdldDogbWVzc2FnZS50YXJnZXQsXG4gICAgICAgIHN0YXR1czogJ2RlbGl2ZXJlZCdcbiAgICAgIH07XG5cbiAgICAgIC8vIFNlbmQgdG8gdGFyZ2V0IHVzZXIgd2l0aCBlcnJvciBoYW5kbGluZ1xuICAgICAgY29uc3QgdGFyZ2V0U29ja2V0SWQgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLmtleXMoKSkuZmluZChcbiAgICAgICAgaWQgPT4gb25saW5lVXNlcnMuZ2V0KGlkKS5uaWNrbmFtZSA9PT0gdGFyZ2V0Tmlja25hbWVcbiAgICAgICk7XG5cbiAgICAgIGlmICh0YXJnZXRTb2NrZXRJZCkge1xuICAgICAgICBpby50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgncHJpdmF0ZV9tZXNzYWdlJywgbWVzc2FnZURhdGEpO1xuICAgICAgICBsb2dnZXIuZGVidWcoYFByaXZhdGUgbWVzc2FnZSBzZW50IHRvIHRhcmdldCAke3RhcmdldE5pY2tuYW1lfWAsIHtcbiAgICAgICAgICB0YXJnZXRTb2NrZXRJZDogdGFyZ2V0U29ja2V0SWQsXG4gICAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLl9pZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci53YXJuKGBUYXJnZXQgdXNlciAke3RhcmdldE5pY2tuYW1lfSBmb3VuZCBpbiBvbmxpbmVVc2VycyBidXQgc29ja2V0IElEIG5vdCBmb3VuZGAsIHtcbiAgICAgICAgICB0YXJnZXROaWNrbmFtZSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICBvbmxpbmVVc2Vyc0NvdW50OiBvbmxpbmVVc2Vycy5zaXplLFxuICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5faWRcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE1lc3NhZ2Ugc3RpbGwgc2F2ZWQgdG8gZGF0YWJhc2UgZm9yIGxhdGVyIGRlbGl2ZXJ5IGlmIHVzZXIgcmVjb25uZWN0c1xuICAgICAgfVxuXG4gICAgICAvLyBTZW5kIGNvbmZpcm1hdGlvbiB0byBzZW5kZXIgKHdpdGhvdXQgdGFyZ2V0IGZvciBwcml2YWN5KVxuICAgICAgc29ja2V0LmVtaXQoJ3ByaXZhdGVfbWVzc2FnZScsIHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5yb29tLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBudWxsLCAvLyBIaWRlIHRhcmdldCBmcm9tIHNlbmRlcidzIGNvbmZpcm1hdGlvblxuICAgICAgICBzdGF0dXM6ICdzZW50J1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBQcml2YXRlIG1lc3NhZ2Ugc2VudCBzdWNjZXNzZnVsbHlgLCB7XG4gICAgICAgIHNlbmRlcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5pY2tuYW1lLFxuICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLl9pZCxcbiAgICAgICAgbWVzc2FnZUxlbmd0aDogdHJpbW1lZFRleHQubGVuZ3RoXG4gICAgICB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgcHJpdmF0ZSBtZXNzYWdlOicsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHNlbmRlcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICB0YXJnZXQ6IGRhdGEudG8sXG4gICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2VuZCBwcml2YXRlIG1lc3NhZ2UnLFxuICAgICAgICBjb2RlOiAnUFJJVkFURV9NRVNTQUdFX0ZBSUxFRCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gU3BlYWtpbmdcbiAgc29ja2V0Lm9uKCdzcGVha2luZycsIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgc29ja2V0LnRvKHNvY2tldC5yb29tKS5lbWl0KCdzcGVha2luZycsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc3BlYWtpbmc6IGRhdGEuc3BlYWtpbmcgfSk7XG4gIH0pO1xuXG4gIC8vIFZvaWNlIGNoYW5uZWwgZXZlbnRzXG4gIHNvY2tldC5vbignam9pbl92b2ljZV9jaGFubmVsJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBjb25zdCB7IGNoYW5uZWxJZCB9ID0gZGF0YTtcbiAgICBpZiAoIWNoYW5uZWxJZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFZlcmlmeSBjaGFubmVsIGV4aXN0cyBhbmQgaXMgdm9pY2VcbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBDaGFubmVsLmZpbmRPbmUoeyBpZDogY2hhbm5lbElkLCB0eXBlOiAndm9pY2UnIH0pO1xuICAgICAgaWYgKCFjaGFubmVsKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCd2b2ljZV9lcnJvcicsIHsgbWVzc2FnZTogJ1ZvaWNlIGNoYW5uZWwgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbml0aWFsaXplIHZvaWNlIGNoYW5uZWwgaWYgbm90IGV4aXN0c1xuICAgICAgaWYgKCF2b2ljZUNoYW5uZWxzLmhhcyhjaGFubmVsSWQpKSB7XG4gICAgICAgIHZvaWNlQ2hhbm5lbHMuc2V0KGNoYW5uZWxJZCwgbmV3IE1hcCgpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hhbm5lbFBlZXJzID0gdm9pY2VDaGFubmVscy5nZXQoY2hhbm5lbElkKTtcblxuICAgICAgLy8gTm90aWZ5IG90aGVycyBpbiB0aGUgY2hhbm5lbFxuICAgICAgc29ja2V0LnRvKGNoYW5uZWxJZCkuZW1pdCgndXNlcl9qb2luZWRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG5cbiAgICAgIC8vIEFkZCBzb2NrZXQgdG8gdm9pY2UgY2hhbm5lbCByb29tXG4gICAgICBzb2NrZXQuam9pbihjaGFubmVsSWQpO1xuICAgICAgY2hhbm5lbFBlZXJzLnNldChzb2NrZXQuaWQsIHsgcGVlckNvbm5lY3Rpb246IG51bGwsIHN0cmVhbTogbnVsbCB9KTtcblxuICAgICAgLy8gVXBkYXRlIHVzZXIncyB2b2ljZSBjaGFubmVsIHN0YXR1c1xuICAgICAgc29ja2V0LnZvaWNlQ2hhbm5lbCA9IGNoYW5uZWxJZDtcblxuICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGpvaW5lZCB2b2ljZSBjaGFubmVsICR7Y2hhbm5lbElkfWApO1xuICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2pvaW5lZCcsIHsgY2hhbm5lbElkIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igam9pbmluZyB2b2ljZSBjaGFubmVsOicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCd2b2ljZV9lcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBqb2luIHZvaWNlIGNoYW5uZWwnIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdsZWF2ZV92b2ljZV9jaGFubmVsJywgKCkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGlmICghc29ja2V0LnZvaWNlQ2hhbm5lbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgY2hhbm5lbElkID0gc29ja2V0LnZvaWNlQ2hhbm5lbDtcbiAgICBjb25zdCBjaGFubmVsUGVlcnMgPSB2b2ljZUNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgaWYgKGNoYW5uZWxQZWVycykge1xuICAgICAgY2hhbm5lbFBlZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuICAgICAgaWYgKGNoYW5uZWxQZWVycy5zaXplID09PSAwKSB7XG4gICAgICAgIHZvaWNlQ2hhbm5lbHMuZGVsZXRlKGNoYW5uZWxJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm90aWZ5IG90aGVyc1xuICAgIHNvY2tldC50byhjaGFubmVsSWQpLmVtaXQoJ3VzZXJfbGVmdF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcblxuICAgIHNvY2tldC5sZWF2ZShjaGFubmVsSWQpO1xuICAgIHNvY2tldC52b2ljZUNoYW5uZWwgPSBudWxsO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGxlZnQgdm9pY2UgY2hhbm5lbCAke2NoYW5uZWxJZH1gKTtcbiAgICBzb2NrZXQuZW1pdCgndm9pY2VfbGVmdCcpO1xuICB9KTtcblxuICBzb2NrZXQub24oJ3ZvaWNlX29mZmVyJywgKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IG9mZmVyLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ3ZvaWNlX29mZmVyJywge1xuICAgICAgb2ZmZXIsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICBzb2NrZXQub24oJ3ZvaWNlX2Fuc3dlcicsIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBhbnN3ZXIsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgndm9pY2VfYW5zd2VyJywge1xuICAgICAgYW5zd2VyLFxuICAgICAgZnJvbTogc29ja2V0LmlkLFxuICAgICAgZnJvbU5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdpY2VfY2FuZGlkYXRlJywgKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IGNhbmRpZGF0ZSwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCdpY2VfY2FuZGlkYXRlJywge1xuICAgICAgY2FuZGlkYXRlLFxuICAgICAgZnJvbTogc29ja2V0LmlkLFxuICAgICAgZnJvbU5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gRGlzY29ubmVjdFxuICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGRpc2Nvbm5lY3RlZGApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHNvY2tldC51c2VySWQ7XG5cbiAgICAgIC8vIERlY3JlYXNlIGNvbm5lY3Rpb24gY291bnQgZm9yIHRoaXMgdXNlclxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSB1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXJJZCkgfHwgMDtcbiAgICAgICAgY29uc3QgbmV3Q291bnQgPSBNYXRoLm1heCgwLCBjdXJyZW50Q291bnQgLSAxKTtcbiAgICAgICAgdXNlckNvbm5lY3Rpb25zLnNldCh1c2VySWQsIG5ld0NvdW50KTtcblxuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gZGlzY29ubmVjdGVkIChyZW1haW5pbmcgY29ubmVjdGlvbnM6ICR7bmV3Q291bnR9KWAsIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICAgIGNvbm5lY3Rpb25zTGVmdDogbmV3Q291bnRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExlYXZlIHZvaWNlIGNoYW5uZWwgaWYgaW4gb25lXG4gICAgICBpZiAoc29ja2V0LnZvaWNlQ2hhbm5lbCkge1xuICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBzb2NrZXQudm9pY2VDaGFubmVsO1xuICAgICAgICBjb25zdCBjaGFubmVsUGVlcnMgPSB2b2ljZUNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgICAgIGlmIChjaGFubmVsUGVlcnMpIHtcbiAgICAgICAgICBjaGFubmVsUGVlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG4gICAgICAgICAgaWYgKGNoYW5uZWxQZWVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB2b2ljZUNoYW5uZWxzLmRlbGV0ZShjaGFubmVsSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vdGlmeSBvdGhlcnNcbiAgICAgICAgc29ja2V0LnRvKGNoYW5uZWxJZCkuZW1pdCgndXNlcl9sZWZ0X3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc29ja2V0LnJvb20pIHtcbiAgICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tKTtcblxuICAgICAgICAvLyBDcmVhdGUgbGVhdmUgbWVzc2FnZVxuICAgICAgICBjb25zdCBsZWF2ZU1lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG4gICAgICAgICAgYXV0aG9yOiAnU3lzdGVtJyxcbiAgICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICB0ZXh0OiBgJHtzb2NrZXQubmlja25hbWV9IGxlZnQgdGhlIGNoYW5uZWwuYCxcbiAgICAgICAgICB0eXBlOiAnc3lzdGVtJ1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgbGVhdmVNZXNzYWdlLnNhdmUoKTtcblxuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnbWVzc2FnZScsIHtcbiAgICAgICAgICBhdXRob3I6IGxlYXZlTWVzc2FnZS5hdXRob3IsXG4gICAgICAgICAgcm9vbTogbGVhdmVNZXNzYWdlLmNoYW5uZWwsXG4gICAgICAgICAgdGV4dDogbGVhdmVNZXNzYWdlLnRleHQsXG4gICAgICAgICAgdHlwZTogbGVhdmVNZXNzYWdlLnR5cGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBsZWF2ZU1lc3NhZ2UudGltZXN0YW1wXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmxpbmUgdXNlcnMgbGlzdFxuICAgICAgICBjb25zdCByb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tICYmIHUudXNlcklkICE9PSBzb2NrZXQudXNlcklkKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHJvb21Vc2Vycyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBmcm9tIHRyYWNraW5nXG4gICAgICBvbmxpbmVVc2Vycy5kZWxldGUoc29ja2V0LmlkKTtcblxuICAgICAgLy8gTG9nIGN1cnJlbnQgY29ubmVjdGlvbnMgYWZ0ZXIgZGlzY29ubmVjdFxuICAgICAgbG9nZ2VyLmluZm8oYEFmdGVyIGRpc2Nvbm5lY3QsIGFjdGl2ZSBzb2NrZXQgY29ubmVjdGlvbnM6ICR7b25saW5lVXNlcnMuc2l6ZX1gKTtcblxuICAgICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIGluIGRhdGFiYXNlIGlmIHRoaXMgd2FzIHRoZSBsYXN0IGNvbm5lY3Rpb25cbiAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQ29ubmVjdGlvbnMgPSB1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXJJZCkgfHwgMDtcbiAgICAgICAgaWYgKHJlbWFpbmluZ0Nvbm5lY3Rpb25zID09PSAwKSB7XG4gICAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VySWQsIHtcbiAgICAgICAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFVzZXIgJHtzb2NrZXQubmlja25hbWV9IHN0YXR1cyBzZXQgdG8gb2ZmbGluZSAobGFzdCBjb25uZWN0aW9uKWApO1xuICAgICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHN0YXR1cyBzZXQgdG8gb2ZmbGluZSAobGFzdCBjb25uZWN0aW9uKWAsIHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFVwZGF0ZSBsYXN0QWN0aXZlIGJ1dCBrZWVwIHN0YXR1cyBvbmxpbmVcbiAgICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xuICAgICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gc3RpbGwgb25saW5lICgke3JlbWFpbmluZ0Nvbm5lY3Rpb25zfSBjb25uZWN0aW9ucyBsZWZ0KWApO1xuICAgICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHJlbWFpbnMgb25saW5lYCwge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICAgICAgY29ubmVjdGlvbnNMZWZ0OiByZW1haW5pbmdDb25uZWN0aW9uc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBkaXNjb25uZWN0IGhhbmRsZXI6JywgZXJyb3IpO1xuICAgIH1cbiB9KTtcbn0pO1xuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIGFuZCBzdGFydCBzZXJ2ZXIgKGR1cGxpY2F0ZSByZW1vdmVkKVxuY29uc3QgaW5pdGlhbGl6ZVNlcnZlciA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDb25uZWN0IHRvIE1vbmdvREJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcblxuICAgIC8vIENyZWF0ZSBkZWZhdWx0IGNoYW5uZWxzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBjb25zdCBkZWZhdWx0Q2hhbm5lbHMgPSBbXG4gICAgICB7IGlkOiAnZ2VuZXJhbCcsIG5hbWU6ICdHZW5lcmFsJywgdHlwZTogJ3RleHQnLCBjcmVhdGVkQnk6ICdzeXN0ZW0nIH0sXG4gICAgICB7IGlkOiAndm9pY2UtY2hhdCcsIG5hbWU6ICdWb2ljZSBDaGF0JywgdHlwZTogJ3ZvaWNlJywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9XG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgY2hhbm5lbERhdGEgb2YgZGVmYXVsdENoYW5uZWxzKSB7XG4gICAgICBhd2FpdCBDaGFubmVsLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgIHsgaWQ6IGNoYW5uZWxEYXRhLmlkIH0sXG4gICAgICAgIGNoYW5uZWxEYXRhLFxuICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oJ0RlZmF1bHQgY2hhbm5lbHMgaW5pdGlhbGl6ZWQnKTtcblxuICAgIC8vIFN0YXJ0IHNlcnZlclxuICAgIGNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDE7XG4gICAgc2VydmVyLmxpc3RlbihQT1JULCAnMC4wLjAuMCcsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBTZXJ2ZXIgcnVubmluZyBvbiBwb3J0ICR7UE9SVH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBwb3J0ICR7UE9SVH1gKTtcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgc2VydmVyOicsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn07XG5cbi8vIEdyYWNlZnVsIHNodXRkb3duXG5wcm9jZXNzLm9uKCdTSUdJTlQnLCBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdSZWNlaXZlZCBTSUdJTlQsIHNodXR0aW5nIGRvd24gZ3JhY2VmdWxseS4uLicpO1xuICBhd2FpdCBjbG9zZURCKCk7XG4gIGlvLmNsb3NlKCgpID0+IHtcbiAgICBsb2dnZXIuaW5mbygnU2VydmVyIHNodXQgZG93bicpO1xuICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgfSk7XG59KTtcblxucHJvY2Vzcy5vbignU0lHVEVSTScsIGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlY2VpdmVkIFNJR1RFUk0sIHNodXR0aW5nIGRvd24gZ3JhY2VmdWxseS4uLicpO1xuICBhd2FpdCBjbG9zZURCKCk7XG4gIGlvLmNsb3NlKCgpID0+IHtcbiAgICBsb2dnZXIuaW5mbygnU2VydmVyIHNodXQgZG93bicpO1xuICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgfSk7XG59KTtcblxuLy8gT3B0aW1pemUgY3JpdGljYWwgc2VydmVyIGZ1bmN0aW9uc1xuY29uc3Qgb3B0aW1pemVkSW5pdGlhbGl6ZURhdGFiYXNlID0gYXN5bmNPcHRpbWl6ZShpbml0aWFsaXplU2VydmVyLCB7XG4gIGNvbmN1cnJlbmN5OiAxLFxuICB0aW1lb3V0OiA2MDAwMCxcbiAgc2xvd1RocmVzaG9sZDogMTAwMDBcbn0pO1xuXG4vLyBTdGFydCB0aGUgc2VydmVyIHdpdGggYXN5bmMgb3B0aW1pemF0aW9uXG5vcHRpbWl6ZWRJbml0aWFsaXplRGF0YWJhc2UoKS5jYXRjaChlcnIgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvciBkdXJpbmcgc2VydmVyIHN0YXJ0dXA6JywgZXJyKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG5cbi8vIE1lbW9yeSBjbGVhbnVwIG9uIGxvbmctcnVubmluZyBvcGVyYXRpb25zXG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGlmIChnbG9iYWwuZ2MpIHtcbiAgICBnbG9iYWwuZ2MoKTtcbiAgICBsb2dnZXIuZGVidWcoJ01hbnVhbCBnYXJiYWdlIGNvbGxlY3Rpb24gdHJpZ2dlcmVkJyk7XG4gIH1cbn0sIDMwMDAwMCk7IC8vIEV2ZXJ5IDUgbWludXRlc1xuXG4vLyBIYW5kbGUgdW5jYXVnaHQgZXhjZXB0aW9ucyB3aXRoIGNpcmN1aXQgYnJlYWtlciBwcm90ZWN0aW9uXG5wcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnJvcikgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuY2F1Z2h0IEV4Y2VwdGlvbjonLCBlcnJvcik7XG4gIC8vIERvbid0IGV4aXQgaW1tZWRpYXRlbHksIGxldCBjaXJjdWl0IGJyZWFrZXIgaGFuZGxlIHJlY292ZXJ5XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmIChleHRlcm5hbFNlcnZpY2VCcmVha2VyLmRhdGFiYXNlQnJlYWtlci5mYWlsdXJlQ291bnQgPiAxMCkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdNdWx0aXBsZSB1bmNhdWdodCBleGNlcHRpb25zIGRldGVjdGVkLCBmb3JjaW5nIGdyYWNlZnVsIHNodXRkb3duJyk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9LCAxMDAwKTtcbn0pO1xuXG4vLyBIYW5kbGUgdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uc1xucHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xuICAvLyBEb24ndCBleGl0LCBqdXN0IGxvZyBhbmQgbGV0IGNpcmN1aXQgYnJlYWtlciBoYW5kbGVcbn0pO1xuXG4vLyBHcmFjZWZ1bCBzaHV0ZG93biB3aXRoIHJlc291cmNlIGNsZWFudXBcbnByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdTSUdURVJNIHJlY2VpdmVkLCBzdGFydGluZyBncmFjZWZ1bCBzaHV0ZG93bi4uLicpO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2xvc2UgZXh0ZXJuYWwgc2VydmljZSBjb25uZWN0aW9uc1xuICAgIGNvbnN0IGNpcmN1aXRTdGF0dXMgPSBnZXRDaXJjdWl0QnJlYWtlclN0YXR1c2VzKCk7XG4gICAgbG9nZ2VyLmluZm8oJ0NpcmN1aXQgYnJlYWtlciBmaW5hbCBzdGF0dXM6JywgY2lyY3VpdFN0YXR1cyk7XG5cbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVtYWluaW5nIHJlc291cmNlc1xuICAgIGF3YWl0IGNsb3NlREIoKTtcblxuICAgIC8vIExvZyBmaW5hbCBtZXRyaWNzXG4gICAgY29uc3QgZmluYWxNZXRyaWNzID0gcGVyZm9ybWFuY2VNb25pdG9yLmdldERldGFpbGVkU3RhdHMoKTtcblxuICAgIGxvZ2dlci5pbmZvKCdGaW5hbCBwZXJmb3JtYW5jZSBtZXRyaWNzOicsIHtcbiAgICAgIHVwdGltZTogZmluYWxNZXRyaWNzLnVwdGltZSxcbiAgICAgIHRvdGFsUmVxdWVzdHM6IGZpbmFsTWV0cmljcy5lbmRwb2ludFN0YXRzXG4gICAgICAgID8gT2JqZWN0LnZhbHVlcyhmaW5hbE1ldHJpY3MuZW5kcG9pbnRTdGF0cykucmVkdWNlKChhY2MsIGVuZHBvaW50KSA9PlxuICAgICAgICAgICAgYWNjICsgKGVuZHBvaW50LmNvdW50IHx8IDApLCAwKVxuICAgICAgICA6IDAsXG4gICAgICBtZW1vcnlQZWFrOiBmaW5hbE1ldHJpY3MubWVtb3J5Py5oZWFwVG90YWwgfHwgMFxuICAgIH0pO1xuXG4gICAgaW8uY2xvc2UoKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oJ1NlcnZlciBncmFjZWZ1bCBzaHV0ZG93biBjb21wbGV0ZScpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZHVyaW5nIGdyYWNlZnVsIHNodXRkb3duOicsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn0pO1xuXG4vLyBQZXJpb2RpYyBoZWFsdGggc2VsZi1hc3Nlc3NtZW50XG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGNvbnN0IGhlYWx0aERhdGEgPSBwZXJmb3JtYW5jZU1vbml0b3IuZ2V0SGVhbHRoRGF0YSgpO1xuXG4gIC8vIFNlbGYtbW9uaXRvciBjcml0aWNhbCBtZXRyaWNzXG4gIGlmIChoZWFsdGhEYXRhLnJlcXVlc3RzLmF2ZXJhZ2VSZXNwb25zZVRpbWUgPiA1MDAwKSB7XG4gICAgbG9nZ2VyLndhcm4oJ/CfmqggU2VsZi1tb25pdG9yOiBIaWdoIGF2ZXJhZ2UgcmVzcG9uc2UgdGltZSBkZXRlY3RlZCcsIHtcbiAgICAgIGF2Z1RpbWU6IGAke2hlYWx0aERhdGEucmVxdWVzdHMuYXZlcmFnZVJlc3BvbnNlVGltZX1tc2AsXG4gICAgICB0aHJlc2hvbGQ6ICc1MDAwbXMnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChoZWFsdGhEYXRhLm1lbW9yeS51c2FnZVBlcmNlbnQgPiAwLjkpIHtcbiAgICBsb2dnZXIud2Fybign8J+aqCBTZWxmLW1vbml0b3I6IEhpZ2ggbWVtb3J5IHVzYWdlIGRldGVjdGVkJywge1xuICAgICAgdXNhZ2U6IGhlYWx0aERhdGEubWVtb3J5LnBlcmNlbnRhZ2UsXG4gICAgICB0aHJlc2hvbGQ6ICc5MCUnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIC8vIFRyaWdnZXIgcHJvYWN0aXZlIGNsZWFudXBcbiAgICBpZiAoZ2xvYmFsLmdjKSB7XG4gICAgICBnbG9iYWwuZ2MoKTtcbiAgICAgIGxvZ2dlci5pbmZvKCfwn6e5IFByb2FjdGl2ZSBnYXJiYWdlIGNvbGxlY3Rpb24gdHJpZ2dlcmVkJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgY2lyY3VpdCBicmVha2VyIHN0YXR1c1xuICBjb25zdCBjaXJjdWl0U3RhdHVzID0gZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlcygpO1xuICBpZiAoY2lyY3VpdFN0YXR1cy5kYXRhYmFzZT8uc3RhdGUgPT09ICdvcGVuJykge1xuICAgIGxvZ2dlci53YXJuKCfwn5qoIFNlbGYtbW9uaXRvcjogRGF0YWJhc2UgY2lyY3VpdCBicmVha2VyIGlzIE9QRU4nLCBjaXJjdWl0U3RhdHVzLmRhdGFiYXNlKTtcbiAgfVxuXG4gIGlmIChjaXJjdWl0U3RhdHVzLnJlZGlzPy5zdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgbG9nZ2VyLndhcm4oJ/CfmqggU2VsZi1tb25pdG9yOiBSZWRpcyBjaXJjdWl0IGJyZWFrZXIgaXMgT1BFTicsIGNpcmN1aXRTdGF0dXMucmVkaXMpO1xuICB9XG5cbn0sIDYwMDAwKTsgLy8gQ2hlY2sgZXZlcnkgbWludXRlXG4iXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQzFCLE1BQU1DLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUksUUFBUSxHQUFHSixPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3JDLE1BQU1LLEdBQUcsR0FBR0wsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTU8sT0FBTyxHQUFHUCxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1RLFlBQVksR0FBR1IsT0FBTyxDQUFDLGVBQWUs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QU8sQ0FBQ3VYLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQWxFLFdBQVcsQ0FBQyxNQUFNO0VBQ2hCLE1BQU11RixVQUFVLEdBQUcvYSxrQkFBa0IsQ0FBQ2diLGFBQWEsQ0FBQyxDQUFDOztFQUVyRDtFQUNBLElBQUlELFVBQVUsQ0FBQ0UsUUFBUSxDQUFDQyxtQkFBbUIsR0FBRyxJQUFJLEVBQUU7SUFDbERyYSxNQUFNLENBQUM4TSxJQUFJLENBQUMsc0RBQXNELEVBQUU7TUFDbEV3TixPQUFPLEVBQUUsR0FBR0osVUFBVSxDQUFDRSxRQUFRLENBQUNDLG1CQUFtQixJQUFJO01BQ3ZERSxTQUFTLEVBQUUsUUFBUTtNQUNuQmxhLFNBQVMsRUFBRSxJQUFJMkYsSUFBSSxDQUFDLENBQUMsQ0FBQzhJLFdBQVcsQ0FBQztJQUNwQyxDQUFDLENBQUM7RUFDSjtFQUVBLElBQUlvTCxVQUFVLENBQUNGLE1BQU0sQ0FBQ1EsWUFBWSxHQUFHLEdBQUcsRUFBRTtJQUN4Q3hhLE1BQU0sQ0FBQzhNLElBQUksQ0FBQyw2Q0FBNkMsRUFBRTtNQUN6RDJOLEtBQUssRUFBRVAsVUFBVSxDQUFDRixNQUFNLENBQUNVLFVBQVU7TUFDbkNILFNBQVMsRUFBRSxLQUFLO01BQ2hCbGEsU0FBUyxFQUFFLElBQUkyRixJQUFJLENBQUMsQ0FBQyxDQUFDOEksV0FBVyxDQUFDO0lBQ3BDLENBQUMsQ0FBQzs7SUFFRjtJQUNBLElBQUlvSyxNQUFNLENBQUNDLEVBQUUsRUFBRTtNQUNiRCxNQUFNLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ1huWixNQUFNLENBQUNtRyxJQUFJLENBQUMsMkNBQTJDLENBQUM7SUFDMUQ7RUFDRjs7RUFFQTtFQUNBLE1BQU1vVCxhQUFhLEdBQUc1Wix5QkFBeUIsQ0FBQyxDQUFDO0VBQ2pELElBQUk0WixhQUFhLENBQUNvQixRQUFRLEVBQUVDLEtBQUssS0FBSyxNQUFNLEVBQUU7SUFDNUM1YSxNQUFNLENBQUM4TSxJQUFJLENBQUMsbURBQW1ELEVBQUV5TSxhQUFhLENBQUNvQixRQUFRLENBQUM7RUFDMUY7RUFFQSxJQUFJcEIsYUFBYSxDQUFDc0IsS0FBSyxFQUFFRCxLQUFLLEtBQUssTUFBTSxFQUFFO0lBQ3pDNWEsTUFBTSxDQUFDOE0sSUFBSSxDQUFDLGdEQUFnRCxFQUFFeU0sYUFBYSxDQUFDc0IsS0FBSyxDQUFDO0VBQ3BGO0FBRUYsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=