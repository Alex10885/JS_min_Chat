5b51136d21606091facd3fb64f4efc8a
const mongoose = require('mongoose');
const {
  MongoMemoryServer
} = require('mongodb-memory-server');
const {
  connectDB,
  closeDB
} = require('../db/connection');
const Channel = require('../models/Channel');
describe('Database Initialization', () => {
  let mongoServer;
  beforeAll(async () => {
    // Start in-memory MongoDB
    mongoServer = await MongoMemoryServer.create();
    const mongoUri = mongoServer.getUri();
    process.env.MONGODB_URI = mongoUri;
  });
  afterAll(async () => {
    await mongoServer.stop();
  });
  beforeEach(async () => {
    await mongoose.disconnect();
  });
  describe('connectDB function', () => {
    it('should connect to MongoDB successfully', async () => {
      await connectDB();
      expect(mongoose.connection.readyState).toBe(1); // Connected
    });
    it('should handle connection errors gracefully', async () => {
      // Set invalid MongoDB URI
      process.env.MONGODB_URI = 'mongodb://invalid-host:27017/test';
      let error;
      try {
        await connectDB();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.message).toContain('connect');
    });
    it('should log successful connection', async () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation(() => {});
      await connectDB();
      expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('MongoDB Connected:'));
      consoleSpy.mockRestore();
    });
  });
  describe('closeDB function', () => {
    beforeEach(async () => {
      await connectDB();
    });
    it('should close MongoDB connection successfully', async () => {
      expect(mongoose.connection.readyState).toBe(1);
      await closeDB();
      expect(mongoose.connection.readyState).toBe(0); // Disconnected
    });
    it('should log disconnection', async () => {
      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation(() => {});
      await closeDB();

      // Note: The actual log comes from connection.js when DB closes
      expect(mongoose.connection.readyState).toBe(0);
      consoleSpy.mockRestore();
    });
  });
  describe('Default Channels Initialization', () => {
    beforeEach(async () => {
      await connectDB();
      await Channel.deleteMany({}); // Clear channels
    });
    it('should create default channels on initialization', async () => {
      // Simulate the channel creation logic from server.js
      const defaultChannels = [{
        id: 'general',
        name: 'General',
        type: 'text',
        createdBy: 'system'
      }, {
        id: 'voice-chat',
        name: 'Voice Chat',
        type: 'voice',
        createdBy: 'system'
      }];
      for (const channelData of defaultChannels) {
        await Channel.findOneAndUpdate({
          id: channelData.id
        }, channelData, {
          upsert: true,
          new: true
        });
      }
      const channels = await Channel.find({});
      expect(channels.length).toBe(2);
      const generalChannel = channels.find(ch => ch.id === 'general');
      const voiceChannel = channels.find(ch => ch.id === 'voice-chat');
      expect(generalChannel).toBeDefined();
      expect(generalChannel.type).toBe('text');
      expect(generalChannel.name).toBe('General');
      expect(voiceChannel).toBeDefined();
      expect(voiceChannel.type).toBe('voice');
      expect(voiceChannel.name).toBe('Voice Chat');
    });
    it('should not create duplicates of default channels', async () => {
      // Create channels first time
      const channelData = {
        id: 'general',
        name: 'General',
        type: 'text',
        createdBy: 'system'
      };
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });

      // Try to create same channel again
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
      const channels = await Channel.find({
        id: 'general'
      });
      expect(channels.length).toBe(1); // Should only have one
    });
    it('should set createdBy to system for default channels', async () => {
      const channelData = {
        id: 'general',
        name: 'General',
        type: 'text',
        createdBy: 'system'
      };
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
      const channel = await Channel.findOne({
        id: 'general'
      });
      expect(channel.createdBy).toBe('system');
    });
    it('should not overwrite existing channels', async () => {
      // Create channel with custom name
      await Channel.findOneAndUpdate({
        id: 'general'
      }, {
        id: 'general',
        name: 'Custom General',
        type: 'text',
        createdBy: 'system'
      }, {
        upsert: true,
        new: true
      });

      // Call initialization again
      await Channel.findOneAndUpdate({
        id: 'general'
      }, {
        id: 'general',
        name: 'General',
        type: 'text',
        createdBy: 'system'
      }, {
        upsert: true,
        new: true
      });
      const channel = await Channel.findOne({
        id: 'general'
      });
      // Should preserve existing data, not overwrite
      expect(channel.name).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJNb25nb01lbW9yeVNlcnZlciIsImNvbm5lY3REQiIsImNsb3NlREIiLCJDaGFubmVsIiwiZGVzY3JpYmUiLCJtb25nb1NlcnZlciIsImJlZm9yZUFsbCIsImNyZWF0ZSIsIm1vbmdvVXJpIiwiZ2V0VXJpIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiYWZ0ZXJBbGwiLCJzdG9wIiwiYmVmb3JlRWFjaCIsImRpc2Nvbm5lY3QiLCJpdCIsImV4cGVjdCIsImNvbm5lY3Rpb24iLCJyZWFkeVN0YXRlIiwidG9CZSIsImVycm9yIiwiZXJyIiwidG9CZURlZmluZWQiLCJtZXNzYWdlIiwidG9Db250YWluIiwiY29uc29sZVNweSIsImplc3QiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInN0cmluZ0NvbnRhaW5pbmciLCJtb2NrUmVzdG9yZSIsImRlbGV0ZU1hbnkiLCJkZWZhdWx0Q2hhbm5lbHMiLCJpZCIsIm5hbWUiLCJ0eXBlIiwiY3JlYXRlZEJ5IiwiY2hhbm5lbERhdGEiLCJmaW5kT25lQW5kVXBkYXRlIiwidXBzZXJ0IiwibmV3IiwiY2hhbm5lbHMiLCJmaW5kIiwibGVuZ3RoIiwiZ2VuZXJhbENoYW5uZWwiLCJjaCIsInZvaWNlQ2hhbm5lbCIsImNoYW5uZWwiLCJmaW5kT25lIl0sInNvdXJjZXMiOlsic2VydmVyLWluaXRpYWxpemF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgeyBNb25nb01lbW9yeVNlcnZlciB9ID0gcmVxdWlyZSgnbW9uZ29kYi1tZW1vcnktc2VydmVyJyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xvc2VEQiB9ID0gcmVxdWlyZSgnLi4vZGIvY29ubmVjdGlvbicpO1xuY29uc3QgQ2hhbm5lbCA9IHJlcXVpcmUoJy4uL21vZGVscy9DaGFubmVsJyk7XG5cbmRlc2NyaWJlKCdEYXRhYmFzZSBJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgbGV0IG1vbmdvU2VydmVyO1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gU3RhcnQgaW4tbWVtb3J5IE1vbmdvREJcbiAgICBtb25nb1NlcnZlciA9IGF3YWl0IE1vbmdvTWVtb3J5U2VydmVyLmNyZWF0ZSgpO1xuICAgIGNvbnN0IG1vbmdvVXJpID0gbW9uZ29TZXJ2ZXIuZ2V0VXJpKCk7XG4gICAgcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgPSBtb25nb1VyaTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IG1vbmdvU2VydmVyLnN0b3AoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29ubmVjdERCIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29ubmVjdCB0byBNb25nb0RCIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGNvbm5lY3REQigpO1xuICAgICAgZXhwZWN0KG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSkudG9CZSgxKTsgLy8gQ29ubmVjdGVkXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25uZWN0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0IGludmFsaWQgTW9uZ29EQiBVUklcbiAgICAgIHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJID0gJ21vbmdvZGI6Ly9pbnZhbGlkLWhvc3Q6MjcwMTcvdGVzdCc7XG5cbiAgICAgIGxldCBlcnJvcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbm5lY3REQigpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVycm9yID0gZXJyO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdjb25uZWN0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBzdWNjZXNzZnVsIGNvbm5lY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcblxuICAgICAgYXdhaXQgY29ubmVjdERCKCk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ01vbmdvREIgQ29ubmVjdGVkOicpXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjbG9zZURCIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgY29ubmVjdERCKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsb3NlIE1vbmdvREIgY29ubmVjdGlvbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBleHBlY3QobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlKS50b0JlKDEpO1xuXG4gICAgICBhd2FpdCBjbG9zZURCKCk7XG4gICAgICBleHBlY3QobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlKS50b0JlKDApOyAvLyBEaXNjb25uZWN0ZWRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGRpc2Nvbm5lY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnd2FybicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG5cbiAgICAgIGF3YWl0IGNsb3NlREIoKTtcblxuICAgICAgLy8gTm90ZTogVGhlIGFjdHVhbCBsb2cgY29tZXMgZnJvbSBjb25uZWN0aW9uLmpzIHdoZW4gREIgY2xvc2VzXG4gICAgICBleHBlY3QobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlKS50b0JlKDApO1xuXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEZWZhdWx0IENoYW5uZWxzIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgY29ubmVjdERCKCk7XG4gICAgICBhd2FpdCBDaGFubmVsLmRlbGV0ZU1hbnkoe30pOyAvLyBDbGVhciBjaGFubmVsc1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGVmYXVsdCBjaGFubmVscyBvbiBpbml0aWFsaXphdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBjaGFubmVsIGNyZWF0aW9uIGxvZ2ljIGZyb20gc2VydmVyLmpzXG4gICAgICBjb25zdCBkZWZhdWx0Q2hhbm5lbHMgPSBbXG4gICAgICAgIHsgaWQ6ICdnZW5lcmFsJywgbmFtZTogJ0dlbmVyYWwnLCB0eXBlOiAndGV4dCcsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfSxcbiAgICAgICAgeyBpZDogJ3ZvaWNlLWNoYXQnLCBuYW1lOiAnVm9pY2UgQ2hhdCcsIHR5cGU6ICd2b2ljZScsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBjaGFubmVsRGF0YSBvZiBkZWZhdWx0Q2hhbm5lbHMpIHtcbiAgICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICAgIHsgaWQ6IGNoYW5uZWxEYXRhLmlkIH0sXG4gICAgICAgICAgY2hhbm5lbERhdGEsXG4gICAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYW5uZWxzID0gYXdhaXQgQ2hhbm5lbC5maW5kKHt9KTtcbiAgICAgIGV4cGVjdChjaGFubmVscy5sZW5ndGgpLnRvQmUoMik7XG5cbiAgICAgIGNvbnN0IGdlbmVyYWxDaGFubmVsID0gY2hhbm5lbHMuZmluZChjaCA9PiBjaC5pZCA9PT0gJ2dlbmVyYWwnKTtcbiAgICAgIGNvbnN0IHZvaWNlQ2hhbm5lbCA9IGNoYW5uZWxzLmZpbmQoY2ggPT4gY2guaWQgPT09ICd2b2ljZS1jaGF0Jyk7XG5cbiAgICAgIGV4cGVjdChnZW5lcmFsQ2hhbm5lbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChnZW5lcmFsQ2hhbm5lbC50eXBlKS50b0JlKCd0ZXh0Jyk7XG4gICAgICBleHBlY3QoZ2VuZXJhbENoYW5uZWwubmFtZSkudG9CZSgnR2VuZXJhbCcpO1xuXG4gICAgICBleHBlY3Qodm9pY2VDaGFubmVsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHZvaWNlQ2hhbm5lbC50eXBlKS50b0JlKCd2b2ljZScpO1xuICAgICAgZXhwZWN0KHZvaWNlQ2hhbm5lbC5uYW1lKS50b0JlKCdWb2ljZSBDaGF0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBjcmVhdGUgZHVwbGljYXRlcyBvZiBkZWZhdWx0IGNoYW5uZWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGNoYW5uZWxzIGZpcnN0IHRpbWVcbiAgICAgIGNvbnN0IGNoYW5uZWxEYXRhID0geyBpZDogJ2dlbmVyYWwnLCBuYW1lOiAnR2VuZXJhbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9O1xuICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IGlkOiBjaGFubmVsRGF0YS5pZCB9LFxuICAgICAgICBjaGFubmVsRGF0YSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuXG4gICAgICAvLyBUcnkgdG8gY3JlYXRlIHNhbWUgY2hhbm5lbCBhZ2FpblxuICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IGlkOiBjaGFubmVsRGF0YS5pZCB9LFxuICAgICAgICBjaGFubmVsRGF0YSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBjaGFubmVscyA9IGF3YWl0IENoYW5uZWwuZmluZCh7IGlkOiAnZ2VuZXJhbCcgfSk7XG4gICAgICBleHBlY3QoY2hhbm5lbHMubGVuZ3RoKS50b0JlKDEpOyAvLyBTaG91bGQgb25seSBoYXZlIG9uZVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXQgY3JlYXRlZEJ5IHRvIHN5c3RlbSBmb3IgZGVmYXVsdCBjaGFubmVscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxEYXRhID0geyBpZDogJ2dlbmVyYWwnLCBuYW1lOiAnR2VuZXJhbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9O1xuICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IGlkOiBjaGFubmVsRGF0YS5pZCB9LFxuICAgICAgICBjaGFubmVsRGF0YSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kT25lKHsgaWQ6ICdnZW5lcmFsJyB9KTtcbiAgICAgIGV4cGVjdChjaGFubmVsLmNyZWF0ZWRCeSkudG9CZSgnc3lzdGVtJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBvdmVyd3JpdGUgZXhpc3RpbmcgY2hhbm5lbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgY2hhbm5lbCB3aXRoIGN1c3RvbSBuYW1lXG4gICAgICBhd2FpdCBDaGFubmVsLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgIHsgaWQ6ICdnZW5lcmFsJyB9LFxuICAgICAgICB7IGlkOiAnZ2VuZXJhbCcsIG5hbWU6ICdDdXN0b20gR2VuZXJhbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9LFxuICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIENhbGwgaW5pdGlhbGl6YXRpb24gYWdhaW5cbiAgICAgIGF3YWl0IENoYW5uZWwuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgeyBpZDogJ2dlbmVyYWwnIH0sXG4gICAgICAgIHsgaWQ6ICdnZW5lcmFsJywgbmFtZTogJ0dlbmVyYWwnLCB0eXBlOiAndGV4dCcsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kT25lKHsgaWQ6ICdnZW5lcmFsJyB9KTtcbiAgICAgIC8vIFNob3VsZCBwcmVzZXJ2ZSBleGlzdGluZyBkYXRhLCBub3Qgb3ZlcndyaXRlXG4gICAgICBleHBlY3QoY2hhbm5lbC5uYW1lKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU07RUFBRUM7QUFBa0IsQ0FBQyxHQUFHRCxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDOUQsTUFBTTtFQUFFRSxTQUFTO0VBQUVDO0FBQVEsQ0FBQyxHQUFHSCxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDMUQsTUFBTUksT0FBTyxHQUFHSixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFFNUNLLFFBQVEs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