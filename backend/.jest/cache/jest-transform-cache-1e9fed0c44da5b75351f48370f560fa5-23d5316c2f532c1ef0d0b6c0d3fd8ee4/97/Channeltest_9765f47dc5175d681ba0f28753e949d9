4f1401e77ad8d69a434d62a180078fdb
const Channel = require('../../models/Channel');
describe('Channel Model', () => {
  describe('Channel Creation', () => {
    it('should create a channel with valid data', async () => {
      const channelData = {
        id: 'test-channel',
        name: 'Test Channel',
        type: 'text',
        createdBy: 'testuser'
      };
      const channel = new Channel(channelData);
      const savedChannel = await channel.save();
      expect(savedChannel.id).toBe(channelData.id);
      expect(savedChannel.name).toBe(channelData.name);
      expect(savedChannel.type).toBe(channelData.type);
      expect(savedChannel.createdBy).toBe(channelData.createdBy);
      expect(savedChannel.position).toBe(0);
      expect(savedChannel.locked).toBe(false);
    });
    it('should require id, name, type and createdBy', async () => {
      const channel = new Channel({});
      let error;
      try {
        await channel.save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.errors.id).toBeDefined();
      expect(error.errors.name).toBeDefined();
      expect(error.errors.type).toBeDefined();
      expect(error.errors.createdBy).toBeDefined();
    });
    it('should enforce channel name length limits', async () => {
      const longName = 'a'.repeat(101);
      const channel = new Channel({
        id: 'test',
        name: longName,
        type: 'text',
        createdBy: 'testuser'
      });
      let error;
      try {
        await channel.save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.errors.name).toBeDefined();
    });
  });
  describe('Channel Types', () => {
    it('should support text and voice channel types', async () => {
      const types = ['text', 'voice'];
      for (const type of types) {
        const channel = new Channel({
          id: `${type}-channel`,
          name: `${type} Channel`,
          type: type,
          createdBy: 'testuser'
        });
        const savedChannel = await channel.save();
        expect(savedChannel.type).toBe(type);
      }
    });
    it('should reject invalid channel types', async () => {
      const channel = new Channel({
        id: 'invalid-channel',
        name: 'Invalid Channel',
        type: 'invalid',
        createdBy: 'testuser'
      });
      let error;
      try {
        await channel.save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.errors.type).toBeDefined();
    });
  });
  describe('Channel Properties', () => {
    it('should handle optional properties correctly', async () => {
      const channelData = {
        id: 'optional-channel',
        name: 'Optional Channel',
        type: 'voice',
        createdBy: 'testuser',
        description: 'Channel description',
        position: 5,
        locked: true
      };
      const channel = new Channel(channelData);
      const savedChannel = await channel.save();
      expect(savedChannel.description).toBe(channelData.description);
      expect(savedChannel.position).toBe(channelData.position);
      expect(savedChannel.locked).toBe(channelData.locked);
    });
    it('should set default values', async () => {
      const channel = new Channel({
        id: 'default-channel',
        name: 'Default Channel',
        type: 'text',
        createdBy: 'testuser'
      });
      const savedChannel = await channel.save();
      expect(savedChannel.position).toBe(0);
      expect(savedChannel.locked).toBe(false);
      expect(savedChannel.parent).toBeNull();
      expect(savedChannel.permissions.read).toBe('everyone');
      expect(savedChannel.permissions.write).toBe('everyone');
    });
  });
  describe('Permissions', () => {
    it('should enforce permission enums', async () => {
      const channel = new Channel({
        id: 'permission-channel',
        name: 'Permission Channel',
        type: 'text',
        createdBy: 'testuser',
        permissions: {
          read: 'invalid',
          write: 'invalid'
        }
      });
      let error;
      try {
        await channel.save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.errors['permissions.read']).toBeDefined();
      expect(error.errors['permissions.write']).toBeDefined();
    });
  });
  describe('Unique Constraints', () => {
    it('should enforce unique channel IDs', async () => {
      const channelData1 = {
        id: 'unique-channel',
        name: 'Unique Channel 1',
        type: 'text',
        createdBy: 'testuser'
      };
      const channelData2 = {
        id: 'unique-channel',
        name: 'Unique Channel 2',
        type: 'text',
        createdBy: 'testuser'
      };
      await new Channel(channelData1).save();
      let error;
      try {
        await new Channel(channelData2).save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.code).toBe(11000); // MongoDB duplicate key error
    });
  });
  describe('Channel Positioning', () => {
    it('should sort channels by position', async () => {
      // Create channels with different positions
      const channels = [{
        id: 'first',
        name: 'First Channel',
        type: 'text',
        createdBy: 'testuser',
        position: 1
      }, {
        id: 'second',
        name: 'Second Channel',
        type: 'text',
        createdBy: 'testuser',
        position: 2
      }, {
        id: 'third',
        name: 'Third Channel',
        type: 'text',
        createdBy: 'testuser',
        position: 0
      }];
      for (const channelData of channels) {
        await new Channel(channelData).save();
      }
      const sortedChannels = await Channel.find().sort({
        position: 1
      });
      expect(sortedChannels[0].position).toBe(0);
      expect(sortedChannels[1].position).toBe(1);
      expect(sortedChannels[2].position).toBe(2);
    });
    it('should handle position updates', async () => {
      const channel = new Channel({
        id: 'position-test',
        name: 'Position Test',
        type: 'text',
        createdBy: 'testuser',
        position: 5
      });
      await channel.save();
      expect(channel.position).toBe(5);

      // Update position
      channel.position = 10;
      await channel.save();
      const updatedChannel = await Channel.findById(channel._id);
      expect(updatedChannel.position).toBe(10);
    });
  });
  describe('Channel Locking', () => {
    it('should handle locked channels', async () => {
      const channel = new Channel({
        id: 'locked-test',
        name: 'Locked Channel',
        type: 'text',
        createdBy: 'admin',
        locked: true
      });
      await channel.save();
      expect(channel.locked).toBe(true);

      // Update lock status
      channel.locked = false;
      await channel.save();
      const updatedChannel = await Channel.findById(channel._id);
      expect(updatedChannel.locked).toBe(false);
    });
  });
  describe('Channel Categories', () => {
    it('should handle parent channels', async () => {
      const parentChannel = new Channel({
        id: 'parent-category',
        name: 'Parent Category',
        type: 'text',
        createdBy: 'testuser'
      });
      await parentChannel.save();
      const childChannel = new Channel({
        id: 'child-channel',
        name: 'Child Channel',
        type: 'text',
        createdBy: 'testuser',
        parent: parentChannel._id
      });
      await childChannel.save();
      expect(childChannel.parent.toString()).toBe(parentChannel._id.toString());
    });
    it('should allow null parent for root channels', async () => {
      const channel = new Channel({
        id: 'root-channel',
        name: 'Root Channel',
        type: 'text',
        createdBy: 'testuser',
        parent: null
      });
      await channel.save();
      expect(channel.parent).toBeNull();
    });
  });
  describe('Created By Reference', () => {
    it('should store createdBy nickname', async () => {
      const channel = new Channel({
        id: 'creator-test',
        name: 'Creator Test',
        type: 'text',
        createdBy: 'admin-user-123'
      });
      await channel.save();
      expect(channel.createdBy).toBe('admin-user-123');
    });
  });
  describe('ID Sanitization', () => {
    it('should accept valid ID formats', async () => {
      const validIds = ['general', 'voice_chat', 'channel_123', 'test-channel'];
      for (const id of validIds) {
        const channel = new Channel({
          id: id,
          name: 'Test Channel',
          type: 'text',
          createdBy: 'testuser'
        });
        const savedChannel = await channel.save();
        expect(savedChannel.id).toBe(id);
      }
    });
    it('should handle empty ID', async () => {
      const channel = new Channel({
        id: '',
        name: 'Empty ID',
        type: 'text',
        createdBy: 'testuser'
      });
      let error;
      try {
        await channel.save();
      } catch (err) {
        error = err;
      }
      expect(error).toBeDefined();
      expect(error.errors.id).toBeDefined();
    });
  });
  describe('Timestamps', () => {
    it('should set createdAt and updatedAt timestamps', async () => {
      const beforeCreate = new Date();
      const channel = new Channel({
        id: 'timestamp-test',
        name: 'Timestamp Test',
        type: 'text',
        createdBy: 'testuser'
      });
      const savedChannel = await channel.save();
      const afterCreate = new Date();
      expect(savedChannel.createdAt).toBeDefined();
      expect(savedChannel.updatedAt).toBeDefined();
      expect(savedChannel.createdAt.getTime()).toBeGreaterThanOrEqual(beforeCreate.getTime());
      expect(savedChannel.createdAt.getTime()).toBeLessThanOrEqual(afterCreate.getTime());
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGFubmVsIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiaXQiLCJjaGFubmVsRGF0YSIsImlkIiwibmFtZSIsInR5cGUiLCJjcmVhdGVkQnkiLCJjaGFubmVsIiwic2F2ZWRDaGFubmVsIiwic2F2ZSIsImV4cGVjdCIsInRvQmUiLCJwb3NpdGlvbiIsImxvY2tlZCIsImVycm9yIiwiZXJyIiwidG9CZURlZmluZWQiLCJlcnJvcnMiLCJsb25nTmFtZSIsInJlcGVhdCIsInR5cGVzIiwiZGVzY3JpcHRpb24iLCJwYXJlbnQiLCJ0b0JlTnVsbCIsInBlcm1pc3Npb25zIiwicmVhZCIsIndyaXRlIiwiY2hhbm5lbERhdGExIiwiY2hhbm5lbERhdGEyIiwiY29kZSIsImNoYW5uZWxzIiwic29ydGVkQ2hhbm5lbHMiLCJmaW5kIiwic29ydCIsInVwZGF0ZWRDaGFubmVsIiwiZmluZEJ5SWQiLCJfaWQiLCJwYXJlbnRDaGFubmVsIiwiY2hpbGRDaGFubmVsIiwidG9TdHJpbmciLCJ2YWxpZElkcyIsImJlZm9yZUNyZWF0ZSIsIkRhdGUiLCJhZnRlckNyZWF0ZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImdldFRpbWUiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidG9CZUxlc3NUaGFuT3JFcXVhbCJdLCJzb3VyY2VzIjpbIkNoYW5uZWwudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDaGFubmVsID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL0NoYW5uZWwnKTtcblxuZGVzY3JpYmUoJ0NoYW5uZWwgTW9kZWwnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdDaGFubmVsIENyZWF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgY2hhbm5lbCB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsRGF0YSA9IHtcbiAgICAgICAgaWQ6ICd0ZXN0LWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnVGVzdCBDaGFubmVsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbChjaGFubmVsRGF0YSk7XG4gICAgICBjb25zdCBzYXZlZENoYW5uZWwgPSBhd2FpdCBjaGFubmVsLnNhdmUoKTtcblxuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5pZCkudG9CZShjaGFubmVsRGF0YS5pZCk7XG4gICAgICBleHBlY3Qoc2F2ZWRDaGFubmVsLm5hbWUpLnRvQmUoY2hhbm5lbERhdGEubmFtZSk7XG4gICAgICBleHBlY3Qoc2F2ZWRDaGFubmVsLnR5cGUpLnRvQmUoY2hhbm5lbERhdGEudHlwZSk7XG4gICAgICBleHBlY3Qoc2F2ZWRDaGFubmVsLmNyZWF0ZWRCeSkudG9CZShjaGFubmVsRGF0YS5jcmVhdGVkQnkpO1xuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5wb3NpdGlvbikudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwubG9ja2VkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBpZCwgbmFtZSwgdHlwZSBhbmQgY3JlYXRlZEJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHt9KTtcbiAgICAgIGxldCBlcnJvcjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlcnJvci5lcnJvcnMuaWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IuZXJyb3JzLm5hbWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IuZXJyb3JzLnR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IuZXJyb3JzLmNyZWF0ZWRCeSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5mb3JjZSBjaGFubmVsIG5hbWUgbGVuZ3RoIGxpbWl0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdOYW1lID0gJ2EnLnJlcGVhdCgxMDEpO1xuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgaWQ6ICd0ZXN0JyxcbiAgICAgICAgbmFtZTogbG9uZ05hbWUsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInXG4gICAgICB9KTtcblxuICAgICAgbGV0IGVycm9yO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlcnJvci5lcnJvcnMubmFtZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NoYW5uZWwgVHlwZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHRleHQgYW5kIHZvaWNlIGNoYW5uZWwgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0eXBlcyA9IFsndGV4dCcsICd2b2ljZSddO1xuXG4gICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgdHlwZXMpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgICBpZDogYCR7dHlwZX0tY2hhbm5lbGAsXG4gICAgICAgICAgbmFtZTogYCR7dHlwZX0gQ2hhbm5lbGAsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2F2ZWRDaGFubmVsID0gYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwudHlwZSkudG9CZSh0eXBlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgY2hhbm5lbCB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbCh7XG4gICAgICAgIGlkOiAnaW52YWxpZC1jaGFubmVsJyxcbiAgICAgICAgbmFtZTogJ0ludmFsaWQgQ2hhbm5lbCcsXG4gICAgICAgIHR5cGU6ICdpbnZhbGlkJyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInXG4gICAgICB9KTtcblxuICAgICAgbGV0IGVycm9yO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlcnJvci5lcnJvcnMudHlwZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NoYW5uZWwgUHJvcGVydGllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcHRpb25hbCBwcm9wZXJ0aWVzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxEYXRhID0ge1xuICAgICAgICBpZDogJ29wdGlvbmFsLWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnT3B0aW9uYWwgQ2hhbm5lbCcsXG4gICAgICAgIHR5cGU6ICd2b2ljZScsXG4gICAgICAgIGNyZWF0ZWRCeTogJ3Rlc3R1c2VyJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgcG9zaXRpb246IDUsXG4gICAgICAgIGxvY2tlZDogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKGNoYW5uZWxEYXRhKTtcbiAgICAgIGNvbnN0IHNhdmVkQ2hhbm5lbCA9IGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuXG4gICAgICBleHBlY3Qoc2F2ZWRDaGFubmVsLmRlc2NyaXB0aW9uKS50b0JlKGNoYW5uZWxEYXRhLmRlc2NyaXB0aW9uKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwucG9zaXRpb24pLnRvQmUoY2hhbm5lbERhdGEucG9zaXRpb24pO1xuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5sb2NrZWQpLnRvQmUoY2hhbm5lbERhdGEubG9ja2VkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGRlZmF1bHQgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgaWQ6ICdkZWZhdWx0LWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnRGVmYXVsdCBDaGFubmVsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzYXZlZENoYW5uZWwgPSBhd2FpdCBjaGFubmVsLnNhdmUoKTtcblxuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5wb3NpdGlvbikudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwubG9ja2VkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwucGFyZW50KS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5wZXJtaXNzaW9ucy5yZWFkKS50b0JlKCdldmVyeW9uZScpO1xuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5wZXJtaXNzaW9ucy53cml0ZSkudG9CZSgnZXZlcnlvbmUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Blcm1pc3Npb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZW5mb3JjZSBwZXJtaXNzaW9uIGVudW1zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgaWQ6ICdwZXJtaXNzaW9uLWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnUGVybWlzc2lvbiBDaGFubmVsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgcmVhZDogJ2ludmFsaWQnLFxuICAgICAgICAgIHdyaXRlOiAnaW52YWxpZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCBlcnJvcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVycm9yID0gZXJyO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IuZXJyb3JzWydwZXJtaXNzaW9ucy5yZWFkJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXJyb3IuZXJyb3JzWydwZXJtaXNzaW9ucy53cml0ZSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVW5pcXVlIENvbnN0cmFpbnRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZW5mb3JjZSB1bmlxdWUgY2hhbm5lbCBJRHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsRGF0YTEgPSB7XG4gICAgICAgIGlkOiAndW5pcXVlLWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnVW5pcXVlIENoYW5uZWwgMScsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFubmVsRGF0YTIgPSB7XG4gICAgICAgIGlkOiAndW5pcXVlLWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnVW5pcXVlIENoYW5uZWwgMicsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBuZXcgQ2hhbm5lbChjaGFubmVsRGF0YTEpLnNhdmUoKTtcblxuICAgICAgbGV0IGVycm9yO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgbmV3IENoYW5uZWwoY2hhbm5lbERhdGEyKS5zYXZlKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlcnJvci5jb2RlKS50b0JlKDExMDAwKTsgLy8gTW9uZ29EQiBkdXBsaWNhdGUga2V5IGVycm9yXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDaGFubmVsIFBvc2l0aW9uaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc29ydCBjaGFubmVscyBieSBwb3NpdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBjaGFubmVscyB3aXRoIGRpZmZlcmVudCBwb3NpdGlvbnNcbiAgICAgIGNvbnN0IGNoYW5uZWxzID0gW1xuICAgICAgICB7IGlkOiAnZmlyc3QnLCBuYW1lOiAnRmlyc3QgQ2hhbm5lbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAndGVzdHVzZXInLCBwb3NpdGlvbjogMSB9LFxuICAgICAgICB7IGlkOiAnc2Vjb25kJywgbmFtZTogJ1NlY29uZCBDaGFubmVsJywgdHlwZTogJ3RleHQnLCBjcmVhdGVkQnk6ICd0ZXN0dXNlcicsIHBvc2l0aW9uOiAyIH0sXG4gICAgICAgIHsgaWQ6ICd0aGlyZCcsIG5hbWU6ICdUaGlyZCBDaGFubmVsJywgdHlwZTogJ3RleHQnLCBjcmVhdGVkQnk6ICd0ZXN0dXNlcicsIHBvc2l0aW9uOiAwIH1cbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgY2hhbm5lbERhdGEgb2YgY2hhbm5lbHMpIHtcbiAgICAgICAgYXdhaXQgbmV3IENoYW5uZWwoY2hhbm5lbERhdGEpLnNhdmUoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc29ydGVkQ2hhbm5lbHMgPSBhd2FpdCBDaGFubmVsLmZpbmQoKS5zb3J0KHsgcG9zaXRpb246IDEgfSk7XG5cbiAgICAgIGV4cGVjdChzb3J0ZWRDaGFubmVsc1swXS5wb3NpdGlvbikudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzb3J0ZWRDaGFubmVsc1sxXS5wb3NpdGlvbikudG9CZSgxKTtcbiAgICAgIGV4cGVjdChzb3J0ZWRDaGFubmVsc1syXS5wb3NpdGlvbikudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBvc2l0aW9uIHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgICBpZDogJ3Bvc2l0aW9uLXRlc3QnLFxuICAgICAgICBuYW1lOiAnUG9zaXRpb24gVGVzdCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInLFxuICAgICAgICBwb3NpdGlvbjogNVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuICAgICAgZXhwZWN0KGNoYW5uZWwucG9zaXRpb24pLnRvQmUoNSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBwb3NpdGlvblxuICAgICAgY2hhbm5lbC5wb3NpdGlvbiA9IDEwO1xuICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kQnlJZChjaGFubmVsLl9pZCk7XG4gICAgICBleHBlY3QodXBkYXRlZENoYW5uZWwucG9zaXRpb24pLnRvQmUoMTApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2hhbm5lbCBMb2NraW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvY2tlZCBjaGFubmVscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbCh7XG4gICAgICAgIGlkOiAnbG9ja2VkLXRlc3QnLFxuICAgICAgICBuYW1lOiAnTG9ja2VkIENoYW5uZWwnLFxuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIGNyZWF0ZWRCeTogJ2FkbWluJyxcbiAgICAgICAgbG9ja2VkOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICBleHBlY3QoY2hhbm5lbC5sb2NrZWQpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBsb2NrIHN0YXR1c1xuICAgICAgY2hhbm5lbC5sb2NrZWQgPSBmYWxzZTtcbiAgICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuXG4gICAgICBjb25zdCB1cGRhdGVkQ2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZEJ5SWQoY2hhbm5lbC5faWQpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRDaGFubmVsLmxvY2tlZCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDaGFubmVsIENhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFyZW50IGNoYW5uZWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyZW50Q2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgaWQ6ICdwYXJlbnQtY2F0ZWdvcnknLFxuICAgICAgICBuYW1lOiAnUGFyZW50IENhdGVnb3J5JyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBwYXJlbnRDaGFubmVsLnNhdmUoKTtcblxuICAgICAgY29uc3QgY2hpbGRDaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgICBpZDogJ2NoaWxkLWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnQ2hpbGQgQ2hhbm5lbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInLFxuICAgICAgICBwYXJlbnQ6IHBhcmVudENoYW5uZWwuX2lkXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgY2hpbGRDaGFubmVsLnNhdmUoKTtcbiAgICAgIGV4cGVjdChjaGlsZENoYW5uZWwucGFyZW50LnRvU3RyaW5nKCkpLnRvQmUocGFyZW50Q2hhbm5lbC5faWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IG51bGwgcGFyZW50IGZvciByb290IGNoYW5uZWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgICAgaWQ6ICdyb290LWNoYW5uZWwnLFxuICAgICAgICBuYW1lOiAnUm9vdCBDaGFubmVsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcicsXG4gICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuICAgICAgZXhwZWN0KGNoYW5uZWwucGFyZW50KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ3JlYXRlZCBCeSBSZWZlcmVuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdG9yZSBjcmVhdGVkQnkgbmlja25hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgICBpZDogJ2NyZWF0b3ItdGVzdCcsXG4gICAgICAgIG5hbWU6ICdDcmVhdG9yIFRlc3QnLFxuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIGNyZWF0ZWRCeTogJ2FkbWluLXVzZXItMTIzJ1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuICAgICAgZXhwZWN0KGNoYW5uZWwuY3JlYXRlZEJ5KS50b0JlKCdhZG1pbi11c2VyLTEyMycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSUQgU2FuaXRpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIElEIGZvcm1hdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZElkcyA9IFsnZ2VuZXJhbCcsICd2b2ljZV9jaGF0JywgJ2NoYW5uZWxfMTIzJywgJ3Rlc3QtY2hhbm5lbCddO1xuXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIHZhbGlkSWRzKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbCh7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IENoYW5uZWwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2F2ZWRDaGFubmVsID0gYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwuaWQpLnRvQmUoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgICBpZDogJycsXG4gICAgICAgIG5hbWU6ICdFbXB0eSBJRCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY3JlYXRlZEJ5OiAndGVzdHVzZXInXG4gICAgICB9KTtcblxuICAgICAgbGV0IGVycm9yO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlcnJvci5lcnJvcnMuaWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUaW1lc3RhbXBzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2V0IGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0IHRpbWVzdGFtcHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBiZWZvcmVDcmVhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgICBpZDogJ3RpbWVzdGFtcC10ZXN0JyxcbiAgICAgICAgbmFtZTogJ1RpbWVzdGFtcCBUZXN0JyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjcmVhdGVkQnk6ICd0ZXN0dXNlcidcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzYXZlZENoYW5uZWwgPSBhd2FpdCBjaGFubmVsLnNhdmUoKTtcbiAgICAgIGNvbnN0IGFmdGVyQ3JlYXRlID0gbmV3IERhdGUoKTtcblxuICAgICAgZXhwZWN0KHNhdmVkQ2hhbm5lbC5jcmVhdGVkQXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc2F2ZWRDaGFubmVsLnVwZGF0ZWRBdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwuY3JlYXRlZEF0LmdldFRpbWUoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChiZWZvcmVDcmVhdGUuZ2V0VGltZSgpKTtcbiAgICAgIGV4cGVjdChzYXZlZENoYW5uZWwuY3JlYXRlZEF0LmdldFRpbWUoKSkudG9CZUxlc3NUaGFuT3JFcXVhbChhZnRlckNyZWF0ZS5nZXRUaW1lKCkpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFFL0NDLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtFQUM5QkEsUUFBUSxDQUFDLGtCQUFrQixFQUFFLE1BQU07SUFDakNDLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxZQUFZO01BQ3hELE1BQU1DLFdBQVcsR0FBRztRQUNsQkMsRUFBRSxFQUFFLGNBQWM7UUFDbEJDLElBQUksRUFBRSxjQUFjO1FBQ3BCQyxJQUFJLEVBQUUsTUFBTTtRQUNaQyxTQUFTLEVBQUU7TUFDYixDQUFDO01BRUQsTUFBTUMsT0FBTyxHQUFHLElBQUlULE9BQU8sQ0FBQ0ksV0FBVyxDQUFDO01BQ3hDLE1BQU1NLFlBQVksR0FBRyxNQUFNRCxPQUFPLENBQUNFLElBQUksQ0FBQyxDQUFDO01BRXpDQyxNQUFNLENBQUNGLFlBQVksQ0FBQ0wsRUFBRSxDQUFDLENBQUNRLElBQUksQ0FBQ1QsV0FBVyxDQUFDQyxFQUFFLENBQUM7TUFDNUNPLE1BQU0sQ0FBQ0YsWUFBWSxDQUFDSixJQUFJLENBQUMsQ0FBQ08sSUFBSSxDQUFDVCxXQUFXLENBQUNFLElBQUksQ0FBQztNQUNoRE0sTUFBTSxDQUFDRixZQUFZLENBQUNILElBQUksQ0FBQyxDQUFDTSxJQUFJLENBQUNULFdBQVcsQ0FBQ0csSUFBSSxDQUFDO01BQ2hESyxNQUFNLENBQUNGLFlBQVksQ0FBQ0YsU0FBUyxDQUFDLENBQUNLLElBQUksQ0FBQ1QsV0FBVyxDQUFDSSxTQUFTLENBQUM7TUFDMURJLE1BQU0sQ0FBQ0YsWUFBWSxDQUFDSSxRQUFRLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUNyQ0QsTUFBTSxDQUFDRixZQUFZLENBQUNLLE1BQU0sQ0FBQyxDQUFDRixJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3pDLENBQUMsQ0FBQztJQUVG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