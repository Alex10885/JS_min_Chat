{"version":3,"names":["require","config","express","http","socketIo","jwt","cors","winston","swaggerJsdoc","swaggerUi","helmet","rateLimit","body","validationResult","mongoose","connectDB","closeDB","emailService","User","Message","Channel","logger","createLogger","level","format","combine","timestamp","errors","stack","json","defaultMeta","service","transports","File","filename","Console","colorize","simple","app","server","createServer","authRateLimiter","windowMs","max","message","error","standardHeaders","legacyHeaders","apiRateLimiter","generalRateLimiter","passwordResetRateLimiter","io","origin","methods","allowedHeaders","engine","on","err","console","log","code","httpStatus","status","headers","req","use","process","env","NODE_ENV","ALLOWED_ORIGINS","split","credentials","limit","errorHandler","res","next","url","method","ip","userAgent","get","name","Object","values","map","e","field","path","value","details","keys","keyValue","requestId","id","start","Date","now","duration","info","statusCode","user","nickname","JSON","stringify","undefined","authenticateToken","authHeader","token","hasAuthHeader","hasToken","decoded","verify","JWT_SECRET","userId","findById","_id","warn","contentSecurityPolicy","directives","defaultSrc","styleSrc","fontSrc","imgSrc","scriptSrc","connectSrc","crossOriginEmbedderPolicy","swaggerOptions","definition","openapi","title","version","description","contact","servers","components","schemas","type","properties","minLength","maxLength","email","role","enum","default","createdAt","lastActive","required","createdBy","position","RegisterRequest","password","LoginRequest","identifier","AuthResponse","$ref","ChannelRequest","ErrorResponse","items","msg","param","location","securitySchemes","bearerAuth","scheme","bearerFormat","security","apis","swaggerSpec","removeHeader","serve","setup","setHeader","send","toISOString","uptime","post","isLength","min","trim","hasPassword","isEmpty","array","findOne","$or","isPasswordValid","comparePassword","save","sign","expiresIn","escape","isEmail","normalizeEmail","existingUser","conflictField","errorMessage","authorization","channels","find","select","sort","channelCount","length","onlineUsers","Map","userConnections","voiceChannels","socket","handshake","auth","Error","connectionCount","newConnectionCount","set","updateResult","findOneAndUpdate","$set","new","runValidators","connections","socketId","statusUpdateError","cleanupInactiveConnections","timeout","entries","lastHeartbeat","sockets","disconnect","connectionsLeft","Math","findByIdAndUpdate","catch","delete","setInterval","room","size","updateHeartbeat","data","emit","channel","leave","previousRoomUsers","Array","from","filter","u","to","join","joinMessage","author","text","roomUsers","history","target","messageData","debug","trimmedText","targetNickname","senderRoom","senderSocketId","targetUser","targetFound","targetRoom","onlineUsersInRoom","onlineUsersInSenderRoom","availableUsers","targetSocketId","sender","messageId","onlineUsersCount","messageLength","speaking","channelId","has","channelPeers","peerConnection","stream","voiceChannel","offer","fromNickname","answer","candidate","currentCount","newCount","leaveMessage","remainingConnections","initializeServer","defaultChannels","channelData","upsert","PORT","listen","exit","close"],"sources":["server.js"],"sourcesContent":["require('dotenv').config();\nconst express = require('express');\nconst http = require('http');\nconst socketIo = require('socket.io');\nconst jwt = require('jsonwebtoken');\nconst cors = require('cors');\nconst winston = require('winston');\nconst swaggerJsdoc = require('swagger-jsdoc');\nconst swaggerUi = require('swagger-ui-express');\nconst helmet = require('helmet');\nconst rateLimit = require('express-rate-limit');\nconst { body, validationResult } = require('express-validator');\nconst mongoose = require('mongoose');\nconst { connectDB, closeDB } = require('./db/connection');\nconst emailService = require('./services/emailService');\n\n// Import models\nconst User = require('./models/User');\nconst Message = require('./models/Message');\nconst Channel = require('./models/Channel');\n\n// Logger setup\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  defaultMeta: { service: 'chat-server' },\n  transports: [\n    new winston.transports.File({ filename: 'logs/server.log' }),\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      )\n    })\n  ]\n});\n\nconst app = express();\nconst server = http.createServer(app);\n\n// Rate limiting configuration\nconst authRateLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // Limit each IP to 5 auth requests per windowMs\n  message: { error: 'Too many authentication attempts, please try again later.' },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nconst apiRateLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 API requests per windowMs\n  message: { error: 'Too many requests, please try again later.' },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nconst generalRateLimiter = rateLimit({\n  windowMs: 60 * 60 * 1000, // 1 hour\n  max: 1000, // Limit each IP to 1000 requests per windowMs\n  message: { error: 'Too many requests from this IP, please try again later.' },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nconst passwordResetRateLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 3, // Limit each IP to 3 password reset requests per windowMs\n  message: { error: 'Too many password reset requests, please try again later.' },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\nconst io = socketIo(server, {\n  cors: {\n    origin: \"*\",\n    methods: [\"GET\", \"POST\"],\n    allowedHeaders: [\"authorization\", \"content-type\"]\n  },\n  // Ensure both transports are supported\n  transports: ['websocket', 'polling']\n});\n\n// Log socket connection errors for debugging\nio.engine.on('connection_error', (err) => {\n  console.log('üîå Socket engine connection error:', err.code, err.message);\n  logger.error('Socket connection error:', {\n    code: err.code,\n    message: err.message,\n    httpStatus: err.status,\n    headers: err.req?.headers\n  });\n});\n\n// CORS configuration\napp.use(cors({\n  origin: process.env.NODE_ENV === 'production'\n    ? process.env.ALLOWED_ORIGINS?.split(',') || false\n    : true,\n  credentials: true\n}));\n\napp.use(express.json({ limit: '10mb' })); // Add payload size limit\n\n// Error handling middleware\nconst errorHandler = (err, req, res, next) => {\n  logger.error('Unhandled error:', {\n    message: err.message,\n    stack: err.stack,\n    url: req.url,\n    method: req.method,\n    ip: req.ip,\n    userAgent: req.get('User-Agent')\n  });\n\n  // Mongoose validation errors\n  if (err.name === 'ValidationError') {\n    const errors = Object.values(err.errors).map(e => ({\n      field: e.path,\n      message: e.message,\n      value: e.value\n    }));\n\n    return res.status(422).json({\n      error: 'Validation failed',\n      details: errors,\n      code: 'VALIDATION_ERROR'\n    });\n  }\n\n  // Mongoose duplicate key error\n  if (err.code === 11000) {\n    const field = Object.keys(err.keyValue)[0];\n    const value = err.keyValue[field];\n    return res.status(409).json({\n      error: `${field} '${value}' already exists`,\n      code: 'DUPLICATE_ERROR'\n    });\n  }\n\n  // JWT errors\n  if (err.name === 'JsonWebTokenError') {\n    return res.status(401).json({\n      error: 'Invalid or expired token',\n      code: 'INVALID_TOKEN'\n    });\n  }\n\n  if (err.name === 'TokenExpiredError') {\n    return res.status(401).json({\n      error: 'Token has expired',\n      code: 'TOKEN_EXPIRED'\n    });\n  }\n\n  // Default server error\n  res.status(500).json({\n    error: 'Internal server error',\n    code: 'INTERNAL_ERROR',\n    requestId: req.id || 'unknown'\n  });\n};\n\n// Request logging middleware\napp.use((req, res, next) => {\n  const start = Date.now();\n\n  res.on('finish', () => {\n    const duration = Date.now() - start;\n    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      user: req.user?.nickname || 'anonymous',\n      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined\n    });\n  });\n\n  next();\n});\n\n// JWT authentication middleware\nconst authenticateToken = async (req, res, next) => {\n  try {\n    console.log('üîê JWT authentication middleware called:', { url: req.url, method: req.method });\n    const authHeader = req.headers['authorization'];\n    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN\n\n    console.log('üîë Token extraction result:', { hasAuthHeader: !!authHeader, hasToken: !!token });\n\n    if (!token) {\n      console.log('‚ùå No token provided');\n      return res.status(401).json({\n        error: 'Access token required',\n        code: 'NO_TOKEN'\n      });\n    }\n\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    console.log('‚úÖ JWT decoded:', { userId: decoded.userId, nickname: decoded.nickname });\n    const user = await User.findById(decoded.userId);\n\n    if (!user) {\n      console.log('‚ùå User not found in DB for JWT userId:', decoded.userId);\n      return res.status(401).json({\n        error: 'User not found',\n        code: 'USER_NOT_FOUND'\n      });\n    }\n\n    req.user = user;\n    console.log('‚úÖ JWT authentication successful for user:', user.nickname, { id: user._id, status: user.status });\n    next();\n  } catch (error) {\n    logger.warn('JWT authentication failed:', {\n      error: error.message,\n      ip: req.ip\n    });\n\n    if (error.name === 'JsonWebTokenError') {\n      return res.status(401).json({\n        error: 'Invalid token format',\n        code: 'INVALID_TOKEN_FORMAT'\n      });\n    }\n\n    if (error.name === 'TokenExpiredError') {\n      return res.status(401).json({\n        error: 'Token has expired',\n        code: 'TOKEN_EXPIRED'\n      });\n    }\n\n    return res.status(401).json({\n      error: 'Token verification failed',\n      code: 'TOKEN_VERIFICATION_FAILED'\n    });\n  }\n};\n\n// General rate limiting (applied to all HTTP requests)\napp.use(generalRateLimiter);\n\n// Helmet security headers\napp.use(\n  helmet({\n    contentSecurityPolicy: {\n      directives: {\n        defaultSrc: [\"'self'\"],\n        styleSrc: [\"'self'\", \"'unsafe-inline'\", \"https://fonts.googleapis.com\"],\n        fontSrc: [\"'self'\", \"https://fonts.gstatic.com\"],\n        imgSrc: [\"'self'\", \"data:\"],\n        scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n        connectSrc: [\"'self'\"]\n      }\n    },\n    crossOriginEmbedderPolicy: false\n  })\n);\n\n// Swagger configuration\nconst swaggerOptions = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Chat-JS API',\n      version: '1.0.0',\n      description: 'REST API for Chat-JS application with real-time messaging and voice channels',\n      contact: {\n        name: 'Chat-JS Support'\n      }\n    },\n    servers: [\n      {\n        url: 'http://localhost:3001',\n        description: 'Development server'\n      }\n    ],\n    components: {\n      schemas: {\n        User: {\n          type: 'object',\n          properties: {\n            id: {\n              type: 'string',\n              description: 'User unique identifier'\n            },\n            nickname: {\n              type: 'string',\n              description: 'User nickname',\n              minLength: 3,\n              maxLength: 50\n            },\n            email: {\n              type: 'string',\n              format: 'email',\n              description: 'User email address'\n            },\n            role: {\n              type: 'string',\n              enum: ['admin', 'member'],\n              default: 'member',\n              description: 'User role'\n            },\n            createdAt: {\n              type: 'string',\n              format: 'date-time',\n              description: 'User creation timestamp'\n            },\n            lastActive: {\n              type: 'string',\n              format: 'date-time',\n              description: 'Last activity timestamp'\n            },\n            status: {\n              type: 'string',\n              enum: ['online', 'offline'],\n              description: 'User online status'\n            }\n          },\n          required: ['nickname', 'email', 'password', 'role']\n        },\n        Channel: {\n          type: 'object',\n          properties: {\n            id: {\n              type: 'string',\n              description: 'Channel unique identifier (auto-generated from name)'\n            },\n            name: {\n              type: 'string',\n              description: 'Channel display name',\n              minLength: 1,\n              maxLength: 100\n            },\n            type: {\n              type: 'string',\n              enum: ['text', 'voice'],\n              description: 'Channel type'\n            },\n            description: {\n              type: 'string',\n              description: 'Channel description',\n              maxLength: 500\n            },\n            createdBy: {\n              type: 'string',\n              description: 'Creator nickname'\n            },\n            position: {\n              type: 'number',\n              default: 0,\n              description: 'Channel display position'\n            }\n          },\n          required: ['id', 'name', 'type', 'createdBy']\n        },\n        RegisterRequest: {\n          type: 'object',\n          required: ['nickname', 'email', 'password'],\n          properties: {\n            nickname: {\n              type: 'string',\n              minLength: 3,\n              maxLength: 50,\n              description: 'Unique username'\n            },\n            email: {\n              type: 'string',\n              format: 'email',\n              description: 'Valid email address'\n            },\n            password: {\n              type: 'string',\n              minLength: 6,\n              description: 'User password'\n            }\n          }\n        },\n        LoginRequest: {\n          type: 'object',\n          required: ['identifier', 'password'],\n          properties: {\n            identifier: {\n              type: 'string',\n              description: 'Username or email'\n            },\n            password: {\n              type: 'string',\n              description: 'User password'\n            }\n          }\n        },\n        AuthResponse: {\n          type: 'object',\n          properties: {\n            token: {\n              type: 'string',\n              description: 'JWT access token'\n            },\n            user: {\n              $ref: '#/components/schemas/User'\n            }\n          }\n        },\n        ChannelRequest: {\n          type: 'object',\n          required: ['name', 'type'],\n          properties: {\n            name: {\n              type: 'string',\n              minLength: 1,\n              maxLength: 100,\n              description: 'Channel display name'\n            },\n            type: {\n              type: 'string',\n              enum: ['text', 'voice'],\n              description: 'Channel type'\n            },\n            description: {\n              type: 'string',\n              maxLength: 500,\n              description: 'Optional channel description'\n            }\n          }\n        },\n        ErrorResponse: {\n          type: 'object',\n          properties: {\n            error: {\n              type: 'string',\n              description: 'Error message'\n            },\n            errors: {\n              type: 'array',\n              items: {\n                type: 'object',\n                properties: {\n                  msg: { type: 'string' },\n                  param: { type: 'string' },\n                  location: { type: 'string' }\n                }\n              },\n              description: 'Validation errors array'\n            }\n          }\n        }\n      },\n      securitySchemes: {\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT'\n        }\n      }\n    },\n    security: [\n      {\n        bearerAuth: []\n      }\n    ]\n  },\n  apis: ['./server.js'] // Path to the API routes\n};\n\nconst swaggerSpec = swaggerJsdoc(swaggerOptions);\n\n// Swagger UI with CSP disabled for this route\napp.use('/api-docs', (req, res, next) => {\n  // Disable CSP for Swagger UI\n  res.removeHeader('Content-Security-Policy');\n  next();\n}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));\n\n// Swagger JSON endpoint\napp.get('/api-docs.json', (req, res) => {\n  res.removeHeader('Content-Security-Policy');\n  res.setHeader('Content-Type', 'application/json');\n  res.send(swaggerSpec);\n});\n\n// Health check endpoint\napp.get('/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime()\n  });\n});\n\n// Log middleware to check incoming requests\napp.use((req, res, next) => {\n  logger.info(`üîç Incoming request: ${req.method} ${req.url}`, {\n    ip: req.ip,\n    userAgent: req.get('User-Agent'),\n    headers: req.headers\n  });\n  next();\n});\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n   * @swagger\n   * /api/login:\n   *   post:\n   *     tags:\n   *       - Authentication\n   *     summary: Login existing user\n   *     description: Authenticates and logs in an existing user with JWT token\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             $ref: '#/components/schemas/LoginRequest'\n   *     responses:\n   *       200:\n   *         description: Login successful\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/AuthResponse'\n   *             example:\n   *               token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n   *               user:\n   *                 id: \"507f1f77bcf86cd799439011\"\n   *                 nickname: \"john_doe\"\n   *                 email: \"john@example.com\"\n   *                 role: \"member\"\n   *       400:\n   *         description: Invalid credentials or validation errors\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/ErrorResponse'\n   *             example:\n   *               error: \"Invalid credentials\"\n   *       500:\n   *         description: Server error\n   */\nconsole.log('üîß POST /api/login route registered at startup');\napp.post('/api/login', [\n  body('identifier').isLength({ min: 1, max: 50 }).trim(),\n  body('password').isLength({ min: 6, max: 100 })\n], async (req, res) => {\n  try {\n    console.log('üîë Incoming login request:', { identifier: req.body.identifier, hasPassword: !!req.body.password, ip: req.ip });\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      console.log('‚ùå Login validation errors:', errors.array());\n      return res.status(400).json({ errors: errors.array() });\n    }\n\n    const { identifier, password } = req.body;\n    console.log('üîç Searching for user with identifier:', identifier);\n\n    // Find user by nickname or email\n    const user = await User.findOne({\n      $or: [{ nickname: identifier }, { email: identifier }]\n    });\n\n    if (!user) {\n      console.log('‚ùå User not found:', identifier);\n      return res.status(400).json({ error: 'Invalid credentials' });\n    }\n\n    console.log('‚úÖ User found:', { nickname: user.nickname, email: user.email, status: user.status });\n\n    // Compare password\n    const isPasswordValid = await user.comparePassword(password);\n    console.log('üîë Password validation result:', isPasswordValid);\n\n    if (!isPasswordValid) {\n      console.log('‚ùå Invalid password for user:', user.nickname);\n      return res.status(400).json({ error: 'Invalid credentials' });\n    }\n\n    // Update user status to online\n    user.status = 'online';\n    await user.save();\n\n    // Generate JWT token\n    console.log('üîè Generating JWT token for user:', user.nickname);\n    const token = jwt.sign(\n      { userId: user._id, nickname: user.nickname, role: user.role },\n      process.env.JWT_SECRET,\n      { expiresIn: '24h' }\n    );\n    console.log('‚úÖ JWT token generated successfully');\n\n    logger.info(`User logged in: ${user.nickname}`);\n\n    console.log('üì§ Sending login response');\n    res.json({\n      token,\n      user: {\n        id: user._id,\n        nickname: user.nickname,\n        email: user.email,\n        role: user.role\n      }\n    });\n  } catch (error) {\n    logger.error('Login error:', error);\n    res.status(500).json({ error: 'Server error during login' });\n  }\n});\n\n/**\n   * @swagger\n   * /api/register:\n  *   post:\n  *     tags:\n  *       - Authentication\n  *     summary: Register new user\n  *     description: Creates a new user account and returns JWT token\n  *     requestBody:\n  *       required: true\n  *       content:\n  *         application/json:\n  *           schema:\n  *             $ref: '#/components/schemas/RegisterRequest'\n  *           example:\n  *             nickname: \"john_doe\"\n  *             email: \"john@example.com\"\n  *             password: \"securePass123\"\n  *     responses:\n  *       201:\n  *         description: Registration successful\n  *         content:\n  *           application/json:\n  *             schema:\n  *               $ref: '#/components/schemas/AuthResponse'\n  *             example:\n  *               token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n  *               user:\n  *                 id: \"507f1f77bcf86cd799439011\"\n  *                 nickname: \"john_doe\"\n  *                 email: \"john@example.com\"\n  *                 role: \"member\"\n  *       400:\n  *         description: Validation errors or user already exists\n  *         content:\n  *           application/json:\n  *             schema:\n  *               $ref: '#/components/schemas/ErrorResponse'\n  *             example:\n  *               error: \"Nickname already taken\"\n  *       500:\n  *         description: Server error\n  */\napp.post('/api/register', authRateLimiter, [\n  body('nickname').isLength({ min: 3, max: 50 }).trim().escape(),\n  body('email').isEmail().normalizeEmail(),\n  body('password').isLength({ min: 6 })\n], async (req, res) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({ errors: errors.array() });\n    }\n\n    const { nickname, email, password } = req.body;\n\n    // Check if user exists\n    const existingUser = await User.findOne({\n      $or: [{ nickname }, { email }]\n    });\n\n    if (existingUser) {\n      const conflictField = existingUser.nickname === nickname ? 'nickname' : 'email';\n      const errorMessage = conflictField === 'nickname' ? 'Nickname already taken' : 'Email already registered';\n      return res.status(409).json({ error: errorMessage });\n    }\n\n    // Create user\n    const user = new User({ nickname, email, password, role: 'member', status: 'online' });\n    await user.save();\n\n    console.log('JWT_SECRET present:', !!process.env.JWT_SECRET);\n    const token = jwt.sign(\n      { userId: user._id, nickname: user.nickname, role: user.role },\n      process.env.JWT_SECRET,\n      { expiresIn: '24h' }\n    );\n\n    console.log('JWT token generated successfully');\n    logger.info(`User registered: ${user.nickname}`);\n\n    res.status(201).json({\n      token,\n      user: {\n        id: user._id,\n        nickname: user.nickname,\n        email: user.email,\n        role: user.role\n      }\n    });\n  } catch (error) {\n    logger.error('Registration error:', error);\n    res.status(500).json({ error: 'Server error during registration' });\n  }\n});\n\n/**\n * @swagger\n * /api/channels:\n *   get:\n *     tags:\n *       - Channels\n *     summary: Get list of channels\n *     description: Retrieves a list of all available channels\n *     security:\n *       - bearerAuth: []\n *     responses:\n *       200:\n *         description: List of channels\n *         content:\n *           application/json:\n *             schema:\n *               type: array\n *               items:\n *                 $ref: '#/components/schemas/Channel'\n *             example:\n *               - id: \"general\"\n *                 name: \"General\"\n *                 type: \"text\"\n *                 description: \"\"\n *                 createdBy: \"system\"\n *                 position: 0\n *       401:\n *         description: Unauthorized\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/ErrorResponse'\n *             example:\n *               error: \"Access token required\"\n *       500:\n *         description: Internal server error\n */\nconsole.log('üîß GET /api/channels route registered at startup');\napp.get('/api/channels', authenticateToken, apiRateLimiter, async (req, res) => {\n  console.log('üöÄ GET /api/channels endpoint called', { method: req.method, url: req.url, headers: req.headers.authorization ? 'auth header present' : 'no auth header' });\n  try {\n    const channels = await Channel.find({})\n      .select('-_id id name type description createdBy position')\n      .sort({ position: 1 });\n\n    logger.info(`Channels list requested by ${req.user.nickname}`, {\n      userId: req.user._id,\n      channelCount: channels.length\n    });\n\n    console.log('üì§ Returning channels data:', channels.length);\n    res.json(channels);\n  } catch (error) {\n    logger.error('Error fetching channels:', error);\n    console.error('‚ùå Error in GET /api/channels:', error.message);\n    res.status(500).json({ error: 'Failed to fetch channels', code: 'DATABASE_ERROR' });\n  }\n});\n\n// 404 handler (must be before global error handler)\napp.use((req, res) => {\n  console.warn('‚ùå Final 404 handler executed - route not found!', { method: req.method, url: req.url });\n  logger.warn(`404 - ${req.method} ${req.url}`, {\n    ip: req.ip,\n    userAgent: req.get('User-Agent')\n  });\n\n  res.status(404).json({\n    error: 'Endpoint not found',\n    path: req.url,\n    method: req.method,\n    code: 'NOT_FOUND'\n  });\n});\n\n// Global error handling middleware (must be last)\napp.use(errorHandler);\n\n\n\n\n\n\n\n\n\n// Global users map for socket management {socketId: {userId, nickname, room}}\nlet onlineUsers = new Map();\n\n// User connection counter {userId: connectionCount}\nlet userConnections = new Map();\n\n// Voice channels management\nconst voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }\n\nio.use(async (socket, next) => {\n  const token = socket.handshake.auth.token;\n  console.log('üîë Socket authentication attempt, token present:', !!token);\n\n  if (!token) {\n    console.log('‚ùå Socket authentication failed: No token provided');\n    return next(new Error('Authentication token required'));\n  }\n\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\n    const user = await User.findById(decoded.userId);\n\n    console.log(`‚úÖ Socket auth success: ${decoded.nickname}, user found: ${!!user}`);\n\n    if (!user) {\n      console.log('‚ùå Socket authentication failed: User not found');\n      return next(new Error('User not found or not online'));\n    }\n\n    // Check if user is marked as offline during authentication\n    if (user.status === 'offline') {\n      console.log('‚ùå Socket authentication failed: User is offline');\n      return next(new Error('User not found or not online'));\n    }\n\n    // Handle user status update based on connection count\n    try {\n      const userId = decoded.userId;\n      const connectionCount = userConnections.get(userId) || 0;\n      const newConnectionCount = connectionCount + 1;\n      userConnections.set(userId, newConnectionCount);\n\n      // Update user status with connection count tracking\n      const updateResult = await User.findOneAndUpdate(\n        { _id: userId },\n        {\n          $set: {\n            status: newConnectionCount > 0 ? 'online' : 'offline',\n            lastActive: new Date()\n          }\n        },\n        {\n          new: true,\n          runValidators: true\n        }\n      );\n\n      if (updateResult) {\n        console.log(`üîÑ Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);\n        logger.info(`User status updated to online via socket auth`, {\n          userId: userId,\n          nickname: user.nickname,\n          connections: newConnectionCount,\n          socketId: socket.id,\n          timestamp: new Date()\n        });\n      }\n\n      // Override local user object with updated data\n      user.status = updateResult ? updateResult.status : 'online';\n      user.lastActive = updateResult ? updateResult.lastActive : new Date();\n\n    } catch (statusUpdateError) {\n      console.error(`‚ùå Socket auth: Failed to update user status for ${user.nickname}:`, statusUpdateError.message);\n      logger.error(`Status update failed during socket auth`, {\n        userId: userId,\n        nickname: user.nickname,\n        error: statusUpdateError.message,\n        socketId: socket.id\n      });\n\n      // Don't fail auth due to status update error - proceed with default online status\n      console.log(`‚ö†Ô∏è Socket auth: Proceeding with online status despite update failure`);\n      user.status = 'online';\n      user.lastActive = new Date();\n    }\n\n    socket.userId = decoded.userId;\n    socket.nickname = decoded.nickname;\n    socket.role = decoded.role;\n    console.log(`üéâ Socket fully authenticated: ${socket.nickname}`);\n    return next();\n  } catch (err) {\n    console.error('‚ùå Socket authentication error:', err.message);\n\n    if (err.name === 'JsonWebTokenError') {\n      return next(new Error('Invalid authentication token'));\n    }\n\n    if (err.name === 'TokenExpiredError') {\n      return next(new Error('Authentication token has expired'));\n    }\n\n    return next(new Error('Authentication failed'));\n  }\n});\n\n/**\n * Cleanup inactive connections based on heartbeat\n */\nfunction cleanupInactiveConnections() {\n  const now = Date.now();\n  const timeout = 60000; // 60 seconds timeout\n\n  for (const [socketId, user] of onlineUsers.entries()) {\n    if (now - user.lastHeartbeat > timeout) {\n      console.log(`üßπ Cleansing dead connection for user ${user.nickname}`);\n\n      // Force disconnect socket\n      const socket = io.sockets.sockets.get(socketId);\n      if (socket) {\n        socket.disconnect(true);\n      }\n\n      // Update user connections count\n      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;\n      userConnections.set(user.userId, Math.max(0, connectionsLeft));\n\n      // Set status to offline if last connection\n      if (connectionsLeft <= 0) {\n        User.findByIdAndUpdate(user.userId, {\n          status: 'offline',\n          lastActive: new Date()\n        }).catch(err => logger.error('Error updating status on cleanup:', err));\n\n        console.log(`üîÑ User ${user.nickname} status set to offline (dead connection)`);\n        logger.info(`User status set to offline due to dead connection`, {\n          userId: user.userId,\n          nickname: user.nickname,\n          socketId: socketId\n        });\n      }\n\n      onlineUsers.delete(socketId);\n    }\n  }\n}\n\n// Run cleanup every 30 seconds - DISABLED for test environment\nif (process.env.NODE_ENV !== 'test') {\n  setInterval(cleanupInactiveConnections, 30000);\n}\n\nio.on('connection', async (socket) => {\n  console.log('üöÄ Socket connection established');\n  console.log(`üë§ User ${socket.nickname} connected`);\n\n  // Track online user\n  onlineUsers.set(socket.id, {\n    userId: socket.userId,\n    nickname: socket.nickname,\n    role: socket.role,\n    room: null,\n    lastHeartbeat: Date.now()\n  });\n\n  // Log current active connections count\n  console.log(`üìä Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);\n\n  // Heartbeat mechanism\n  socket.on('heartbeat', () => {\n    const user = onlineUsers.get(socket.id);\n    if (user) {\n      user.lastHeartbeat = Date.now();\n      console.log(`üíì Heartbeat received from user ${socket.nickname}`);\n    }\n  });\n\n  // Update heartbeat on user activity\n  const updateHeartbeat = () => {\n    const user = onlineUsers.get(socket.id);\n    if (user) {\n      user.lastHeartbeat = Date.now();\n    }\n  };\n\n  socket.on('join_room', async (data) => {\n    updateHeartbeat();\n    const { room } = data;\n    if (!room) {\n      logger.warn('Join room failed: No room specified', {\n        userId: socket.userId,\n        nickname: socket.nickname\n      });\n      socket.emit('error', {\n        message: 'Room name is required',\n        code: 'MISSING_ROOM',\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    if (typeof room !== 'string' || room.trim().length === 0) {\n      logger.warn('Join room failed: Invalid room format', {\n        userId: socket.userId,\n        nickname: socket.nickname,\n        room\n      });\n      socket.emit('error', {\n        message: 'Invalid room name format',\n        code: 'INVALID_ROOM_FORMAT',\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    try {\n      // Verify channel exists\n      const channel = await Channel.findOne({ id: room });\n      if (!channel) {\n        logger.warn('Join room failed: Channel not found', {\n          userId: socket.userId,\n          nickname: socket.nickname,\n          room\n        });\n        socket.emit('error', {\n          message: `Channel '${room}' not found`,\n          code: 'CHANNEL_NOT_FOUND',\n          room,\n          timestamp: new Date().toISOString()\n        });\n        return;\n      }\n\n      // Leave previous room\n      if (socket.room) {\n        socket.leave(socket.room);\n        onlineUsers.set(socket.id, { ...onlineUsers.get(socket.id), room: null });\n\n        // Update online users in previous room\n        const previousRoomUsers = Array.from(onlineUsers.values())\n          .filter(u => u.room === socket.room)\n          .map(u => ({ nickname: u.nickname, role: u.role }));\n        io.to(socket.room).emit('online_users', previousRoomUsers);\n      }\n\n      socket.room = room;\n      socket.join(socket.room);\n\n      // Update user tracking\n      onlineUsers.set(socket.id, {\n        ...onlineUsers.get(socket.id),\n        room: socket.room\n      });\n\n      logger.info(`User ${socket.nickname} joined room ${socket.room}`);\n\n      // Send system message about joining\n      const joinMessage = new Message({\n        author: 'System',\n        channel: socket.room,\n        text: `${socket.nickname} joined the channel.`,\n        type: 'system'\n      });\n      await joinMessage.save();\n\n      io.to(socket.room).emit('message', {\n        author: joinMessage.author,\n        channel: joinMessage.channel,\n        text: joinMessage.text,\n        type: joinMessage.type,\n        timestamp: joinMessage.timestamp\n      });\n\n      // Send online users in current room\n      const roomUsers = Array.from(onlineUsers.values())\n        .filter(u => u.room === socket.room)\n        .map(u => ({ nickname: u.nickname, role: u.role }));\n      io.to(socket.room).emit('online_users', roomUsers);\n\n      // Send message history\n      const history = await Message.find({\n        channel: socket.room,\n        $or: [\n          { type: 'public' },\n          { type: 'system' },\n          { author: socket.nickname },\n          { target: socket.nickname }\n        ]\n      })\n        .sort({ timestamp: -1 })\n        .limit(100)\n        .sort({ timestamp: 1 }); // Resort for chronological order\n\n      socket.emit('history', history.map(msg => ({\n        author: msg.author,\n        room: msg.channel,\n        text: msg.text,\n        type: msg.type,\n        target: msg.target,\n        timestamp: msg.timestamp\n      })));\n\n    } catch (error) {\n      logger.error('Error in join_room:', error);\n      socket.emit('error', { message: 'Failed to join room' });\n    }\n  });\n\n  // Load history (fallback, if needed)\n  socket.on('get_history', async () => {\n    if (!socket.room) {\n      socket.emit('history', []);\n      return;\n    }\n\n    try {\n      const history = await Message.find({\n        channel: socket.room,\n        $or: [\n          { type: 'public' },\n          { type: 'system' },\n          { author: socket.nickname },\n          { target: socket.nickname }\n        ]\n      })\n        .sort({ timestamp: -1 })\n        .limit(100)\n        .sort({ timestamp: 1 }); // Resort for chronological order\n\n      socket.emit('history', history.map(msg => ({\n        author: msg.author,\n        room: msg.channel, // Using channel instead of room for consistency\n        text: msg.text,\n        type: msg.type,\n        target: msg.target,\n        timestamp: msg.timestamp\n      })));\n    } catch (error) {\n      logger.error('Error getting history:', error);\n      socket.emit('error', { message: 'Failed to load message history' });\n    }\n  });\n\n  // Public message\n  socket.on('message', async (data) => {\n    updateHeartbeat();\n    if (!socket.room || !data.text?.trim()) return;\n\n    try {\n      const message = new Message({\n        author: socket.nickname,\n        channel: socket.room,\n        text: data.text.trim(),\n        type: 'public'\n      });\n\n      await message.save();\n\n      const messageData = {\n        author: message.author,\n        room: message.channel, // Keeping 'room' for frontend compatibility\n        text: message.text,\n        timestamp: message.timestamp,\n        status: 'delivered',\n        type: message.type\n      };\n\n      io.to(socket.room).emit('message', messageData);\n      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);\n    } catch (error) {\n      logger.error('Error saving message:', error);\n      socket.emit('error', { message: 'Failed to send message' });\n    }\n  });\n\n  // Private message\n  socket.on('private_message', async (data) => {\n    updateHeartbeat();\n    if (!socket.room || !data.to || !data.text?.trim()) return;\n\n    const trimmedText = data.text.trim();\n    const targetNickname = data.to.trim();\n\n    try {\n      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {\n        senderRoom: socket.room,\n        senderSocketId: socket.id,\n        userId: socket.userId\n      });\n\n      // Validate target nickname format\n      if (targetNickname.length === 0 || targetNickname.length > 50) {\n        socket.emit('error', {\n          message: 'Invalid target user nickname',\n          code: 'INVALID_TARGET_NICKNAME'\n        });\n        return;\n      }\n\n      // Prevent self-messaging\n      if (targetNickname === socket.nickname) {\n        socket.emit('error', {\n          message: 'Cannot send private message to yourself',\n          code: 'SELF_MESSAGE_NOT_ALLOWED'\n        });\n        return;\n      }\n\n      // Find target user in same room with detailed logging\n      const targetUser = Array.from(onlineUsers.values()).find(\n        u => u.nickname === targetNickname && u.room === socket.room\n      );\n\n      logger.debug(`Private message target search result for ${targetNickname}`, {\n        targetFound: !!targetUser,\n        targetRoom: targetUser?.room,\n        senderRoom: socket.room,\n        onlineUsersInRoom: Array.from(onlineUsers.values())\n          .filter(u => u.room === socket.room)\n          .map(u => ({ nickname: u.nickname, room: u.room }))\n      });\n\n      if (!targetUser) {\n        // Enhanced error message with more context\n        const onlineUsersInSenderRoom = Array.from(onlineUsers.values())\n          .filter(u => u.room === socket.room)\n          .map(u => u.nickname);\n\n        socket.emit('error', {\n          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,\n          code: 'TARGET_USER_NOT_IN_ROOM',\n          target: targetNickname,\n          availableUsers: onlineUsersInSenderRoom,\n          senderRoom: socket.room\n        });\n        return;\n      }\n\n      // Create message object\n      const message = new Message({\n        author: socket.nickname,\n        channel: socket.room,\n        text: trimmedText,\n        type: 'private',\n        target: targetNickname\n      });\n      await message.save();\n\n      const messageData = {\n        author: message.author,\n        room: message.channel,\n        text: message.text,\n        timestamp: message.timestamp,\n        type: message.type,\n        target: message.target,\n        status: 'delivered'\n      };\n\n      // Send to target user with error handling\n      const targetSocketId = Array.from(onlineUsers.keys()).find(\n        id => onlineUsers.get(id).nickname === targetNickname\n      );\n\n      if (targetSocketId) {\n        io.to(targetSocketId).emit('private_message', messageData);\n        logger.debug(`Private message sent to target ${targetNickname}`, {\n          targetSocketId: targetSocketId,\n          sender: socket.nickname,\n          room: socket.room,\n          messageId: message._id\n        });\n      } else {\n        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {\n          targetNickname,\n          room: socket.room,\n          onlineUsersCount: onlineUsers.size,\n          messageId: message._id\n        });\n        // Message still saved to database for later delivery if user reconnects\n      }\n\n      // Send confirmation to sender (without target for privacy)\n      socket.emit('private_message', {\n        author: message.author,\n        room: message.room,\n        text: message.text,\n        timestamp: message.timestamp,\n        type: message.type,\n        target: null, // Hide target from sender's confirmation\n        status: 'sent'\n      });\n\n      logger.info(`Private message sent successfully`, {\n        sender: socket.nickname,\n        target: targetNickname,\n        room: socket.room,\n        messageId: message._id,\n        messageLength: trimmedText.length\n      });\n\n    } catch (error) {\n      logger.error('Error sending private message:', {\n        error: error.message,\n        sender: socket.nickname,\n        target: data.to,\n        room: socket.room,\n        userId: socket.userId,\n        stack: error.stack\n      });\n      socket.emit('error', {\n        message: 'Failed to send private message',\n        code: 'PRIVATE_MESSAGE_FAILED'\n      });\n    }\n  });\n\n  // Speaking\n  socket.on('speaking', (data) => {\n    updateHeartbeat();\n    socket.to(socket.room).emit('speaking', { nickname: socket.nickname, speaking: data.speaking });\n  });\n\n  // Voice channel events\n  socket.on('join_voice_channel', async (data) => {\n    updateHeartbeat();\n    const { channelId } = data;\n    if (!channelId) return;\n\n    try {\n      // Verify channel exists and is voice\n      const channel = await Channel.findOne({ id: channelId, type: 'voice' });\n      if (!channel) {\n        socket.emit('voice_error', { message: 'Voice channel not found' });\n        return;\n      }\n\n      // Initialize voice channel if not exists\n      if (!voiceChannels.has(channelId)) {\n        voiceChannels.set(channelId, new Map());\n      }\n\n      const channelPeers = voiceChannels.get(channelId);\n\n      // Notify others in the channel\n      socket.to(channelId).emit('user_joined_voice', { nickname: socket.nickname, socketId: socket.id });\n\n      // Add socket to voice channel room\n      socket.join(channelId);\n      channelPeers.set(socket.id, { peerConnection: null, stream: null });\n\n      // Update user's voice channel status\n      socket.voiceChannel = channelId;\n\n      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);\n      socket.emit('voice_joined', { channelId });\n\n    } catch (error) {\n      logger.error('Error joining voice channel:', error);\n      socket.emit('voice_error', { message: 'Failed to join voice channel' });\n    }\n  });\n\n  socket.on('leave_voice_channel', () => {\n    updateHeartbeat();\n    if (!socket.voiceChannel) return;\n\n    const channelId = socket.voiceChannel;\n    const channelPeers = voiceChannels.get(channelId);\n\n    if (channelPeers) {\n      channelPeers.delete(socket.id);\n      if (channelPeers.size === 0) {\n        voiceChannels.delete(channelId);\n      }\n    }\n\n    // Notify others\n    socket.to(channelId).emit('user_left_voice', { nickname: socket.nickname, socketId: socket.id });\n\n    socket.leave(channelId);\n    socket.voiceChannel = null;\n\n    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);\n    socket.emit('voice_left');\n  });\n\n  socket.on('voice_offer', (data) => {\n    const { offer, targetSocketId } = data;\n    socket.to(targetSocketId).emit('voice_offer', {\n      offer,\n      from: socket.id,\n      fromNickname: socket.nickname\n    });\n  });\n\n  socket.on('voice_answer', (data) => {\n    const { answer, targetSocketId } = data;\n    socket.to(targetSocketId).emit('voice_answer', {\n      answer,\n      from: socket.id,\n      fromNickname: socket.nickname\n    });\n  });\n\n  socket.on('ice_candidate', (data) => {\n    const { candidate, targetSocketId } = data;\n    socket.to(targetSocketId).emit('ice_candidate', {\n      candidate,\n      from: socket.id,\n      fromNickname: socket.nickname\n    });\n  });\n\n  // Disconnect\n  socket.on('disconnect', async () => {\n    logger.info(`User ${socket.nickname} disconnected`);\n\n    try {\n      const userId = socket.userId;\n\n      // Decrease connection count for this user\n      if (userId) {\n        const currentCount = userConnections.get(userId) || 0;\n        const newCount = Math.max(0, currentCount - 1);\n        userConnections.set(userId, newCount);\n\n        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {\n          userId: userId,\n          socketId: socket.id,\n          connectionsLeft: newCount\n        });\n      }\n\n      // Leave voice channel if in one\n      if (socket.voiceChannel) {\n        const channelId = socket.voiceChannel;\n        const channelPeers = voiceChannels.get(channelId);\n\n        if (channelPeers) {\n          channelPeers.delete(socket.id);\n          if (channelPeers.size === 0) {\n            voiceChannels.delete(channelId);\n          }\n        }\n\n        // Notify others\n        socket.to(channelId).emit('user_left_voice', { nickname: socket.nickname, socketId: socket.id });\n      }\n\n      if (socket.room) {\n        socket.leave(socket.room);\n\n        // Create leave message\n        const leaveMessage = new Message({\n          author: 'System',\n          channel: socket.room,\n          text: `${socket.nickname} left the channel.`,\n          type: 'system'\n        });\n        await leaveMessage.save();\n\n        io.to(socket.room).emit('message', {\n          author: leaveMessage.author,\n          room: leaveMessage.channel,\n          text: leaveMessage.text,\n          type: leaveMessage.type,\n          timestamp: leaveMessage.timestamp\n        });\n\n        // Update online users list\n        const roomUsers = Array.from(onlineUsers.values())\n          .filter(u => u.room === socket.room && u.userId !== socket.userId)\n          .map(u => ({ nickname: u.nickname, role: u.role }));\n        io.to(socket.room).emit('online_users', roomUsers);\n      }\n\n      // Remove from tracking\n      onlineUsers.delete(socket.id);\n\n      // Log current connections after disconnect\n      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);\n\n      // Update user status in database if this was the last connection\n      if (userId) {\n        const remainingConnections = userConnections.get(userId) || 0;\n        if (remainingConnections === 0) {\n          await User.findByIdAndUpdate(userId, {\n            status: 'offline',\n            lastActive: new Date()\n          });\n          console.log(`üîÑ User ${socket.nickname} status set to offline (last connection)`);\n          logger.info(`User status set to offline (last connection)`, {\n            userId: userId,\n            nickname: socket.nickname\n          });\n        } else {\n          // Update lastActive but keep status online\n          await User.findByIdAndUpdate(userId, {\n            lastActive: new Date()\n          });\n          console.log(`‚úÖ User ${socket.nickname} still online (${remainingConnections} connections left)`);\n          logger.info(`User remains online`, {\n            userId: userId,\n            nickname: socket.nickname,\n            connectionsLeft: remainingConnections\n          });\n        }\n      }\n\n    } catch (error) {\n      logger.error('Error in disconnect handler:', error);\n    }\n });\n});\n\n// Initialize database and start server (duplicate removed)\nconst initializeServer = async () => {\n  try {\n    // Connect to MongoDB\n    await connectDB();\n\n    // Create default channels if they don't exist\n    const defaultChannels = [\n      { id: 'general', name: 'General', type: 'text', createdBy: 'system' },\n      { id: 'voice-chat', name: 'Voice Chat', type: 'voice', createdBy: 'system' }\n    ];\n\n    for (const channelData of defaultChannels) {\n      await Channel.findOneAndUpdate(\n        { id: channelData.id },\n        channelData,\n        { upsert: true, new: true }\n      );\n    }\n\n    logger.info('Default channels initialized');\n\n    // Start server\n    const PORT = process.env.PORT || 3001;\n    server.listen(PORT, '0.0.0.0', () => {\n      logger.info(`Server running on port ${PORT}`);\n      console.log(`Server running on port ${PORT}`);\n    });\n\n  } catch (error) {\n    logger.error('Failed to initialize server:', error);\n    process.exit(1);\n  }\n};\n\n// Graceful shutdown\nprocess.on('SIGINT', async () => {\n  logger.info('Received SIGINT, shutting down gracefully...');\n  await closeDB();\n  io.close(() => {\n    logger.info('Server shut down');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGTERM', async () => {\n  logger.info('Received SIGTERM, shutting down gracefully...');\n  await closeDB();\n  io.close(() => {\n    logger.info('Server shut down');\n    process.exit(0);\n  });\n});\n\n// Start the server\ninitializeServer().catch(err => {\n  logger.error('Unhandled error during server startup:', err);\n  process.exit(1);\n});\n"],"mappings":"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","ignoreList":[]}