97e00a8c29262166edfebbc2a44a08dc
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
// Import crypto for generating secure tokens
const crypto = require('crypto');
const session = require('express-session');
const MongoStore = require('connect-mongo');
const {
  connectDB,
  closeDB
} = require('./db/connection');
const emailService = require('./services/emailService');

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);
const authRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: process.env.NODE_ENV === 'test' || process.env.CYPRESS_API_SKIP ? 20000 : 10,
  // Higher limit for better UX
  message: {
    error: 'Too many authentication attempts, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false,
  skip: req => {
    return req.get('User-Agent') && req.get('User-Agent').includes('Cypress');
  }
});
const apiRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 200,
  // Increased from 100 for better reliability
  message: {
    error: 'Too many requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const generalRateLimiter = rateLimit({
  windowMs: 60 * 60 * 1000,
  // 1 hour
  max: 2000,
  // Increased from 1000
  message: {
    error: 'Too many requests from this IP, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const passwordResetRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 5,
  // Increased slightly for reliability
  message: {
    error: 'Too many password reset requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const io = socketIo(server, {
  cors: {
    origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"],
    credentials: true
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling'],
  // Connection settings for better reliability
  connectTimeout: 20000,
  // 20 seconds
  pingTimeout: 5000,
  // 5 seconds for ping
  pingInterval: 10000,
  // 10 seconds between pings
  upgradeTimeout: 10000,
  allowUpgrades: true,
  cookieHttpOnly: true,
  cookieSameSite: 'lax'
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('üîå Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '20mb',
  strict: false
})); // Increased limit and disabled strict parsing for better error tolerance
app.use(express.urlencoded({
  extended: true,
  limit: '20mb'
})); // Handle form data with increased limit

// Session configuration with secure settings and detailed logging
const sessionMiddleware = session({
  secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
  resave: false,
  saveUninitialized: false,
  store: (() => {
    const store = MongoStore.create({
      mongoUrl: process.env.MONGODB_URI || 'mongodb://localhost:27017/chatjs',
      collectionName: 'sessions',
      ttl: 24 * 60 * 60,
      // 1 day in seconds
      autoRemove: 'native',
      touchAfter: 1 * 3600 // Limit session saves to every 1 hour to reduce DB load (must be less than ttl)
    });

    // Enhanced logging for MongoDB session store operations
    ['set', 'get', 'destroy', 'touch'].forEach(method => {
      const originalMethod = store[method];
      if (typeof originalMethod === 'function') {
        store[method] = async function (sid, ...args) {
          try {
            console.log(`üîÑ MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=start`);
            const startTime = Date.now();
            const result = await originalMethod.call(this, sid, ...args);
            const duration = Date.now() - startTime;
            console.log(`‚úÖ MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=success, duration=${duration}ms, result=${!!result}`);

            // Log session content for set operations
            if (method === 'set' && args[0]) {
              console.log(`üìù Session Content: sid=${sid}, authenticated=${args[0].authenticated}, userId=${args[0].userId}`);
            }
            return result;
          } catch (error) {
            console.error(`‚ùå MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=failed, error=${error.message}`);
            throw error;
          }
        };
      }
    });
    return store;
  })(),
  cookie: {
    secure: process.env.NODE_ENV === 'production',
    // HTTPS only in production
    httpOnly: true,
    // Prevent XSS access to cookie
    maxAge: 24 * 60 * 60 * 1000,
    // 24 hours
    sameSite: 'lax' // CSRF protection, 'lax' for cross-origin requests
  },
  name: 'chatSession',
  // Custom name to avoid default 'connect.sid'
  rolling: false,
  // Don't extend cookie expiration on each request
  unset: 'destroy' // Destroy session on logout
});
app.use(sessionMiddleware);

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// Session authentication middleware (works parallel to JWT)
const authenticateSession = async (req, res, next) => {
  try {
    console.log('üîê Session authentication middleware called:', {
      url: req.url,
      method: req.method,
      sessionId: req.sessionID,
      sessionExists: !!req.session,
      sessionData: req.session ? {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        nickname: req.session.nickname,
        role: req.session.role,
        loginTime: req.session.loginTime,
        csrfToken: req.session.csrfToken?.substring(0, 8) + '...'
      } : null
    });

    // Check if session exists and has authenticated user
    if (req.session && req.session.authenticated && req.session.userId) {
      console.log('üéØ Found authenticated session for userId:', req.session.userId);
      console.log('üîì Session fingerprint check:', {
        sid: req.sessionID,
        csrfToken: req.session.csrfToken?.substring(0, 4) + '...',
        userAgent: req.session.userAgent?.substring(0, 20) + '...',
        loginTime: req.session.loginTime
      });
      const user = await User.findById(req.session.userId);
      if (user) {
        console.log('‚úÖ Session user found in DB:', {
          nickname: user.nickname,
          id: user._id,
          status: user.status,
          sessionValid: true
        });
        req.sessionUser = user; // Store in req.sessionUser to avoid conflict with JWT req.user

        // Update session fingerprint if needed
        if (req.session.csrfToken && req.session.userAgent) {
          req.session.lastSessionCheck = new Date().toISOString();
          console.log('üîê Session fingerprint verified and updated');
        }
      } else {
        console.log('‚ö†Ô∏è Session user not found in DB, cleaning session:', req.session.userId);
        // Clean invalid session
        delete req.session.authenticated;
        delete req.session.userId;
        delete req.session.nickname;
        delete req.session.role;
      }
    } else {
      console.log('üîç No authenticated session found or session not initialized', {
        sessionId: req.sessionID,
        session: !!req.session,
        authenticated: req.session?.authenticated,
        userId: req.session?.userId
      });
      req.sessionUser = null; // Explicitly set to null when no session
    }
    next();
  } catch (error) {
    logger.warn('Session authentication error:', {
      error: error.message,
      sessionId: req.sessionID,
      ip: req.ip
    });
    req.sessionUser = null; // Set to null on error
    next();
  }
};

// JWT authentication middleware
const authenticateToken = async (req, res, next) => {
  try {
    console.log('üîê JWT authentication middleware called:', {
      url: req.url,
      method: req.method
    });
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

    console.log('üîë Token extraction result:', {
      hasAuthHeader: !!authHeader,
      hasToken: !!token
    });
    if (!token) {
      console.log('‚ùå No token provided');
      return res.status(401).json({
        error: 'Access token required',
        code: 'NO_TOKEN'
      });
    }
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    console.log('‚úÖ JWT decoded:', {
      userId: decoded.userId,
      nickname: decoded.nickname
    });
    const user = await User.findById(decoded.userId);
    if (!user) {
      console.log('‚ùå User not found in DB for JWT userId:', decoded.userId);
      return res.status(401).json({
        error: 'User not found',
        code: 'USER_NOT_FOUND'
      });
    }
    req.user = user;
    console.log('‚úÖ JWT authentication successful for user:', user.nickname, {
      id: user._id,
      status: user.status
    });
    next();
  } catch (error) {
    logger.warn('JWT authentication failed:', {
      error: error.message,
      ip: req.ip
    });
    if (error.name === 'JsonWebTokenError') {
      return res.status(401).json({
        error: 'Invalid token format',
        code: 'INVALID_TOKEN_FORMAT'
      });
    }
    if (error.name === 'TokenExpiredError') {
      return res.status(401).json({
        error: 'Token has expired',
        code: 'TOKEN_EXPIRED'
      });
    }
    return res.status(401).json({
      error: 'Token verification failed',
      code: 'TOKEN_VERIFICATION_FAILED'
    });
  }
};

// Role-based access control middleware
const requireModerator = async (req, res, next) => {
  try {
    if (!req.user) {
      return res.status(401).json({
        error: 'Authentication required',
        code: 'AUTH_REQUIRED'
      });
    }
    if (!req.user.hasModeratorPrivileges()) {
      return res.status(403).json({
        error: 'Moderator privileges required',
        code: 'MODERATOR_REQUIRED'
      });
    }
    next();
  } catch (error) {
    logger.error('Moderator check error:', error);
    res.status(500).json({
      error: 'Server error during authorization check',
      code: 'AUTH_CHECK_ERROR'
    });
  }
};
const requireAdmin = async (req, res, next) => {
  try {
    if (!req.user) {
      return res.status(401).json({
        error: 'Authentication required',
        code: 'AUTH_REQUIRED'
      });
    }
    if (!req.user.hasAdminPrivileges()) {
      return res.status(403).json({
        error: 'Administrator privileges required',
        code: 'ADMIN_REQUIRED'
      });
    }
    next();
  } catch (error) {
    logger.error('Admin check error:', error);
    res.status(500).json({
      error: 'Server error during authorization check',
      code: 'AUTH_CHECK_ERROR'
    });
  }
};

// Error handling middleware

// Session authentication middleware (run before rate limiting)
app.use(authenticateSession);

// General rate limiting (applied to all HTTP requests)
app.use(generalRateLimiter);

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Administrative endpoints - require moderator privileges
console.log('üîß Administrative API endpoints registered at startup');

// GET /api/admin/users - List all users with moderation info
app.get('/api/admin/users', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 50;
    const skip = (page - 1) * limit;
    const users = await User.find({}).select('-password -resetPasswordToken -resetPasswordExpires -moderationToken -moderationTokenExpires').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const total = await User.countDocuments();
    logger.info(`Admin user list requested by ${req.user.nickname}`, {
      adminId: req.user._id,
      page,
      limit,
      total
    });
    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    logger.error('Error fetching users for admin:', error);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// POST /api/admin/users/:userId/ban - Ban a user
app.post('/api/admin/users/:userId/ban', authenticateToken, requireModerator, apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
}) // Max 1 year in seconds
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent banning yourself
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot ban yourself'
      });
    }

    // Prevent non-admin from banning admin
    if (user.role === 'admin' && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Cannot ban administrator'
      });
    }
    await user.ban(reason, duration, req.user._id);
    logger.info(`User ${user.nickname} banned by ${req.user.nickname}`, {
      bannedUserId: userId,
      bannedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been banned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: true,
        banReason: reason,
        banExpires: user.banExpires
      }
    });
  } catch (error) {
    logger.error('Error banning user:', error);
    res.status(500).json({
      error: 'Failed to ban user'
    });
  }
});

// POST /api/admin/users/:userId/unban - Unban a user
app.post('/api/admin/users/:userId/unban', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.banned) {
      return res.status(400).json({
        error: 'User is not banned'
      });
    }
    await user.unban();
    logger.info(`User ${user.nickname} unbanned by ${req.user.nickname}`, {
      unbannedUserId: userId,
      unbannedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unbanned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: false
      }
    });
  } catch (error) {
    logger.error('Error unbanning user:', error);
    res.status(500).json({
      error: 'Failed to unban user'
    });
  }
});

// POST /api/admin/users/:userId/warn - Issue warning to user
app.post('/api/admin/users/:userId/warn', authenticateToken, requireModerator, apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.warn(reason, req.user._id, duration);
    await user.save();
    logger.info(`Warning issued to user ${user.nickname} by ${req.user.nickname}`, {
      warnedUserId: userId,
      warnedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `Warning issued to user ${user.nickname}`,
      warning: {
        reason,
        issuedBy: req.user.nickname,
        issuedAt: new Date(),
        expires: duration ? new Date(Date.now() + duration) : null
      },
      user: {
        id: user._id,
        nickname: user.nickname,
        warningsCount: user.getActiveWarningsCount()
      }
    });
  } catch (error) {
    logger.error('Error warning user:', error);
    res.status(500).json({
      error: 'Failed to warn user'
    });
  }
});

// POST /api/admin/users/:userId/role - Change user role
app.post('/api/admin/users/:userId/role', authenticateToken, requireAdmin, apiRateLimiter, [body('role').isIn(['member', 'moderator', 'admin'])], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      role: newRole
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent modifying your own role in potentially problematic ways
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot modify your own role'
      });
    }

    // Prevent non-admin from promoting to admin or demoting admin
    if ((newRole === 'admin' || user.role === 'admin') && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Only administrators can manage admin roles'
      });
    }
    const oldRole = user.role;
    user.role = newRole;
    await user.save();
    logger.info(`User ${user.nickname} role changed from ${oldRole} to ${newRole} by ${req.user.nickname}`, {
      changedUserId: userId,
      changedById: req.user._id,
      oldRole,
      newRole
    });
    res.json({
      message: `User ${user.nickname} role changed to ${newRole}`,
      user: {
        id: user._id,
        nickname: user.nickname,
        role: newRole
      }
    });
  } catch (error) {
    logger.error('Error changing user role:', error);
    res.status(500).json({
      error: 'Failed to change user role'
    });
  }
});

// POST /api/admin/users/:userId/mute - Mute user
app.post('/api/admin/users/:userId/mute', authenticateToken, requireModerator, apiRateLimiter, [body('duration').isInt({
  min: 60,
  max: 86400
}) // 1 minute to 24 hours
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.mute(duration);
    logger.info(`User ${user.nickname} muted by ${req.user.nickname}`, {
      mutedUserId: userId,
      mutedById: req.user._id,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been muted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: user.muteExpires
      }
    });
  } catch (error) {
    logger.error('Error muting user:', error);
    res.status(500).json({
      error: 'Failed to mute user'
    });
  }
});

// POST /api/admin/users/:userId/unmute - Unmute user
app.post('/api/admin/users/:userId/unmute', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.isMuted()) {
      return res.status(400).json({
        error: 'User is not muted'
      });
    }
    await user.unmute();
    logger.info(`User ${user.nickname} unmuted by ${req.user.nickname}`, {
      unmutedUserId: userId,
      unmutedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unmuted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: null
      }
    });
  } catch (error) {
    logger.error('Error unmuting user:', error);
    res.status(500).json({
      error: 'Failed to unmute user'
    });
  }
});

/**
 * @swagger
 * /api/users:
 *   get:
 *     tags:
 *       - Users
 *     summary: Get list of all registered users
 *     description: Retrieves a list of all users with their roles and online status
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of users successfully retrieved
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 type: object
 *                 properties:
 *                   id:
 *                     type: string
 *                     description: User's unique identifier
 *                   nickname:
 *                     type: string
 *                     description: User's display name
 *                   role:
 *                     type: string
 *                     enum: [admin, moderator, member]
 *                     description: User's role level
 *                   status:
 *                     type: string
 *                     enum: [online, offline]
 *                     description: User's online status
 *                   createdAt:
 *                     type: string
 *                     format: date-time
 *                     description: User registration date
 *                   lastActive:
 *                     type: string
 *                     format: date-time
 *                     description: Last activity timestamp
 *             example:
 *               - id: "507f1f77bcf86cd799439011"
 *                 nickname: "john_doe"
 *                 role: "member"
 *                 status: "online"
 *                 createdAt: "2024-09-07T10:30:00Z"
 *                 lastActive: "2024-09-07T22:15:00Z"
 *       401:
 *         description: Authentication required
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       500:
 *         description: Server error
 */
console.log('üîß GET /api/users route registered at startup');
app.get('/api/users', authenticateToken, apiRateLimiter, async (req, res) => {
  try {
    const users = await User.find({}).select('_id nickname role status createdAt lastActive').sort({
      nickname: 1
    });
    logger.info(`Users list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      totalUsers: users.length
    });
    console.log('üì§ Returning users data:', users.length);
    res.json(users);
  } catch (error) {
    logger.error('Error fetching users:', error);
    console.error('‚ùå Error in GET /api/users:', error.message);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('üîÑ Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('‚ö†Ô∏è Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('‚ùå Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`üîç Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('üîß POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  try {
    console.log('üîë Incoming login request:', {
      identifier: req.body.identifier,
      hasPassword: !!req.body.password,
      ip: req.ip
    });
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      console.log('‚ùå Login validation errors:', errors.array());
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      identifier,
      password
    } = req.body;
    console.log('üîç Searching for user with identifier:', identifier);

    // Find user by nickname or email
    const user = await User.findOne({
      $or: [{
        nickname: identifier
      }, {
        email: identifier
      }]
    });
    if (!user) {
      console.log('‚ùå User not found:', identifier);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }
    console.log('‚úÖ User found:', {
      nickname: user.nickname,
      email: user.email,
      status: user.status
    });

    // Compare password
    const isPasswordValid = await user.comparePassword(password);
    console.log('üîë Password validation result:', isPasswordValid);
    if (!isPasswordValid) {
      console.log('‚ùå Invalid password for user:', user.nickname);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }

    // Update user status to online
    user.status = 'online';
    await user.save();

    // Store user in session for parallel authentication
    console.log('üîè Creating and storing user session for user:', user.nickname);
    console.log('üè∑Ô∏è Generating sessionId:', req.sessionId);
    req.session.authenticated = true;
    req.session.userId = user._id.toString();
    req.session.nickname = user.nickname; // Store additional info for convenience
    req.session.role = user.role;
    req.session.csrfToken = crypto.randomBytes(32).toString('hex'); // Generate secure unique CSRF token
    req.session.loginTime = new Date().toISOString();
    req.session.userAgent = req.get('User-Agent'); // Store user agent for additional security

    console.log('üîì Session fingerprint generated:', {
      csrfTokenHash: crypto.createHash('sha256').update(req.session.csrfToken).digest('hex').substring(0, 8),
      userAgentLength: req.session.userAgent?.length,
      loginTime: req.session.loginTime
    });

    // Save session before JWT generation
    console.log('üîê Saving session to MongoDB before JWT generation:', {
      sessionId: req.sessionId,
      userId: req.session.userId,
      nickname: req.session.nickname,
      role: req.session.role,
      csrfToken: req.session.csrfToken?.substring(0, 8) + '...',
      // Log only first part for security
      sessionData: {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        loginTime: req.session.loginTime
      }
    });
    await new Promise((resolve, reject) => {
      req.session.save(err => {
        if (err) {
          console.error('‚ùå Session save error:', {
            sessionId: req.sessionId,
            errorMessage: err.message,
            errorStack: err.stack
          });
          reject(err);
        } else {
          console.log('‚úÖ Session saved successfully with security features:', {
            sessionId: req.sessionId,
            authenticated: req.session.authenticated,
            userId: req.session.userId,
            loginTime: req.session.loginTime,
            userAgentLength: req.session.userAgent?.length
          });
          logger.info('Session saved during login', {
            sessionId: req.sessionId,
            userId: req.session.userId,
            nickname: req.session.nickname,
            role: req.session.role,
            ip: req.ip,
            userAgentHash: crypto.createHash('sha256').update(req.session.userAgent || '').digest('hex').substring(0, 16)
          });
          resolve();
        }
      });
    });

    // Generate JWT token
    console.log('üîè Generating JWT token for user:', user.nickname);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role,
      csrfToken: req.session.csrfToken,
      sessionId: req.sessionId
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('‚úÖ JWT token generated successfully');
    logger.info(`User logged in: ${user.nickname}`);
    console.log('üì§ Sending login response');
    res.json({
      token,
      // JWT for API calls and WebSockets
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      },
      session: {
        authenticated: true,
        id: req.sessionId,
        expires: req.session.cookie.expires
      }
    });
  } catch (error) {
    logger.error('Login error:', error);
    res.status(500).json({
      error: 'Server error during login'
    });
  }
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      nickname,
      email,
      password
    } = req.body;

    // Check if user exists
    const existingUser = await User.findOne({
      $or: [{
        nickname
      }, {
        email
      }]
    });
    if (existingUser) {
      const conflictField = existingUser.nickname === nickname ? 'nickname' : 'email';
      const errorMessage = conflictField === 'nickname' ? 'Nickname already taken' : 'Email already registered';
      return res.status(409).json({
        error: errorMessage
      });
    }

    // Create user
    const user = new User({
      nickname,
      email,
      password,
      role: 'member',
      status: 'online'
    });
    await user.save();
    console.log('üîè Creating and storing new user session during registration for user:', user.nickname);
    console.log('üè∑Ô∏è Generating sessionId during registration:', req.sessionId);

    // Store user in session for parallel authentication during registration
    req.session.authenticated = true;
    req.session.userId = user._id.toString();
    req.session.nickname = user.nickname;
    req.session.role = user.role;
    req.session.csrfToken = crypto.randomBytes(32).toString('hex'); // Generate secure unique CSRF token
    req.session.registrationTime = new Date().toISOString();
    req.session.userAgent = req.get('User-Agent'); // Additional security tracking

    console.log('üîì Registration session fingerprint generated:', {
      csrfTokenHash: crypto.createHash('sha256').update(req.session.csrfToken).digest('hex').substring(0, 8),
      userAgentLength: req.session.userAgent?.length,
      registrationTime: req.session.registrationTime
    });

    // Save session before JWT generation
    console.log('üîê Saving registration session to MongoDB before JWT generation:', {
      sessionId: req.sessionId,
      userId: req.session.userId,
      nickname: req.session.nickname,
      role: req.session.role,
      csrfToken: req.session.csrfToken?.substring(0, 8) + '...',
      registrationTime: req.session.registrationTime,
      sessionData: {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        registrationTime: req.session.registrationTime
      }
    });
    await new Promise((resolve, reject) => {
      req.session.save(err => {
        if (err) {
          console.error('‚ùå Session save error during registration:', {
            sessionId: req.sessionId,
            errorMessage: err.message,
            errorStack: err.stack
          });
          reject(err);
        } else {
          console.log('‚úÖ Session saved successfully during registration:', {
            sessionId: req.sessionId,
            authenticated: req.session.authenticated,
            userId: req.session.userId,
            registrationTime: req.session.registrationTime,
            userAgentLength: req.session.userAgent?.length
          });
          logger.info('Session saved during registration', {
            sessionId: req.sessionId,
            userId: req.session.userId,
            nickname: req.session.nickname,
            role: req.session.role,
            ip: req.ip,
            userAgentHash: crypto.createHash('sha256').update(req.session.userAgent || '').digest('hex').substring(0, 16)
          });
          resolve();
        }
      });
    });
    console.log('JWT_SECRET present:', !!process.env.JWT_SECRET);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role,
      csrfToken: req.session.csrfToken,
      sessionId: req.sessionId
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('JWT token generated successfully');
    logger.info(`User registered: ${user.nickname}`);
    res.status(201).json({
      token,
      // JWT for API calls and WebSockets
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      },
      session: {
        authenticated: true,
        id: req.sessionId,
        expires: req.session.cookie.expires
      }
    });
  } catch (error) {
    logger.error('Registration error:', error);
    res.status(500).json({
      error: 'Server error during registration'
    });
  }
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('üîß GET /api/channels route registered at startup');
app.get('/api/channels', authenticateToken, apiRateLimiter, async (req, res) => {
  console.log('üöÄ GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('üì§ Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('‚ùå Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('üîß POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authenticateToken, apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('üîß POST /api/logout route registered at startup');
app.post('/api/logout', authenticateToken, apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Logout request from user:', req.user.nickname, {
      userId: req.user._id
    });

    // Disconnect all Socket.IO connections for this user
    const sockets = onlineUsers;
    let disconnectedCount = 0;
    for (const [socketId, socketData] of sockets.entries()) {
      if (socketData.userId === req.user._id.toString()) {
        const socket = io.sockets.sockets.get(socketId);
        if (socket) {
          socket.disconnect();
          disconnectedCount++;
        }
      }
    }

    // Update user status to offline
    await User.findByIdAndUpdate(req.user._id, {
      status: 'offline',
      lastActive: new Date()
    });
    console.log(`‚úÖ User ${req.user.nickname} logged out successfully, ${disconnectedCount} connections disconnected`);
    logger.info(`User logged out: ${req.user.nickname}`, {
      userId: req.user._id,
      disconnectedSockets: disconnectedCount
    });
    res.json({
      success: true,
      message: 'Logged out successfully',
      disconnectedCount
    });
  } catch (error) {
    logger.error('Logout error:', error);
    res.status(500).json({
      error: 'Server error during logout'
    });
  }
});

/**
 * Session logout endpoint - destroys session
 * This complements JWT logout to handle session-based authentication
 */
app.post('/api/logout_session', apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Session logout request, sessionId:', req.sessionId);

    // Check if there's an authenticated session or JWT user
    const hasJwtAuth = !!req.user; // From JWT middleware
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    console.log('ü§î Session logout check:', {
      hasJwtAuth,
      hasSessionAuth,
      sessionUserId,
      sessionId: req.sessionId
    });
    if (hasSessionAuth) {
      const sessionUser = sessionUserId ? await User.findById(sessionUserId) : null;
      const nickname = sessionUser ? sessionUser.nickname : 'unknown';
      console.log('‚úÖ Session logout: Destroying session for user:', nickname);

      // Disconnect Socket.IO connections for this session user
      if (sessionUserId) {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === sessionUserId) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        console.log(`üóëÔ∏è Session logout: Disconnected ${disconnectedCount} socket connections`);
      }

      // Destroy the session
      await new Promise((resolve, reject) => {
        req.session.destroy(err => {
          if (err) {
            console.error('‚ùå Session destroy error:', err);
            reject(err);
          } else {
            console.log('‚úÖ Session destroyed successfully');
            resolve();
          }
        });
      });
      logger.info(`Session logged out: ${nickname}`, {
        sessionId: req.sessionId,
        ip: req.ip
      });
      res.json({
        success: true,
        message: 'Session logged out successfully',
        type: 'session_logout',
        sessionDestroyed: true
      });
    } else {
      console.log('‚ö†Ô∏è Session logout: No authenticated session to destroy');
      res.json({
        success: true,
        message: 'No active session to log out',
        type: 'session_logout',
        sessionDestroyed: false
      });
    }
  } catch (error) {
    logger.error('Session logout error:', error);
    res.status(500).json({
      error: 'Server error during session logout',
      code: 'SESSION_LOGOUT_ERROR'
    });
  }
});

// Hybrid logout endpoint - handles both JWT and session logout
app.post('/api/logout_complete', apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Complete logout request (JWT + Session), sessionId:', req.sessionId);
    const hasJwtAuth = !!req.user;
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    let jwtLogoutResult = null;
    let sessionLogoutResult = null;

    // Handle JWT logout if JWT is provided
    if (hasJwtAuth) {
      try {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === req.user._id.toString()) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        await User.findByIdAndUpdate(req.user._id, {
          status: 'offline',
          lastActive: new Date()
        });
        jwtLogoutResult = {
          success: true,
          disconnectedCount
        };
      } catch (jwtError) {
        jwtLogoutResult = {
          success: false,
          error: jwtError.message
        };
      }
    }

    // Handle session logout if session exists
    if (hasSessionAuth) {
      try {
        if (sessionUserId) {
          const sessionUser = await User.findById(sessionUserId);
          console.log('‚úÖ Session logout: Destroying session for user:', sessionUser ? sessionUser.nickname : 'unknown');

          // Disconnect Socket.IO connections for this session user
          const sockets = onlineUsers;
          let disconnectedCount = 0;
          for (const [socketId, socketData] of sockets.entries()) {
            if (socketData.userId === sessionUserId) {
              const socket = io.sockets.sockets.get(socketId);
              if (socket) {
                socket.disconnect();
                disconnectedCount++;
              }
            }
          }
          console.log(`üóëÔ∏è Session logout: Disconnected ${disconnectedCount} socket connections`);
        }

        // Destroy the session
        await new Promise((resolve, reject) => {
          req.session.destroy(err => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
        sessionLogoutResult = {
          success: true,
          sessionDestroyed: true
        };
      } catch (sessionError) {
        sessionLogoutResult = {
          success: false,
          error: sessionError.message
        };
      }
    }
    const overallSuccess = (!jwtLogoutResult || jwtLogoutResult.success) && (!sessionLogoutResult || sessionLogoutResult.success);
    res.json({
      success: overallSuccess,
      message: 'Complete logout processed',
      type: 'complete_logout',
      jwt: jwtLogoutResult,
      session: sessionLogoutResult
    });
  } catch (error) {
    logger.error('Complete logout error:', error);
    res.status(500).json({
      error: 'Server error during complete logout',
      code: 'COMPLETE_LOGOUT_ERROR'
    });
  }
});

//  404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('‚ùå Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

// Improved Socket.IO session middleware with proper res object handling
io.use((socket, next) => {
  // Create a more complete mock res object if missing
  if (!socket.request.res) {
    socket.request.res = {
      setHeader: () => {},
      getHeader: () => {},
      writeHead: () => {},
      end: () => {},
      headersSent: false,
      statusCode: 200
    };
  }

  // Apply session middleware with error handling
  sessionMiddleware(socket.request, socket.request.res, err => {
    if (err) {
      console.error('Session middleware error for Socket.IO:', err);
      return next(err);
    }
    next();
  });
});

// Socket.IO authentication middleware
io.use(async (socket, next) => {
  const {
    csrfToken
  } = socket.handshake.auth;
  const session = socket.request.session;
  console.log('üîë Socket authentication attempt with session and CSRF fingerprint check');
  console.log('üîç Socket session data:', {
    sessionId: socket.request.sessionId,
    sessionExists: !!session,
    authenticated: session?.authenticated,
    userId: session?.userId,
    nickname: session?.nickname,
    role: session?.role,
    csrfTokenProvided: !!csrfToken,
    sessionCsrfToken: !!session?.csrfToken,
    match: csrfToken && session?.csrfToken && csrfToken === session.csrfToken
  });
  console.log('üîì Fingerprint verification:', {
    sid: socket.request.sessionId,
    providedCsrfToken: csrfToken?.substring(0, 8) + '...',
    sessionCsrfToken: session?.csrfToken?.substring(0, 8) + '...',
    userAgent: socket.request.session?.userAgent?.substring(0, 20) + '...',
    loginTime: session?.loginTime,
    registrationTime: session?.registrationTime
  });

  // Validate session exists and has authentication
  if (!session || !session.authenticated || !session.userId) {
    console.log('‚ùå Socket authentication failed: No authenticated session found');
    console.log('üìã Session details:', {
      sessionId: socket.request.sessionId,
      session: !!session,
      authenticated: session?.authenticated,
      userId: session?.userId
    });
    return next(new Error('Session authentication required'));
  }

  // Validate CSRF token for additional security (must match session's unique CSRF token)
  if (!csrfToken || !session.csrfToken || csrfToken !== session.csrfToken) {
    console.log('‚ùå Socket authentication failed: Invalid CSRF token fingerprint');
    console.log('üîí Fingerprint mismatch details:', {
      provided: csrfToken?.substring(0, 8) + '...',
      expected: session.csrfToken?.substring(0, 8) + '...',
      match: csrfToken === session.csrfToken
    });
    return next(new Error('CSRF validation failed'));
  }
  console.log('‚úÖ Socket fingerprint verification successful');
  try {
    // Verify user exists in database
    const user = await User.findById(session.userId);
    if (!user) {
      console.log('‚ùå Socket authentication failed: User not found in DB');
      return next(new Error('User not found in session'));
    }

    // Handle user status update based on connection count
    const userId = session.userId;
    const connectionCount = userConnections.get(userId) || 0;
    const newConnectionCount = connectionCount + 1;
    userConnections.set(userId, newConnectionCount);

    // Check if user is banned
    if (user.isBanned()) {
      console.log('‚ùå Socket authentication failed: User is banned', {
        userId: userId,
        nickname: user.nickname,
        banReason: user.banReason,
        banExpires: user.banExpires
      });
      socket.emit('banned', {
        reason: user.banReason || 'You have been banned from the server',
        expires: user.banExpires
      });
      return next(new Error('User is banned'));
    }

    // Check if user is muted and enforce mute in chat
    const isMuted = user.isMuted();
    console.log('üîá User mute status checked:', {
      nickname: user.nickname,
      isMuted,
      muteExpires: user.muteExpires
    });

    // Update user status with connection count tracking
    const updateResult = await User.findOneAndUpdate({
      _id: userId
    }, {
      $set: {
        status: newConnectionCount > 0 ? 'online' : 'offline',
        lastActive: new Date()
      }
    }, {
      new: true,
      runValidators: true
    });
    if (updateResult) {
      console.log(`üîÑ Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
      logger.info(`User status updated to online via socket auth`, {
        userId: userId,
        nickname: user.nickname,
        connections: newConnectionCount,
        socketId: socket.id,
        timestamp: new Date()
      });
    }

    // Override local user object with updated data
    user.status = updateResult ? updateResult.status : 'online';
    user.lastActive = updateResult ? updateResult.lastActive : new Date();

    // Set socket properties for authenticated user
    socket.userId = session.userId;
    socket.nickname = session.nickname;
    socket.role = session.role || 'member';
    console.log(`üéâ Socket authenticated via session: ${socket.nickname} (userId: ${socket.userId})`);
    console.log('Socket authentication successful');
    return next();
  } catch (error) {
    console.error('‚ùå Socket authentication error:', error.message);
    logger.error(`Socket auth failed: ${error.message}`, {
      socketId: socket.id,
      sessionId: session?.id,
      ip: socket.handshake.address
    });
    return next(new Error('Socket authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`üßπ Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`üîÑ User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('üöÄ Socket connection established');
  console.log(`üë§ User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`üìä Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Enhanced heartbeat mechanism with reconnection logic
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      const now = Date.now();
      user.lastHeartbeat = now;
      console.log(`üíì Heartbeat received from user ${socket.nickname} at ${new Date(now).toISOString()}`);
    } else {
      logger.warn(`Heartbeat received from unknown socket: ${socket.id}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };

  // Send heartbeat to client periodically
  const heartbeatInterval = setInterval(() => {
    if (socket.connected) {
      socket.emit('heartbeat_request');
    }
  }, 15000); // Send heartbeat every 15 seconds

  // Clear interval on disconnect
  socket.on('disconnect', () => {
    clearInterval(heartbeatInterval);
    // ... rest of disconnect logic
  });

  // Utility function for retrying database operations
  const retryDatabaseOperation = async (operation, retries = 3) => {
    for (let i = 0; i <= retries; i++) {
      try {
        return await operation();
      } catch (error) {
        if (i === retries) throw error;
        logger.warn(`Database operation failed, retry ${i + 1}/${retries}:`, error.message);
        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1))); // Exponential backoff
      }
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      await retryDatabaseOperation(async () => {
        // Verify channel exists
        const channel = await Channel.findOne({
          id: room
        });
        if (!channel) {
          logger.warn('Join room failed: Channel not found', {
            userId: socket.userId,
            nickname: socket.nickname,
            room
          });
          socket.emit('error', {
            message: `Channel '${room}' not found`,
            code: 'CHANNEL_NOT_FOUND',
            room,
            timestamp: new Date().toISOString()
          });
          throw new Error('Channel not found');
        }

        // Leave previous room
        if (socket.room) {
          socket.leave(socket.room);
          onlineUsers.set(socket.id, {
            ...onlineUsers.get(socket.id),
            room: null
          });

          // Update online users in previous room
          const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
            nickname: u.nickname,
            role: u.role
          }));
          io.to(socket.room).emit('online_users', previousRoomUsers);
        }
        socket.room = room;
        socket.join(socket.room);

        // Update user tracking
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: socket.room
        });
        logger.info(`User ${socket.nickname} joined room ${socket.room}`);

        // Send system message about joining
        const joinMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} joined the channel.`,
          type: 'system'
        });
        await joinMessage.save();
        io.to(socket.room).emit('message', {
          author: joinMessage.author,
          channel: joinMessage.channel,
          text: joinMessage.text,
          type: joinMessage.type,
          timestamp: joinMessage.timestamp
        });

        // Send online users in current room
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);

        // Send message history
        const history = await Message.find({
          channel: socket.room,
          $or: [{
            type: 'public'
          }, {
            type: 'system'
          }, {
            author: socket.nickname
          }, {
            target: socket.nickname
          }]
        }).sort({
          timestamp: -1
        }).limit(100).sort({
          timestamp: 1
        }); // Resort for chronological order

        socket.emit('history', history.map(msg => ({
          author: msg.author,
          room: msg.channel,
          text: msg.text,
          type: msg.type,
          target: msg.target,
          timestamp: msg.timestamp
        })));
      });
    } catch (error) {
      logger.error('Error in join_room after retries:', error);
      socket.emit('error', {
        message: 'Failed to join room after multiple attempts',
        code: 'JOIN_ROOM_FAILED',
        timestamp: new Date().toISOString()
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;

    // Check if user is muted
    const currentUser = await User.findById(socket.userId);
    if (currentUser && currentUser.isMuted()) {
      socket.emit('error', {
        message: 'You are muted and cannot send messages',
        code: 'USER_MUTED',
        muteExpires: currentUser.muteExpires
      });
      return;
    }
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`üîÑ User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`‚úÖ User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Start the server
initializeServer().catch(err => {
  logger.error('Unhandled error during server startup:', err);
  process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNyeXB0byIsInNlc3Npb24iLCJNb25nb1N0b3JlIiwiY29ubmVjdERCIiwiY2xvc2VEQiIsImVtYWlsU2VydmljZSIsIlVzZXIiLCJNZXNzYWdlIiwiQ2hhbm5lbCIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImVycm9ycyIsInN0YWNrIiwianNvbiIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJDb25zb2xlIiwiY29sb3JpemUiLCJzaW1wbGUiLCJhcHAiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJ3aW5kb3dNcyIsIm1heCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIkNZUFJFU1NfQVBJX1NLSVAiLCJtZXNzYWdlIiwiZXJyb3IiLCJzdGFuZGFyZEhlYWRlcnMiLCJsZWdhY3lIZWFkZXJzIiwic2tpcCIsInJlcSIsImdldCIsImluY2x1ZGVzIiwiYXBpUmF0ZUxpbWl0ZXIiLCJnZW5lcmFsUmF0ZUxpbWl0ZXIiLCJwYXNzd29yZFJlc2V0UmF0ZUxpbWl0ZXIiLCJpbyIsIm9yaWdpbiIsIkFMTE9XRURfT1JJR0lOUyIsInNwbGl0IiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJjb25uZWN0VGltZW91dCIsInBpbmdUaW1lb3V0IiwicGluZ0ludGVydmFsIiwidXBncmFkZVRpbWVvdXQiLCJhbGxvd1VwZ3JhZGVzIiwiY29va2llSHR0cE9ubHkiLCJjb29raWVTYW1lU2l0ZSIsImVuZ2luZSIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJodHRwU3RhdHVzIiwic3RhdHVzIiwiaGVhZGVycyIsInVzZSIsImxpbWl0Iiwic3RyaWN0IiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2Vzc2lvbk1pZGRsZXdhcmUiLCJzZWNyZXQiLCJTRVNTSU9OX1NFQ1JFVCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic3RvcmUiLCJjcmVhdGUiLCJtb25nb1VybCIsIk1PTkdPREJfVVJJIiwiY29sbGVjdGlvbk5hbWUiLCJ0dGwiLCJhdXRvUmVtb3ZlIiwidG91Y2hBZnRlciIsImZvckVhY2giLCJtZXRob2QiLCJvcmlnaW5hbE1ldGhvZCIsInNpZCIsImFyZ3MiLCJ0b1VwcGVyQ2FzZSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXN1bHQiLCJjYWxsIiwiZHVyYXRpb24iLCJhdXRoZW50aWNhdGVkIiwidXNlcklkIiwiY29va2llIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJtYXhBZ2UiLCJzYW1lU2l0ZSIsIm5hbWUiLCJyb2xsaW5nIiwidW5zZXQiLCJlcnJvckhhbmRsZXIiLCJyZXMiLCJuZXh0IiwidXJsIiwiaXAiLCJ1c2VyQWdlbnQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiZmllbGQiLCJwYXRoIiwidmFsdWUiLCJkZXRhaWxzIiwia2V5cyIsImtleVZhbHVlIiwicmVxdWVzdElkIiwiaWQiLCJzdGFydCIsImluZm8iLCJzdGF0dXNDb2RlIiwidXNlciIsIm5pY2tuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsImF1dGhlbnRpY2F0ZVNlc3Npb24iLCJzZXNzaW9uSWQiLCJzZXNzaW9uSUQiLCJzZXNzaW9uRXhpc3RzIiwic2Vzc2lvbkRhdGEiLCJyb2xlIiwibG9naW5UaW1lIiwiY3NyZlRva2VuIiwic3Vic3RyaW5nIiwiZmluZEJ5SWQiLCJfaWQiLCJzZXNzaW9uVmFsaWQiLCJzZXNzaW9uVXNlciIsImxhc3RTZXNzaW9uQ2hlY2siLCJ0b0lTT1N0cmluZyIsIndhcm4iLCJhdXRoZW50aWNhdGVUb2tlbiIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsImhhc0F1dGhIZWFkZXIiLCJoYXNUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJKV1RfU0VDUkVUIiwicmVxdWlyZU1vZGVyYXRvciIsImhhc01vZGVyYXRvclByaXZpbGVnZXMiLCJyZXF1aXJlQWRtaW4iLCJoYXNBZG1pblByaXZpbGVnZXMiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJkaXJlY3RpdmVzIiwiZGVmYXVsdFNyYyIsInN0eWxlU3JjIiwiZm9udFNyYyIsImltZ1NyYyIsInNjcmlwdFNyYyIsImNvbm5lY3RTcmMiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5Iiwic3dhZ2dlck9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsInRpdGxlIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiY29udGFjdCIsInNlcnZlcnMiLCJjb21wb25lbnRzIiwic2NoZW1hcyIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZW1haWwiLCJlbnVtIiwiZGVmYXVsdCIsImNyZWF0ZWRBdCIsImxhc3RBY3RpdmUiLCJyZXF1aXJlZCIsImNyZWF0ZWRCeSIsInBvc2l0aW9uIiwiUmVnaXN0ZXJSZXF1ZXN0IiwicGFzc3dvcmQiLCJMb2dpblJlcXVlc3QiLCJpZGVudGlmaWVyIiwiQXV0aFJlc3BvbnNlIiwiJHJlZiIsIkNoYW5uZWxSZXF1ZXN0IiwiRXJyb3JSZXNwb25zZSIsIml0ZW1zIiwibXNnIiwicGFyYW0iLCJsb2NhdGlvbiIsInNlY3VyaXR5U2NoZW1lcyIsImJlYXJlckF1dGgiLCJzY2hlbWUiLCJiZWFyZXJGb3JtYXQiLCJzZWN1cml0eSIsImFwaXMiLCJzd2FnZ2VyU3BlYyIsInJlbW92ZUhlYWRlciIsInNlcnZlIiwic2V0dXAiLCJwYWdlIiwicGFyc2VJbnQiLCJxdWVyeSIsInVzZXJzIiwiZmluZCIsInNlbGVjdCIsInNvcnQiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYWRtaW5JZCIsInBhZ2luYXRpb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwicG9zdCIsImlzTGVuZ3RoIiwibWluIiwidHJpbSIsIm9wdGlvbmFsIiwiaXNJbnQiLCJpc0VtcHR5IiwiYXJyYXkiLCJwYXJhbXMiLCJyZWFzb24iLCJ0b1N0cmluZyIsImJhbiIsImJhbm5lZFVzZXJJZCIsImJhbm5lZEJ5SWQiLCJiYW5uZWQiLCJiYW5SZWFzb24iLCJiYW5FeHBpcmVzIiwidW5iYW4iLCJ1bmJhbm5lZFVzZXJJZCIsInVuYmFubmVkQnlJZCIsInNhdmUiLCJ3YXJuZWRVc2VySWQiLCJ3YXJuZWRCeUlkIiwid2FybmluZyIsImlzc3VlZEJ5IiwiaXNzdWVkQXQiLCJleHBpcmVzIiwid2FybmluZ3NDb3VudCIsImdldEFjdGl2ZVdhcm5pbmdzQ291bnQiLCJpc0luIiwibmV3Um9sZSIsIm9sZFJvbGUiLCJjaGFuZ2VkVXNlcklkIiwiY2hhbmdlZEJ5SWQiLCJtdXRlIiwibXV0ZWRVc2VySWQiLCJtdXRlZEJ5SWQiLCJtdXRlRXhwaXJlcyIsImlzTXV0ZWQiLCJ1bm11dGUiLCJ1bm11dGVkVXNlcklkIiwidW5tdXRlZEJ5SWQiLCJ0b3RhbFVzZXJzIiwibGVuZ3RoIiwic2V0SGVhZGVyIiwic2VuZCIsImF1dGhMaW1pdGVyU3RvcmUiLCJyZXNldEFsbCIsInN1Y2Nlc3MiLCJ1cHRpbWUiLCJoYXNQYXNzd29yZCIsImZpbmRPbmUiLCIkb3IiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlUGFzc3dvcmQiLCJyYW5kb21CeXRlcyIsImNzcmZUb2tlbkhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0IiwidXNlckFnZW50TGVuZ3RoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvck1lc3NhZ2UiLCJlcnJvclN0YWNrIiwidXNlckFnZW50SGFzaCIsInNpZ24iLCJleHBpcmVzSW4iLCJlc2NhcGUiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJleGlzdGluZ1VzZXIiLCJjb25mbGljdEZpZWxkIiwicmVnaXN0cmF0aW9uVGltZSIsImF1dGhvcml6YXRpb24iLCJjaGFubmVscyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJzb2NrZXRzIiwib25saW5lVXNlcnMiLCJkaXNjb25uZWN0ZWRDb3VudCIsInNvY2tldElkIiwic29ja2V0RGF0YSIsImVudHJpZXMiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJkaXNjb25uZWN0ZWRTb2NrZXRzIiwiaGFzSnd0QXV0aCIsImhhc1Nlc3Npb25BdXRoIiwic2Vzc2lvblVzZXJJZCIsImRlc3Ryb3kiLCJzZXNzaW9uRGVzdHJveWVkIiwiand0TG9nb3V0UmVzdWx0Iiwic2Vzc2lvbkxvZ291dFJlc3VsdCIsImp3dEVycm9yIiwic2Vzc2lvbkVycm9yIiwib3ZlcmFsbFN1Y2Nlc3MiLCJNYXAiLCJ1c2VyQ29ubmVjdGlvbnMiLCJ2b2ljZUNoYW5uZWxzIiwicmVxdWVzdCIsImdldEhlYWRlciIsIndyaXRlSGVhZCIsImVuZCIsImhlYWRlcnNTZW50IiwiaGFuZHNoYWtlIiwiYXV0aCIsImNzcmZUb2tlblByb3ZpZGVkIiwic2Vzc2lvbkNzcmZUb2tlbiIsIm1hdGNoIiwicHJvdmlkZWRDc3JmVG9rZW4iLCJFcnJvciIsInByb3ZpZGVkIiwiZXhwZWN0ZWQiLCJjb25uZWN0aW9uQ291bnQiLCJuZXdDb25uZWN0aW9uQ291bnQiLCJzZXQiLCJpc0Jhbm5lZCIsImVtaXQiLCJ1cGRhdGVSZXN1bHQiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJjb25uZWN0aW9ucyIsImFkZHJlc3MiLCJjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucyIsInRpbWVvdXQiLCJsYXN0SGVhcnRiZWF0IiwiY29ubmVjdGlvbnNMZWZ0IiwiY2F0Y2giLCJkZWxldGUiLCJzZXRJbnRlcnZhbCIsInJvb20iLCJzaXplIiwidXBkYXRlSGVhcnRiZWF0IiwiaGVhcnRiZWF0SW50ZXJ2YWwiLCJjb25uZWN0ZWQiLCJjbGVhckludGVydmFsIiwicmV0cnlEYXRhYmFzZU9wZXJhdGlvbiIsIm9wZXJhdGlvbiIsInJldHJpZXMiLCJpIiwic2V0VGltZW91dCIsImRhdGEiLCJsZWF2ZSIsInByZXZpb3VzUm9vbVVzZXJzIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwidSIsInRvIiwiam9pbiIsImpvaW5NZXNzYWdlIiwiYXV0aG9yIiwidGV4dCIsInJvb21Vc2VycyIsImhpc3RvcnkiLCJ0YXJnZXQiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2VEYXRhIiwiZGVidWciLCJ0cmltbWVkVGV4dCIsInRhcmdldE5pY2tuYW1lIiwic2VuZGVyUm9vbSIsInNlbmRlclNvY2tldElkIiwidGFyZ2V0VXNlciIsInRhcmdldEZvdW5kIiwidGFyZ2V0Um9vbSIsIm9ubGluZVVzZXJzSW5Sb29tIiwib25saW5lVXNlcnNJblNlbmRlclJvb20iLCJhdmFpbGFibGVVc2VycyIsInRhcmdldFNvY2tldElkIiwic2VuZGVyIiwibWVzc2FnZUlkIiwib25saW5lVXNlcnNDb3VudCIsIm1lc3NhZ2VMZW5ndGgiLCJzcGVha2luZyIsImhhcyIsImNoYW5uZWxQZWVycyIsInBlZXJDb25uZWN0aW9uIiwic3RyZWFtIiwidm9pY2VDaGFubmVsIiwib2ZmZXIiLCJmcm9tTmlja25hbWUiLCJhbnN3ZXIiLCJjYW5kaWRhdGUiLCJjdXJyZW50Q291bnQiLCJuZXdDb3VudCIsImxlYXZlTWVzc2FnZSIsInJlbWFpbmluZ0Nvbm5lY3Rpb25zIiwiaW5pdGlhbGl6ZVNlcnZlciIsImRlZmF1bHRDaGFubmVscyIsImNoYW5uZWxEYXRhIiwidXBzZXJ0IiwiUE9SVCIsImxpc3RlbiIsImV4aXQiLCJjbG9zZSJdLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xuY29uc3Qgc29ja2V0SW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IHdpbnN0b24gPSByZXF1aXJlKCd3aW5zdG9uJyk7XG5jb25zdCBzd2FnZ2VySnNkb2MgPSByZXF1aXJlKCdzd2FnZ2VyLWpzZG9jJyk7XG5jb25zdCBzd2FnZ2VyVWkgPSByZXF1aXJlKCdzd2FnZ2VyLXVpLWV4cHJlc3MnKTtcbmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpO1xuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7XG5jb25zdCB7IGJvZHksIHZhbGlkYXRpb25SZXN1bHQgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7XG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG4vLyBJbXBvcnQgY3J5cHRvIGZvciBnZW5lcmF0aW5nIHNlY3VyZSB0b2tlbnNcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuY29uc3Qgc2Vzc2lvbiA9IHJlcXVpcmUoJ2V4cHJlc3Mtc2Vzc2lvbicpO1xuY29uc3QgTW9uZ29TdG9yZSA9IHJlcXVpcmUoJ2Nvbm5lY3QtbW9uZ28nKTtcbmNvbnN0IHsgY29ubmVjdERCLCBjbG9zZURCIH0gPSByZXF1aXJlKCcuL2RiL2Nvbm5lY3Rpb24nKTtcbmNvbnN0IGVtYWlsU2VydmljZSA9IHJlcXVpcmUoJy4vc2VydmljZXMvZW1haWxTZXJ2aWNlJyk7XG5cbi8vIEltcG9ydCBtb2RlbHNcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuL21vZGVscy9Vc2VyJyk7XG5jb25zdCBNZXNzYWdlID0gcmVxdWlyZSgnLi9tb2RlbHMvTWVzc2FnZScpO1xuY29uc3QgQ2hhbm5lbCA9IHJlcXVpcmUoJy4vbW9kZWxzL0NoYW5uZWwnKTtcblxuLy8gTG9nZ2VyIHNldHVwXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gIGxldmVsOiAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoKSxcbiAgICB3aW5zdG9uLmZvcm1hdC5lcnJvcnMoeyBzdGFjazogdHJ1ZSB9KSxcbiAgICB3aW5zdG9uLmZvcm1hdC5qc29uKClcbiAgKSxcbiAgZGVmYXVsdE1ldGE6IHsgc2VydmljZTogJ2NoYXQtc2VydmVyJyB9LFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdsb2dzL3NlcnZlci5sb2cnIH0pLFxuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICApXG4gICAgfSlcbiAgXVxufSk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG5cbmNvbnN0IGF1dGhSYXRlTGltaXRlciA9IHJhdGVMaW1pdCh7XG4gIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xuICBtYXg6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcgfHwgcHJvY2Vzcy5lbnYuQ1lQUkVTU19BUElfU0tJUCA/IDIwMDAwIDogMTAsIC8vIEhpZ2hlciBsaW1pdCBmb3IgYmV0dGVyIFVYXG4gIG1lc3NhZ2U6IHsgZXJyb3I6ICdUb28gbWFueSBhdXRoZW50aWNhdGlvbiBhdHRlbXB0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gIHN0YW5kYXJkSGVhZGVyczogdHJ1ZSxcbiAgbGVnYWN5SGVhZGVyczogZmFsc2UsXG4gIHNraXA6IChyZXEpID0+IHtcbiAgICByZXR1cm4gcmVxLmdldCgnVXNlci1BZ2VudCcpICYmIHJlcS5nZXQoJ1VzZXItQWdlbnQnKS5pbmNsdWRlcygnQ3lwcmVzcycpO1xuICB9XG59KTtcblxuY29uc3QgYXBpUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiAyMDAsIC8vIEluY3JlYXNlZCBmcm9tIDEwMCBmb3IgYmV0dGVyIHJlbGlhYmlsaXR5XG4gIG1lc3NhZ2U6IHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gIHN0YW5kYXJkSGVhZGVyczogdHJ1ZSxcbiAgbGVnYWN5SGVhZGVyczogZmFsc2UsXG59KTtcblxuY29uc3QgZ2VuZXJhbFJhdGVMaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgd2luZG93TXM6IDYwICogNjAgKiAxMDAwLCAvLyAxIGhvdXJcbiAgbWF4OiAyMDAwLCAvLyBJbmNyZWFzZWQgZnJvbSAxMDAwXG4gIG1lc3NhZ2U6IHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9LFxuICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsXG4gIGxlZ2FjeUhlYWRlcnM6IGZhbHNlLFxufSk7XG5cbmNvbnN0IHBhc3N3b3JkUmVzZXRSYXRlTGltaXRlciA9IHJhdGVMaW1pdCh7XG4gIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xuICBtYXg6IDUsIC8vIEluY3JlYXNlZCBzbGlnaHRseSBmb3IgcmVsaWFiaWxpdHlcbiAgbWVzc2FnZTogeyBlcnJvcjogJ1RvbyBtYW55IHBhc3N3b3JkIHJlc2V0IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgfSxcbiAgc3RhbmRhcmRIZWFkZXJzOiB0cnVlLFxuICBsZWdhY3lIZWFkZXJzOiBmYWxzZSxcbn0pO1xuY29uc3QgaW8gPSBzb2NrZXRJbyhzZXJ2ZXIsIHtcbiAgY29yczoge1xuICAgIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgICAgPyBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlM/LnNwbGl0KCcsJykgfHwgZmFsc2VcbiAgICAgIDogW1wiaHR0cDovL2xvY2FsaG9zdDozMDAzXCIsIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCJdLFxuICAgIG1ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIl0sXG4gICAgYWxsb3dlZEhlYWRlcnM6IFtcImF1dGhvcml6YXRpb25cIiwgXCJjb250ZW50LXR5cGVcIl0sXG4gICAgY3JlZGVudGlhbHM6IHRydWVcbiAgfSxcbiAgLy8gRW5zdXJlIGJvdGggdHJhbnNwb3J0cyBhcmUgc3VwcG9ydGVkXG4gIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSxcbiAgLy8gQ29ubmVjdGlvbiBzZXR0aW5ncyBmb3IgYmV0dGVyIHJlbGlhYmlsaXR5XG4gIGNvbm5lY3RUaW1lb3V0OiAyMDAwMCwgLy8gMjAgc2Vjb25kc1xuICBwaW5nVGltZW91dDogNTAwMCwgLy8gNSBzZWNvbmRzIGZvciBwaW5nXG4gIHBpbmdJbnRlcnZhbDogMTAwMDAsIC8vIDEwIHNlY29uZHMgYmV0d2VlbiBwaW5nc1xuICB1cGdyYWRlVGltZW91dDogMTAwMDAsXG4gIGFsbG93VXBncmFkZXM6IHRydWUsXG4gIGNvb2tpZUh0dHBPbmx5OiB0cnVlLFxuICBjb29raWVTYW1lU2l0ZTogJ2xheCdcbn0pO1xuXG4vLyBMb2cgc29ja2V0IGNvbm5lY3Rpb24gZXJyb3JzIGZvciBkZWJ1Z2dpbmdcbmlvLmVuZ2luZS5vbignY29ubmVjdGlvbl9lcnJvcicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coJ/CflIwgU29ja2V0IGVuZ2luZSBjb25uZWN0aW9uIGVycm9yOicsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG4gIGxvZ2dlci5lcnJvcignU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6Jywge1xuICAgIGNvZGU6IGVyci5jb2RlLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIGh0dHBTdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgaGVhZGVyczogZXJyLnJlcT8uaGVhZGVyc1xuICB9KTtcbn0pO1xuXG4vLyBDT1JTIGNvbmZpZ3VyYXRpb25cbmFwcC51c2UoY29ycyh7XG4gIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IGZhbHNlXG4gICAgOiB0cnVlLFxuICBjcmVkZW50aWFsczogdHJ1ZVxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbih7IGxpbWl0OiAnMjBtYicsIHN0cmljdDogZmFsc2UgfSkpOyAvLyBJbmNyZWFzZWQgbGltaXQgYW5kIGRpc2FibGVkIHN0cmljdCBwYXJzaW5nIGZvciBiZXR0ZXIgZXJyb3IgdG9sZXJhbmNlXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlLCBsaW1pdDogJzIwbWInIH0pKTsgLy8gSGFuZGxlIGZvcm0gZGF0YSB3aXRoIGluY3JlYXNlZCBsaW1pdFxuXG4vLyBTZXNzaW9uIGNvbmZpZ3VyYXRpb24gd2l0aCBzZWN1cmUgc2V0dGluZ3MgYW5kIGRldGFpbGVkIGxvZ2dpbmdcbmNvbnN0IHNlc3Npb25NaWRkbGV3YXJlID0gc2Vzc2lvbih7XG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgfHwgJ3lvdXItdmVyeS1sb25nLXNlY3VyZS1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJyxcbiAgcmVzYXZlOiBmYWxzZSxcbiAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICBzdG9yZTogKCgpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IE1vbmdvU3RvcmUuY3JlYXRlKHtcbiAgICAgIG1vbmdvVXJsOiBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9jaGF0anMnLFxuICAgICAgY29sbGVjdGlvbk5hbWU6ICdzZXNzaW9ucycsXG4gICAgICB0dGw6IDI0ICogNjAgKiA2MCwgLy8gMSBkYXkgaW4gc2Vjb25kc1xuICAgICAgYXV0b1JlbW92ZTogJ25hdGl2ZScsXG4gICAgICB0b3VjaEFmdGVyOiAxICogMzYwMCAvLyBMaW1pdCBzZXNzaW9uIHNhdmVzIHRvIGV2ZXJ5IDEgaG91ciB0byByZWR1Y2UgREIgbG9hZCAobXVzdCBiZSBsZXNzIHRoYW4gdHRsKVxuICAgIH0pO1xuXG4gICAgLy8gRW5oYW5jZWQgbG9nZ2luZyBmb3IgTW9uZ29EQiBzZXNzaW9uIHN0b3JlIG9wZXJhdGlvbnNcbiAgICBbJ3NldCcsICdnZXQnLCAnZGVzdHJveScsICd0b3VjaCddLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gc3RvcmVbbWV0aG9kXTtcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxNZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc3RvcmVbbWV0aG9kXSA9IGFzeW5jIGZ1bmN0aW9uKHNpZCwgLi4uYXJncykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBNb25nb0RCIFN0b3JlICR7bWV0aG9kLnRvVXBwZXJDYXNlKCl9OiBzZXNzaW9uSWQ9JHtzaWR9LCBvcGVyYXRpb249c3RhcnRgKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMsIHNpZCwgLi4uYXJncyk7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIE1vbmdvREIgU3RvcmUgJHttZXRob2QudG9VcHBlckNhc2UoKX06IHNlc3Npb25JZD0ke3NpZH0sIG9wZXJhdGlvbj1zdWNjZXNzLCBkdXJhdGlvbj0ke2R1cmF0aW9ufW1zLCByZXN1bHQ9JHshIXJlc3VsdH1gKTtcblxuICAgICAgICAgICAgLy8gTG9nIHNlc3Npb24gY29udGVudCBmb3Igc2V0IG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdzZXQnICYmIGFyZ3NbMF0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk50gU2Vzc2lvbiBDb250ZW50OiBzaWQ9JHtzaWR9LCBhdXRoZW50aWNhdGVkPSR7YXJnc1swXS5hdXRoZW50aWNhdGVkfSwgdXNlcklkPSR7YXJnc1swXS51c2VySWR9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBNb25nb0RCIFN0b3JlICR7bWV0aG9kLnRvVXBwZXJDYXNlKCl9OiBzZXNzaW9uSWQ9JHtzaWR9LCBvcGVyYXRpb249ZmFpbGVkLCBlcnJvcj0ke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RvcmU7XG4gIH0pKCksXG4gIGNvb2tpZToge1xuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJywgLy8gSFRUUFMgb25seSBpbiBwcm9kdWN0aW9uXG4gICAgaHR0cE9ubHk6IHRydWUsIC8vIFByZXZlbnQgWFNTIGFjY2VzcyB0byBjb29raWVcbiAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDI0IGhvdXJzXG4gICAgc2FtZVNpdGU6ICdsYXgnIC8vIENTUkYgcHJvdGVjdGlvbiwgJ2xheCcgZm9yIGNyb3NzLW9yaWdpbiByZXF1ZXN0c1xuICB9LFxuICBuYW1lOiAnY2hhdFNlc3Npb24nLCAvLyBDdXN0b20gbmFtZSB0byBhdm9pZCBkZWZhdWx0ICdjb25uZWN0LnNpZCdcbiAgcm9sbGluZzogZmFsc2UsIC8vIERvbid0IGV4dGVuZCBjb29raWUgZXhwaXJhdGlvbiBvbiBlYWNoIHJlcXVlc3RcbiAgdW5zZXQ6ICdkZXN0cm95JyAvLyBEZXN0cm95IHNlc3Npb24gb24gbG9nb3V0XG59KTtcblxuYXBwLnVzZShzZXNzaW9uTWlkZGxld2FyZSk7XG5cbi8vIEVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcbmNvbnN0IGVycm9ySGFuZGxlciA9IChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIGVycm9yOicsIHtcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgIHVybDogcmVxLnVybCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICAvLyBNb25nb29zZSB2YWxpZGF0aW9uIGVycm9yc1xuICBpZiAoZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoZSA9PiAoe1xuICAgICAgZmllbGQ6IGUucGF0aCxcbiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3JzLFxuICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InXG4gICAgfSk7XG4gIH1cblxuICAvLyBNb25nb29zZSBkdXBsaWNhdGUga2V5IGVycm9yXG4gIGlmIChlcnIuY29kZSA9PT0gMTEwMDApIHtcbiAgICBjb25zdCBmaWVsZCA9IE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF07XG4gICAgY29uc3QgdmFsdWUgPSBlcnIua2V5VmFsdWVbZmllbGRdO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICBlcnJvcjogYCR7ZmllbGR9ICcke3ZhbHVlfScgYWxyZWFkeSBleGlzdHNgLFxuICAgICAgY29kZTogJ0RVUExJQ0FURV9FUlJPUidcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEpXVCBlcnJvcnNcbiAgaWYgKGVyci5uYW1lID09PSAnSnNvbldlYlRva2VuRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcbiAgICAgIGNvZGU6ICdJTlZBTElEX1RPS0VOJ1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGVyci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgY29kZTogJ1RPS0VOX0VYUElSRUQnXG4gICAgfSk7XG4gIH1cblxuICAvLyBEZWZhdWx0IHNlcnZlciBlcnJvclxuICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgcmVxdWVzdElkOiByZXEuaWQgfHwgJ3Vua25vd24nXG4gIH0pO1xufTtcblxuLy8gUmVxdWVzdCBsb2dnaW5nIG1pZGRsZXdhcmVcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcblxuICByZXMub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBsb2dnZXIuaW5mbyhgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9IC0gJHtyZXMuc3RhdHVzQ29kZX0gKCR7ZHVyYXRpb259bXMpYCwge1xuICAgICAgaXA6IHJlcS5pcCxcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpLFxuICAgICAgdXNlcjogcmVxLnVzZXI/Lm5pY2tuYW1lIHx8ICdhbm9ueW1vdXMnLFxuICAgICAgYm9keTogcmVxLm1ldGhvZCAhPT0gJ0dFVCcgPyBKU09OLnN0cmluZ2lmeShyZXEuYm9keSkgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSk7XG5cbiAgbmV4dCgpO1xufSk7XG5cbi8vIFNlc3Npb24gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSAod29ya3MgcGFyYWxsZWwgdG8gSldUKVxuY29uc3QgYXV0aGVudGljYXRlU2Vzc2lvbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SQIFNlc3Npb24gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSBjYWxsZWQ6Jywge1xuICAgICAgdXJsOiByZXEudXJsLFxuICAgICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklELFxuICAgICAgc2Vzc2lvbkV4aXN0czogISFyZXEuc2Vzc2lvbixcbiAgICAgIHNlc3Npb25EYXRhOiByZXEuc2Vzc2lvbiA/IHtcbiAgICAgICAgYXV0aGVudGljYXRlZDogcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCxcbiAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiByZXEuc2Vzc2lvbi5uaWNrbmFtZSxcbiAgICAgICAgcm9sZTogcmVxLnNlc3Npb24ucm9sZSxcbiAgICAgICAgbG9naW5UaW1lOiByZXEuc2Vzc2lvbi5sb2dpblRpbWUsXG4gICAgICAgIGNzcmZUb2tlbjogcmVxLnNlc3Npb24uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJ1xuICAgICAgfSA6IG51bGxcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGlmIHNlc3Npb24gZXhpc3RzIGFuZCBoYXMgYXV0aGVudGljYXRlZCB1c2VyXG4gICAgaWYgKHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQgJiYgcmVxLnNlc3Npb24udXNlcklkKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+OryBGb3VuZCBhdXRoZW50aWNhdGVkIHNlc3Npb24gZm9yIHVzZXJJZDonLCByZXEuc2Vzc2lvbi51c2VySWQpO1xuICAgICAgY29uc29sZS5sb2coJ/CflJMgU2Vzc2lvbiBmaW5nZXJwcmludCBjaGVjazonLCB7XG4gICAgICAgIHNpZDogcmVxLnNlc3Npb25JRCxcbiAgICAgICAgY3NyZlRva2VuOiByZXEuc2Vzc2lvbi5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA0KSArICcuLi4nLFxuICAgICAgICB1c2VyQWdlbnQ6IHJlcS5zZXNzaW9uLnVzZXJBZ2VudD8uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nLFxuICAgICAgICBsb2dpblRpbWU6IHJlcS5zZXNzaW9uLmxvZ2luVGltZVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5zZXNzaW9uLnVzZXJJZCk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gdXNlciBmb3VuZCBpbiBEQjonLCB7XG4gICAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICAgIHN0YXR1czogdXNlci5zdGF0dXMsXG4gICAgICAgICAgc2Vzc2lvblZhbGlkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXEuc2Vzc2lvblVzZXIgPSB1c2VyOyAvLyBTdG9yZSBpbiByZXEuc2Vzc2lvblVzZXIgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBKV1QgcmVxLnVzZXJcblxuICAgICAgICAvLyBVcGRhdGUgc2Vzc2lvbiBmaW5nZXJwcmludCBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHJlcS5zZXNzaW9uLmNzcmZUb2tlbiAmJiByZXEuc2Vzc2lvbi51c2VyQWdlbnQpIHtcbiAgICAgICAgICByZXEuc2Vzc2lvbi5sYXN0U2Vzc2lvbkNoZWNrID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SQIFNlc3Npb24gZmluZ2VycHJpbnQgdmVyaWZpZWQgYW5kIHVwZGF0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBTZXNzaW9uIHVzZXIgbm90IGZvdW5kIGluIERCLCBjbGVhbmluZyBzZXNzaW9uOicsIHJlcS5zZXNzaW9uLnVzZXJJZCk7XG4gICAgICAgIC8vIENsZWFuIGludmFsaWQgc2Vzc2lvblxuICAgICAgICBkZWxldGUgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZDtcbiAgICAgICAgZGVsZXRlIHJlcS5zZXNzaW9uLnVzZXJJZDtcbiAgICAgICAgZGVsZXRlIHJlcS5zZXNzaW9uLm5pY2tuYW1lO1xuICAgICAgICBkZWxldGUgcmVxLnNlc3Npb24ucm9sZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gTm8gYXV0aGVudGljYXRlZCBzZXNzaW9uIGZvdW5kIG9yIHNlc3Npb24gbm90IGluaXRpYWxpemVkJywge1xuICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSUQsXG4gICAgICAgIHNlc3Npb246ICEhcmVxLnNlc3Npb24sXG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHJlcS5zZXNzaW9uPy5hdXRoZW50aWNhdGVkLFxuICAgICAgICB1c2VySWQ6IHJlcS5zZXNzaW9uPy51c2VySWRcbiAgICAgIH0pO1xuICAgICAgcmVxLnNlc3Npb25Vc2VyID0gbnVsbDsgLy8gRXhwbGljaXRseSBzZXQgdG8gbnVsbCB3aGVuIG5vIHNlc3Npb25cbiAgICB9XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci53YXJuKCdTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIGVycm9yOicsIHtcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklELFxuICAgICAgaXA6IHJlcS5pcFxuICAgIH0pO1xuICAgIHJlcS5zZXNzaW9uVXNlciA9IG51bGw7IC8vIFNldCB0byBudWxsIG9uIGVycm9yXG4gICAgbmV4dCgpO1xuICB9XG59O1xuXG4vLyBKV1QgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuY29uc3QgYXV0aGVudGljYXRlVG9rZW4gPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkCBKV1QgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSBjYWxsZWQ6JywgeyB1cmw6IHJlcS51cmwsIG1ldGhvZDogcmVxLm1ldGhvZCB9KTtcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXTtcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdOyAvLyBCZWFyZXIgVE9LRU5cblxuICAgIGNvbnNvbGUubG9nKCfwn5SRIFRva2VuIGV4dHJhY3Rpb24gcmVzdWx0OicsIHsgaGFzQXV0aEhlYWRlcjogISFhdXRoSGVhZGVyLCBoYXNUb2tlbjogISF0b2tlbiB9KTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgTm8gdG9rZW4gcHJvdmlkZWQnKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQWNjZXNzIHRva2VuIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ05PX1RPS0VOJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuICAgIGNvbnNvbGUubG9nKCfinIUgSldUIGRlY29kZWQ6JywgeyB1c2VySWQ6IGRlY29kZWQudXNlcklkLCBuaWNrbmFtZTogZGVjb2RlZC5uaWNrbmFtZSB9KTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChkZWNvZGVkLnVzZXJJZCk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgVXNlciBub3QgZm91bmQgaW4gREIgZm9yIEpXVCB1c2VySWQ6JywgZGVjb2RlZC51c2VySWQpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcsXG4gICAgICAgIGNvZGU6ICdVU0VSX05PVF9GT1VORCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICBjb25zb2xlLmxvZygn4pyFIEpXVCBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvciB1c2VyOicsIHVzZXIubmlja25hbWUsIHsgaWQ6IHVzZXIuX2lkLCBzdGF0dXM6IHVzZXIuc3RhdHVzIH0pO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIud2FybignSldUIGF1dGhlbnRpY2F0aW9uIGZhaWxlZDonLCB7XG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIGlwOiByZXEuaXBcbiAgICB9KTtcblxuICAgIGlmIChlcnJvci5uYW1lID09PSAnSnNvbldlYlRva2VuRXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgdG9rZW4gZm9ybWF0JyxcbiAgICAgICAgY29kZTogJ0lOVkFMSURfVE9LRU5fRk9STUFUJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgICBjb2RlOiAnVE9LRU5fRVhQSVJFRCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBlcnJvcjogJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQnLFxuICAgICAgY29kZTogJ1RPS0VOX1ZFUklGSUNBVElPTl9GQUlMRUQnXG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIFJvbGUtYmFzZWQgYWNjZXNzIGNvbnRyb2wgbWlkZGxld2FyZVxuY29uc3QgcmVxdWlyZU1vZGVyYXRvciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGlmICghcmVxLnVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnQVVUSF9SRVFVSVJFRCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghcmVxLnVzZXIuaGFzTW9kZXJhdG9yUHJpdmlsZWdlcygpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01vZGVyYXRvciBwcml2aWxlZ2VzIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ01PREVSQVRPUl9SRVFVSVJFRCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ01vZGVyYXRvciBjaGVjayBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGF1dGhvcml6YXRpb24gY2hlY2snLFxuICAgICAgY29kZTogJ0FVVEhfQ0hFQ0tfRVJST1InXG4gICAgfSk7XG4gIH1cbn07XG5cbmNvbnN0IHJlcXVpcmVBZG1pbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGlmICghcmVxLnVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnQVVUSF9SRVFVSVJFRCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghcmVxLnVzZXIuaGFzQWRtaW5Qcml2aWxlZ2VzKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgIGVycm9yOiAnQWRtaW5pc3RyYXRvciBwcml2aWxlZ2VzIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ0FETUlOX1JFUVVJUkVEJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignQWRtaW4gY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBhdXRob3JpemF0aW9uIGNoZWNrJyxcbiAgICAgIGNvZGU6ICdBVVRIX0NIRUNLX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBFcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXG5cbi8vIFNlc3Npb24gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSAocnVuIGJlZm9yZSByYXRlIGxpbWl0aW5nKVxuYXBwLnVzZShhdXRoZW50aWNhdGVTZXNzaW9uKTtcblxuLy8gR2VuZXJhbCByYXRlIGxpbWl0aW5nIChhcHBsaWVkIHRvIGFsbCBIVFRQIHJlcXVlc3RzKVxuYXBwLnVzZShnZW5lcmFsUmF0ZUxpbWl0ZXIpO1xuXG4vLyBIZWxtZXQgc2VjdXJpdHkgaGVhZGVyc1xuYXBwLnVzZShcbiAgaGVsbWV0KHtcbiAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICAgIGRpcmVjdGl2ZXM6IHtcbiAgICAgICAgZGVmYXVsdFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgICBzdHlsZVNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCIsIFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbVwiXSxcbiAgICAgICAgZm9udFNyYzogW1wiJ3NlbGYnXCIsIFwiaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbVwiXSxcbiAgICAgICAgaW1nU3JjOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiXSxcbiAgICAgICAgc2NyaXB0U3JjOiBbXCInc2VsZidcIiwgXCIndW5zYWZlLWlubGluZSdcIl0sXG4gICAgICAgIGNvbm5lY3RTcmM6IFtcIidzZWxmJ1wiXVxuICAgICAgfVxuICAgIH0sXG4gICAgY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeTogZmFsc2VcbiAgfSlcbik7XG5cbi8vIFN3YWdnZXIgY29uZmlndXJhdGlvblxuY29uc3Qgc3dhZ2dlck9wdGlvbnMgPSB7XG4gIGRlZmluaXRpb246IHtcbiAgICBvcGVuYXBpOiAnMy4wLjAnLFxuICAgIGluZm86IHtcbiAgICAgIHRpdGxlOiAnQ2hhdC1KUyBBUEknLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUkVTVCBBUEkgZm9yIENoYXQtSlMgYXBwbGljYXRpb24gd2l0aCByZWFsLXRpbWUgbWVzc2FnaW5nIGFuZCB2b2ljZSBjaGFubmVscycsXG4gICAgICBjb250YWN0OiB7XG4gICAgICAgIG5hbWU6ICdDaGF0LUpTIFN1cHBvcnQnXG4gICAgICB9XG4gICAgfSxcbiAgICBzZXJ2ZXJzOiBbXG4gICAgICB7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGV2ZWxvcG1lbnQgc2VydmVyJ1xuICAgICAgfVxuICAgIF0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgc2NoZW1hczoge1xuICAgICAgICBVc2VyOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciB1bmlxdWUgaWRlbnRpZmllcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIG5pY2tuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9sZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydhZG1pbicsICdtZW1iZXInXSxcbiAgICAgICAgICAgICAgZGVmYXVsdDogJ21lbWJlcicsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciByb2xlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGNyZWF0aW9uIHRpbWVzdGFtcCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xhc3QgYWN0aXZpdHkgdGltZXN0YW1wJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydvbmxpbmUnLCAnb2ZmbGluZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgb25saW5lIHN0YXR1cydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3JvbGUnXVxuICAgICAgICB9LFxuICAgICAgICBDaGFubmVsOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB1bmlxdWUgaWRlbnRpZmllciAoYXV0by1nZW5lcmF0ZWQgZnJvbSBuYW1lKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGlzcGxheSBuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsndGV4dCcsICd2b2ljZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdHlwZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVkQnk6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRvciBuaWNrbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgcG9zaXRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydpZCcsICduYW1lJywgJ3R5cGUnLCAnY3JlYXRlZEJ5J11cbiAgICAgICAgfSxcbiAgICAgICAgUmVnaXN0ZXJSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmlja25hbWUnLCAnZW1haWwnLCAncGFzc3dvcmQnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSB1c2VybmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZW1haWwnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHBhc3N3b3JkJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgTG9naW5SZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnaWRlbnRpZmllcicsICdwYXNzd29yZCddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlcm5hbWUgb3IgZW1haWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBwYXNzd29yZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIEF1dGhSZXNwb25zZToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pXVCBhY2Nlc3MgdG9rZW4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIENoYW5uZWxSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmFtZScsICd0eXBlJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RleHQnLCAndm9pY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHR5cGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wdGlvbmFsIGNoYW5uZWwgZGVzY3JpcHRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBFcnJvclJlc3BvbnNlOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXJyb3IgbWVzc2FnZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBtc2c6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIHBhcmFtOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbjogeyB0eXBlOiAnc3RyaW5nJyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRpb24gZXJyb3JzIGFycmF5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlY3VyaXR5U2NoZW1lczoge1xuICAgICAgICBiZWFyZXJBdXRoOiB7XG4gICAgICAgICAgdHlwZTogJ2h0dHAnLFxuICAgICAgICAgIHNjaGVtZTogJ2JlYXJlcicsXG4gICAgICAgICAgYmVhcmVyRm9ybWF0OiAnSldUJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzZWN1cml0eTogW1xuICAgICAge1xuICAgICAgICBiZWFyZXJBdXRoOiBbXVxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgYXBpczogWycuL3NlcnZlci5qcyddIC8vIFBhdGggdG8gdGhlIEFQSSByb3V0ZXNcbn07XG5cbmNvbnN0IHN3YWdnZXJTcGVjID0gc3dhZ2dlckpzZG9jKHN3YWdnZXJPcHRpb25zKTtcblxuLy8gU3dhZ2dlciBVSSB3aXRoIENTUCBkaXNhYmxlZCBmb3IgdGhpcyByb3V0ZVxuYXBwLnVzZSgnL2FwaS1kb2NzJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIERpc2FibGUgQ1NQIGZvciBTd2FnZ2VyIFVJXG4gIHJlcy5yZW1vdmVIZWFkZXIoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5Jyk7XG4gIG5leHQoKTtcbn0sIHN3YWdnZXJVaS5zZXJ2ZSwgc3dhZ2dlclVpLnNldHVwKHN3YWdnZXJTcGVjKSk7XG5cbi8vIEFkbWluaXN0cmF0aXZlIGVuZHBvaW50cyAtIHJlcXVpcmUgbW9kZXJhdG9yIHByaXZpbGVnZXNcbmNvbnNvbGUubG9nKCfwn5SnIEFkbWluaXN0cmF0aXZlIEFQSSBlbmRwb2ludHMgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5cbi8vIEdFVCAvYXBpL2FkbWluL3VzZXJzIC0gTGlzdCBhbGwgdXNlcnMgd2l0aCBtb2RlcmF0aW9uIGluZm9cbmFwcC5nZXQoJy9hcGkvYWRtaW4vdXNlcnMnLCBhdXRoZW50aWNhdGVUb2tlbiwgcmVxdWlyZU1vZGVyYXRvciwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgNTA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KVxuICAgICAgLnNlbGVjdCgnLXBhc3N3b3JkIC1yZXNldFBhc3N3b3JkVG9rZW4gLXJlc2V0UGFzc3dvcmRFeHBpcmVzIC1tb2RlcmF0aW9uVG9rZW4gLW1vZGVyYXRpb25Ub2tlbkV4cGlyZXMnKVxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgICAuc2tpcChza2lwKVxuICAgICAgLmxpbWl0KGxpbWl0KTtcblxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgVXNlci5jb3VudERvY3VtZW50cygpO1xuXG4gICAgbG9nZ2VyLmluZm8oYEFkbWluIHVzZXIgbGlzdCByZXF1ZXN0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICBhZG1pbklkOiByZXEudXNlci5faWQsXG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgdXNlcnMsXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnMgZm9yIGFkbWluOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXJzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL2JhbiAtIEJhbiBhIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvYmFuJywgYXV0aGVudGljYXRlVG9rZW4sIHJlcXVpcmVNb2RlcmF0b3IsIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JlYXNvbicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwMCB9KS50cmltKCksXG4gIGJvZHkoJ2R1cmF0aW9uJykub3B0aW9uYWwoKS5pc0ludCh7IG1pbjogMSwgbWF4OiAzMTUzNjAwMCB9KSAvLyBNYXggMSB5ZWFyIGluIHNlY29uZHNcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyByZWFzb24sIGR1cmF0aW9uIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGJhbm5pbmcgeW91cnNlbGZcbiAgICBpZiAodXNlci5faWQudG9TdHJpbmcoKSA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQ2Fubm90IGJhbiB5b3Vyc2VsZicgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBub24tYWRtaW4gZnJvbSBiYW5uaW5nIGFkbWluXG4gICAgaWYgKHVzZXIucm9sZSA9PT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBiYW4gYWRtaW5pc3RyYXRvcicgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci5iYW4ocmVhc29uLCBkdXJhdGlvbiwgcmVxLnVzZXIuX2lkKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gYmFubmVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgYmFubmVkVXNlcklkOiB1c2VySWQsXG4gICAgICBiYW5uZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICByZWFzb24sXG4gICAgICBkdXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiBiYW5uZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBiYW5uZWQ6IHRydWUsXG4gICAgICAgIGJhblJlYXNvbjogcmVhc29uLFxuICAgICAgICBiYW5FeHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGJhbm5pbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBiYW4gdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bmJhbiAtIFVuYmFuIGEgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bmJhbicsIGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlTW9kZXJhdG9yLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGlmICghdXNlci5iYW5uZWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlciBpcyBub3QgYmFubmVkJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLnVuYmFuKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHVuYmFubmVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdW5iYW5uZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIHVuYmFubmVkQnlJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIHVuYmFubmVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgYmFubmVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdW5iYW5uaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdW5iYW4gdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC93YXJuIC0gSXNzdWUgd2FybmluZyB0byB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3dhcm4nLCBhdXRoZW50aWNhdGVUb2tlbiwgcmVxdWlyZU1vZGVyYXRvciwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgncmVhc29uJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAwIH0pLnRyaW0oKSxcbiAgYm9keSgnZHVyYXRpb24nKS5vcHRpb25hbCgpLmlzSW50KHsgbWluOiAxLCBtYXg6IDMxNTM2MDAwIH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcmVhc29uLCBkdXJhdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci53YXJuKHJlYXNvbiwgcmVxLnVzZXIuX2lkLCBkdXJhdGlvbik7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgV2FybmluZyBpc3N1ZWQgdG8gdXNlciAke3VzZXIubmlja25hbWV9IGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgd2FybmVkVXNlcklkOiB1c2VySWQsXG4gICAgICB3YXJuZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICByZWFzb24sXG4gICAgICBkdXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFdhcm5pbmcgaXNzdWVkIHRvIHVzZXIgJHt1c2VyLm5pY2tuYW1lfWAsXG4gICAgICB3YXJuaW5nOiB7XG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgaXNzdWVkQnk6IHJlcS51c2VyLm5pY2tuYW1lLFxuICAgICAgICBpc3N1ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgZXhwaXJlczogZHVyYXRpb24gPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgZHVyYXRpb24pIDogbnVsbFxuICAgICAgfSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgd2FybmluZ3NDb3VudDogdXNlci5nZXRBY3RpdmVXYXJuaW5nc0NvdW50KClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHdhcm5pbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB3YXJuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvcm9sZSAtIENoYW5nZSB1c2VyIHJvbGVcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvcm9sZScsIGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlQWRtaW4sIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JvbGUnKS5pc0luKFsnbWVtYmVyJywgJ21vZGVyYXRvcicsICdhZG1pbiddKVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHJvbGU6IG5ld1JvbGUgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbW9kaWZ5aW5nIHlvdXIgb3duIHJvbGUgaW4gcG90ZW50aWFsbHkgcHJvYmxlbWF0aWMgd2F5c1xuICAgIGlmICh1c2VyLl9pZC50b1N0cmluZygpID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgbW9kaWZ5IHlvdXIgb3duIHJvbGUnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbm9uLWFkbWluIGZyb20gcHJvbW90aW5nIHRvIGFkbWluIG9yIGRlbW90aW5nIGFkbWluXG4gICAgaWYgKChuZXdSb2xlID09PSAnYWRtaW4nIHx8IHVzZXIucm9sZSA9PT0gJ2FkbWluJykgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdPbmx5IGFkbWluaXN0cmF0b3JzIGNhbiBtYW5hZ2UgYWRtaW4gcm9sZXMnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFJvbGUgPSB1c2VyLnJvbGU7XG4gICAgdXNlci5yb2xlID0gbmV3Um9sZTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gcm9sZSBjaGFuZ2VkIGZyb20gJHtvbGRSb2xlfSB0byAke25ld1JvbGV9IGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgY2hhbmdlZFVzZXJJZDogdXNlcklkLFxuICAgICAgY2hhbmdlZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIG9sZFJvbGUsXG4gICAgICBuZXdSb2xlXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IHJvbGUgY2hhbmdlZCB0byAke25ld1JvbGV9YCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgcm9sZTogbmV3Um9sZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY2hhbmdpbmcgdXNlciByb2xlOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNoYW5nZSB1c2VyIHJvbGUnIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvbXV0ZSAtIE11dGUgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9tdXRlJywgYXV0aGVudGljYXRlVG9rZW4sIHJlcXVpcmVNb2RlcmF0b3IsIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ2R1cmF0aW9uJykuaXNJbnQoeyBtaW46IDYwLCBtYXg6IDg2NDAwIH0pIC8vIDEgbWludXRlIHRvIDI0IGhvdXJzXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgZHVyYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIubXV0ZShkdXJhdGlvbik7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IG11dGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgbXV0ZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIG11dGVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gbXV0ZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBtdXRlRXhwaXJlczogdXNlci5tdXRlRXhwaXJlc1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgbXV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gbXV0ZSB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VubXV0ZSAtIFVubXV0ZSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VubXV0ZScsIGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlTW9kZXJhdG9yLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGlmICghdXNlci5pc011dGVkKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlciBpcyBub3QgbXV0ZWQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIudW5tdXRlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHVubXV0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1bm11dGVkVXNlcklkOiB1c2VySWQsXG4gICAgICB1bm11dGVkQnlJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIHVubXV0ZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBtdXRlRXhwaXJlczogbnVsbFxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdW5tdXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1bm11dGUgdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL3VzZXJzOlxuICogICBnZXQ6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gVXNlcnNcbiAqICAgICBzdW1tYXJ5OiBHZXQgbGlzdCBvZiBhbGwgcmVnaXN0ZXJlZCB1c2Vyc1xuICogICAgIGRlc2NyaXB0aW9uOiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB3aXRoIHRoZWlyIHJvbGVzIGFuZCBvbmxpbmUgc3RhdHVzXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiB1c2VycyBzdWNjZXNzZnVsbHkgcmV0cmlldmVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICAgIGlkOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyB1bmlxdWUgaWRlbnRpZmllclxuICogICAgICAgICAgICAgICAgICAgbmlja25hbWU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIGRpc3BsYXkgbmFtZVxuICogICAgICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGVudW06IFthZG1pbiwgbW9kZXJhdG9yLCBtZW1iZXJdXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3Mgcm9sZSBsZXZlbFxuICogICAgICAgICAgICAgICAgICAgc3RhdHVzOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZW51bTogW29ubGluZSwgb2ZmbGluZV1cbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyBvbmxpbmUgc3RhdHVzXG4gKiAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGRhdGUtdGltZVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlciByZWdpc3RyYXRpb24gZGF0ZVxuICogICAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZTpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogZGF0ZS10aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBMYXN0IGFjdGl2aXR5IHRpbWVzdGFtcFxuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgLSBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICogICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gKiAgICAgICAgICAgICAgICAgc3RhdHVzOiBcIm9ubGluZVwiXG4gKiAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBcIjIwMjQtMDktMDdUMTA6MzA6MDBaXCJcbiAqICAgICAgICAgICAgICAgICBsYXN0QWN0aXZlOiBcIjIwMjQtMDktMDdUMjI6MTU6MDBaXCJcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAqL1xuY29uc29sZS5sb2coJ/CflKcgR0VUIC9hcGkvdXNlcnMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAuZ2V0KCcvYXBpL3VzZXJzJywgYXV0aGVudGljYXRlVG9rZW4sIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJ19pZCBuaWNrbmFtZSByb2xlIHN0YXR1cyBjcmVhdGVkQXQgbGFzdEFjdGl2ZScpXG4gICAgICAuc29ydCh7IG5pY2tuYW1lOiAxIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXJzIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXG4gICAgICB0b3RhbFVzZXJzOiB1c2Vycy5sZW5ndGhcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFJldHVybmluZyB1c2VycyBkYXRhOicsIHVzZXJzLmxlbmd0aCk7XG4gICAgcmVzLmpzb24odXNlcnMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBHRVQgL2FwaS91c2VyczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXJzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbi8vIFN3YWdnZXIgSlNPTiBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS1kb2NzLmpzb24nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnJlbW92ZUhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knKTtcbiAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgcmVzLnNlbmQoc3dhZ2dlclNwZWMpO1xufSk7XG5cbi8vIERldmVsb3BtZW50IGFuZCB0ZXN0IGVuZHBvaW50IHRvIHJlc2V0IHJhdGUgbGltaXRpbmdcbmFwcC5wb3N0KCcvYXBpL3Jlc2V0LXJhdGVsaW1pdCcsIChyZXEsIHJlcykgPT4ge1xuICAvLyBJbiBhIHJlYWwgYXBwbGljYXRpb24sIHlvdSdkIHdhbnQgdG8gZ2V0IHRoZSBzdG9yZSBmcm9tIHRoZSBsaW1pdGVyIGluc3RhbmNlXG4gIC8vIEZvciBleHByZXNzLXJhdGUtbGltaXQgdjcrLCB5b3UgY2FuIGFjY2VzcyB0aGUgc3RvcmUgbGlrZSB0aGlzOlxuICB0cnkge1xuICAgIGNvbnN0IGF1dGhMaW1pdGVyU3RvcmUgPSBhdXRoUmF0ZUxpbWl0ZXIuc3RvcmU7XG4gICAgaWYgKGF1dGhMaW1pdGVyU3RvcmUgJiYgdHlwZW9mIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJhdGUgbGltaXRpbmcgcmVzZXQgZm9yIHRlc3RpbmcgcHVycG9zZXMnKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1JhdGUgbGltaXRpbmcgaGFzIGJlZW4gcmVzZXQnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBzdG9yZSBkb2Vzbid0IGV4cG9zZSByZXNldEFsbCwgY3JlYXRlIGEgdGVtcG9yYXJ5IHdvcmthcm91bmRcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUmF0ZSBsaW1pdGVyIHN0b3JlIGRvZXNuXFwndCBzdXBwb3J0IHJlc2V0QWxsIC0gcmF0ZSBsaW1pdGluZyB3aWxsIGV4cGlyZSBuYXR1cmFsbHknKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdDYW5ub3QgcmVzZXQgcmF0ZSBsaW1pdGluZyBhdXRvbWF0aWNhbGx5LCB3YWl0IGZvciB0aW1lb3V0JyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciByZXNldHRpbmcgcmF0ZSBsaW1pdGluZzonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byByZXNldCByYXRlIGxpbWl0aW5nJyB9KTtcbiAgfVxufSk7XG5cbi8vIEhlYWx0aCBjaGVjayBlbmRwb2ludFxuYXBwLmdldCgnL2hlYWx0aCcsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXB0aW1lOiBwcm9jZXNzLnVwdGltZSgpXG4gIH0pO1xufSk7XG5cbi8vIExvZyBtaWRkbGV3YXJlIHRvIGNoZWNrIGluY29taW5nIHJlcXVlc3RzXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuaW5mbyhg8J+UjSBJbmNvbWluZyByZXF1ZXN0OiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICBoZWFkZXJzOiByZXEuaGVhZGVyc1xuICB9KTtcbiAgbmV4dCgpO1xufSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAgICogQHN3YWdnZXJcbiAgICogL2FwaS9sb2dpbjpcbiAgICogICBwb3N0OlxuICAgKiAgICAgdGFnczpcbiAgICogICAgICAgLSBBdXRoZW50aWNhdGlvblxuICAgKiAgICAgc3VtbWFyeTogTG9naW4gZXhpc3RpbmcgdXNlclxuICAgKiAgICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0ZXMgYW5kIGxvZ3MgaW4gYW4gZXhpc3RpbmcgdXNlciB3aXRoIEpXVCB0b2tlblxuICAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAqICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgICogICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0xvZ2luUmVxdWVzdCdcbiAgICogICAgIHJlc3BvbnNlczpcbiAgICogICAgICAgMjAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMb2dpbiBzdWNjZXNzZnVsXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQXV0aFJlc3BvbnNlJ1xuICAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICAqICAgICAgICAgICAgICAgdXNlcjpcbiAgICogICAgICAgICAgICAgICAgIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICAqICAgICAgICAgICAgICAgICBlbWFpbDogXCJqb2huQGV4YW1wbGUuY29tXCJcbiAgICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAgICogICAgICAgNDAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnZhbGlkIGNyZWRlbnRpYWxzIG9yIHZhbGlkYXRpb24gZXJyb3JzXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAgICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgICogICAgICAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCJcbiAgICogICAgICAgNTAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgICovXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvbG9naW4gcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAucG9zdCgnL2FwaS9sb2dpbicsIFtcbiAgYm9keSgnaWRlbnRpZmllcicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwIH0pLnRyaW0oKSxcbiAgYm9keSgncGFzc3dvcmQnKS5pc0xlbmd0aCh7IG1pbjogNiwgbWF4OiAxMDAgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SRIEluY29taW5nIGxvZ2luIHJlcXVlc3Q6JywgeyBpZGVudGlmaWVyOiByZXEuYm9keS5pZGVudGlmaWVyLCBoYXNQYXNzd29yZDogISFyZXEuYm9keS5wYXNzd29yZCwgaXA6IHJlcS5pcCB9KTtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIExvZ2luIHZhbGlkYXRpb24gZXJyb3JzOicsIGVycm9ycy5hcnJheSgpKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZGVudGlmaWVyLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gU2VhcmNoaW5nIGZvciB1c2VyIHdpdGggaWRlbnRpZmllcjonLCBpZGVudGlmaWVyKTtcblxuICAgIC8vIEZpbmQgdXNlciBieSBuaWNrbmFtZSBvciBlbWFpbFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgJG9yOiBbeyBuaWNrbmFtZTogaWRlbnRpZmllciB9LCB7IGVtYWlsOiBpZGVudGlmaWVyIH1dXG4gICAgfSk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgVXNlciBub3QgZm91bmQ6JywgaWRlbnRpZmllcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfinIUgVXNlciBmb3VuZDonLCB7IG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLCBlbWFpbDogdXNlci5lbWFpbCwgc3RhdHVzOiB1c2VyLnN0YXR1cyB9KTtcblxuICAgIC8vIENvbXBhcmUgcGFzc3dvcmRcbiAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCB1c2VyLmNvbXBhcmVQYXNzd29yZChwYXNzd29yZCk7XG4gICAgY29uc29sZS5sb2coJ/CflJEgUGFzc3dvcmQgdmFsaWRhdGlvbiByZXN1bHQ6JywgaXNQYXNzd29yZFZhbGlkKTtcblxuICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIEludmFsaWQgcGFzc3dvcmQgZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH0pO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBvbmxpbmVcbiAgICB1c2VyLnN0YXR1cyA9ICdvbmxpbmUnO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgLy8gU3RvcmUgdXNlciBpbiBzZXNzaW9uIGZvciBwYXJhbGxlbCBhdXRoZW50aWNhdGlvblxuICAgIGNvbnNvbGUubG9nKCfwn5SPIENyZWF0aW5nIGFuZCBzdG9yaW5nIHVzZXIgc2Vzc2lvbiBmb3IgdXNlcjonLCB1c2VyLm5pY2tuYW1lKTtcbiAgICBjb25zb2xlLmxvZygn8J+Pt++4jyBHZW5lcmF0aW5nIHNlc3Npb25JZDonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgIHJlcS5zZXNzaW9uLnVzZXJJZCA9IHVzZXIuX2lkLnRvU3RyaW5nKCk7XG4gICAgcmVxLnNlc3Npb24ubmlja25hbWUgPSB1c2VyLm5pY2tuYW1lOyAvLyBTdG9yZSBhZGRpdGlvbmFsIGluZm8gZm9yIGNvbnZlbmllbmNlXG4gICAgcmVxLnNlc3Npb24ucm9sZSA9IHVzZXIucm9sZTtcbiAgICByZXEuc2Vzc2lvbi5jc3JmVG9rZW4gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTsgLy8gR2VuZXJhdGUgc2VjdXJlIHVuaXF1ZSBDU1JGIHRva2VuXG4gICAgcmVxLnNlc3Npb24ubG9naW5UaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIHJlcS5zZXNzaW9uLnVzZXJBZ2VudCA9IHJlcS5nZXQoJ1VzZXItQWdlbnQnKTsgLy8gU3RvcmUgdXNlciBhZ2VudCBmb3IgYWRkaXRpb25hbCBzZWN1cml0eVxuXG4gICAgY29uc29sZS5sb2coJ/CflJMgU2Vzc2lvbiBmaW5nZXJwcmludCBnZW5lcmF0ZWQ6Jywge1xuICAgICAgY3NyZlRva2VuSGFzaDogY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShyZXEuc2Vzc2lvbi5jc3JmVG9rZW4pLmRpZ2VzdCgnaGV4Jykuc3Vic3RyaW5nKDAsIDgpLFxuICAgICAgdXNlckFnZW50TGVuZ3RoOiByZXEuc2Vzc2lvbi51c2VyQWdlbnQ/Lmxlbmd0aCxcbiAgICAgIGxvZ2luVGltZTogcmVxLnNlc3Npb24ubG9naW5UaW1lXG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIHNlc3Npb24gYmVmb3JlIEpXVCBnZW5lcmF0aW9uXG4gICAgY29uc29sZS5sb2coJ/CflJAgU2F2aW5nIHNlc3Npb24gdG8gTW9uZ29EQiBiZWZvcmUgSldUIGdlbmVyYXRpb246Jywge1xuICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICBuaWNrbmFtZTogcmVxLnNlc3Npb24ubmlja25hbWUsXG4gICAgICByb2xlOiByZXEuc2Vzc2lvbi5yb2xlLFxuICAgICAgY3NyZlRva2VuOiByZXEuc2Vzc2lvbi5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLCAvLyBMb2cgb25seSBmaXJzdCBwYXJ0IGZvciBzZWN1cml0eVxuICAgICAgc2Vzc2lvbkRhdGE6IHtcbiAgICAgICAgYXV0aGVudGljYXRlZDogcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCxcbiAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgIGxvZ2luVGltZTogcmVxLnNlc3Npb24ubG9naW5UaW1lXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXEuc2Vzc2lvbi5zYXZlKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTZXNzaW9uIHNhdmUgZXJyb3I6Jywge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVyci5zdGFja1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBzYXZlZCBzdWNjZXNzZnVsbHkgd2l0aCBzZWN1cml0eSBmZWF0dXJlczonLCB7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVkOiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkLFxuICAgICAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgICAgICBsb2dpblRpbWU6IHJlcS5zZXNzaW9uLmxvZ2luVGltZSxcbiAgICAgICAgICAgIHVzZXJBZ2VudExlbmd0aDogcmVxLnNlc3Npb24udXNlckFnZW50Py5sZW5ndGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsb2dnZXIuaW5mbygnU2Vzc2lvbiBzYXZlZCBkdXJpbmcgbG9naW4nLCB7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgICAgICB1c2VySWQ6IHJlcS5zZXNzaW9uLnVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiByZXEuc2Vzc2lvbi5uaWNrbmFtZSxcbiAgICAgICAgICAgIHJvbGU6IHJlcS5zZXNzaW9uLnJvbGUsXG4gICAgICAgICAgICBpcDogcmVxLmlwLFxuICAgICAgICAgICAgdXNlckFnZW50SGFzaDogY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShyZXEuc2Vzc2lvbi51c2VyQWdlbnQgfHwgJycpLmRpZ2VzdCgnaGV4Jykuc3Vic3RyaW5nKDAsIDE2KVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBKV1QgdG9rZW5cbiAgICBjb25zb2xlLmxvZygn8J+UjyBHZW5lcmF0aW5nIEpXVCB0b2tlbiBmb3IgdXNlcjonLCB1c2VyLm5pY2tuYW1lKTtcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICB1c2VySWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICBjc3JmVG9rZW46IHJlcS5zZXNzaW9uLmNzcmZUb2tlbixcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkXG4gICAgICB9LFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIEpXVCB0b2tlbiBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciBsb2dnZWQgaW46ICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFNlbmRpbmcgbG9naW4gcmVzcG9uc2UnKTtcbiAgICByZXMuanNvbih7XG4gICAgICB0b2tlbiwgLy8gSldUIGZvciBBUEkgY2FsbHMgYW5kIFdlYlNvY2tldHNcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZVxuICAgICAgfSxcbiAgICAgIHNlc3Npb246IHtcbiAgICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgIGV4cGlyZXM6IHJlcS5zZXNzaW9uLmNvb2tpZS5leHBpcmVzXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdMb2dpbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgbG9naW4nIH0pO1xuICB9XG59KTtcblxuLyoqXG4gICAqIEBzd2FnZ2VyXG4gICAqIC9hcGkvcmVnaXN0ZXI6XG4gICogICBwb3N0OlxuICAqICAgICB0YWdzOlxuICAqICAgICAgIC0gQXV0aGVudGljYXRpb25cbiAgKiAgICAgc3VtbWFyeTogUmVnaXN0ZXIgbmV3IHVzZXJcbiAgKiAgICAgZGVzY3JpcHRpb246IENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFuZCByZXR1cm5zIEpXVCB0b2tlblxuICAqICAgICByZXF1ZXN0Qm9keTpcbiAgKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAqICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICBzY2hlbWE6XG4gICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1JlZ2lzdGVyUmVxdWVzdCdcbiAgKiAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICogICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICogICAgICAgICAgICAgcGFzc3dvcmQ6IFwic2VjdXJlUGFzczEyM1wiXG4gICogICAgIHJlc3BvbnNlczpcbiAgKiAgICAgICAyMDE6XG4gICogICAgICAgICBkZXNjcmlwdGlvbjogUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWxcbiAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhSZXNwb25zZSdcbiAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAqICAgICAgICAgICAgICAgdG9rZW46IFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5Li4uXCJcbiAgKiAgICAgICAgICAgICAgIHVzZXI6XG4gICogICAgICAgICAgICAgICAgIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gICogICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAgKiAgICAgICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAgKiAgICAgICA0MDA6XG4gICogICAgICAgICBkZXNjcmlwdGlvbjogVmFsaWRhdGlvbiBlcnJvcnMgb3IgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAqICAgICAgICAgY29udGVudDpcbiAgKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAqICAgICAgICAgICAgICAgZXJyb3I6IFwiTmlja25hbWUgYWxyZWFkeSB0YWtlblwiXG4gICogICAgICAgNTAwOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICAqL1xuYXBwLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBhdXRoUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgnbmlja25hbWUnKS5pc0xlbmd0aCh7IG1pbjogMywgbWF4OiA1MCB9KS50cmltKCkuZXNjYXBlKCksXG4gIGJvZHkoJ2VtYWlsJykuaXNFbWFpbCgpLm5vcm1hbGl6ZUVtYWlsKCksXG4gIGJvZHkoJ3Bhc3N3b3JkJykuaXNMZW5ndGgoeyBtaW46IDYgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBuaWNrbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICRvcjogW3sgbmlja25hbWUgfSwgeyBlbWFpbCB9XVxuICAgIH0pO1xuXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgY29uc3QgY29uZmxpY3RGaWVsZCA9IGV4aXN0aW5nVXNlci5uaWNrbmFtZSA9PT0gbmlja25hbWUgPyAnbmlja25hbWUnIDogJ2VtYWlsJztcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNvbmZsaWN0RmllbGQgPT09ICduaWNrbmFtZScgPyAnTmlja25hbWUgYWxyZWFkeSB0YWtlbicgOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkJztcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHVzZXJcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoeyBuaWNrbmFtZSwgZW1haWwsIHBhc3N3b3JkLCByb2xlOiAnbWVtYmVyJywgc3RhdHVzOiAnb25saW5lJyB9KTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SPIENyZWF0aW5nIGFuZCBzdG9yaW5nIG5ldyB1c2VyIHNlc3Npb24gZHVyaW5nIHJlZ2lzdHJhdGlvbiBmb3IgdXNlcjonLCB1c2VyLm5pY2tuYW1lKTtcbiAgICBjb25zb2xlLmxvZygn8J+Pt++4jyBHZW5lcmF0aW5nIHNlc3Npb25JZCBkdXJpbmcgcmVnaXN0cmF0aW9uOicsIHJlcS5zZXNzaW9uSWQpO1xuXG4gICAgLy8gU3RvcmUgdXNlciBpbiBzZXNzaW9uIGZvciBwYXJhbGxlbCBhdXRoZW50aWNhdGlvbiBkdXJpbmcgcmVnaXN0cmF0aW9uXG4gICAgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgcmVxLnNlc3Npb24udXNlcklkID0gdXNlci5faWQudG9TdHJpbmcoKTtcbiAgICByZXEuc2Vzc2lvbi5uaWNrbmFtZSA9IHVzZXIubmlja25hbWU7XG4gICAgcmVxLnNlc3Npb24ucm9sZSA9IHVzZXIucm9sZTtcbiAgICByZXEuc2Vzc2lvbi5jc3JmVG9rZW4gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTsgLy8gR2VuZXJhdGUgc2VjdXJlIHVuaXF1ZSBDU1JGIHRva2VuXG4gICAgcmVxLnNlc3Npb24ucmVnaXN0cmF0aW9uVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICByZXEuc2Vzc2lvbi51c2VyQWdlbnQgPSByZXEuZ2V0KCdVc2VyLUFnZW50Jyk7IC8vIEFkZGl0aW9uYWwgc2VjdXJpdHkgdHJhY2tpbmdcblxuICAgIGNvbnNvbGUubG9nKCfwn5STIFJlZ2lzdHJhdGlvbiBzZXNzaW9uIGZpbmdlcnByaW50IGdlbmVyYXRlZDonLCB7XG4gICAgICBjc3JmVG9rZW5IYXNoOiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHJlcS5zZXNzaW9uLmNzcmZUb2tlbikuZGlnZXN0KCdoZXgnKS5zdWJzdHJpbmcoMCwgOCksXG4gICAgICB1c2VyQWdlbnRMZW5ndGg6IHJlcS5zZXNzaW9uLnVzZXJBZ2VudD8ubGVuZ3RoLFxuICAgICAgcmVnaXN0cmF0aW9uVGltZTogcmVxLnNlc3Npb24ucmVnaXN0cmF0aW9uVGltZVxuICAgIH0pO1xuXG4gICAgLy8gU2F2ZSBzZXNzaW9uIGJlZm9yZSBKV1QgZ2VuZXJhdGlvblxuICAgIGNvbnNvbGUubG9nKCfwn5SQIFNhdmluZyByZWdpc3RyYXRpb24gc2Vzc2lvbiB0byBNb25nb0RCIGJlZm9yZSBKV1QgZ2VuZXJhdGlvbjonLCB7XG4gICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICB1c2VySWQ6IHJlcS5zZXNzaW9uLnVzZXJJZCxcbiAgICAgIG5pY2tuYW1lOiByZXEuc2Vzc2lvbi5uaWNrbmFtZSxcbiAgICAgIHJvbGU6IHJlcS5zZXNzaW9uLnJvbGUsXG4gICAgICBjc3JmVG9rZW46IHJlcS5zZXNzaW9uLmNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgICByZWdpc3RyYXRpb25UaW1lOiByZXEuc2Vzc2lvbi5yZWdpc3RyYXRpb25UaW1lLFxuICAgICAgc2Vzc2lvbkRhdGE6IHtcbiAgICAgICAgYXV0aGVudGljYXRlZDogcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCxcbiAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IHJlcS5zZXNzaW9uLnJlZ2lzdHJhdGlvblRpbWVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlcS5zZXNzaW9uLnNhdmUoKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFNlc3Npb24gc2F2ZSBlcnJvciBkdXJpbmcgcmVnaXN0cmF0aW9uOicsIHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnIuc3RhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gc2F2ZWQgc3VjY2Vzc2Z1bGx5IGR1cmluZyByZWdpc3RyYXRpb246Jywge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICAgICAgYXV0aGVudGljYXRlZDogcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uVGltZTogcmVxLnNlc3Npb24ucmVnaXN0cmF0aW9uVGltZSxcbiAgICAgICAgICAgIHVzZXJBZ2VudExlbmd0aDogcmVxLnNlc3Npb24udXNlckFnZW50Py5sZW5ndGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsb2dnZXIuaW5mbygnU2Vzc2lvbiBzYXZlZCBkdXJpbmcgcmVnaXN0cmF0aW9uJywge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogcmVxLnNlc3Npb24ubmlja25hbWUsXG4gICAgICAgICAgICByb2xlOiByZXEuc2Vzc2lvbi5yb2xlLFxuICAgICAgICAgICAgaXA6IHJlcS5pcCxcbiAgICAgICAgICAgIHVzZXJBZ2VudEhhc2g6IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUocmVxLnNlc3Npb24udXNlckFnZW50IHx8ICcnKS5kaWdlc3QoJ2hleCcpLnN1YnN0cmluZygwLCAxNilcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ0pXVF9TRUNSRVQgcHJlc2VudDonLCAhIXByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgICB7XG4gICAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIGNzcmZUb2tlbjogcmVxLnNlc3Npb24uY3NyZlRva2VuLFxuICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWRcbiAgICAgIH0sXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxuICAgICAgeyBleHBpcmVzSW46ICcyNGgnIH1cbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coJ0pXVCB0b2tlbiBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgcmVnaXN0ZXJlZDogJHt1c2VyLm5pY2tuYW1lfWApO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgdG9rZW4sIC8vIEpXVCBmb3IgQVBJIGNhbGxzIGFuZCBXZWJTb2NrZXRzXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGVcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uOiB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICBleHBpcmVzOiByZXEuc2Vzc2lvbi5jb29raWUuZXhwaXJlc1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignUmVnaXN0cmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyByZWdpc3RyYXRpb24nIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS9jaGFubmVsczpcbiAqICAgZ2V0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIENoYW5uZWxzXG4gKiAgICAgc3VtbWFyeTogR2V0IGxpc3Qgb2YgY2hhbm5lbHNcbiAqICAgICBkZXNjcmlwdGlvbjogUmV0cmlldmVzIGEgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIGNoYW5uZWxzXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiBjaGFubmVsc1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgLSBpZDogXCJnZW5lcmFsXCJcbiAqICAgICAgICAgICAgICAgICBuYW1lOiBcIkdlbmVyYWxcIlxuICogICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiXCJcbiAqICAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IFwic3lzdGVtXCJcbiAqICAgICAgICAgICAgICAgICBwb3NpdGlvbjogMFxuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBlcnJvcjogXCJBY2Nlc3MgdG9rZW4gcmVxdWlyZWRcIlxuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogSW50ZXJuYWwgc2VydmVyIGVycm9yXG4gKi9cbmNvbnNvbGUubG9nKCfwn5SnIEdFVCAvYXBpL2NoYW5uZWxzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLmdldCgnL2FwaS9jaGFubmVscycsIGF1dGhlbnRpY2F0ZVRva2VuLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5qAIEdFVCAvYXBpL2NoYW5uZWxzIGVuZHBvaW50IGNhbGxlZCcsIHsgbWV0aG9kOiByZXEubWV0aG9kLCB1cmw6IHJlcS51cmwsIGhlYWRlcnM6IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPyAnYXV0aCBoZWFkZXIgcHJlc2VudCcgOiAnbm8gYXV0aCBoZWFkZXInIH0pO1xuICB0cnkge1xuICAgIGNvbnN0IGNoYW5uZWxzID0gYXdhaXQgQ2hhbm5lbC5maW5kKHt9KVxuICAgICAgLnNlbGVjdCgnLV9pZCBpZCBuYW1lIHR5cGUgZGVzY3JpcHRpb24gY3JlYXRlZEJ5IHBvc2l0aW9uJylcbiAgICAgIC5zb3J0KHsgcG9zaXRpb246IDEgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhgQ2hhbm5lbHMgbGlzdCByZXF1ZXN0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGNoYW5uZWxDb3VudDogY2hhbm5lbHMubGVuZ3RoXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBSZXR1cm5pbmcgY2hhbm5lbHMgZGF0YTonLCBjaGFubmVscy5sZW5ndGgpO1xuICAgIHJlcy5qc29uKGNoYW5uZWxzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYW5uZWxzOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gR0VUIC9hcGkvY2hhbm5lbHM6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjaGFubmVscycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvY2hhbm5lbHMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvY2hhbm5lbHM6XG4gKiAgIHBvc3Q6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gQ2hhbm5lbHNcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSBuZXcgY2hhbm5lbFxuICogICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVzIGEgbmV3IHRleHQgb3Igdm9pY2UgY2hhbm5lbFxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWxSZXF1ZXN0J1xuICogICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICBuYW1lOiBcIk5ld0NoYW5uZWxcIlxuICogICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlc2NyaXB0aW9uIG9mIHRoZSBuZXcgY2hhbm5lbFwiXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ2hhbm5lbCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgaWQ6IFwibmV3Y2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIG5hbWU6IFwiTmV3Q2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlc2NyaXB0aW9uIG9mIHRoZSBuZXcgY2hhbm5lbFwiXG4gKiAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogXCJqb2huX2RvZVwiXG4gKiAgICAgICAgICAgICAgIHBvc2l0aW9uOiAxMFxuICogICAgICAgNDAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogSW52YWxpZCByZXF1ZXN0IGRhdGFcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgNDA5OlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ2hhbm5lbCBuYW1lIGFscmVhZHkgZXhpc3RzXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAqL1xuYXBwLnBvc3QoJy9hcGkvY2hhbm5lbHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgnbmFtZScpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDEwMCB9KS50cmltKCkuZXNjYXBlKCksXG4gIGJvZHkoJ3R5cGUnKS5pc0luKFsndGV4dCcsICd2b2ljZSddKS50cmltKCksXG4gIGJvZHkoJ2Rlc2NyaXB0aW9uJykub3B0aW9uYWwoKS5pc0xlbmd0aCh7IG1heDogNTAwIH0pLnRyaW0oKVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IG5hbWUsIHR5cGUsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keTtcbiAgICBjb25zdCBjcmVhdGVkQnkgPSByZXEudXNlci5uaWNrbmFtZTtcblxuICAgIC8vIENyZWF0ZSBuZXcgY2hhbm5lbCAoSUQgd2lsbCBiZSBhdXRvLWdlbmVyYXRlZCBpbiBwcmUtc2F2ZSBtaWRkbGV3YXJlKVxuICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgQ2hhbm5lbCh7XG4gICAgICBuYW1lLFxuICAgICAgdHlwZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY3JlYXRlZEJ5XG4gICAgfSk7XG5cbiAgICBhd2FpdCBjaGFubmVsLnNhdmUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBDaGFubmVsICcke25hbWV9JyBjcmVhdGVkIGJ5ICR7Y3JlYXRlZEJ5fWAsIHtcbiAgICAgIGNoYW5uZWxJZDogY2hhbm5lbC5pZCxcbiAgICAgIHR5cGUsXG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgaWQ6IGNoYW5uZWwuaWQsXG4gICAgICBuYW1lOiBjaGFubmVsLm5hbWUsXG4gICAgICB0eXBlOiBjaGFubmVsLnR5cGUsXG4gICAgICBkZXNjcmlwdGlvbjogY2hhbm5lbC5kZXNjcmlwdGlvbixcbiAgICAgIGNyZWF0ZWRCeTogY2hhbm5lbC5jcmVhdGVkQnksXG4gICAgICBwb3NpdGlvbjogY2hhbm5lbC5wb3NpdGlvblxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyBjaGFubmVsOicsIGVycm9yKTtcblxuICAgIGlmIChlcnJvci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGNoYW5uZWwgZGF0YScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdDaGFubmVsIG5hbWUgYWxyZWFkeSBleGlzdHMnLFxuICAgICAgICBjb2RlOiAnRFVQTElDQVRFX0NIQU5ORUwnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY2hhbm5lbCcsXG4gICAgICBjb2RlOiAnREFUQUJBU0VfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvbG9nb3V0IHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLnBvc3QoJy9hcGkvbG9nb3V0JywgYXV0aGVudGljYXRlVG9rZW4sIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+aqiBMb2dvdXQgcmVxdWVzdCBmcm9tIHVzZXI6JywgcmVxLnVzZXIubmlja25hbWUsIHsgdXNlcklkOiByZXEudXNlci5faWQgfSk7XG5cbiAgICAvLyBEaXNjb25uZWN0IGFsbCBTb2NrZXQuSU8gY29ubmVjdGlvbnMgZm9yIHRoaXMgdXNlclxuICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBvZmZsaW5lXG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEudXNlci5faWQsIHtcbiAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBVc2VyICR7cmVxLnVzZXIubmlja25hbWV9IGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5LCAke2Rpc2Nvbm5lY3RlZENvdW50fSBjb25uZWN0aW9ucyBkaXNjb25uZWN0ZWRgKTtcbiAgICBsb2dnZXIuaW5mbyhgVXNlciBsb2dnZWQgb3V0OiAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgZGlzY29ubmVjdGVkU29ja2V0czogZGlzY29ubmVjdGVkQ291bnRcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnTG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknLFxuICAgICAgZGlzY29ubmVjdGVkQ291bnRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0xvZ291dCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgbG9nb3V0JyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogU2Vzc2lvbiBsb2dvdXQgZW5kcG9pbnQgLSBkZXN0cm95cyBzZXNzaW9uXG4gKiBUaGlzIGNvbXBsZW1lbnRzIEpXVCBsb2dvdXQgdG8gaGFuZGxlIHNlc3Npb24tYmFzZWQgYXV0aGVudGljYXRpb25cbiAqL1xuYXBwLnBvc3QoJy9hcGkvbG9nb3V0X3Nlc3Npb24nLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogU2Vzc2lvbiBsb2dvdXQgcmVxdWVzdCwgc2Vzc2lvbklkOicsIHJlcS5zZXNzaW9uSWQpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbiBhdXRoZW50aWNhdGVkIHNlc3Npb24gb3IgSldUIHVzZXJcbiAgICBjb25zdCBoYXNKd3RBdXRoID0gISFyZXEudXNlcjsgLy8gRnJvbSBKV1QgbWlkZGxld2FyZVxuICAgIGNvbnN0IGhhc1Nlc3Npb25BdXRoID0gcmVxLnNlc3Npb25Vc2VyIHx8IChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkKTtcbiAgICBjb25zdCBzZXNzaW9uVXNlcklkID0gcmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24udXNlcklkO1xuXG4gICAgY29uc29sZS5sb2coJ/CfpJQgU2Vzc2lvbiBsb2dvdXQgY2hlY2s6Jywge1xuICAgICAgaGFzSnd0QXV0aCxcbiAgICAgIGhhc1Nlc3Npb25BdXRoLFxuICAgICAgc2Vzc2lvblVzZXJJZCxcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZFxuICAgIH0pO1xuXG4gICAgaWYgKGhhc1Nlc3Npb25BdXRoKSB7XG4gICAgICBjb25zdCBzZXNzaW9uVXNlciA9IHNlc3Npb25Vc2VySWQgPyBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb25Vc2VySWQpIDogbnVsbDtcbiAgICAgIGNvbnN0IG5pY2tuYW1lID0gc2Vzc2lvblVzZXIgPyBzZXNzaW9uVXNlci5uaWNrbmFtZSA6ICd1bmtub3duJztcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGxvZ291dDogRGVzdHJveWluZyBzZXNzaW9uIGZvciB1c2VyOicsIG5pY2tuYW1lKTtcblxuICAgICAgLy8gRGlzY29ubmVjdCBTb2NrZXQuSU8gY29ubmVjdGlvbnMgZm9yIHRoaXMgc2Vzc2lvbiB1c2VyXG4gICAgICBpZiAoc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCfl5HvuI8gU2Vzc2lvbiBsb2dvdXQ6IERpc2Nvbm5lY3RlZCAke2Rpc2Nvbm5lY3RlZENvdW50fSBzb2NrZXQgY29ubmVjdGlvbnNgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVzdHJveSB0aGUgc2Vzc2lvblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICByZXEuc2Vzc2lvbi5kZXN0cm95KChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgU2Vzc2lvbiBkZXN0cm95IGVycm9yOicsIGVycik7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGRlc3Ryb3llZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBTZXNzaW9uIGxvZ2dlZCBvdXQ6ICR7bmlja25hbWV9YCwge1xuICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgIGlwOiByZXEuaXBcbiAgICAgIH0pO1xuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgdHlwZTogJ3Nlc3Npb25fbG9nb3V0JyxcbiAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gU2Vzc2lvbiBsb2dvdXQ6IE5vIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiB0byBkZXN0cm95Jyk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdObyBhY3RpdmUgc2Vzc2lvbiB0byBsb2cgb3V0JyxcbiAgICAgICAgdHlwZTogJ3Nlc3Npb25fbG9nb3V0JyxcbiAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignU2Vzc2lvbiBsb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBzZXNzaW9uIGxvZ291dCcsXG4gICAgICBjb2RlOiAnU0VTU0lPTl9MT0dPVVRfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBIeWJyaWQgbG9nb3V0IGVuZHBvaW50IC0gaGFuZGxlcyBib3RoIEpXVCBhbmQgc2Vzc2lvbiBsb2dvdXRcbmFwcC5wb3N0KCcvYXBpL2xvZ291dF9jb21wbGV0ZScsIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+aqiBDb21wbGV0ZSBsb2dvdXQgcmVxdWVzdCAoSldUICsgU2Vzc2lvbiksIHNlc3Npb25JZDonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIGNvbnN0IGhhc0p3dEF1dGggPSAhIXJlcS51c2VyO1xuICAgIGNvbnN0IGhhc1Nlc3Npb25BdXRoID0gcmVxLnNlc3Npb25Vc2VyIHx8IChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkKTtcbiAgICBjb25zdCBzZXNzaW9uVXNlcklkID0gcmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24udXNlcklkO1xuXG4gICAgbGV0IGp3dExvZ291dFJlc3VsdCA9IG51bGw7XG4gICAgbGV0IHNlc3Npb25Mb2dvdXRSZXN1bHQgPSBudWxsO1xuXG4gICAgLy8gSGFuZGxlIEpXVCBsb2dvdXQgaWYgSldUIGlzIHByb3ZpZGVkXG4gICAgaWYgKGhhc0p3dEF1dGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICAgICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBbc29ja2V0SWQsIHNvY2tldERhdGFdIG9mIHNvY2tldHMuZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEudXNlci5faWQsIHtcbiAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGp3dExvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50XG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChqd3RFcnJvcikge1xuICAgICAgICBqd3RMb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGp3dEVycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2Vzc2lvbiBsb2dvdXQgaWYgc2Vzc2lvbiBleGlzdHNcbiAgICBpZiAoaGFzU2Vzc2lvbkF1dGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb25Vc2VySWQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBsb2dvdXQ6IERlc3Ryb3lpbmcgc2Vzc2lvbiBmb3IgdXNlcjonLCBzZXNzaW9uVXNlciA/IHNlc3Npb25Vc2VyLm5pY2tuYW1lIDogJ3Vua25vd24nKTtcblxuICAgICAgICAgIC8vIERpc2Nvbm5lY3QgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHNlc3Npb24gdXNlclxuICAgICAgICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICAgICAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSBzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFNlc3Npb24gbG9nb3V0OiBEaXNjb25uZWN0ZWQgJHtkaXNjb25uZWN0ZWRDb3VudH0gc29ja2V0IGNvbm5lY3Rpb25zYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXN0cm95IHRoZSBzZXNzaW9uXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICByZXEuc2Vzc2lvbi5kZXN0cm95KChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlc3Npb25Mb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzZXNzaW9uRGVzdHJveWVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgc2Vzc2lvbkxvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogc2Vzc2lvbkVycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvdmVyYWxsU3VjY2VzcyA9ICghand0TG9nb3V0UmVzdWx0IHx8IGp3dExvZ291dFJlc3VsdC5zdWNjZXNzKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoIXNlc3Npb25Mb2dvdXRSZXN1bHQgfHwgc2Vzc2lvbkxvZ291dFJlc3VsdC5zdWNjZXNzKTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IG92ZXJhbGxTdWNjZXNzLFxuICAgICAgbWVzc2FnZTogJ0NvbXBsZXRlIGxvZ291dCBwcm9jZXNzZWQnLFxuICAgICAgdHlwZTogJ2NvbXBsZXRlX2xvZ291dCcsXG4gICAgICBqd3Q6IGp3dExvZ291dFJlc3VsdCxcbiAgICAgIHNlc3Npb246IHNlc3Npb25Mb2dvdXRSZXN1bHRcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignQ29tcGxldGUgbG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgY29tcGxldGUgbG9nb3V0JyxcbiAgICAgIGNvZGU6ICdDT01QTEVURV9MT0dPVVRfRVJST1InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyAgNDA0IGhhbmRsZXIgKG11c3QgYmUgYmVmb3JlIGdsb2JhbCBlcnJvciBoYW5kbGVyKVxuYXBwLnVzZSgocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS53YXJuKCfinYwgRmluYWwgNDA0IGhhbmRsZXIgZXhlY3V0ZWQgLSByb3V0ZSBub3QgZm91bmQhJywgeyBtZXRob2Q6IHJlcS5tZXRob2QsIHVybDogcmVxLnVybCB9KTtcbiAgbG9nZ2VyLndhcm4oYDQwNCAtICR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfWAsIHtcbiAgICBpcDogcmVxLmlwLFxuICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICBlcnJvcjogJ0VuZHBvaW50IG5vdCBmb3VuZCcsXG4gICAgcGF0aDogcmVxLnVybCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgY29kZTogJ05PVF9GT1VORCdcbiAgfSk7XG59KTtcblxuLy8gR2xvYmFsIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmUgKG11c3QgYmUgbGFzdClcbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuXG5cblxuXG5cblxuXG5cbi8vIEdsb2JhbCB1c2VycyBtYXAgZm9yIHNvY2tldCBtYW5hZ2VtZW50IHtzb2NrZXRJZDoge3VzZXJJZCwgbmlja25hbWUsIHJvb219fVxubGV0IG9ubGluZVVzZXJzID0gbmV3IE1hcCgpO1xuXG4vLyBVc2VyIGNvbm5lY3Rpb24gY291bnRlciB7dXNlcklkOiBjb25uZWN0aW9uQ291bnR9XG5sZXQgdXNlckNvbm5lY3Rpb25zID0gbmV3IE1hcCgpO1xuXG4vLyBWb2ljZSBjaGFubmVscyBtYW5hZ2VtZW50XG5jb25zdCB2b2ljZUNoYW5uZWxzID0gbmV3IE1hcCgpOyAvLyBjaGFubmVsSWQgLT4geyBzb2NrZXRJZDogeyBwZWVyQ29ubmVjdGlvbiwgc3RyZWFtIH0gfVxuXG4vLyBJbXByb3ZlZCBTb2NrZXQuSU8gc2Vzc2lvbiBtaWRkbGV3YXJlIHdpdGggcHJvcGVyIHJlcyBvYmplY3QgaGFuZGxpbmdcbmlvLnVzZSgoc29ja2V0LCBuZXh0KSA9PiB7XG4gIC8vIENyZWF0ZSBhIG1vcmUgY29tcGxldGUgbW9jayByZXMgb2JqZWN0IGlmIG1pc3NpbmdcbiAgaWYgKCFzb2NrZXQucmVxdWVzdC5yZXMpIHtcbiAgICBzb2NrZXQucmVxdWVzdC5yZXMgPSB7XG4gICAgICBzZXRIZWFkZXI6ICgpID0+IHt9LFxuICAgICAgZ2V0SGVhZGVyOiAoKSA9PiB7fSxcbiAgICAgIHdyaXRlSGVhZDogKCkgPT4ge30sXG4gICAgICBlbmQ6ICgpID0+IHt9LFxuICAgICAgaGVhZGVyc1NlbnQ6IGZhbHNlLFxuICAgICAgc3RhdHVzQ29kZTogMjAwXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFwcGx5IHNlc3Npb24gbWlkZGxld2FyZSB3aXRoIGVycm9yIGhhbmRsaW5nXG4gIHNlc3Npb25NaWRkbGV3YXJlKHNvY2tldC5yZXF1ZXN0LCBzb2NrZXQucmVxdWVzdC5yZXMsIChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTZXNzaW9uIG1pZGRsZXdhcmUgZXJyb3IgZm9yIFNvY2tldC5JTzonLCBlcnIpO1xuICAgICAgcmV0dXJuIG5leHQoZXJyKTtcbiAgICB9XG4gICAgbmV4dCgpO1xuICB9KTtcbn0pO1xuXG4vLyBTb2NrZXQuSU8gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuaW8udXNlKGFzeW5jIChzb2NrZXQsIG5leHQpID0+IHtcbiAgY29uc3QgeyBjc3JmVG9rZW4gfSA9IHNvY2tldC5oYW5kc2hha2UuYXV0aDtcbiAgY29uc3Qgc2Vzc2lvbiA9IHNvY2tldC5yZXF1ZXN0LnNlc3Npb247XG5cbiAgY29uc29sZS5sb2coJ/CflJEgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGF0dGVtcHQgd2l0aCBzZXNzaW9uIGFuZCBDU1JGIGZpbmdlcnByaW50IGNoZWNrJyk7XG4gIGNvbnNvbGUubG9nKCfwn5SNIFNvY2tldCBzZXNzaW9uIGRhdGE6Jywge1xuICAgIHNlc3Npb25JZDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbklkLFxuICAgIHNlc3Npb25FeGlzdHM6ICEhc2Vzc2lvbixcbiAgICBhdXRoZW50aWNhdGVkOiBzZXNzaW9uPy5hdXRoZW50aWNhdGVkLFxuICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlcklkLFxuICAgIG5pY2tuYW1lOiBzZXNzaW9uPy5uaWNrbmFtZSxcbiAgICByb2xlOiBzZXNzaW9uPy5yb2xlLFxuICAgIGNzcmZUb2tlblByb3ZpZGVkOiAhIWNzcmZUb2tlbixcbiAgICBzZXNzaW9uQ3NyZlRva2VuOiAhIXNlc3Npb24/LmNzcmZUb2tlbixcbiAgICBtYXRjaDogY3NyZlRva2VuICYmIHNlc3Npb24/LmNzcmZUb2tlbiAmJiBjc3JmVG9rZW4gPT09IHNlc3Npb24uY3NyZlRva2VuXG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKCfwn5STIEZpbmdlcnByaW50IHZlcmlmaWNhdGlvbjonLCB7XG4gICAgc2lkOiBzb2NrZXQucmVxdWVzdC5zZXNzaW9uSWQsXG4gICAgcHJvdmlkZWRDc3JmVG9rZW46IGNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgc2Vzc2lvbkNzcmZUb2tlbjogc2Vzc2lvbj8uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICB1c2VyQWdlbnQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb24/LnVzZXJBZ2VudD8uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nLFxuICAgIGxvZ2luVGltZTogc2Vzc2lvbj8ubG9naW5UaW1lLFxuICAgIHJlZ2lzdHJhdGlvblRpbWU6IHNlc3Npb24/LnJlZ2lzdHJhdGlvblRpbWVcbiAgfSk7XG5cbiAgLy8gVmFsaWRhdGUgc2Vzc2lvbiBleGlzdHMgYW5kIGhhcyBhdXRoZW50aWNhdGlvblxuICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24uYXV0aGVudGljYXRlZCB8fCAhc2Vzc2lvbi51c2VySWQpIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IE5vIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiBmb3VuZCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIFNlc3Npb24gZGV0YWlsczonLCB7XG4gICAgICBzZXNzaW9uSWQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb25JZCxcbiAgICAgIHNlc3Npb246ICEhc2Vzc2lvbixcbiAgICAgIGF1dGhlbnRpY2F0ZWQ6IHNlc3Npb24/LmF1dGhlbnRpY2F0ZWQsXG4gICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXJJZFxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignU2Vzc2lvbiBhdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpKTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIENTUkYgdG9rZW4gZm9yIGFkZGl0aW9uYWwgc2VjdXJpdHkgKG11c3QgbWF0Y2ggc2Vzc2lvbidzIHVuaXF1ZSBDU1JGIHRva2VuKVxuICBpZiAoIWNzcmZUb2tlbiB8fCAhc2Vzc2lvbi5jc3JmVG9rZW4gfHwgY3NyZlRva2VuICE9PSBzZXNzaW9uLmNzcmZUb2tlbikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogSW52YWxpZCBDU1JGIHRva2VuIGZpbmdlcnByaW50Jyk7XG4gICAgY29uc29sZS5sb2coJ/CflJIgRmluZ2VycHJpbnQgbWlzbWF0Y2ggZGV0YWlsczonLCB7XG4gICAgICBwcm92aWRlZDogY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICAgIGV4cGVjdGVkOiBzZXNzaW9uLmNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgICBtYXRjaDogY3NyZlRva2VuID09PSBzZXNzaW9uLmNzcmZUb2tlblxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignQ1NSRiB2YWxpZGF0aW9uIGZhaWxlZCcpKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCfinIUgU29ja2V0IGZpbmdlcnByaW50IHZlcmlmaWNhdGlvbiBzdWNjZXNzZnVsJyk7XG5cbiAgdHJ5IHtcbiAgICAvLyBWZXJpZnkgdXNlciBleGlzdHMgaW4gZGF0YWJhc2VcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uLnVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IFVzZXIgbm90IGZvdW5kIGluIERCJyk7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kIGluIHNlc3Npb24nKSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHVzZXIgc3RhdHVzIHVwZGF0ZSBiYXNlZCBvbiBjb25uZWN0aW9uIGNvdW50XG4gICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VySWQ7XG4gICAgY29uc3QgY29ubmVjdGlvbkNvdW50ID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgY29uc3QgbmV3Q29ubmVjdGlvbkNvdW50ID0gY29ubmVjdGlvbkNvdW50ICsgMTtcbiAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q29ubmVjdGlvbkNvdW50KTtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYmFubmVkXG4gICAgaWYgKHVzZXIuaXNCYW5uZWQoKSkge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBVc2VyIGlzIGJhbm5lZCcsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBiYW5SZWFzb246IHVzZXIuYmFuUmVhc29uLFxuICAgICAgICBiYW5FeHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Jhbm5lZCcsIHtcbiAgICAgICAgcmVhc29uOiB1c2VyLmJhblJlYXNvbiB8fCAnWW91IGhhdmUgYmVlbiBiYW5uZWQgZnJvbSB0aGUgc2VydmVyJyxcbiAgICAgICAgZXhwaXJlczogdXNlci5iYW5FeHBpcmVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignVXNlciBpcyBiYW5uZWQnKSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBtdXRlZCBhbmQgZW5mb3JjZSBtdXRlIGluIGNoYXRcbiAgICBjb25zdCBpc011dGVkID0gdXNlci5pc011dGVkKCk7XG4gICAgY29uc29sZS5sb2coJ/CflIcgVXNlciBtdXRlIHN0YXR1cyBjaGVja2VkOicsIHsgbmlja25hbWU6IHVzZXIubmlja25hbWUsIGlzTXV0ZWQsIG11dGVFeHBpcmVzOiB1c2VyLm11dGVFeHBpcmVzIH0pO1xuXG4gICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIHdpdGggY29ubmVjdGlvbiBjb3VudCB0cmFja2luZ1xuICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgIHsgX2lkOiB1c2VySWQgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIHN0YXR1czogbmV3Q29ubmVjdGlvbkNvdW50ID4gMCA/ICdvbmxpbmUnIDogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBydW5WYWxpZGF0b3JzOiB0cnVlXG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICh1cGRhdGVSZXN1bHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFNvY2tldCBhdXRoOiBVc2VyICR7dXNlci5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvbmxpbmUgKGNvbm5lY3Rpb25zOiAke25ld0Nvbm5lY3Rpb25Db3VudH0pYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgdXBkYXRlZCB0byBvbmxpbmUgdmlhIHNvY2tldCBhdXRoYCwge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGNvbm5lY3Rpb25zOiBuZXdDb25uZWN0aW9uQ291bnQsXG4gICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGUgbG9jYWwgdXNlciBvYmplY3Qgd2l0aCB1cGRhdGVkIGRhdGFcbiAgICB1c2VyLnN0YXR1cyA9IHVwZGF0ZVJlc3VsdCA/IHVwZGF0ZVJlc3VsdC5zdGF0dXMgOiAnb25saW5lJztcbiAgICB1c2VyLmxhc3RBY3RpdmUgPSB1cGRhdGVSZXN1bHQgPyB1cGRhdGVSZXN1bHQubGFzdEFjdGl2ZSA6IG5ldyBEYXRlKCk7XG5cbiAgICAvLyBTZXQgc29ja2V0IHByb3BlcnRpZXMgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgIHNvY2tldC51c2VySWQgPSBzZXNzaW9uLnVzZXJJZDtcbiAgICBzb2NrZXQubmlja25hbWUgPSBzZXNzaW9uLm5pY2tuYW1lO1xuICAgIHNvY2tldC5yb2xlID0gc2Vzc2lvbi5yb2xlIHx8ICdtZW1iZXInO1xuICAgIGNvbnNvbGUubG9nKGDwn46JIFNvY2tldCBhdXRoZW50aWNhdGVkIHZpYSBzZXNzaW9uOiAke3NvY2tldC5uaWNrbmFtZX0gKHVzZXJJZDogJHtzb2NrZXQudXNlcklkfSlgKTtcbiAgICBjb25zb2xlLmxvZygnU29ja2V0IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwnKTtcbiAgICByZXR1cm4gbmV4dCgpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICBsb2dnZXIuZXJyb3IoYFNvY2tldCBhdXRoIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIHtcbiAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb24/LmlkLFxuICAgICAgaXA6IHNvY2tldC5oYW5kc2hha2UuYWRkcmVzc1xuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ2xlYW51cCBpbmFjdGl2ZSBjb25uZWN0aW9ucyBiYXNlZCBvbiBoZWFydGJlYXRcbiAqL1xuZnVuY3Rpb24gY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMoKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IHRpbWVvdXQgPSA2MDAwMDsgLy8gNjAgc2Vjb25kcyB0aW1lb3V0XG5cbiAgZm9yIChjb25zdCBbc29ja2V0SWQsIHVzZXJdIG9mIG9ubGluZVVzZXJzLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgLSB1c2VyLmxhc3RIZWFydGJlYXQgPiB0aW1lb3V0KSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+nuSBDbGVhbnNpbmcgZGVhZCBjb25uZWN0aW9uIGZvciB1c2VyICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgICAgLy8gRm9yY2UgZGlzY29ubmVjdCBzb2NrZXRcbiAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHVzZXIgY29ubmVjdGlvbnMgY291bnRcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25zTGVmdCA9ICh1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXIudXNlcklkKSB8fCAwKSAtIDE7XG4gICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXIudXNlcklkLCBNYXRoLm1heCgwLCBjb25uZWN0aW9uc0xlZnQpKTtcblxuICAgICAgLy8gU2V0IHN0YXR1cyB0byBvZmZsaW5lIGlmIGxhc3QgY29ubmVjdGlvblxuICAgICAgaWYgKGNvbm5lY3Rpb25zTGVmdCA8PSAwKSB7XG4gICAgICAgIFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlci51c2VySWQsIHtcbiAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHN0YXR1cyBvbiBjbGVhbnVwOicsIGVycikpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGRlYWQgY29ubmVjdGlvbilgKTtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHNldCB0byBvZmZsaW5lIGR1ZSB0byBkZWFkIGNvbm5lY3Rpb25gLCB7XG4gICAgICAgICAgdXNlcklkOiB1c2VyLnVzZXJJZCxcbiAgICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgICBzb2NrZXRJZDogc29ja2V0SWRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9ubGluZVVzZXJzLmRlbGV0ZShzb2NrZXRJZCk7XG4gICAgfVxuICB9XG59XG5cbi8vIFJ1biBjbGVhbnVwIGV2ZXJ5IDMwIHNlY29uZHMgLSBESVNBQkxFRCBmb3IgdGVzdCBlbnZpcm9ubWVudFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcbiAgc2V0SW50ZXJ2YWwoY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMsIDMwMDAwKTtcbn1cblxuaW8ub24oJ2Nvbm5lY3Rpb24nLCBhc3luYyAoc29ja2V0KSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5qAIFNvY2tldCBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XG4gIGNvbnNvbGUubG9nKGDwn5GkIFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGNvbm5lY3RlZGApO1xuXG4gIC8vIFRyYWNrIG9ubGluZSB1c2VyXG4gIG9ubGluZVVzZXJzLnNldChzb2NrZXQuaWQsIHtcbiAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICByb2xlOiBzb2NrZXQucm9sZSxcbiAgICByb29tOiBudWxsLFxuICAgIGxhc3RIZWFydGJlYXQ6IERhdGUubm93KClcbiAgfSk7XG5cbiAgLy8gTG9nIGN1cnJlbnQgYWN0aXZlIGNvbm5lY3Rpb25zIGNvdW50XG4gIGNvbnNvbGUubG9nKGDwn5OKIEFjdGl2ZSBzb2NrZXQgY29ubmVjdGlvbnM6ICR7b25saW5lVXNlcnMuc2l6ZX0gLSBhdXRoIHN1Y2Nlc3MgZm9yICR7c29ja2V0Lm5pY2tuYW1lfWApO1xuXG4gIC8vIEVuaGFuY2VkIGhlYXJ0YmVhdCBtZWNoYW5pc20gd2l0aCByZWNvbm5lY3Rpb24gbG9naWNcbiAgc29ja2V0Lm9uKCdoZWFydGJlYXQnLCAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgdXNlci5sYXN0SGVhcnRiZWF0ID0gbm93O1xuICAgICAgY29uc29sZS5sb2coYPCfkpMgSGVhcnRiZWF0IHJlY2VpdmVkIGZyb20gdXNlciAke3NvY2tldC5uaWNrbmFtZX0gYXQgJHtuZXcgRGF0ZShub3cpLnRvSVNPU3RyaW5nKCl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci53YXJuKGBIZWFydGJlYXQgcmVjZWl2ZWQgZnJvbSB1bmtub3duIHNvY2tldDogJHtzb2NrZXQuaWR9YCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgaGVhcnRiZWF0IG9uIHVzZXIgYWN0aXZpdHlcbiAgY29uc3QgdXBkYXRlSGVhcnRiZWF0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBvbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgdXNlci5sYXN0SGVhcnRiZWF0ID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2VuZCBoZWFydGJlYXQgdG8gY2xpZW50IHBlcmlvZGljYWxseVxuICBjb25zdCBoZWFydGJlYXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAoc29ja2V0LmNvbm5lY3RlZCkge1xuICAgICAgc29ja2V0LmVtaXQoJ2hlYXJ0YmVhdF9yZXF1ZXN0Jyk7XG4gICAgfVxuICB9LCAxNTAwMCk7IC8vIFNlbmQgaGVhcnRiZWF0IGV2ZXJ5IDE1IHNlY29uZHNcblxuICAvLyBDbGVhciBpbnRlcnZhbCBvbiBkaXNjb25uZWN0XG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGhlYXJ0YmVhdEludGVydmFsKTtcbiAgICAvLyAuLi4gcmVzdCBvZiBkaXNjb25uZWN0IGxvZ2ljXG4gIH0pO1xuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJ5aW5nIGRhdGFiYXNlIG9wZXJhdGlvbnNcbiAgY29uc3QgcmV0cnlEYXRhYmFzZU9wZXJhdGlvbiA9IGFzeW5jIChvcGVyYXRpb24sIHJldHJpZXMgPSAzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcmV0cmllczsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaSA9PT0gcmV0cmllcykgdGhyb3cgZXJyb3I7XG4gICAgICAgIGxvZ2dlci53YXJuKGBEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkLCByZXRyeSAke2kgKyAxfS8ke3JldHJpZXN9OmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwICogKGkgKyAxKSkpOyAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHNvY2tldC5vbignam9pbl9yb29tJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBjb25zdCB7IHJvb20gfSA9IGRhdGE7XG4gICAgaWYgKCFyb29tKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogTm8gcm9vbSBzcGVjaWZpZWQnLCB7XG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdSb29tIG5hbWUgaXMgcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnTUlTU0lOR19ST09NJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygcm9vbSAhPT0gJ3N0cmluZycgfHwgcm9vbS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogSW52YWxpZCByb29tIGZvcm1hdCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICByb29tXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgcm9vbSBuYW1lIGZvcm1hdCcsXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX1JPT01fRk9STUFUJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZXRyeURhdGFiYXNlT3BlcmF0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gVmVyaWZ5IGNoYW5uZWwgZXhpc3RzXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBDaGFubmVsLmZpbmRPbmUoeyBpZDogcm9vbSB9KTtcbiAgICAgICAgaWYgKCFjaGFubmVsKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oJ0pvaW4gcm9vbSBmYWlsZWQ6IENoYW5uZWwgbm90IGZvdW5kJywge1xuICAgICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICAgIHJvb21cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2hhbm5lbCAnJHtyb29tfScgbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdDSEFOTkVMX05PVF9GT1VORCcsXG4gICAgICAgICAgICByb29tLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYW5uZWwgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMZWF2ZSBwcmV2aW91cyByb29tXG4gICAgICAgIGlmIChzb2NrZXQucm9vbSkge1xuICAgICAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbSk7XG4gICAgICAgICAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwgeyAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSwgcm9vbTogbnVsbCB9KTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSBvbmxpbmUgdXNlcnMgaW4gcHJldmlvdXMgcm9vbVxuICAgICAgICAgIGNvbnN0IHByZXZpb3VzUm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCBwcmV2aW91c1Jvb21Vc2Vycyk7XG4gICAgICAgIH1cblxuICAgICAgICBzb2NrZXQucm9vbSA9IHJvb207XG4gICAgICAgIHNvY2tldC5qb2luKHNvY2tldC5yb29tKTtcblxuICAgICAgICAvLyBVcGRhdGUgdXNlciB0cmFja2luZ1xuICAgICAgICBvbmxpbmVVc2Vycy5zZXQoc29ja2V0LmlkLCB7XG4gICAgICAgICAgLi4ub25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCksXG4gICAgICAgICAgcm9vbTogc29ja2V0LnJvb21cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGpvaW5lZCByb29tICR7c29ja2V0LnJvb219YCk7XG5cbiAgICAgICAgLy8gU2VuZCBzeXN0ZW0gbWVzc2FnZSBhYm91dCBqb2luaW5nXG4gICAgICAgIGNvbnN0IGpvaW5NZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICAgIGF1dGhvcjogJ1N5c3RlbScsXG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgdGV4dDogYCR7c29ja2V0Lm5pY2tuYW1lfSBqb2luZWQgdGhlIGNoYW5uZWwuYCxcbiAgICAgICAgICB0eXBlOiAnc3lzdGVtJ1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgam9pbk1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGF1dGhvcjogam9pbk1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICAgIGNoYW5uZWw6IGpvaW5NZXNzYWdlLmNoYW5uZWwsXG4gICAgICAgICAgdGV4dDogam9pbk1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB0eXBlOiBqb2luTWVzc2FnZS50eXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogam9pbk1lc3NhZ2UudGltZXN0YW1wXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNlbmQgb25saW5lIHVzZXJzIGluIGN1cnJlbnQgcm9vbVxuICAgICAgICBjb25zdCByb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHJvb21Vc2Vycyk7XG5cbiAgICAgICAgLy8gU2VuZCBtZXNzYWdlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgICB7IHR5cGU6ICdzeXN0ZW0nIH0sXG4gICAgICAgICAgICB7IGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lIH0sXG4gICAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgICAgLmxpbWl0KDEwMClcbiAgICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogMSB9KTsgLy8gUmVzb3J0IGZvciBjaHJvbm9sb2dpY2FsIG9yZGVyXG5cbiAgICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgICBhdXRob3I6IG1zZy5hdXRob3IsXG4gICAgICAgICAgcm9vbTogbXNnLmNoYW5uZWwsXG4gICAgICAgICAgdGV4dDogbXNnLnRleHQsXG4gICAgICAgICAgdHlwZTogbXNnLnR5cGUsXG4gICAgICAgICAgdGFyZ2V0OiBtc2cudGFyZ2V0LFxuICAgICAgICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcFxuICAgICAgICB9KSkpO1xuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBqb2luX3Jvb20gYWZ0ZXIgcmV0cmllczonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiByb29tIGFmdGVyIG11bHRpcGxlIGF0dGVtcHRzJyxcbiAgICAgICAgY29kZTogJ0pPSU5fUk9PTV9GQUlMRUQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBMb2FkIGhpc3RvcnkgKGZhbGxiYWNrLCBpZiBuZWVkZWQpXG4gIHNvY2tldC5vbignZ2V0X2hpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFzb2NrZXQucm9vbSkge1xuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBbXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBNZXNzYWdlLmZpbmQoe1xuICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgJG9yOiBbXG4gICAgICAgICAgeyB0eXBlOiAncHVibGljJyB9LFxuICAgICAgICAgIHsgdHlwZTogJ3N5c3RlbScgfSxcbiAgICAgICAgICB7IGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lIH0sXG4gICAgICAgICAgeyB0YXJnZXQ6IHNvY2tldC5uaWNrbmFtZSB9XG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAtMSB9KVxuICAgICAgICAubGltaXQoMTAwKVxuICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogMSB9KTsgLy8gUmVzb3J0IGZvciBjaHJvbm9sb2dpY2FsIG9yZGVyXG5cbiAgICAgIHNvY2tldC5lbWl0KCdoaXN0b3J5JywgaGlzdG9yeS5tYXAobXNnID0+ICh7XG4gICAgICAgIGF1dGhvcjogbXNnLmF1dGhvcixcbiAgICAgICAgcm9vbTogbXNnLmNoYW5uZWwsIC8vIFVzaW5nIGNoYW5uZWwgaW5zdGVhZCBvZiByb29tIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICB0ZXh0OiBtc2cudGV4dCxcbiAgICAgICAgdHlwZTogbXNnLnR5cGUsXG4gICAgICAgIHRhcmdldDogbXNnLnRhcmdldCxcbiAgICAgICAgdGltZXN0YW1wOiBtc2cudGltZXN0YW1wXG4gICAgICB9KSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gbG9hZCBtZXNzYWdlIGhpc3RvcnknIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHVibGljIG1lc3NhZ2VcbiAgc29ja2V0Lm9uKCdtZXNzYWdlJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC5yb29tIHx8ICFkYXRhLnRleHQ/LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBtdXRlZFxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzb2NrZXQudXNlcklkKTtcbiAgICBpZiAoY3VycmVudFVzZXIgJiYgY3VycmVudFVzZXIuaXNNdXRlZCgpKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgYXJlIG11dGVkIGFuZCBjYW5ub3Qgc2VuZCBtZXNzYWdlcycsXG4gICAgICAgIGNvZGU6ICdVU0VSX01VVEVEJyxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IGN1cnJlbnRVc2VyLm11dGVFeHBpcmVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiBkYXRhLnRleHQudHJpbSgpLFxuICAgICAgICB0eXBlOiAncHVibGljJ1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLCAvLyBLZWVwaW5nICdyb29tJyBmb3IgZnJvbnRlbmQgY29tcGF0aWJpbGl0eVxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHN0YXR1czogJ2RlbGl2ZXJlZCcsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZVxuICAgICAgfTtcblxuICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICBsb2dnZXIuZGVidWcoYE1lc3NhZ2Ugc2F2ZWQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gaW4gJHtzb2NrZXQucm9vbX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzYXZpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFByaXZhdGUgbWVzc2FnZVxuICBzb2NrZXQub24oJ3ByaXZhdGVfbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQucm9vbSB8fCAhZGF0YS50byB8fCAhZGF0YS50ZXh0Py50cmltKCkpIHJldHVybjtcblxuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gZGF0YS50ZXh0LnRyaW0oKTtcbiAgICBjb25zdCB0YXJnZXROaWNrbmFtZSA9IGRhdGEudG8udHJpbSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIGF0dGVtcHQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gdG8gJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBzZW5kZXJTb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0YXJnZXQgbmlja25hbWUgZm9ybWF0XG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUubGVuZ3RoID09PSAwIHx8IHRhcmdldE5pY2tuYW1lLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0YXJnZXQgdXNlciBuaWNrbmFtZScsXG4gICAgICAgICAgY29kZTogJ0lOVkFMSURfVEFSR0VUX05JQ0tOQU1FJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IHNlbGYtbWVzc2FnaW5nXG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUgPT09IHNvY2tldC5uaWNrbmFtZSkge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBzZW5kIHByaXZhdGUgbWVzc2FnZSB0byB5b3Vyc2VsZicsXG4gICAgICAgICAgY29kZTogJ1NFTEZfTUVTU0FHRV9OT1RfQUxMT1dFRCdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0YXJnZXQgdXNlciBpbiBzYW1lIHJvb20gd2l0aCBkZXRhaWxlZCBsb2dnaW5nXG4gICAgICBjb25zdCB0YXJnZXRVc2VyID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSkuZmluZChcbiAgICAgICAgdSA9PiB1Lm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZSAmJiB1LnJvb20gPT09IHNvY2tldC5yb29tXG4gICAgICApO1xuXG4gICAgICBsb2dnZXIuZGVidWcoYFByaXZhdGUgbWVzc2FnZSB0YXJnZXQgc2VhcmNoIHJlc3VsdCBmb3IgJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHRhcmdldEZvdW5kOiAhIXRhcmdldFVzZXIsXG4gICAgICAgIHRhcmdldFJvb206IHRhcmdldFVzZXI/LnJvb20sXG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBvbmxpbmVVc2Vyc0luUm9vbTogQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvb206IHUucm9vbSB9KSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXRhcmdldFVzZXIpIHtcbiAgICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgbWVzc2FnZSB3aXRoIG1vcmUgY29udGV4dFxuICAgICAgICBjb25zdCBvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbSA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+IHUubmlja25hbWUpO1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBgVXNlciAnJHt0YXJnZXROaWNrbmFtZX0nIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBjaGFubmVsLiBBdmFpbGFibGUgdXNlcnM6ICR7b25saW5lVXNlcnNJblNlbmRlclJvb20uam9pbignLCAnKSB8fCAnbm9uZSd9YCxcbiAgICAgICAgICBjb2RlOiAnVEFSR0VUX1VTRVJfTk9UX0lOX1JPT00nLFxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgICAgYXZhaWxhYmxlVXNlcnM6IG9ubGluZVVzZXJzSW5TZW5kZXJSb29tLFxuICAgICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBtZXNzYWdlIG9iamVjdFxuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiB0cmltbWVkVGV4dCxcbiAgICAgICAgdHlwZTogJ3ByaXZhdGUnLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5pY2tuYW1lXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtZXNzYWdlLnRhcmdldCxcbiAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJ1xuICAgICAgfTtcblxuICAgICAgLy8gU2VuZCB0byB0YXJnZXQgdXNlciB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICBjb25zdCB0YXJnZXRTb2NrZXRJZCA9IEFycmF5LmZyb20ob25saW5lVXNlcnMua2V5cygpKS5maW5kKFxuICAgICAgICBpZCA9PiBvbmxpbmVVc2Vycy5nZXQoaWQpLm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZVxuICAgICAgKTtcblxuICAgICAgaWYgKHRhcmdldFNvY2tldElkKSB7XG4gICAgICAgIGlvLnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCdwcml2YXRlX21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgdG8gdGFyZ2V0ICR7dGFyZ2V0Tmlja25hbWV9YCwge1xuICAgICAgICAgIHRhcmdldFNvY2tldElkOiB0YXJnZXRTb2NrZXRJZCxcbiAgICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFRhcmdldCB1c2VyICR7dGFyZ2V0Tmlja25hbWV9IGZvdW5kIGluIG9ubGluZVVzZXJzIGJ1dCBzb2NrZXQgSUQgbm90IGZvdW5kYCwge1xuICAgICAgICAgIHRhcmdldE5pY2tuYW1lLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICAgIG9ubGluZVVzZXJzQ291bnQ6IG9ubGluZVVzZXJzLnNpemUsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLl9pZFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTWVzc2FnZSBzdGlsbCBzYXZlZCB0byBkYXRhYmFzZSBmb3IgbGF0ZXIgZGVsaXZlcnkgaWYgdXNlciByZWNvbm5lY3RzXG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgY29uZmlybWF0aW9uIHRvIHNlbmRlciAod2l0aG91dCB0YXJnZXQgZm9yIHByaXZhY3kpXG4gICAgICBzb2NrZXQuZW1pdCgncHJpdmF0ZV9tZXNzYWdlJywge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLnJvb20sXG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgICB0YXJnZXQ6IG51bGwsIC8vIEhpZGUgdGFyZ2V0IGZyb20gc2VuZGVyJ3MgY29uZmlybWF0aW9uXG4gICAgICAgIHN0YXR1czogJ3NlbnQnXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFByaXZhdGUgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseWAsIHtcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkLFxuICAgICAgICBtZXNzYWdlTGVuZ3RoOiB0cmltbWVkVGV4dC5sZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2VuZGluZyBwcml2YXRlIG1lc3NhZ2U6Jywge1xuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogZGF0YS50byxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIHByaXZhdGUgbWVzc2FnZScsXG4gICAgICAgIGNvZGU6ICdQUklWQVRFX01FU1NBR0VfRkFJTEVEJ1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTcGVha2luZ1xuICBzb2NrZXQub24oJ3NwZWFraW5nJywgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBzb2NrZXQudG8oc29ja2V0LnJvb20pLmVtaXQoJ3NwZWFraW5nJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzcGVha2luZzogZGF0YS5zcGVha2luZyB9KTtcbiAgfSk7XG5cbiAgLy8gVm9pY2UgY2hhbm5lbCBldmVudHNcbiAgc29ja2V0Lm9uKCdqb2luX3ZvaWNlX2NoYW5uZWwnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGNvbnN0IHsgY2hhbm5lbElkIH0gPSBkYXRhO1xuICAgIGlmICghY2hhbm5lbElkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgLy8gVmVyaWZ5IGNoYW5uZWwgZXhpc3RzIGFuZCBpcyB2b2ljZVxuICAgICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZE9uZSh7IGlkOiBjaGFubmVsSWQsIHR5cGU6ICd2b2ljZScgfSk7XG4gICAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnVm9pY2UgY2hhbm5lbCBub3QgZm91bmQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdm9pY2UgY2hhbm5lbCBpZiBub3QgZXhpc3RzXG4gICAgICBpZiAoIXZvaWNlQ2hhbm5lbHMuaGFzKGNoYW5uZWxJZCkpIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5zZXQoY2hhbm5lbElkLCBuZXcgTWFwKCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFubmVsUGVlcnMgPSB2b2ljZUNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgICAvLyBOb3RpZnkgb3RoZXJzIGluIHRoZSBjaGFubmVsXG4gICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2pvaW5lZF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcblxuICAgICAgLy8gQWRkIHNvY2tldCB0byB2b2ljZSBjaGFubmVsIHJvb21cbiAgICAgIHNvY2tldC5qb2luKGNoYW5uZWxJZCk7XG4gICAgICBjaGFubmVsUGVlcnMuc2V0KHNvY2tldC5pZCwgeyBwZWVyQ29ubmVjdGlvbjogbnVsbCwgc3RyZWFtOiBudWxsIH0pO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlcidzIHZvaWNlIGNoYW5uZWwgc3RhdHVzXG4gICAgICBzb2NrZXQudm9pY2VDaGFubmVsID0gY2hhbm5lbElkO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHZvaWNlIGNoYW5uZWwgJHtjaGFubmVsSWR9YCk7XG4gICAgICBzb2NrZXQuZW1pdCgndm9pY2Vfam9pbmVkJywgeyBjaGFubmVsSWQgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBqb2luaW5nIHZvaWNlIGNoYW5uZWw6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGpvaW4gdm9pY2UgY2hhbm5lbCcgfSk7XG4gICAgfVxuICB9KTtcblxuICBzb2NrZXQub24oJ2xlYXZlX3ZvaWNlX2NoYW5uZWwnLCAoKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQudm9pY2VDaGFubmVsKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGFubmVsSWQgPSBzb2NrZXQudm9pY2VDaGFubmVsO1xuICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICBpZiAoY2hhbm5lbFBlZXJzKSB7XG4gICAgICBjaGFubmVsUGVlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG4gICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5kZWxldGUoY2hhbm5lbElkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb3RoZXJzXG4gICAgc29ja2V0LnRvKGNoYW5uZWxJZCkuZW1pdCgndXNlcl9sZWZ0X3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuXG4gICAgc29ja2V0LmxlYXZlKGNoYW5uZWxJZCk7XG4gICAgc29ja2V0LnZvaWNlQ2hhbm5lbCA9IG51bGw7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB2b2ljZSBjaGFubmVsICR7Y2hhbm5lbElkfWApO1xuICAgIHNvY2tldC5lbWl0KCd2b2ljZV9sZWZ0Jyk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2Vfb2ZmZXInLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgb2ZmZXIsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgndm9pY2Vfb2ZmZXInLCB7XG4gICAgICBvZmZlcixcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2VfYW5zd2VyJywgKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IGFuc3dlciwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCd2b2ljZV9hbnN3ZXInLCB7XG4gICAgICBhbnN3ZXIsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICBzb2NrZXQub24oJ2ljZV9jYW5kaWRhdGUnLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgY2FuZGlkYXRlLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ2ljZV9jYW5kaWRhdGUnLCB7XG4gICAgICBjYW5kaWRhdGUsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBEaXNjb25uZWN0XG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGFzeW5jICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gZGlzY29ubmVjdGVkYCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcklkID0gc29ja2V0LnVzZXJJZDtcblxuICAgICAgLy8gRGVjcmVhc2UgY29ubmVjdGlvbiBjb3VudCBmb3IgdGhpcyB1c2VyXG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWF4KDAsIGN1cnJlbnRDb3VudCAtIDEpO1xuICAgICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q291bnQpO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBkaXNjb25uZWN0ZWQgKHJlbWFpbmluZyBjb25uZWN0aW9uczogJHtuZXdDb3VudH0pYCwge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgICAgY29ubmVjdGlvbnNMZWZ0OiBuZXdDb3VudFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTGVhdmUgdm9pY2UgY2hhbm5lbCBpZiBpbiBvbmVcbiAgICAgIGlmIChzb2NrZXQudm9pY2VDaGFubmVsKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IHNvY2tldC52b2ljZUNoYW5uZWw7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICAgICAgaWYgKGNoYW5uZWxQZWVycykge1xuICAgICAgICAgIGNoYW5uZWxQZWVycy5kZWxldGUoc29ja2V0LmlkKTtcbiAgICAgICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHZvaWNlQ2hhbm5lbHMuZGVsZXRlKGNoYW5uZWxJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm90aWZ5IG90aGVyc1xuICAgICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2xlZnRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzb2NrZXQucm9vbSkge1xuICAgICAgICBzb2NrZXQubGVhdmUoc29ja2V0LnJvb20pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBsZWF2ZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IGxlYXZlTWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgICBhdXRob3I6ICdTeXN0ZW0nLFxuICAgICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAgIHRleHQ6IGAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB0aGUgY2hhbm5lbC5gLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBsZWF2ZU1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGF1dGhvcjogbGVhdmVNZXNzYWdlLmF1dGhvcixcbiAgICAgICAgICByb29tOiBsZWF2ZU1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBsZWF2ZU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB0eXBlOiBsZWF2ZU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IGxlYXZlTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIG9ubGluZSB1c2VycyBsaXN0XG4gICAgICAgIGNvbnN0IHJvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20gJiYgdS51c2VySWQgIT09IHNvY2tldC51c2VySWQpXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcm9vbVVzZXJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGZyb20gdHJhY2tpbmdcbiAgICAgIG9ubGluZVVzZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuXG4gICAgICAvLyBMb2cgY3VycmVudCBjb25uZWN0aW9ucyBhZnRlciBkaXNjb25uZWN0XG4gICAgICBsb2dnZXIuaW5mbyhgQWZ0ZXIgZGlzY29ubmVjdCwgYWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfWApO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgaW4gZGF0YWJhc2UgaWYgdGhpcyB3YXMgdGhlIGxhc3QgY29ubmVjdGlvblxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdDb25uZWN0aW9ucyA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBpZiAocmVtYWluaW5nQ29ubmVjdGlvbnMgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xuICAgICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCwge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVXBkYXRlIGxhc3RBY3RpdmUgYnV0IGtlZXAgc3RhdHVzIG9ubGluZVxuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBzdGlsbCBvbmxpbmUgKCR7cmVtYWluaW5nQ29ubmVjdGlvbnN9IGNvbm5lY3Rpb25zIGxlZnQpYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgcmVtYWlucyBvbmxpbmVgLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgICBjb25uZWN0aW9uc0xlZnQ6IHJlbWFpbmluZ0Nvbm5lY3Rpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGRpc2Nvbm5lY3QgaGFuZGxlcjonLCBlcnJvcik7XG4gICAgfVxuIH0pO1xufSk7XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgYW5kIHN0YXJ0IHNlcnZlciAoZHVwbGljYXRlIHJlbW92ZWQpXG5jb25zdCBpbml0aWFsaXplU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgY2hhbm5lbHMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGNvbnN0IGRlZmF1bHRDaGFubmVscyA9IFtcbiAgICAgIHsgaWQ6ICdnZW5lcmFsJywgbmFtZTogJ0dlbmVyYWwnLCB0eXBlOiAndGV4dCcsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfSxcbiAgICAgIHsgaWQ6ICd2b2ljZS1jaGF0JywgbmFtZTogJ1ZvaWNlIENoYXQnLCB0eXBlOiAndm9pY2UnLCBjcmVhdGVkQnk6ICdzeXN0ZW0nIH1cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBjaGFubmVsRGF0YSBvZiBkZWZhdWx0Q2hhbm5lbHMpIHtcbiAgICAgIGF3YWl0IENoYW5uZWwuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgeyBpZDogY2hhbm5lbERhdGEuaWQgfSxcbiAgICAgICAgY2hhbm5lbERhdGEsXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbygnRGVmYXVsdCBjaGFubmVscyBpbml0aWFsaXplZCcpO1xuXG4gICAgLy8gU3RhcnQgc2VydmVyXG4gICAgY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMTtcbiAgICBzZXJ2ZXIubGlzdGVuKFBPUlQsICcwLjAuMC4wJywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd25cbnByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlY2VpdmVkIFNJR0lOVCwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnUmVjZWl2ZWQgU0lHVEVSTSwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG4vLyBTdGFydCB0aGUgc2VydmVyXG5pbml0aWFsaXplU2VydmVyKCkuY2F0Y2goZXJyID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgZXJyb3IgZHVyaW5nIHNlcnZlciBzdGFydHVwOicsIGVycik7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUMxQixNQUFNQyxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1JLFFBQVEsR0FBR0osT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNyQyxNQUFNSyxHQUFHLEdBQUdMLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1PLE9BQU8sR0FBR1AsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNUSxZQUFZLEdBQUdSLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDN0MsTUFBTVMsU0FBUyxHQUFHVCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTVUsTUFBTSxHQUFHVixPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1XLFNBQVMsR0FBR1gsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU07RUFBRVksSUFBSTtFQUFFQztBQUFpQixDQUFDLEdBQUdiLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUMvRCxNQUFNYyxRQUFRLEdBQUdkLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEM7QUFDQSxNQUFNZSxNQUFNLEdBQUdmLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTWdCLE9BQU8sR0FBR2hCLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUMxQyxNQUFNaUIsVUFBVSxHQUFHakIsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUMzQyxNQUFNO0VBQUVrQixTQUFTO0VBQUVDO0FBQVEsQ0FBQyxHQUFHbkIsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3pELE1BQU1vQixZQUFZLEdBQUdwQixPQUFPLENBQUMseUJBQXlCLENBQUM7O0FBRXZEO0FBQ0EsTUFBTXFCLElBQUksR0FBR3JCLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDckMsTUFBTXNCLE9BQU8sR0FBR3RCLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUMzQyxNQUFNdUIsT0FBTyxHQUFHdkIsT0FBTyxDQUFDLGtCQUFrQixDQUFDOztBQUUzQztBQUNBLE1BQU13QixNQUFNLEdBQUdqQixPQUFPLENBQUNrQixZQUFZLENBQUM7RUFDbENDLEtBQUssRUFBRSxNQUFNO0VBQ2JDLE1BQU0sRUFBRXBCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1QnJCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ0UsU0FBUyxDQUFDLENBQUMsRUFDMUJ0QixPQUFPLENBQUNvQixNQUFNLENBQUNHLE1BQU0sQ0FBQztJQUFFQyxLQUFLLEVBQUU7RUFBSyxDQUFDLENBQUMsRUFDdEN4QixPQUFPLENBQUNvQixNQUFNLENBQUNLLElBQUksQ0FBQyxDQUN0QixDQUFDO0VBQ0RDLFdBQVcsRUFBRTtJQUFFQyxPQUFPLEVBQUU7RUFBYyxDQUFDO0VBQ3ZDQyxVQUFVLEVBQUUsQ0FDVixJQUFJNUIsT0FBTyxDQUFDNEIsVUFBVSxDQUFDQyxJQUFJLENBQUM7SUFBRUMsUUFBUSxFQUFFO0VBQWtCLENBQUMsQ0FBQyxFQUM1RCxJQUFJOUIsT0FBTyxDQUFDNEIsVUFBVSxDQUFDRyxPQUFPLENBQUM7SUFDN0JYLE1BQU0sRUFBRXBCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1QnJCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ1ksUUFBUSxDQUFDLENBQUMsRUFDekJoQyxPQUFPLENBQUNvQixNQUFNLENBQUNhLE1BQU0sQ0FBQyxDQUN4QjtFQUNGLENBQUMsQ0FBQztBQUVOLENBQUMsQ0FBQztBQUVGLE1BQU1DLEdBQUcsR0FBR3ZDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU13QyxNQUFNLEdBQUd2QyxJQUFJLENBQUN3QyxZQUFZLENBQUNGLEdBQUcsQ0FBQztBQUVyQyxNQUFNRyxlQUFlLEdBQUdqQyxTQUFTLENBQUM7RUFDaENrQyxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0VBQUU7RUFDMUJDLEdBQUcsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLElBQUlGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxnQkFBZ0IsR0FBRyxLQUFLLEdBQUcsRUFBRTtFQUFFO0VBQ25GQyxPQUFPLEVBQUU7SUFBRUMsS0FBSyxFQUFFO0VBQTRELENBQUM7RUFDL0VDLGVBQWUsRUFBRSxJQUFJO0VBQ3JCQyxhQUFhLEVBQUUsS0FBSztFQUNwQkMsSUFBSSxFQUFHQyxHQUFHLElBQUs7SUFDYixPQUFPQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSUQsR0FBRyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUNDLFFBQVEsQ0FBQyxTQUFTLENBQUM7RUFDM0U7QUFDRixDQUFDLENBQUM7QUFFRixNQUFNQyxjQUFjLEdBQUdoRCxTQUFTLENBQUM7RUFDL0JrQyxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0VBQUU7RUFDMUJDLEdBQUcsRUFBRSxHQUFHO0VBQUU7RUFDVkssT0FBTyxFQUFFO0lBQUVDLEtBQUssRUFBRTtFQUE2QyxDQUFDO0VBQ2hFQyxlQUFlLEVBQUUsSUFBSTtFQUNyQkMsYUFBYSxFQUFFO0FBQ2pCLENBQUMsQ0FBQztBQUVGLE1BQU1NLGtCQUFrQixHQUFHakQsU0FBUyxDQUFDO0VBQ25Da0MsUUFBUSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSTtFQUFFO0VBQzFCQyxHQUFHLEVBQUUsSUFBSTtFQUFFO0VBQ1hLLE9BQU8sRUFBRTtJQUFFQyxLQUFLLEVBQUU7RUFBMEQsQ0FBQztFQUM3RUMsZUFBZSxFQUFFLElBQUk7RUFDckJDLGFBQWEsRUFBRTtBQUNqQixDQUFDLENBQUM7QUFFRixNQUFNTyx3QkFBd0IsR0FBR2xELFNBQVMsQ0FBQztFQUN6Q2tDLFFBQVEsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7RUFBRTtFQUMxQkMsR0FBRyxFQUFFLENBQUM7RUFBRTtFQUNSSyxPQUFPLEVBQUU7SUFBRUMsS0FBSyxFQUFFO0VBQTRELENBQUM7RUFDL0VDLGVBQWUsRUFBRSxJQUFJO0VBQ3JCQyxhQUFhLEVBQUU7QUFDakIsQ0FBQyxDQUFDO0FBQ0YsTUFBTVEsRUFBRSxHQUFHMUQsUUFBUSxDQUFDc0MsTUFBTSxFQUFFO0VBQzFCcEMsSUFBSSxFQUFFO0lBQ0p5RCxNQUFNLEVBQUVoQixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLFlBQVksR0FDekNGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZ0IsZUFBZSxFQUFFQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxHQUNoRCxDQUFDLHVCQUF1QixFQUFFLHVCQUF1QixDQUFDO0lBQ3REQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDO0lBQ3hCQyxjQUFjLEVBQUUsQ0FBQyxlQUFlLEVBQUUsY0FBYyxDQUFDO0lBQ2pEQyxXQUFXLEVBQUU7RUFDZixDQUFDO0VBQ0Q7RUFDQWpDLFVBQVUsRUFBRSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUM7RUFDcEM7RUFDQWtDLGNBQWMsRUFBRSxLQUFLO0VBQUU7RUFDdkJDLFdBQVcsRUFBRSxJQUFJO0VBQUU7RUFDbkJDLFlBQVksRUFBRSxLQUFLO0VBQUU7RUFDckJDLGNBQWMsRUFBRSxLQUFLO0VBQ3JCQyxhQUFhLEVBQUUsSUFBSTtFQUNuQkMsY0FBYyxFQUFFLElBQUk7RUFDcEJDLGNBQWMsRUFBRTtBQUNsQixDQUFDLENBQUM7O0FBRUY7QUFDQWIsRUFBRSxDQUFDYyxNQUFNLENBQUNDLEVBQUUsQ0FBQyxrQkFBa0IsRUFBR0MsR0FBRyxJQUFLO0VBQ3hDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0MsRUFBRUYsR0FBRyxDQUFDRyxJQUFJLEVBQUVILEdBQUcsQ0FBQzNCLE9BQU8sQ0FBQztFQUN4RTNCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQywwQkFBMEIsRUFBRTtJQUN2QzZCLElBQUksRUFBRUgsR0FBRyxDQUFDRyxJQUFJO0lBQ2Q5QixPQUFPLEVBQUUyQixHQUFHLENBQUMzQixPQUFPO0lBQ3BCK0IsVUFBVSxFQUFFSixHQUFHLENBQUNLLE1BQU07SUFDdEJDLE9BQU8sRUFBRU4sR0FBRyxDQUFDdEIsR0FBRyxFQUFFNEI7RUFDcEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0EzQyxHQUFHLENBQUM0QyxHQUFHLENBQUMvRSxJQUFJLENBQUM7RUFDWHlELE1BQU0sRUFBRWhCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssWUFBWSxHQUN6Q0YsT0FBTyxDQUFDQyxHQUFHLENBQUNnQixlQUFlLEVBQUVDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLEdBQ2hELElBQUk7RUFDUkcsV0FBVyxFQUFFO0FBQ2YsQ0FBQyxDQUFDLENBQUM7QUFFSDNCLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQ25GLE9BQU8sQ0FBQzhCLElBQUksQ0FBQztFQUFFc0QsS0FBSyxFQUFFLE1BQU07RUFBRUMsTUFBTSxFQUFFO0FBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pEOUMsR0FBRyxDQUFDNEMsR0FBRyxDQUFDbkYsT0FBTyxDQUFDc0YsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRSxJQUFJO0VBQUVILEtBQUssRUFBRTtBQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFaEU7QUFDQSxNQUFNSSxpQkFBaUIsR0FBRzFFLE9BQU8sQ0FBQztFQUNoQzJFLE1BQU0sRUFBRTVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDNEMsY0FBYyxJQUFJLHVEQUF1RDtFQUM3RkMsTUFBTSxFQUFFLEtBQUs7RUFDYkMsaUJBQWlCLEVBQUUsS0FBSztFQUN4QkMsS0FBSyxFQUFFLENBQUMsTUFBTTtJQUNaLE1BQU1BLEtBQUssR0FBRzlFLFVBQVUsQ0FBQytFLE1BQU0sQ0FBQztNQUM5QkMsUUFBUSxFQUFFbEQsT0FBTyxDQUFDQyxHQUFHLENBQUNrRCxXQUFXLElBQUksa0NBQWtDO01BQ3ZFQyxjQUFjLEVBQUUsVUFBVTtNQUMxQkMsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtNQUFFO01BQ25CQyxVQUFVLEVBQUUsUUFBUTtNQUNwQkMsVUFBVSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDdkIsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLElBQUk7TUFDbkQsTUFBTUMsY0FBYyxHQUFHVixLQUFLLENBQUNTLE1BQU0sQ0FBQztNQUNwQyxJQUFJLE9BQU9DLGNBQWMsS0FBSyxVQUFVLEVBQUU7UUFDeENWLEtBQUssQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsZ0JBQWVFLEdBQUcsRUFBRSxHQUFHQyxJQUFJLEVBQUU7VUFDM0MsSUFBSTtZQUNGNUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0JBQW9Cd0IsTUFBTSxDQUFDSSxXQUFXLENBQUMsQ0FBQyxlQUFlRixHQUFHLG1CQUFtQixDQUFDO1lBQzFGLE1BQU1HLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztZQUM1QixNQUFNQyxNQUFNLEdBQUcsTUFBTVAsY0FBYyxDQUFDUSxJQUFJLENBQUMsSUFBSSxFQUFFUCxHQUFHLEVBQUUsR0FBR0MsSUFBSSxDQUFDO1lBQzVELE1BQU1PLFFBQVEsR0FBR0osSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRixTQUFTO1lBQ3ZDOUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsbUJBQW1Cd0IsTUFBTSxDQUFDSSxXQUFXLENBQUMsQ0FBQyxlQUFlRixHQUFHLGlDQUFpQ1EsUUFBUSxjQUFjLENBQUMsQ0FBQ0YsTUFBTSxFQUFFLENBQUM7O1lBRXZJO1lBQ0EsSUFBSVIsTUFBTSxLQUFLLEtBQUssSUFBSUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO2NBQy9CNUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCMEIsR0FBRyxtQkFBbUJDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ1EsYUFBYSxZQUFZUixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNTLE1BQU0sRUFBRSxDQUFDO1lBQ2pIO1lBRUEsT0FBT0osTUFBTTtVQUNmLENBQUMsQ0FBQyxPQUFPNUQsS0FBSyxFQUFFO1lBQ2QyQixPQUFPLENBQUMzQixLQUFLLENBQUMsbUJBQW1Cb0QsTUFBTSxDQUFDSSxXQUFXLENBQUMsQ0FBQyxlQUFlRixHQUFHLDZCQUE2QnRELEtBQUssQ0FBQ0QsT0FBTyxFQUFFLENBQUM7WUFDcEgsTUFBTUMsS0FBSztVQUNiO1FBQ0YsQ0FBQztNQUNIO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsT0FBTzJDLEtBQUs7RUFDZCxDQUFDLEVBQUUsQ0FBQztFQUNKc0IsTUFBTSxFQUFFO0lBQ05DLE1BQU0sRUFBRXZFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssWUFBWTtJQUFFO0lBQy9Dc0UsUUFBUSxFQUFFLElBQUk7SUFBRTtJQUNoQkMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7SUFBRTtJQUM3QkMsUUFBUSxFQUFFLEtBQUssQ0FBQztFQUNsQixDQUFDO0VBQ0RDLElBQUksRUFBRSxhQUFhO0VBQUU7RUFDckJDLE9BQU8sRUFBRSxLQUFLO0VBQUU7RUFDaEJDLEtBQUssRUFBRSxTQUFTLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBRUZuRixHQUFHLENBQUM0QyxHQUFHLENBQUNLLGlCQUFpQixDQUFDOztBQUUxQjtBQUNBLE1BQU1tQyxZQUFZLEdBQUdBLENBQUMvQyxHQUFHLEVBQUV0QixHQUFHLEVBQUVzRSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM1Q3ZHLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxrQkFBa0IsRUFBRTtJQUMvQkQsT0FBTyxFQUFFMkIsR0FBRyxDQUFDM0IsT0FBTztJQUNwQnBCLEtBQUssRUFBRStDLEdBQUcsQ0FBQy9DLEtBQUs7SUFDaEJpRyxHQUFHLEVBQUV4RSxHQUFHLENBQUN3RSxHQUFHO0lBQ1p4QixNQUFNLEVBQUVoRCxHQUFHLENBQUNnRCxNQUFNO0lBQ2xCeUIsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUUsRUFBRTtJQUNWQyxTQUFTLEVBQUUxRSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZO0VBQ2pDLENBQUMsQ0FBQzs7RUFFRjtFQUNBLElBQUlxQixHQUFHLENBQUM0QyxJQUFJLEtBQUssaUJBQWlCLEVBQUU7SUFDbEMsTUFBTTVGLE1BQU0sR0FBR3FHLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDdEQsR0FBRyxDQUFDaEQsTUFBTSxDQUFDLENBQUN1RyxHQUFHLENBQUNDLENBQUMsS0FBSztNQUNqREMsS0FBSyxFQUFFRCxDQUFDLENBQUNFLElBQUk7TUFDYnJGLE9BQU8sRUFBRW1GLENBQUMsQ0FBQ25GLE9BQU87TUFDbEJzRixLQUFLLEVBQUVILENBQUMsQ0FBQ0c7SUFDWCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU9YLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUMxQm9CLEtBQUssRUFBRSxtQkFBbUI7TUFDMUJzRixPQUFPLEVBQUU1RyxNQUFNO01BQ2ZtRCxJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBLElBQUlILEdBQUcsQ0FBQ0csSUFBSSxLQUFLLEtBQUssRUFBRTtJQUN0QixNQUFNc0QsS0FBSyxHQUFHSixNQUFNLENBQUNRLElBQUksQ0FBQzdELEdBQUcsQ0FBQzhELFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxNQUFNSCxLQUFLLEdBQUczRCxHQUFHLENBQUM4RCxRQUFRLENBQUNMLEtBQUssQ0FBQztJQUNqQyxPQUFPVCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDMUJvQixLQUFLLEVBQUUsR0FBR21GLEtBQUssS0FBS0UsS0FBSyxrQkFBa0I7TUFDM0N4RCxJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBLElBQUlILEdBQUcsQ0FBQzRDLElBQUksS0FBSyxtQkFBbUIsRUFBRTtJQUNwQyxPQUFPSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDMUJvQixLQUFLLEVBQUUsMEJBQTBCO01BQ2pDNkIsSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0VBQ0o7RUFFQSxJQUFJSCxHQUFHLENBQUM0QyxJQUFJLEtBQUssbUJBQW1CLEVBQUU7SUFDcEMsT0FBT0ksR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQzFCb0IsS0FBSyxFQUFFLG1CQUFtQjtNQUMxQjZCLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKOztFQUVBO0VBQ0E2QyxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7SUFDbkJvQixLQUFLLEVBQUUsdUJBQXVCO0lBQzlCNkIsSUFBSSxFQUFFLGdCQUFnQjtJQUN0QjRELFNBQVMsRUFBRXJGLEdBQUcsQ0FBQ3NGLEVBQUUsSUFBSTtFQUN2QixDQUFDLENBQUM7QUFDSixDQUFDOztBQUVEO0FBQ0FyRyxHQUFHLENBQUM0QyxHQUFHLENBQUMsQ0FBQzdCLEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzFCLE1BQU1nQixLQUFLLEdBQUdqQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBRXhCZSxHQUFHLENBQUNqRCxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU07SUFDckIsTUFBTXFDLFFBQVEsR0FBR0osSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHZ0MsS0FBSztJQUNuQ3ZILE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxHQUFHeEYsR0FBRyxDQUFDZ0QsTUFBTSxJQUFJaEQsR0FBRyxDQUFDd0UsR0FBRyxNQUFNRixHQUFHLENBQUNtQixVQUFVLEtBQUsvQixRQUFRLEtBQUssRUFBRTtNQUMxRWUsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUUsRUFBRTtNQUNWQyxTQUFTLEVBQUUxRSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLENBQUM7TUFDaEN5RixJQUFJLEVBQUUxRixHQUFHLENBQUMwRixJQUFJLEVBQUVDLFFBQVEsSUFBSSxXQUFXO01BQ3ZDdkksSUFBSSxFQUFFNEMsR0FBRyxDQUFDZ0QsTUFBTSxLQUFLLEtBQUssR0FBRzRDLElBQUksQ0FBQ0MsU0FBUyxDQUFDN0YsR0FBRyxDQUFDNUMsSUFBSSxDQUFDLEdBQUcwSTtJQUMxRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnZCLElBQUksQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTXdCLG1CQUFtQixHQUFHLE1BQUFBLENBQU8vRixHQUFHLEVBQUVzRSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNwRCxJQUFJO0lBQ0ZoRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4Q0FBOEMsRUFBRTtNQUMxRGdELEdBQUcsRUFBRXhFLEdBQUcsQ0FBQ3dFLEdBQUc7TUFDWnhCLE1BQU0sRUFBRWhELEdBQUcsQ0FBQ2dELE1BQU07TUFDbEJnRCxTQUFTLEVBQUVoRyxHQUFHLENBQUNpRyxTQUFTO01BQ3hCQyxhQUFhLEVBQUUsQ0FBQyxDQUFDbEcsR0FBRyxDQUFDeEMsT0FBTztNQUM1QjJJLFdBQVcsRUFBRW5HLEdBQUcsQ0FBQ3hDLE9BQU8sR0FBRztRQUN6Qm1HLGFBQWEsRUFBRTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7UUFDeENDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07UUFDMUIrQixRQUFRLEVBQUUzRixHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRO1FBQzlCUyxJQUFJLEVBQUVwRyxHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJO1FBQ3RCQyxTQUFTLEVBQUVyRyxHQUFHLENBQUN4QyxPQUFPLENBQUM2SSxTQUFTO1FBQ2hDQyxTQUFTLEVBQUV0RyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUc7TUFDdEQsQ0FBQyxHQUFHO0lBQ04sQ0FBQyxDQUFDOztJQUVGO0lBQ0EsSUFBSXZHLEdBQUcsQ0FBQ3hDLE9BQU8sSUFBSXdDLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWEsSUFBSTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU0sRUFBRTtNQUNsRXJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRDQUE0QyxFQUFFeEIsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTSxDQUFDO01BQzdFckMsT0FBTyxDQUFDQyxHQUFHLENBQUMsK0JBQStCLEVBQUU7UUFDM0MwQixHQUFHLEVBQUVsRCxHQUFHLENBQUNpRyxTQUFTO1FBQ2xCSyxTQUFTLEVBQUV0RyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztRQUN6RDdCLFNBQVMsRUFBRTFFLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsRUFBRTZCLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsS0FBSztRQUMxREYsU0FBUyxFQUFFckcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNkk7TUFDekIsQ0FBQyxDQUFDO01BRUYsTUFBTVgsSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUN4RyxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNLENBQUM7TUFDcEQsSUFBSThCLElBQUksRUFBRTtRQUNSbkUsT0FBTyxDQUFDQyxHQUFHLENBQUMsNkJBQTZCLEVBQUU7VUFDekNtRSxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtVQUN2QkwsRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7VUFDWjlFLE1BQU0sRUFBRStELElBQUksQ0FBQy9ELE1BQU07VUFDbkIrRSxZQUFZLEVBQUU7UUFDaEIsQ0FBQyxDQUFDO1FBQ0YxRyxHQUFHLENBQUMyRyxXQUFXLEdBQUdqQixJQUFJLENBQUMsQ0FBQzs7UUFFeEI7UUFDQSxJQUFJMUYsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUyxJQUFJdEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxFQUFFO1VBQ2xEMUUsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0osZ0JBQWdCLEdBQUcsSUFBSXRELElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUMsQ0FBQztVQUN2RHRGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZDQUE2QyxDQUFDO1FBQzVEO01BQ0YsQ0FBQyxNQUFNO1FBQ0xELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9EQUFvRCxFQUFFeEIsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTSxDQUFDO1FBQ3JGO1FBQ0EsT0FBTzVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7UUFDaEMsT0FBTzNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07UUFDekIsT0FBTzVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21JLFFBQVE7UUFDM0IsT0FBTzNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUk7TUFDekI7SUFDRixDQUFDLE1BQU07TUFDTDdFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhEQUE4RCxFQUFFO1FBQzFFd0UsU0FBUyxFQUFFaEcsR0FBRyxDQUFDaUcsU0FBUztRQUN4QnpJLE9BQU8sRUFBRSxDQUFDLENBQUN3QyxHQUFHLENBQUN4QyxPQUFPO1FBQ3RCbUcsYUFBYSxFQUFFM0QsR0FBRyxDQUFDeEMsT0FBTyxFQUFFbUcsYUFBYTtRQUN6Q0MsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxFQUFFb0c7TUFDdkIsQ0FBQyxDQUFDO01BQ0Y1RCxHQUFHLENBQUMyRyxXQUFXLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDMUI7SUFDQXBDLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDLE9BQU8zRSxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzhJLElBQUksQ0FBQywrQkFBK0IsRUFBRTtNQUMzQ2xILEtBQUssRUFBRUEsS0FBSyxDQUFDRCxPQUFPO01BQ3BCcUcsU0FBUyxFQUFFaEcsR0FBRyxDQUFDaUcsU0FBUztNQUN4QnhCLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFO0lBQ1YsQ0FBQyxDQUFDO0lBQ0Z6RSxHQUFHLENBQUMyRyxXQUFXLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDeEJwQyxJQUFJLENBQUMsQ0FBQztFQUNSO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBLE1BQU13QyxpQkFBaUIsR0FBRyxNQUFBQSxDQUFPL0csR0FBRyxFQUFFc0UsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDbEQsSUFBSTtJQUNGaEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsMENBQTBDLEVBQUU7TUFBRWdELEdBQUcsRUFBRXhFLEdBQUcsQ0FBQ3dFLEdBQUc7TUFBRXhCLE1BQU0sRUFBRWhELEdBQUcsQ0FBQ2dEO0lBQU8sQ0FBQyxDQUFDO0lBQzdGLE1BQU1nRSxVQUFVLEdBQUdoSCxHQUFHLENBQUM0QixPQUFPLENBQUMsZUFBZSxDQUFDO0lBQy9DLE1BQU1xRixLQUFLLEdBQUdELFVBQVUsSUFBSUEsVUFBVSxDQUFDdkcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRXREYyxPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRTtNQUFFMEYsYUFBYSxFQUFFLENBQUMsQ0FBQ0YsVUFBVTtNQUFFRyxRQUFRLEVBQUUsQ0FBQyxDQUFDRjtJQUFNLENBQUMsQ0FBQztJQUU5RixJQUFJLENBQUNBLEtBQUssRUFBRTtNQUNWMUYsT0FBTyxDQUFDQyxHQUFHLENBQUMscUJBQXFCLENBQUM7TUFDbEMsT0FBTzhDLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSx1QkFBdUI7UUFDOUI2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBLE1BQU0yRixPQUFPLEdBQUd2SyxHQUFHLENBQUN3SyxNQUFNLENBQUNKLEtBQUssRUFBRTFILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDOEgsVUFBVSxDQUFDO0lBQ3pEL0YsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7TUFBRW9DLE1BQU0sRUFBRXdELE9BQU8sQ0FBQ3hELE1BQU07TUFBRStCLFFBQVEsRUFBRXlCLE9BQU8sQ0FBQ3pCO0lBQVMsQ0FBQyxDQUFDO0lBQ3JGLE1BQU1ELElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDWSxPQUFPLENBQUN4RCxNQUFNLENBQUM7SUFFaEQsSUFBSSxDQUFDOEIsSUFBSSxFQUFFO01BQ1RuRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3Q0FBd0MsRUFBRTRGLE9BQU8sQ0FBQ3hELE1BQU0sQ0FBQztNQUNyRSxPQUFPVSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFDMUJvQixLQUFLLEVBQUUsZ0JBQWdCO1FBQ3ZCNkIsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7SUFFQXpCLEdBQUcsQ0FBQzBGLElBQUksR0FBR0EsSUFBSTtJQUNmbkUsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkNBQTJDLEVBQUVrRSxJQUFJLENBQUNDLFFBQVEsRUFBRTtNQUFFTCxFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztNQUFFOUUsTUFBTSxFQUFFK0QsSUFBSSxDQUFDL0Q7SUFBTyxDQUFDLENBQUM7SUFDOUc0QyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQyxPQUFPM0UsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM4SSxJQUFJLENBQUMsNEJBQTRCLEVBQUU7TUFDeENsSCxLQUFLLEVBQUVBLEtBQUssQ0FBQ0QsT0FBTztNQUNwQjhFLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFO0lBQ1YsQ0FBQyxDQUFDO0lBRUYsSUFBSTdFLEtBQUssQ0FBQ3NFLElBQUksS0FBSyxtQkFBbUIsRUFBRTtNQUN0QyxPQUFPSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFDMUJvQixLQUFLLEVBQUUsc0JBQXNCO1FBQzdCNkIsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7SUFFQSxJQUFJN0IsS0FBSyxDQUFDc0UsSUFBSSxLQUFLLG1CQUFtQixFQUFFO01BQ3RDLE9BQU9JLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSxtQkFBbUI7UUFDMUI2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBLE9BQU82QyxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDMUJvQixLQUFLLEVBQUUsMkJBQTJCO01BQ2xDNkIsSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDOztBQUVEO0FBQ0EsTUFBTThGLGdCQUFnQixHQUFHLE1BQUFBLENBQU92SCxHQUFHLEVBQUVzRSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNqRCxJQUFJO0lBQ0YsSUFBSSxDQUFDdkUsR0FBRyxDQUFDMEYsSUFBSSxFQUFFO01BQ2IsT0FBT3BCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSx5QkFBeUI7UUFDaEM2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUksQ0FBQ3pCLEdBQUcsQ0FBQzBGLElBQUksQ0FBQzhCLHNCQUFzQixDQUFDLENBQUMsRUFBRTtNQUN0QyxPQUFPbEQsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLCtCQUErQjtRQUN0QzZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUE4QyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQyxPQUFPM0UsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsd0JBQXdCLEVBQUVBLEtBQUssQ0FBQztJQUM3QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQm9CLEtBQUssRUFBRSx5Q0FBeUM7TUFDaEQ2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7QUFFRCxNQUFNZ0csWUFBWSxHQUFHLE1BQUFBLENBQU96SCxHQUFHLEVBQUVzRSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM3QyxJQUFJO0lBQ0YsSUFBSSxDQUFDdkUsR0FBRyxDQUFDMEYsSUFBSSxFQUFFO01BQ2IsT0FBT3BCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSx5QkFBeUI7UUFDaEM2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUksQ0FBQ3pCLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2dDLGtCQUFrQixDQUFDLENBQUMsRUFBRTtNQUNsQyxPQUFPcEQsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLG1DQUFtQztRQUMxQzZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUE4QyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQyxPQUFPM0UsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsb0JBQW9CLEVBQUVBLEtBQUssQ0FBQztJQUN6QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQm9CLEtBQUssRUFBRSx5Q0FBeUM7TUFDaEQ2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQXhDLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQ2tFLG1CQUFtQixDQUFDOztBQUU1QjtBQUNBOUcsR0FBRyxDQUFDNEMsR0FBRyxDQUFDekIsa0JBQWtCLENBQUM7O0FBRTNCO0FBQ0FuQixHQUFHLENBQUM0QyxHQUFHLENBQ0wzRSxNQUFNLENBQUM7RUFDTHlLLHFCQUFxQixFQUFFO0lBQ3JCQyxVQUFVLEVBQUU7TUFDVkMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDO01BQ3RCQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsOEJBQThCLENBQUM7TUFDdkVDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSwyQkFBMkIsQ0FBQztNQUNoREMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztNQUMzQkMsU0FBUyxFQUFFLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDO01BQ3hDQyxVQUFVLEVBQUUsQ0FBQyxRQUFRO0lBQ3ZCO0VBQ0YsQ0FBQztFQUNEQyx5QkFBeUIsRUFBRTtBQUM3QixDQUFDLENBQ0gsQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLGNBQWMsR0FBRztFQUNyQkMsVUFBVSxFQUFFO0lBQ1ZDLE9BQU8sRUFBRSxPQUFPO0lBQ2hCOUMsSUFBSSxFQUFFO01BQ0orQyxLQUFLLEVBQUUsYUFBYTtNQUNwQkMsT0FBTyxFQUFFLE9BQU87TUFDaEJDLFdBQVcsRUFBRSw4RUFBOEU7TUFDM0ZDLE9BQU8sRUFBRTtRQUNQeEUsSUFBSSxFQUFFO01BQ1I7SUFDRixDQUFDO0lBQ0R5RSxPQUFPLEVBQUUsQ0FDUDtNQUNFbkUsR0FBRyxFQUFFLHVCQUF1QjtNQUM1QmlFLFdBQVcsRUFBRTtJQUNmLENBQUMsQ0FDRjtJQUNERyxVQUFVLEVBQUU7TUFDVkMsT0FBTyxFQUFFO1FBQ1BoTCxJQUFJLEVBQUU7VUFDSmlMLElBQUksRUFBRSxRQUFRO1VBQ2RDLFVBQVUsRUFBRTtZQUNWekQsRUFBRSxFQUFFO2NBQ0Z3RCxJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0Q5QyxRQUFRLEVBQUU7Y0FDUm1ELElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRSxlQUFlO2NBQzVCTyxTQUFTLEVBQUUsQ0FBQztjQUNaQyxTQUFTLEVBQUU7WUFDYixDQUFDO1lBQ0RDLEtBQUssRUFBRTtjQUNMSixJQUFJLEVBQUUsUUFBUTtjQUNkM0ssTUFBTSxFQUFFLE9BQU87Y0FDZnNLLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRHJDLElBQUksRUFBRTtjQUNKMEMsSUFBSSxFQUFFLFFBQVE7Y0FDZEssSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztjQUN6QkMsT0FBTyxFQUFFLFFBQVE7Y0FDakJYLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRFksU0FBUyxFQUFFO2NBQ1RQLElBQUksRUFBRSxRQUFRO2NBQ2QzSyxNQUFNLEVBQUUsV0FBVztjQUNuQnNLLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRGEsVUFBVSxFQUFFO2NBQ1ZSLElBQUksRUFBRSxRQUFRO2NBQ2QzSyxNQUFNLEVBQUUsV0FBVztjQUNuQnNLLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRDlHLE1BQU0sRUFBRTtjQUNObUgsSUFBSSxFQUFFLFFBQVE7Y0FDZEssSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQztjQUMzQlYsV0FBVyxFQUFFO1lBQ2Y7VUFDRixDQUFDO1VBQ0RjLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU07UUFDcEQsQ0FBQztRQUNEeEwsT0FBTyxFQUFFO1VBQ1ArSyxJQUFJLEVBQUUsUUFBUTtVQUNkQyxVQUFVLEVBQUU7WUFDVnpELEVBQUUsRUFBRTtjQUNGd0QsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEdkUsSUFBSSxFQUFFO2NBQ0o0RSxJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUUsc0JBQXNCO2NBQ25DTyxTQUFTLEVBQUUsQ0FBQztjQUNaQyxTQUFTLEVBQUU7WUFDYixDQUFDO1lBQ0RILElBQUksRUFBRTtjQUNKQSxJQUFJLEVBQUUsUUFBUTtjQUNkSyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO2NBQ3ZCVixXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RBLFdBQVcsRUFBRTtjQUNYSyxJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUUscUJBQXFCO2NBQ2xDUSxTQUFTLEVBQUU7WUFDYixDQUFDO1lBQ0RPLFNBQVMsRUFBRTtjQUNUVixJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RnQixRQUFRLEVBQUU7Y0FDUlgsSUFBSSxFQUFFLFFBQVE7Y0FDZE0sT0FBTyxFQUFFLENBQUM7Y0FDVlgsV0FBVyxFQUFFO1lBQ2Y7VUFDRixDQUFDO1VBQ0RjLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVc7UUFDOUMsQ0FBQztRQUNERyxlQUFlLEVBQUU7VUFDZlosSUFBSSxFQUFFLFFBQVE7VUFDZFMsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUM7VUFDM0NSLFVBQVUsRUFBRTtZQUNWcEQsUUFBUSxFQUFFO2NBQ1JtRCxJQUFJLEVBQUUsUUFBUTtjQUNkRSxTQUFTLEVBQUUsQ0FBQztjQUNaQyxTQUFTLEVBQUUsRUFBRTtjQUNiUixXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RTLEtBQUssRUFBRTtjQUNMSixJQUFJLEVBQUUsUUFBUTtjQUNkM0ssTUFBTSxFQUFFLE9BQU87Y0FDZnNLLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRGtCLFFBQVEsRUFBRTtjQUNSYixJQUFJLEVBQUUsUUFBUTtjQUNkRSxTQUFTLEVBQUUsQ0FBQztjQUNaUCxXQUFXLEVBQUU7WUFDZjtVQUNGO1FBQ0YsQ0FBQztRQUNEbUIsWUFBWSxFQUFFO1VBQ1pkLElBQUksRUFBRSxRQUFRO1VBQ2RTLFFBQVEsRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUM7VUFDcENSLFVBQVUsRUFBRTtZQUNWYyxVQUFVLEVBQUU7Y0FDVmYsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEa0IsUUFBUSxFQUFFO2NBQ1JiLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmO1VBQ0Y7UUFDRixDQUFDO1FBQ0RxQixZQUFZLEVBQUU7VUFDWmhCLElBQUksRUFBRSxRQUFRO1VBQ2RDLFVBQVUsRUFBRTtZQUNWOUIsS0FBSyxFQUFFO2NBQ0w2QixJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0QvQyxJQUFJLEVBQUU7Y0FDSnFFLElBQUksRUFBRTtZQUNSO1VBQ0Y7UUFDRixDQUFDO1FBQ0RDLGNBQWMsRUFBRTtVQUNkbEIsSUFBSSxFQUFFLFFBQVE7VUFDZFMsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztVQUMxQlIsVUFBVSxFQUFFO1lBQ1Y3RSxJQUFJLEVBQUU7Y0FDSjRFLElBQUksRUFBRSxRQUFRO2NBQ2RFLFNBQVMsRUFBRSxDQUFDO2NBQ1pDLFNBQVMsRUFBRSxHQUFHO2NBQ2RSLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDREssSUFBSSxFQUFFO2NBQ0pBLElBQUksRUFBRSxRQUFRO2NBQ2RLLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7Y0FDdkJWLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDREEsV0FBVyxFQUFFO2NBQ1hLLElBQUksRUFBRSxRQUFRO2NBQ2RHLFNBQVMsRUFBRSxHQUFHO2NBQ2RSLFdBQVcsRUFBRTtZQUNmO1VBQ0Y7UUFDRixDQUFDO1FBQ0R3QixhQUFhLEVBQUU7VUFDYm5CLElBQUksRUFBRSxRQUFRO1VBQ2RDLFVBQVUsRUFBRTtZQUNWbkosS0FBSyxFQUFFO2NBQ0xrSixJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RuSyxNQUFNLEVBQUU7Y0FDTndLLElBQUksRUFBRSxPQUFPO2NBQ2JvQixLQUFLLEVBQUU7Z0JBQ0xwQixJQUFJLEVBQUUsUUFBUTtnQkFDZEMsVUFBVSxFQUFFO2tCQUNWb0IsR0FBRyxFQUFFO29CQUFFckIsSUFBSSxFQUFFO2tCQUFTLENBQUM7a0JBQ3ZCc0IsS0FBSyxFQUFFO29CQUFFdEIsSUFBSSxFQUFFO2tCQUFTLENBQUM7a0JBQ3pCdUIsUUFBUSxFQUFFO29CQUFFdkIsSUFBSSxFQUFFO2tCQUFTO2dCQUM3QjtjQUNGLENBQUM7Y0FDREwsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGO01BQ0YsQ0FBQztNQUNENkIsZUFBZSxFQUFFO1FBQ2ZDLFVBQVUsRUFBRTtVQUNWekIsSUFBSSxFQUFFLE1BQU07VUFDWjBCLE1BQU0sRUFBRSxRQUFRO1VBQ2hCQyxZQUFZLEVBQUU7UUFDaEI7TUFDRjtJQUNGLENBQUM7SUFDREMsUUFBUSxFQUFFLENBQ1I7TUFDRUgsVUFBVSxFQUFFO0lBQ2QsQ0FBQztFQUVMLENBQUM7RUFDREksSUFBSSxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDeEIsQ0FBQztBQUVELE1BQU1DLFdBQVcsR0FBRzVOLFlBQVksQ0FBQ29MLGNBQWMsQ0FBQzs7QUFFaEQ7QUFDQW5KLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQzdCLEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3ZDO0VBQ0FELEdBQUcsQ0FBQ3VHLFlBQVksQ0FBQyx5QkFBeUIsQ0FBQztFQUMzQ3RHLElBQUksQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxFQUFFdEgsU0FBUyxDQUFDNk4sS0FBSyxFQUFFN04sU0FBUyxDQUFDOE4sS0FBSyxDQUFDSCxXQUFXLENBQUMsQ0FBQzs7QUFFakQ7QUFDQXJKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVEQUF1RCxDQUFDOztBQUVwRTtBQUNBdkMsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLGtCQUFrQixFQUFFOEcsaUJBQWlCLEVBQUVRLGdCQUFnQixFQUFFcEgsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNuRyxJQUFJO0lBQ0YsTUFBTTBHLElBQUksR0FBR0MsUUFBUSxDQUFDakwsR0FBRyxDQUFDa0wsS0FBSyxDQUFDRixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDLE1BQU1sSixLQUFLLEdBQUdtSixRQUFRLENBQUNqTCxHQUFHLENBQUNrTCxLQUFLLENBQUNwSixLQUFLLENBQUMsSUFBSSxFQUFFO0lBQzdDLE1BQU0vQixJQUFJLEdBQUcsQ0FBQ2lMLElBQUksR0FBRyxDQUFDLElBQUlsSixLQUFLO0lBRS9CLE1BQU1xSixLQUFLLEdBQUcsTUFBTXROLElBQUksQ0FBQ3VOLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUM5QkMsTUFBTSxDQUFDLDhGQUE4RixDQUFDLENBQ3RHQyxJQUFJLENBQUM7TUFBRWpDLFNBQVMsRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ3ZCdEosSUFBSSxDQUFDQSxJQUFJLENBQUMsQ0FDVitCLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBRWYsTUFBTXlKLEtBQUssR0FBRyxNQUFNMU4sSUFBSSxDQUFDMk4sY0FBYyxDQUFDLENBQUM7SUFFekN4TixNQUFNLENBQUN3SCxJQUFJLENBQUMsZ0NBQWdDeEYsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUMvRDhGLE9BQU8sRUFBRXpMLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUNyQnVFLElBQUk7TUFDSmxKLEtBQUs7TUFDTHlKO0lBQ0YsQ0FBQyxDQUFDO0lBRUZqSCxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUDJNLEtBQUs7TUFDTE8sVUFBVSxFQUFFO1FBQ1ZWLElBQUk7UUFDSmxKLEtBQUs7UUFDTHlKLEtBQUs7UUFDTEksS0FBSyxFQUFFQyxJQUFJLENBQUNDLElBQUksQ0FBQ04sS0FBSyxHQUFHekosS0FBSztNQUNoQztJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPbEMsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsaUNBQWlDLEVBQUVBLEtBQUssQ0FBQztJQUN0RDBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFLHVCQUF1QjtNQUFFNkIsSUFBSSxFQUFFO0lBQWlCLENBQUMsQ0FBQztFQUNsRjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBeEMsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLDhCQUE4QixFQUFFL0UsaUJBQWlCLEVBQUVRLGdCQUFnQixFQUFFcEgsY0FBYyxFQUFFLENBQzVGL0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDMk8sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUUxTSxHQUFHLEVBQUU7QUFBSSxDQUFDLENBQUMsQ0FBQzJNLElBQUksQ0FBQyxDQUFDLEVBQ3BEN08sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOE8sUUFBUSxDQUFDLENBQUMsQ0FBQ0MsS0FBSyxDQUFDO0VBQUVILEdBQUcsRUFBRSxDQUFDO0VBQUUxTSxHQUFHLEVBQUU7QUFBUyxDQUFDLENBQUMsQ0FBQztBQUFBLENBQzlELEVBQUUsT0FBT1UsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNaEcsTUFBTSxHQUFHakIsZ0JBQWdCLENBQUMyQyxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUIsTUFBTSxDQUFDOE4sT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQixPQUFPOUgsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDK04sS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFekk7SUFBTyxDQUFDLEdBQUc1RCxHQUFHLENBQUNzTSxNQUFNO0lBQzdCLE1BQU07TUFBRUMsTUFBTTtNQUFFN0k7SUFBUyxDQUFDLEdBQUcxRCxHQUFHLENBQUM1QyxJQUFJO0lBRXJDLE1BQU1zSSxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQzVDLE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVCxPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEOztJQUVBO0lBQ0EsSUFBSThGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsS0FBS3hNLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsRUFBRTtNQUNuRCxPQUFPbEksR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBc0IsQ0FBQyxDQUFDO0lBQy9EOztJQUVBO0lBQ0EsSUFBSThGLElBQUksQ0FBQ1UsSUFBSSxLQUFLLE9BQU8sSUFBSXBHLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ1UsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUN0RCxPQUFPOUIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBMkIsQ0FBQyxDQUFDO0lBQ3BFO0lBRUEsTUFBTThGLElBQUksQ0FBQytHLEdBQUcsQ0FBQ0YsTUFBTSxFQUFFN0ksUUFBUSxFQUFFMUQsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLENBQUM7SUFFOUN6SSxNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUUUsSUFBSSxDQUFDQyxRQUFRLGNBQWMzRixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQ2xFK0csWUFBWSxFQUFFOUksTUFBTTtNQUNwQitJLFVBQVUsRUFBRTNNLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUN4QjhGLE1BQU07TUFDTjdJO0lBQ0YsQ0FBQyxDQUFDO0lBRUZZLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQbUIsT0FBTyxFQUFFLFFBQVErRixJQUFJLENBQUNDLFFBQVEsa0JBQWtCO01BQ2hERCxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJpSCxNQUFNLEVBQUUsSUFBSTtRQUNaQyxTQUFTLEVBQUVOLE1BQU07UUFDakJPLFVBQVUsRUFBRXBILElBQUksQ0FBQ29IO01BQ25CO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9sTixLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxxQkFBcUIsRUFBRUEsS0FBSyxDQUFDO0lBQzFDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBcUIsQ0FBQyxDQUFDO0VBQ3ZEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRS9FLGlCQUFpQixFQUFFUSxnQkFBZ0IsRUFBRXBILGNBQWMsRUFBRSxPQUFPSCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDbEgsSUFBSTtJQUNGLE1BQU07TUFBRVY7SUFBTyxDQUFDLEdBQUc1RCxHQUFHLENBQUNzTSxNQUFNO0lBQzdCLE1BQU01RyxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQzVDLE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVCxPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsSUFBSSxDQUFDOEYsSUFBSSxDQUFDa0gsTUFBTSxFQUFFO01BQ2hCLE9BQU90SSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFxQixDQUFDLENBQUM7SUFDOUQ7SUFFQSxNQUFNOEYsSUFBSSxDQUFDcUgsS0FBSyxDQUFDLENBQUM7SUFFbEIvTyxNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUUUsSUFBSSxDQUFDQyxRQUFRLGdCQUFnQjNGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDcEVxSCxjQUFjLEVBQUVwSixNQUFNO01BQ3RCcUosWUFBWSxFQUFFak4sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZTtJQUN6QixDQUFDLENBQUM7SUFFRm5DLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQbUIsT0FBTyxFQUFFLFFBQVErRixJQUFJLENBQUNDLFFBQVEsb0JBQW9CO01BQ2xERCxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJpSCxNQUFNLEVBQUU7TUFDVjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPaE4sS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM1QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFO0lBQXVCLENBQUMsQ0FBQztFQUN6RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBWCxHQUFHLENBQUM2TSxJQUFJLENBQUMsK0JBQStCLEVBQUUvRSxpQkFBaUIsRUFBRVEsZ0JBQWdCLEVBQUVwSCxjQUFjLEVBQUUsQ0FDN0YvQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMyTyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDMk0sSUFBSSxDQUFDLENBQUMsRUFDcEQ3TyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM4TyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUM7RUFBRUgsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFTLENBQUMsQ0FBQyxDQUM3RCxFQUFFLE9BQU9VLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTWhHLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBTzlILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRXpJO0lBQU8sQ0FBQyxHQUFHNUQsR0FBRyxDQUFDc00sTUFBTTtJQUM3QixNQUFNO01BQUVDLE1BQU07TUFBRTdJO0lBQVMsQ0FBQyxHQUFHMUQsR0FBRyxDQUFDNUMsSUFBSTtJQUVyQyxNQUFNc0ksSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUM1QyxNQUFNLENBQUM7SUFDeEMsSUFBSSxDQUFDOEIsSUFBSSxFQUFFO01BQ1QsT0FBT3BCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQWlCLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU04RixJQUFJLENBQUNvQixJQUFJLENBQUN5RixNQUFNLEVBQUV2TSxHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUcsRUFBRS9DLFFBQVEsQ0FBQztJQUMvQyxNQUFNZ0MsSUFBSSxDQUFDd0gsSUFBSSxDQUFDLENBQUM7SUFFakJsUCxNQUFNLENBQUN3SCxJQUFJLENBQUMsMEJBQTBCRSxJQUFJLENBQUNDLFFBQVEsT0FBTzNGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDN0V3SCxZQUFZLEVBQUV2SixNQUFNO01BQ3BCd0osVUFBVSxFQUFFcE4sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHO01BQ3hCOEYsTUFBTTtNQUNON0k7SUFDRixDQUFDLENBQUM7SUFFRlksR0FBRyxDQUFDOUYsSUFBSSxDQUFDO01BQ1BtQixPQUFPLEVBQUUsMEJBQTBCK0YsSUFBSSxDQUFDQyxRQUFRLEVBQUU7TUFDbEQwSCxPQUFPLEVBQUU7UUFDUGQsTUFBTTtRQUNOZSxRQUFRLEVBQUV0TixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVE7UUFDM0I0SCxRQUFRLEVBQUUsSUFBSWpLLElBQUksQ0FBQyxDQUFDO1FBQ3BCa0ssT0FBTyxFQUFFOUosUUFBUSxHQUFHLElBQUlKLElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRyxRQUFRLENBQUMsR0FBRztNQUN4RCxDQUFDO01BQ0RnQyxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkI4SCxhQUFhLEVBQUUvSCxJQUFJLENBQUNnSSxzQkFBc0IsQ0FBQztNQUM3QztJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPOU4sS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMscUJBQXFCLEVBQUVBLEtBQUssQ0FBQztJQUMxQzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFO0lBQXNCLENBQUMsQ0FBQztFQUN4RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBWCxHQUFHLENBQUM2TSxJQUFJLENBQUMsK0JBQStCLEVBQUUvRSxpQkFBaUIsRUFBRVUsWUFBWSxFQUFFdEgsY0FBYyxFQUFFLENBQ3pGL0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDdVEsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUNwRCxFQUFFLE9BQU8zTixHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDckIsSUFBSTtJQUNGLE1BQU1oRyxNQUFNLEdBQUdqQixnQkFBZ0IsQ0FBQzJDLEdBQUcsQ0FBQztJQUNwQyxJQUFJLENBQUMxQixNQUFNLENBQUM4TixPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3JCLE9BQU85SCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRUYsTUFBTSxFQUFFQSxNQUFNLENBQUMrTixLQUFLLENBQUM7TUFBRSxDQUFDLENBQUM7SUFDekQ7SUFFQSxNQUFNO01BQUV6STtJQUFPLENBQUMsR0FBRzVELEdBQUcsQ0FBQ3NNLE1BQU07SUFDN0IsTUFBTTtNQUFFbEcsSUFBSSxFQUFFd0g7SUFBUSxDQUFDLEdBQUc1TixHQUFHLENBQUM1QyxJQUFJO0lBRWxDLE1BQU1zSSxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQzVDLE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVCxPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEOztJQUVBO0lBQ0EsSUFBSThGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsS0FBS3hNLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsRUFBRTtNQUNuRCxPQUFPbEksR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBOEIsQ0FBQyxDQUFDO0lBQ3ZFOztJQUVBO0lBQ0EsSUFBSSxDQUFDZ08sT0FBTyxLQUFLLE9BQU8sSUFBSWxJLElBQUksQ0FBQ1UsSUFBSSxLQUFLLE9BQU8sS0FBS3BHLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ1UsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUMvRSxPQUFPOUIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBNkMsQ0FBQyxDQUFDO0lBQ3RGO0lBRUEsTUFBTWlPLE9BQU8sR0FBR25JLElBQUksQ0FBQ1UsSUFBSTtJQUN6QlYsSUFBSSxDQUFDVSxJQUFJLEdBQUd3SCxPQUFPO0lBQ25CLE1BQU1sSSxJQUFJLENBQUN3SCxJQUFJLENBQUMsQ0FBQztJQUVqQmxQLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsc0JBQXNCa0ksT0FBTyxPQUFPRCxPQUFPLE9BQU81TixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQ3RHbUksYUFBYSxFQUFFbEssTUFBTTtNQUNyQm1LLFdBQVcsRUFBRS9OLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUN6Qm9ILE9BQU87TUFDUEQ7SUFDRixDQUFDLENBQUM7SUFFRnRKLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQbUIsT0FBTyxFQUFFLFFBQVErRixJQUFJLENBQUNDLFFBQVEsb0JBQW9CaUksT0FBTyxFQUFFO01BQzNEbEksSUFBSSxFQUFFO1FBQ0pKLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO1FBQ1pkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCUyxJQUFJLEVBQUV3SDtNQUNSO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9oTyxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQywyQkFBMkIsRUFBRUEsS0FBSyxDQUFDO0lBQ2hEMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBNkIsQ0FBQyxDQUFDO0VBQy9EO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQywrQkFBK0IsRUFBRS9FLGlCQUFpQixFQUFFUSxnQkFBZ0IsRUFBRXBILGNBQWMsRUFBRSxDQUM3Ri9DLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQytPLEtBQUssQ0FBQztFQUFFSCxHQUFHLEVBQUUsRUFBRTtFQUFFMU0sR0FBRyxFQUFFO0FBQU0sQ0FBQyxDQUFDLENBQUM7QUFBQSxDQUNqRCxFQUFFLE9BQU9VLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTWhHLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBTzlILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRXpJO0lBQU8sQ0FBQyxHQUFHNUQsR0FBRyxDQUFDc00sTUFBTTtJQUM3QixNQUFNO01BQUU1STtJQUFTLENBQUMsR0FBRzFELEdBQUcsQ0FBQzVDLElBQUk7SUFFN0IsTUFBTXNJLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDNUMsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQzhCLElBQUksRUFBRTtNQUNULE9BQU9wQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7SUFFQSxNQUFNOEYsSUFBSSxDQUFDc0ksSUFBSSxDQUFDdEssUUFBUSxDQUFDO0lBRXpCMUYsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLFFBQVFFLElBQUksQ0FBQ0MsUUFBUSxhQUFhM0YsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNqRXNJLFdBQVcsRUFBRXJLLE1BQU07TUFDbkJzSyxTQUFTLEVBQUVsTyxHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUc7TUFDdkIvQztJQUNGLENBQUMsQ0FBQztJQUVGWSxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUG1CLE9BQU8sRUFBRSxRQUFRK0YsSUFBSSxDQUFDQyxRQUFRLGlCQUFpQjtNQUMvQ0QsSUFBSSxFQUFFO1FBQ0pKLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO1FBQ1pkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCd0ksV0FBVyxFQUFFekksSUFBSSxDQUFDeUk7TUFDcEI7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT3ZPLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLG9CQUFvQixFQUFFQSxLQUFLLENBQUM7SUFDekMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUFzQixDQUFDLENBQUM7RUFDeEQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQVgsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLGlDQUFpQyxFQUFFL0UsaUJBQWlCLEVBQUVRLGdCQUFnQixFQUFFcEgsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNuSCxJQUFJO0lBQ0YsTUFBTTtNQUFFVjtJQUFPLENBQUMsR0FBRzVELEdBQUcsQ0FBQ3NNLE1BQU07SUFDN0IsTUFBTTVHLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDNUMsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQzhCLElBQUksRUFBRTtNQUNULE9BQU9wQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7SUFFQSxJQUFJLENBQUM4RixJQUFJLENBQUMwSSxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ25CLE9BQU85SixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFvQixDQUFDLENBQUM7SUFDN0Q7SUFFQSxNQUFNOEYsSUFBSSxDQUFDMkksTUFBTSxDQUFDLENBQUM7SUFFbkJyUSxNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUUUsSUFBSSxDQUFDQyxRQUFRLGVBQWUzRixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQ25FMkksYUFBYSxFQUFFMUssTUFBTTtNQUNyQjJLLFdBQVcsRUFBRXZPLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2U7SUFDeEIsQ0FBQyxDQUFDO0lBRUZuQyxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUG1CLE9BQU8sRUFBRSxRQUFRK0YsSUFBSSxDQUFDQyxRQUFRLG1CQUFtQjtNQUNqREQsSUFBSSxFQUFFO1FBQ0pKLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO1FBQ1pkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCd0ksV0FBVyxFQUFFO01BQ2Y7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT3ZPLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHNCQUFzQixFQUFFQSxLQUFLLENBQUM7SUFDM0MwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUF3QixDQUFDLENBQUM7RUFDMUQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtDQUErQyxDQUFDO0FBQzVEdkMsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLFlBQVksRUFBRThHLGlCQUFpQixFQUFFNUcsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUMzRSxJQUFJO0lBQ0YsTUFBTTZHLEtBQUssR0FBRyxNQUFNdE4sSUFBSSxDQUFDdU4sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzlCQyxNQUFNLENBQUMsK0NBQStDLENBQUMsQ0FDdkRDLElBQUksQ0FBQztNQUFFM0YsUUFBUSxFQUFFO0lBQUUsQ0FBQyxDQUFDO0lBRXhCM0gsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLDJCQUEyQnhGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDMUQvQixNQUFNLEVBQUU1RCxHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUc7TUFDcEIrSCxVQUFVLEVBQUVyRCxLQUFLLENBQUNzRDtJQUNwQixDQUFDLENBQUM7SUFFRmxOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQixFQUFFMkosS0FBSyxDQUFDc0QsTUFBTSxDQUFDO0lBQ3JEbkssR0FBRyxDQUFDOUYsSUFBSSxDQUFDMk0sS0FBSyxDQUFDO0VBQ2pCLENBQUMsQ0FBQyxPQUFPdkwsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM1QzJCLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDMUQyRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRSx1QkFBdUI7TUFBRTZCLElBQUksRUFBRTtJQUFpQixDQUFDLENBQUM7RUFDbEY7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXhDLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDRCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDdENBLEdBQUcsQ0FBQ3VHLFlBQVksQ0FBQyx5QkFBeUIsQ0FBQztFQUMzQ3ZHLEdBQUcsQ0FBQ29LLFNBQVMsQ0FBQyxjQUFjLEVBQUUsa0JBQWtCLENBQUM7RUFDakRwSyxHQUFHLENBQUNxSyxJQUFJLENBQUMvRCxXQUFXLENBQUM7QUFDdkIsQ0FBQyxDQUFDOztBQUVGO0FBQ0EzTCxHQUFHLENBQUM2TSxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQzlMLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUM3QztFQUNBO0VBQ0EsSUFBSTtJQUNGLE1BQU1zSyxnQkFBZ0IsR0FBR3hQLGVBQWUsQ0FBQ21ELEtBQUs7SUFDOUMsSUFBSXFNLGdCQUFnQixJQUFJLE9BQU9BLGdCQUFnQixDQUFDQyxRQUFRLEtBQUssVUFBVSxFQUFFO01BQ3ZFRCxnQkFBZ0IsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7TUFDM0J0TixPQUFPLENBQUNDLEdBQUcsQ0FBQyw2Q0FBNkMsQ0FBQztNQUMxRDhDLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztRQUFFc1EsT0FBTyxFQUFFLElBQUk7UUFBRW5QLE9BQU8sRUFBRTtNQUErQixDQUFDLENBQUM7SUFDdEUsQ0FBQyxNQUFNO01BQ0w7TUFDQTRCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVGQUF1RixDQUFDO01BQ3BHOEMsR0FBRyxDQUFDOUYsSUFBSSxDQUFDO1FBQUVzUSxPQUFPLEVBQUUsS0FBSztRQUFFblAsT0FBTyxFQUFFO01BQTZELENBQUMsQ0FBQztJQUNyRztFQUNGLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZDJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxFQUFFNUIsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDOUQyRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRXNRLE9BQU8sRUFBRSxLQUFLO01BQUVsUCxLQUFLLEVBQUU7SUFBZ0MsQ0FBQyxDQUFDO0VBQ2xGO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQ0QsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQy9CQSxHQUFHLENBQUM5RixJQUFJLENBQUM7SUFDUG1ELE1BQU0sRUFBRSxTQUFTO0lBQ2pCdEQsU0FBUyxFQUFFLElBQUlpRixJQUFJLENBQUMsQ0FBQyxDQUFDdUQsV0FBVyxDQUFDLENBQUM7SUFDbkNrSSxNQUFNLEVBQUV4UCxPQUFPLENBQUN3UCxNQUFNLENBQUM7RUFDekIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0E5UCxHQUFHLENBQUM0QyxHQUFHLENBQUMsQ0FBQzdCLEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzFCdkcsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLHdCQUF3QnhGLEdBQUcsQ0FBQ2dELE1BQU0sSUFBSWhELEdBQUcsQ0FBQ3dFLEdBQUcsRUFBRSxFQUFFO0lBQzNEQyxFQUFFLEVBQUV6RSxHQUFHLENBQUN5RSxFQUFFO0lBQ1ZDLFNBQVMsRUFBRTFFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVksQ0FBQztJQUNoQzJCLE9BQU8sRUFBRTVCLEdBQUcsQ0FBQzRCO0VBQ2YsQ0FBQyxDQUFDO0VBQ0YyQyxJQUFJLENBQUMsQ0FBQztBQUNSLENBQUMsQ0FBQzs7QUFhRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQWhELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdEQUFnRCxDQUFDO0FBQzdEdkMsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLFlBQVksRUFBRSxDQUNyQjFPLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQUMyTSxJQUFJLENBQUMsQ0FBQyxFQUN2RDdPLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQ2hELEVBQUUsT0FBT1UsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRi9DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFO01BQUVxSSxVQUFVLEVBQUU3SixHQUFHLENBQUM1QyxJQUFJLENBQUN5TSxVQUFVO01BQUVtRixXQUFXLEVBQUUsQ0FBQyxDQUFDaFAsR0FBRyxDQUFDNUMsSUFBSSxDQUFDdU0sUUFBUTtNQUFFbEYsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUU7SUFBRyxDQUFDLENBQUM7SUFDNUgsTUFBTW5HLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckI3SyxPQUFPLENBQUNDLEdBQUcsQ0FBQyw0QkFBNEIsRUFBRWxELE1BQU0sQ0FBQytOLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDekQsT0FBTy9ILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRXhDLFVBQVU7TUFBRUY7SUFBUyxDQUFDLEdBQUczSixHQUFHLENBQUM1QyxJQUFJO0lBQ3pDbUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0NBQXdDLEVBQUVxSSxVQUFVLENBQUM7O0lBRWpFO0lBQ0EsTUFBTW5FLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDb1IsT0FBTyxDQUFDO01BQzlCQyxHQUFHLEVBQUUsQ0FBQztRQUFFdkosUUFBUSxFQUFFa0U7TUFBVyxDQUFDLEVBQUU7UUFBRVgsS0FBSyxFQUFFVztNQUFXLENBQUM7SUFDdkQsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDbkUsSUFBSSxFQUFFO01BQ1RuRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRXFJLFVBQVUsQ0FBQztNQUM1QyxPQUFPdkYsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBc0IsQ0FBQyxDQUFDO0lBQy9EO0lBRUEyQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxlQUFlLEVBQUU7TUFBRW1FLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO01BQUV1RCxLQUFLLEVBQUV4RCxJQUFJLENBQUN3RCxLQUFLO01BQUV2SCxNQUFNLEVBQUUrRCxJQUFJLENBQUMvRDtJQUFPLENBQUMsQ0FBQzs7SUFFakc7SUFDQSxNQUFNd04sZUFBZSxHQUFHLE1BQU16SixJQUFJLENBQUMwSixlQUFlLENBQUN6RixRQUFRLENBQUM7SUFDNURwSSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0MsRUFBRTJOLGVBQWUsQ0FBQztJQUU5RCxJQUFJLENBQUNBLGVBQWUsRUFBRTtNQUNwQjVOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhCQUE4QixFQUFFa0UsSUFBSSxDQUFDQyxRQUFRLENBQUM7TUFDMUQsT0FBT3JCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQXNCLENBQUMsQ0FBQztJQUMvRDs7SUFFQTtJQUNBOEYsSUFBSSxDQUFDL0QsTUFBTSxHQUFHLFFBQVE7SUFDdEIsTUFBTStELElBQUksQ0FBQ3dILElBQUksQ0FBQyxDQUFDOztJQUVqQjtJQUNBM0wsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUVrRSxJQUFJLENBQUNDLFFBQVEsQ0FBQztJQUM1RXBFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDJCQUEyQixFQUFFeEIsR0FBRyxDQUFDZ0csU0FBUyxDQUFDO0lBRXZEaEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYSxHQUFHLElBQUk7SUFDaEMzRCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNLEdBQUc4QixJQUFJLENBQUNlLEdBQUcsQ0FBQytGLFFBQVEsQ0FBQyxDQUFDO0lBQ3hDeE0sR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUksUUFBUSxHQUFHRCxJQUFJLENBQUNDLFFBQVEsQ0FBQyxDQUFDO0lBQ3RDM0YsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNEksSUFBSSxHQUFHVixJQUFJLENBQUNVLElBQUk7SUFDNUJwRyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLEdBQUcvSSxNQUFNLENBQUM4UixXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM3QyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNoRXhNLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzZJLFNBQVMsR0FBRyxJQUFJL0MsSUFBSSxDQUFDLENBQUMsQ0FBQ3VELFdBQVcsQ0FBQyxDQUFDO0lBQ2hEN0csR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxHQUFHMUUsR0FBRyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzs7SUFFL0NzQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQ0FBbUMsRUFBRTtNQUMvQzhOLGFBQWEsRUFBRS9SLE1BQU0sQ0FBQ2dTLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDeFAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUyxDQUFDLENBQUNtSixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUNsSixTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUN0R21KLGVBQWUsRUFBRTFQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsRUFBRStKLE1BQU07TUFDOUNwSSxTQUFTLEVBQUVyRyxHQUFHLENBQUN4QyxPQUFPLENBQUM2STtJQUN6QixDQUFDLENBQUM7O0lBRUY7SUFDQTlFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFEQUFxRCxFQUFFO01BQ2pFd0UsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztNQUN4QnBDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07TUFDMUIrQixRQUFRLEVBQUUzRixHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRO01BQzlCUyxJQUFJLEVBQUVwRyxHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJO01BQ3RCRSxTQUFTLEVBQUV0RyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztNQUFFO01BQzNESixXQUFXLEVBQUU7UUFDWHhDLGFBQWEsRUFBRTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7UUFDeENDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07UUFDMUJ5QyxTQUFTLEVBQUVyRyxHQUFHLENBQUN4QyxPQUFPLENBQUM2STtNQUN6QjtJQUNGLENBQUMsQ0FBQztJQUVGLE1BQU0sSUFBSXNKLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztNQUNyQzdQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzBQLElBQUksQ0FBRTVMLEdBQUcsSUFBSztRQUN4QixJQUFJQSxHQUFHLEVBQUU7VUFDUEMsT0FBTyxDQUFDM0IsS0FBSyxDQUFDLHVCQUF1QixFQUFFO1lBQ3JDb0csU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztZQUN4QjhKLFlBQVksRUFBRXhPLEdBQUcsQ0FBQzNCLE9BQU87WUFDekJvUSxVQUFVLEVBQUV6TyxHQUFHLENBQUMvQztVQUNsQixDQUFDLENBQUM7VUFDRnNSLE1BQU0sQ0FBQ3ZPLEdBQUcsQ0FBQztRQUNiLENBQUMsTUFBTTtVQUNMQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzREFBc0QsRUFBRTtZQUNsRXdFLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHLFNBQVM7WUFDeEJyQyxhQUFhLEVBQUUzRCxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFhO1lBQ3hDQyxNQUFNLEVBQUU1RCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO1lBQzFCeUMsU0FBUyxFQUFFckcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNkksU0FBUztZQUNoQ3FKLGVBQWUsRUFBRTFQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsRUFBRStKO1VBQzFDLENBQUMsQ0FBQztVQUNGelEsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLDRCQUE0QixFQUFFO1lBQ3hDUSxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO1lBQ3hCcEMsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtZQUMxQitCLFFBQVEsRUFBRTNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21JLFFBQVE7WUFDOUJTLElBQUksRUFBRXBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUk7WUFDdEIzQixFQUFFLEVBQUV6RSxHQUFHLENBQUN5RSxFQUFFO1lBQ1Z1TCxhQUFhLEVBQUV6UyxNQUFNLENBQUNnUyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQ3hQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsSUFBSSxFQUFFLENBQUMsQ0FBQytLLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQ2xKLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtVQUM5RyxDQUFDLENBQUM7VUFDRnFKLE9BQU8sQ0FBQyxDQUFDO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7O0lBRUY7SUFDQXJPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1DQUFtQyxFQUFFa0UsSUFBSSxDQUFDQyxRQUFRLENBQUM7SUFDL0QsTUFBTXNCLEtBQUssR0FBR3BLLEdBQUcsQ0FBQ29ULElBQUksQ0FDcEI7TUFDRXJNLE1BQU0sRUFBRThCLElBQUksQ0FBQ2UsR0FBRztNQUNoQmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7TUFDdkJTLElBQUksRUFBRVYsSUFBSSxDQUFDVSxJQUFJO01BQ2ZFLFNBQVMsRUFBRXRHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVM7TUFDaENOLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHO0lBQ2pCLENBQUMsRUFDRHpHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDOEgsVUFBVSxFQUN0QjtNQUFFNEksU0FBUyxFQUFFO0lBQU0sQ0FDckIsQ0FBQztJQUNEM08sT0FBTyxDQUFDQyxHQUFHLENBQUMsb0NBQW9DLENBQUM7SUFFakR4RCxNQUFNLENBQUN3SCxJQUFJLENBQUMsbUJBQW1CRSxJQUFJLENBQUNDLFFBQVEsRUFBRSxDQUFDO0lBRS9DcEUsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCLENBQUM7SUFDeEM4QyxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUHlJLEtBQUs7TUFBRTtNQUNQdkIsSUFBSSxFQUFFO1FBQ0pKLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO1FBQ1pkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCdUQsS0FBSyxFQUFFeEQsSUFBSSxDQUFDd0QsS0FBSztRQUNqQjlDLElBQUksRUFBRVYsSUFBSSxDQUFDVTtNQUNiLENBQUM7TUFDRDVJLE9BQU8sRUFBRTtRQUNQbUcsYUFBYSxFQUFFLElBQUk7UUFDbkIyQixFQUFFLEVBQUV0RixHQUFHLENBQUNnRyxTQUFTO1FBQ2pCd0gsT0FBTyxFQUFFeE4sR0FBRyxDQUFDeEMsT0FBTyxDQUFDcUcsTUFBTSxDQUFDMko7TUFDOUI7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBTzVOLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLGNBQWMsRUFBRUEsS0FBSyxDQUFDO0lBQ25DMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBNEIsQ0FBQyxDQUFDO0VBQzlEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxlQUFlLEVBQUUxTSxlQUFlLEVBQUUsQ0FDekNoQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMyTyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUFDMk0sSUFBSSxDQUFDLENBQUMsQ0FBQ2tFLE1BQU0sQ0FBQyxDQUFDLEVBQzlEL1MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDZ1QsT0FBTyxDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLENBQUMsRUFDeENqVCxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMyTyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUUsQ0FBQyxDQUFDLENBQ3RDLEVBQUUsT0FBT2hNLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTWhHLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBTzlILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRTFHLFFBQVE7TUFBRXVELEtBQUs7TUFBRVM7SUFBUyxDQUFDLEdBQUczSixHQUFHLENBQUM1QyxJQUFJOztJQUU5QztJQUNBLE1BQU1rVCxZQUFZLEdBQUcsTUFBTXpTLElBQUksQ0FBQ29SLE9BQU8sQ0FBQztNQUN0Q0MsR0FBRyxFQUFFLENBQUM7UUFBRXZKO01BQVMsQ0FBQyxFQUFFO1FBQUV1RDtNQUFNLENBQUM7SUFDL0IsQ0FBQyxDQUFDO0lBRUYsSUFBSW9ILFlBQVksRUFBRTtNQUNoQixNQUFNQyxhQUFhLEdBQUdELFlBQVksQ0FBQzNLLFFBQVEsS0FBS0EsUUFBUSxHQUFHLFVBQVUsR0FBRyxPQUFPO01BQy9FLE1BQU1tSyxZQUFZLEdBQUdTLGFBQWEsS0FBSyxVQUFVLEdBQUcsd0JBQXdCLEdBQUcsMEJBQTBCO01BQ3pHLE9BQU9qTSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRWtRO01BQWEsQ0FBQyxDQUFDO0lBQ3REOztJQUVBO0lBQ0EsTUFBTXBLLElBQUksR0FBRyxJQUFJN0gsSUFBSSxDQUFDO01BQUU4SCxRQUFRO01BQUV1RCxLQUFLO01BQUVTLFFBQVE7TUFBRXZELElBQUksRUFBRSxRQUFRO01BQUV6RSxNQUFNLEVBQUU7SUFBUyxDQUFDLENBQUM7SUFDdEYsTUFBTStELElBQUksQ0FBQ3dILElBQUksQ0FBQyxDQUFDO0lBRWpCM0wsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0VBQXdFLEVBQUVrRSxJQUFJLENBQUNDLFFBQVEsQ0FBQztJQUNwR3BFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtDQUErQyxFQUFFeEIsR0FBRyxDQUFDZ0csU0FBUyxDQUFDOztJQUUzRTtJQUNBaEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYSxHQUFHLElBQUk7SUFDaEMzRCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNLEdBQUc4QixJQUFJLENBQUNlLEdBQUcsQ0FBQytGLFFBQVEsQ0FBQyxDQUFDO0lBQ3hDeE0sR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUksUUFBUSxHQUFHRCxJQUFJLENBQUNDLFFBQVE7SUFDcEMzRixHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJLEdBQUdWLElBQUksQ0FBQ1UsSUFBSTtJQUM1QnBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsR0FBRy9JLE1BQU0sQ0FBQzhSLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQzdDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2hFeE0sR0FBRyxDQUFDeEMsT0FBTyxDQUFDZ1QsZ0JBQWdCLEdBQUcsSUFBSWxOLElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUMsQ0FBQztJQUN2RDdHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsR0FBRzFFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7O0lBRS9Dc0IsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUU7TUFDNUQ4TixhQUFhLEVBQUUvUixNQUFNLENBQUNnUyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQ3hQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsQ0FBQyxDQUFDbUosTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDbEosU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7TUFDdEdtSixlQUFlLEVBQUUxUCxHQUFHLENBQUN4QyxPQUFPLENBQUNrSCxTQUFTLEVBQUUrSixNQUFNO01BQzlDK0IsZ0JBQWdCLEVBQUV4USxHQUFHLENBQUN4QyxPQUFPLENBQUNnVDtJQUNoQyxDQUFDLENBQUM7O0lBRUY7SUFDQWpQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtFQUFrRSxFQUFFO01BQzlFd0UsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztNQUN4QnBDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07TUFDMUIrQixRQUFRLEVBQUUzRixHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRO01BQzlCUyxJQUFJLEVBQUVwRyxHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJO01BQ3RCRSxTQUFTLEVBQUV0RyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztNQUN6RGlLLGdCQUFnQixFQUFFeFEsR0FBRyxDQUFDeEMsT0FBTyxDQUFDZ1QsZ0JBQWdCO01BQzlDckssV0FBVyxFQUFFO1FBQ1h4QyxhQUFhLEVBQUUzRCxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFhO1FBQ3hDQyxNQUFNLEVBQUU1RCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO1FBQzFCNE0sZ0JBQWdCLEVBQUV4USxHQUFHLENBQUN4QyxPQUFPLENBQUNnVDtNQUNoQztJQUNGLENBQUMsQ0FBQztJQUVGLE1BQU0sSUFBSWIsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO01BQ3JDN1AsR0FBRyxDQUFDeEMsT0FBTyxDQUFDMFAsSUFBSSxDQUFFNUwsR0FBRyxJQUFLO1FBQ3hCLElBQUlBLEdBQUcsRUFBRTtVQUNQQyxPQUFPLENBQUMzQixLQUFLLENBQUMsMkNBQTJDLEVBQUU7WUFDekRvRyxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO1lBQ3hCOEosWUFBWSxFQUFFeE8sR0FBRyxDQUFDM0IsT0FBTztZQUN6Qm9RLFVBQVUsRUFBRXpPLEdBQUcsQ0FBQy9DO1VBQ2xCLENBQUMsQ0FBQztVQUNGc1IsTUFBTSxDQUFDdk8sR0FBRyxDQUFDO1FBQ2IsQ0FBQyxNQUFNO1VBQ0xDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1EQUFtRCxFQUFFO1lBQy9Ed0UsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztZQUN4QnJDLGFBQWEsRUFBRTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7WUFDeENDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07WUFDMUI0TSxnQkFBZ0IsRUFBRXhRLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2dULGdCQUFnQjtZQUM5Q2QsZUFBZSxFQUFFMVAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxFQUFFK0o7VUFDMUMsQ0FBQyxDQUFDO1VBQ0Z6USxNQUFNLENBQUN3SCxJQUFJLENBQUMsbUNBQW1DLEVBQUU7WUFDL0NRLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHLFNBQVM7WUFDeEJwQyxNQUFNLEVBQUU1RCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO1lBQzFCK0IsUUFBUSxFQUFFM0YsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUksUUFBUTtZQUM5QlMsSUFBSSxFQUFFcEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNEksSUFBSTtZQUN0QjNCLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFLEVBQUU7WUFDVnVMLGFBQWEsRUFBRXpTLE1BQU0sQ0FBQ2dTLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDeFAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxJQUFJLEVBQUUsQ0FBQyxDQUFDK0ssTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDbEosU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFO1VBQzlHLENBQUMsQ0FBQztVQUNGcUosT0FBTyxDQUFDLENBQUM7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGck8sT0FBTyxDQUFDQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxDQUFDakMsT0FBTyxDQUFDQyxHQUFHLENBQUM4SCxVQUFVLENBQUM7SUFDNUQsTUFBTUwsS0FBSyxHQUFHcEssR0FBRyxDQUFDb1QsSUFBSSxDQUNwQjtNQUNFck0sTUFBTSxFQUFFOEIsSUFBSSxDQUFDZSxHQUFHO01BQ2hCZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtNQUN2QlMsSUFBSSxFQUFFVixJQUFJLENBQUNVLElBQUk7TUFDZkUsU0FBUyxFQUFFdEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUztNQUNoQ04sU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0c7SUFDakIsQ0FBQyxFQUNEekcsT0FBTyxDQUFDQyxHQUFHLENBQUM4SCxVQUFVLEVBQ3RCO01BQUU0SSxTQUFTLEVBQUU7SUFBTSxDQUNyQixDQUFDO0lBRUQzTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztJQUMvQ3hELE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxvQkFBb0JFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLENBQUM7SUFFaERyQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDbkJ5SSxLQUFLO01BQUU7TUFDUHZCLElBQUksRUFBRTtRQUNKSixFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztRQUNaZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QnVELEtBQUssRUFBRXhELElBQUksQ0FBQ3dELEtBQUs7UUFDakI5QyxJQUFJLEVBQUVWLElBQUksQ0FBQ1U7TUFDYixDQUFDO01BQ0Q1SSxPQUFPLEVBQUU7UUFDUG1HLGFBQWEsRUFBRSxJQUFJO1FBQ25CMkIsRUFBRSxFQUFFdEYsR0FBRyxDQUFDZ0csU0FBUztRQUNqQndILE9BQU8sRUFBRXhOLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ3FHLE1BQU0sQ0FBQzJKO01BQzlCO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU81TixLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxxQkFBcUIsRUFBRUEsS0FBSyxDQUFDO0lBQzFDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBbUMsQ0FBQyxDQUFDO0VBQ3JFO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EyQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxrREFBa0QsQ0FBQztBQUMvRHZDLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxlQUFlLEVBQUU4RyxpQkFBaUIsRUFBRTVHLGNBQWMsRUFBRSxPQUFPSCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDOUUvQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQ0FBc0MsRUFBRTtJQUFFd0IsTUFBTSxFQUFFaEQsR0FBRyxDQUFDZ0QsTUFBTTtJQUFFd0IsR0FBRyxFQUFFeEUsR0FBRyxDQUFDd0UsR0FBRztJQUFFNUMsT0FBTyxFQUFFNUIsR0FBRyxDQUFDNEIsT0FBTyxDQUFDNk8sYUFBYSxHQUFHLHFCQUFxQixHQUFHO0VBQWlCLENBQUMsQ0FBQztFQUN4SyxJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHLE1BQU0zUyxPQUFPLENBQUNxTixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDcENDLE1BQU0sQ0FBQyxrREFBa0QsQ0FBQyxDQUMxREMsSUFBSSxDQUFDO01BQUU3QixRQUFRLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFFeEJ6TCxNQUFNLENBQUN3SCxJQUFJLENBQUMsOEJBQThCeEYsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUM3RC9CLE1BQU0sRUFBRTVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUNwQmtLLFlBQVksRUFBRUQsUUFBUSxDQUFDakM7SUFDekIsQ0FBQyxDQUFDO0lBRUZsTixPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRWtQLFFBQVEsQ0FBQ2pDLE1BQU0sQ0FBQztJQUMzRG5LLEdBQUcsQ0FBQzlGLElBQUksQ0FBQ2tTLFFBQVEsQ0FBQztFQUNwQixDQUFDLENBQUMsT0FBTzlRLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLDBCQUEwQixFQUFFQSxLQUFLLENBQUM7SUFDL0MyQixPQUFPLENBQUMzQixLQUFLLENBQUMsK0JBQStCLEVBQUVBLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQzdEMkUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUUsMEJBQTBCO01BQUU2QixJQUFJLEVBQUU7SUFBaUIsQ0FBQyxDQUFDO0VBQ3JGO0FBQ0YsQ0FBQyxDQUFDO0FBRUZGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1EQUFtRCxDQUFDOztBQUVoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0F2QyxHQUFHLENBQUM2TSxJQUFJLENBQUMsZUFBZSxFQUFFL0UsaUJBQWlCLEVBQUU1RyxjQUFjLEVBQUUsQ0FDM0QvQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMyTyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDMk0sSUFBSSxDQUFDLENBQUMsQ0FBQ2tFLE1BQU0sQ0FBQyxDQUFDLEVBQzNEL1MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDdVEsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMxQixJQUFJLENBQUMsQ0FBQyxFQUMzQzdPLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzhPLFFBQVEsQ0FBQyxDQUFDLENBQUNILFFBQVEsQ0FBQztFQUFFek0sR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQUMyTSxJQUFJLENBQUMsQ0FBQyxDQUM3RCxFQUFFLE9BQU9qTSxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDckIsSUFBSTtJQUNGLE1BQU1oRyxNQUFNLEdBQUdqQixnQkFBZ0IsQ0FBQzJDLEdBQUcsQ0FBQztJQUNwQyxJQUFJLENBQUMxQixNQUFNLENBQUM4TixPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3JCLE9BQU85SCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRUYsTUFBTSxFQUFFQSxNQUFNLENBQUMrTixLQUFLLENBQUM7TUFBRSxDQUFDLENBQUM7SUFDekQ7SUFFQSxNQUFNO01BQUVuSSxJQUFJO01BQUU0RSxJQUFJO01BQUVMO0lBQVksQ0FBQyxHQUFHekksR0FBRyxDQUFDNUMsSUFBSTtJQUM1QyxNQUFNb00sU0FBUyxHQUFHeEosR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFROztJQUVuQztJQUNBLE1BQU1pTCxPQUFPLEdBQUcsSUFBSTdTLE9BQU8sQ0FBQztNQUMxQm1HLElBQUk7TUFDSjRFLElBQUk7TUFDSkwsV0FBVztNQUNYZTtJQUNGLENBQUMsQ0FBQztJQUVGLE1BQU1vSCxPQUFPLENBQUMxRCxJQUFJLENBQUMsQ0FBQztJQUVwQmxQLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxZQUFZdEIsSUFBSSxnQkFBZ0JzRixTQUFTLEVBQUUsRUFBRTtNQUN2RHFILFNBQVMsRUFBRUQsT0FBTyxDQUFDdEwsRUFBRTtNQUNyQndELElBQUk7TUFDSmxGLE1BQU0sRUFBRTVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2U7SUFDbkIsQ0FBQyxDQUFDO0lBRUZuQyxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDbkI4RyxFQUFFLEVBQUVzTCxPQUFPLENBQUN0TCxFQUFFO01BQ2RwQixJQUFJLEVBQUUwTSxPQUFPLENBQUMxTSxJQUFJO01BQ2xCNEUsSUFBSSxFQUFFOEgsT0FBTyxDQUFDOUgsSUFBSTtNQUNsQkwsV0FBVyxFQUFFbUksT0FBTyxDQUFDbkksV0FBVztNQUNoQ2UsU0FBUyxFQUFFb0gsT0FBTyxDQUFDcEgsU0FBUztNQUM1QkMsUUFBUSxFQUFFbUgsT0FBTyxDQUFDbkg7SUFDcEIsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU83SixLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx5QkFBeUIsRUFBRUEsS0FBSyxDQUFDO0lBRTlDLElBQUlBLEtBQUssQ0FBQ3NFLElBQUksS0FBSyxpQkFBaUIsRUFBRTtNQUNwQyxPQUFPSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFDMUJvQixLQUFLLEVBQUUsc0JBQXNCO1FBQzdCc0YsT0FBTyxFQUFFdEYsS0FBSyxDQUFDRDtNQUNqQixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUlDLEtBQUssQ0FBQzZCLElBQUksS0FBSyxLQUFLLEVBQUU7TUFDeEIsT0FBTzZDLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSw2QkFBNkI7UUFDcEM2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBNkMsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQ25Cb0IsS0FBSyxFQUFFLDBCQUEwQjtNQUNqQzZCLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDO0FBRUZGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlEQUFpRCxDQUFDO0FBQzlEdkMsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLGFBQWEsRUFBRS9FLGlCQUFpQixFQUFFNUcsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUM3RSxJQUFJO0lBQ0YvQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRXhCLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFO01BQUUvQixNQUFNLEVBQUU1RCxHQUFHLENBQUMwRixJQUFJLENBQUNlO0lBQUksQ0FBQyxDQUFDOztJQUV4RjtJQUNBLE1BQU1xSyxPQUFPLEdBQUdDLFdBQVc7SUFDM0IsSUFBSUMsaUJBQWlCLEdBQUcsQ0FBQztJQUN6QixLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLENBQUMsSUFBSUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3RELElBQUlELFVBQVUsQ0FBQ3ROLE1BQU0sS0FBSzVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsRUFBRTtRQUNqRCxNQUFNNEUsTUFBTSxHQUFHOVEsRUFBRSxDQUFDd1EsT0FBTyxDQUFDQSxPQUFPLENBQUM3USxHQUFHLENBQUNnUixRQUFRLENBQUM7UUFDL0MsSUFBSUcsTUFBTSxFQUFFO1VBQ1ZBLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLENBQUM7VUFDbkJMLGlCQUFpQixFQUFFO1FBQ3JCO01BQ0Y7SUFDRjs7SUFFQTtJQUNBLE1BQU1uVCxJQUFJLENBQUN5VCxpQkFBaUIsQ0FBQ3RSLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxFQUFFO01BQ3pDOUUsTUFBTSxFQUFFLFNBQVM7TUFDakIySCxVQUFVLEVBQUUsSUFBSWhHLElBQUksQ0FBQztJQUN2QixDQUFDLENBQUM7SUFFRi9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFVBQVV4QixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsNkJBQTZCcUwsaUJBQWlCLDJCQUEyQixDQUFDO0lBQ2pIaFQsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLG9CQUFvQnhGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDbkQvQixNQUFNLEVBQUU1RCxHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUc7TUFDcEI4SyxtQkFBbUIsRUFBRVA7SUFDdkIsQ0FBQyxDQUFDO0lBRUYxTSxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUHNRLE9BQU8sRUFBRSxJQUFJO01BQ2JuUCxPQUFPLEVBQUUseUJBQXlCO01BQ2xDcVI7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT3BSLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLGVBQWUsRUFBRUEsS0FBSyxDQUFDO0lBQ3BDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBNkIsQ0FBQyxDQUFDO0VBQy9EO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxxQkFBcUIsRUFBRTNMLGNBQWMsRUFBRSxPQUFPSCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDbEUsSUFBSTtJQUNGL0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsdUNBQXVDLEVBQUV4QixHQUFHLENBQUNnRyxTQUFTLENBQUM7O0lBRW5FO0lBQ0EsTUFBTXdMLFVBQVUsR0FBRyxDQUFDLENBQUN4UixHQUFHLENBQUMwRixJQUFJLENBQUMsQ0FBQztJQUMvQixNQUFNK0wsY0FBYyxHQUFHelIsR0FBRyxDQUFDMkcsV0FBVyxJQUFLM0csR0FBRyxDQUFDeEMsT0FBTyxJQUFJd0MsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYztJQUNwRixNQUFNK04sYUFBYSxHQUFHMVIsR0FBRyxDQUFDeEMsT0FBTyxJQUFJd0MsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtJQUV2RHJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQixFQUFFO01BQ3RDZ1EsVUFBVTtNQUNWQyxjQUFjO01BQ2RDLGFBQWE7TUFDYjFMLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHO0lBQ2pCLENBQUMsQ0FBQztJQUVGLElBQUl5TCxjQUFjLEVBQUU7TUFDbEIsTUFBTTlLLFdBQVcsR0FBRytLLGFBQWEsR0FBRyxNQUFNN1QsSUFBSSxDQUFDMkksUUFBUSxDQUFDa0wsYUFBYSxDQUFDLEdBQUcsSUFBSTtNQUM3RSxNQUFNL0wsUUFBUSxHQUFHZ0IsV0FBVyxHQUFHQSxXQUFXLENBQUNoQixRQUFRLEdBQUcsU0FBUztNQUUvRHBFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdEQUFnRCxFQUFFbUUsUUFBUSxDQUFDOztNQUV2RTtNQUNBLElBQUkrTCxhQUFhLEVBQUU7UUFDakIsTUFBTVosT0FBTyxHQUFHQyxXQUFXO1FBQzNCLElBQUlDLGlCQUFpQixHQUFHLENBQUM7UUFDekIsS0FBSyxNQUFNLENBQUNDLFFBQVEsRUFBRUMsVUFBVSxDQUFDLElBQUlKLE9BQU8sQ0FBQ0ssT0FBTyxDQUFDLENBQUMsRUFBRTtVQUN0RCxJQUFJRCxVQUFVLENBQUN0TixNQUFNLEtBQUs4TixhQUFhLEVBQUU7WUFDdkMsTUFBTU4sTUFBTSxHQUFHOVEsRUFBRSxDQUFDd1EsT0FBTyxDQUFDQSxPQUFPLENBQUM3USxHQUFHLENBQUNnUixRQUFRLENBQUM7WUFDL0MsSUFBSUcsTUFBTSxFQUFFO2NBQ1ZBLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLENBQUM7Y0FDbkJMLGlCQUFpQixFQUFFO1lBQ3JCO1VBQ0Y7UUFDRjtRQUVBelAsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0NBQW9Dd1AsaUJBQWlCLHFCQUFxQixDQUFDO01BQ3pGOztNQUVBO01BQ0EsTUFBTSxJQUFJckIsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO1FBQ3JDN1AsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbVUsT0FBTyxDQUFFclEsR0FBRyxJQUFLO1VBQzNCLElBQUlBLEdBQUcsRUFBRTtZQUNQQyxPQUFPLENBQUMzQixLQUFLLENBQUMsMEJBQTBCLEVBQUUwQixHQUFHLENBQUM7WUFDOUN1TyxNQUFNLENBQUN2TyxHQUFHLENBQUM7VUFDYixDQUFDLE1BQU07WUFDTEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLENBQUM7WUFDL0NvTyxPQUFPLENBQUMsQ0FBQztVQUNYO1FBQ0YsQ0FBQyxDQUFDO01BQ0osQ0FBQyxDQUFDO01BRUY1UixNQUFNLENBQUN3SCxJQUFJLENBQUMsdUJBQXVCRyxRQUFRLEVBQUUsRUFBRTtRQUM3Q0ssU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztRQUN4QnZCLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFO01BQ1YsQ0FBQyxDQUFDO01BRUZILEdBQUcsQ0FBQzlGLElBQUksQ0FBQztRQUNQc1EsT0FBTyxFQUFFLElBQUk7UUFDYm5QLE9BQU8sRUFBRSxpQ0FBaUM7UUFDMUNtSixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCOEksZ0JBQWdCLEVBQUU7TUFDcEIsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxNQUFNO01BQ0xyUSxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3REFBd0QsQ0FBQztNQUNyRThDLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztRQUNQc1EsT0FBTyxFQUFFLElBQUk7UUFDYm5QLE9BQU8sRUFBRSw4QkFBOEI7UUFDdkNtSixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCOEksZ0JBQWdCLEVBQUU7TUFDcEIsQ0FBQyxDQUFDO0lBQ0o7RUFFRixDQUFDLENBQUMsT0FBT2hTLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDNUMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDbkJvQixLQUFLLEVBQUUsb0NBQW9DO01BQzNDNkIsSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXhDLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxzQkFBc0IsRUFBRTNMLGNBQWMsRUFBRSxPQUFPSCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDbkUsSUFBSTtJQUNGL0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0RBQXdELEVBQUV4QixHQUFHLENBQUNnRyxTQUFTLENBQUM7SUFFcEYsTUFBTXdMLFVBQVUsR0FBRyxDQUFDLENBQUN4UixHQUFHLENBQUMwRixJQUFJO0lBQzdCLE1BQU0rTCxjQUFjLEdBQUd6UixHQUFHLENBQUMyRyxXQUFXLElBQUszRyxHQUFHLENBQUN4QyxPQUFPLElBQUl3QyxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFjO0lBQ3BGLE1BQU0rTixhQUFhLEdBQUcxUixHQUFHLENBQUN4QyxPQUFPLElBQUl3QyxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO0lBRXZELElBQUlpTyxlQUFlLEdBQUcsSUFBSTtJQUMxQixJQUFJQyxtQkFBbUIsR0FBRyxJQUFJOztJQUU5QjtJQUNBLElBQUlOLFVBQVUsRUFBRTtNQUNkLElBQUk7UUFDRixNQUFNVixPQUFPLEdBQUdDLFdBQVc7UUFDM0IsSUFBSUMsaUJBQWlCLEdBQUcsQ0FBQztRQUN6QixLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLENBQUMsSUFBSUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFO1VBQ3RELElBQUlELFVBQVUsQ0FBQ3ROLE1BQU0sS0FBSzVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUMsRUFBRTtZQUNqRCxNQUFNNEUsTUFBTSxHQUFHOVEsRUFBRSxDQUFDd1EsT0FBTyxDQUFDQSxPQUFPLENBQUM3USxHQUFHLENBQUNnUixRQUFRLENBQUM7WUFDL0MsSUFBSUcsTUFBTSxFQUFFO2NBQ1ZBLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLENBQUM7Y0FDbkJMLGlCQUFpQixFQUFFO1lBQ3JCO1VBQ0Y7UUFDRjtRQUVBLE1BQU1uVCxJQUFJLENBQUN5VCxpQkFBaUIsQ0FBQ3RSLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxFQUFFO1VBQ3pDOUUsTUFBTSxFQUFFLFNBQVM7VUFDakIySCxVQUFVLEVBQUUsSUFBSWhHLElBQUksQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRnVPLGVBQWUsR0FBRztVQUNoQi9DLE9BQU8sRUFBRSxJQUFJO1VBQ2JrQztRQUNGLENBQUM7TUFDSCxDQUFDLENBQUMsT0FBT2UsUUFBUSxFQUFFO1FBQ2pCRixlQUFlLEdBQUc7VUFDaEIvQyxPQUFPLEVBQUUsS0FBSztVQUNkbFAsS0FBSyxFQUFFbVMsUUFBUSxDQUFDcFM7UUFDbEIsQ0FBQztNQUNIO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJOFIsY0FBYyxFQUFFO01BQ2xCLElBQUk7UUFDRixJQUFJQyxhQUFhLEVBQUU7VUFDakIsTUFBTS9LLFdBQVcsR0FBRyxNQUFNOUksSUFBSSxDQUFDMkksUUFBUSxDQUFDa0wsYUFBYSxDQUFDO1VBQ3REblEsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUVtRixXQUFXLEdBQUdBLFdBQVcsQ0FBQ2hCLFFBQVEsR0FBRyxTQUFTLENBQUM7O1VBRTdHO1VBQ0EsTUFBTW1MLE9BQU8sR0FBR0MsV0FBVztVQUMzQixJQUFJQyxpQkFBaUIsR0FBRyxDQUFDO1VBQ3pCLEtBQUssTUFBTSxDQUFDQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQyxJQUFJSixPQUFPLENBQUNLLE9BQU8sQ0FBQyxDQUFDLEVBQUU7WUFDdEQsSUFBSUQsVUFBVSxDQUFDdE4sTUFBTSxLQUFLOE4sYUFBYSxFQUFFO2NBQ3ZDLE1BQU1OLE1BQU0sR0FBRzlRLEVBQUUsQ0FBQ3dRLE9BQU8sQ0FBQ0EsT0FBTyxDQUFDN1EsR0FBRyxDQUFDZ1IsUUFBUSxDQUFDO2NBQy9DLElBQUlHLE1BQU0sRUFBRTtnQkFDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQztnQkFDbkJMLGlCQUFpQixFQUFFO2NBQ3JCO1lBQ0Y7VUFDRjtVQUNBelAsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0NBQW9Dd1AsaUJBQWlCLHFCQUFxQixDQUFDO1FBQ3pGOztRQUVBO1FBQ0EsTUFBTSxJQUFJckIsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO1VBQ3JDN1AsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbVUsT0FBTyxDQUFFclEsR0FBRyxJQUFLO1lBQzNCLElBQUlBLEdBQUcsRUFBRTtjQUNQdU8sTUFBTSxDQUFDdk8sR0FBRyxDQUFDO1lBQ2IsQ0FBQyxNQUFNO2NBQ0xzTyxPQUFPLENBQUMsQ0FBQztZQUNYO1VBQ0YsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDO1FBRUZrQyxtQkFBbUIsR0FBRztVQUNwQmhELE9BQU8sRUFBRSxJQUFJO1VBQ2I4QyxnQkFBZ0IsRUFBRTtRQUNwQixDQUFDO01BQ0gsQ0FBQyxDQUFDLE9BQU9JLFlBQVksRUFBRTtRQUNyQkYsbUJBQW1CLEdBQUc7VUFDcEJoRCxPQUFPLEVBQUUsS0FBSztVQUNkbFAsS0FBSyxFQUFFb1MsWUFBWSxDQUFDclM7UUFDdEIsQ0FBQztNQUNIO0lBQ0Y7SUFFQSxNQUFNc1MsY0FBYyxHQUFHLENBQUMsQ0FBQ0osZUFBZSxJQUFJQSxlQUFlLENBQUMvQyxPQUFPLE1BQzVDLENBQUNnRCxtQkFBbUIsSUFBSUEsbUJBQW1CLENBQUNoRCxPQUFPLENBQUM7SUFFM0V4SyxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUHNRLE9BQU8sRUFBRW1ELGNBQWM7TUFDdkJ0UyxPQUFPLEVBQUUsMkJBQTJCO01BQ3BDbUosSUFBSSxFQUFFLGlCQUFpQjtNQUN2QmpNLEdBQUcsRUFBRWdWLGVBQWU7TUFDcEJyVSxPQUFPLEVBQUVzVTtJQUNYLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPbFMsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsd0JBQXdCLEVBQUVBLEtBQUssQ0FBQztJQUM3QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQm9CLEtBQUssRUFBRSxxQ0FBcUM7TUFDNUM2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBeEMsR0FBRyxDQUFDNEMsR0FBRyxDQUFDLENBQUM3QixHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDcEIvQyxPQUFPLENBQUN1RixJQUFJLENBQUMsaURBQWlELEVBQUU7SUFBRTlELE1BQU0sRUFBRWhELEdBQUcsQ0FBQ2dELE1BQU07SUFBRXdCLEdBQUcsRUFBRXhFLEdBQUcsQ0FBQ3dFO0VBQUksQ0FBQyxDQUFDO0VBQ3JHeEcsTUFBTSxDQUFDOEksSUFBSSxDQUFDLFNBQVM5RyxHQUFHLENBQUNnRCxNQUFNLElBQUloRCxHQUFHLENBQUN3RSxHQUFHLEVBQUUsRUFBRTtJQUM1Q0MsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUUsRUFBRTtJQUNWQyxTQUFTLEVBQUUxRSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZO0VBQ2pDLENBQUMsQ0FBQztFQUVGcUUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO0lBQ25Cb0IsS0FBSyxFQUFFLG9CQUFvQjtJQUMzQm9GLElBQUksRUFBRWhGLEdBQUcsQ0FBQ3dFLEdBQUc7SUFDYnhCLE1BQU0sRUFBRWhELEdBQUcsQ0FBQ2dELE1BQU07SUFDbEJ2QixJQUFJLEVBQUU7RUFDUixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQXhDLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQ3dDLFlBQVksQ0FBQzs7QUFVckI7QUFDQSxJQUFJME0sV0FBVyxHQUFHLElBQUltQixHQUFHLENBQUMsQ0FBQzs7QUFFM0I7QUFDQSxJQUFJQyxlQUFlLEdBQUcsSUFBSUQsR0FBRyxDQUFDLENBQUM7O0FBRS9CO0FBQ0EsTUFBTUUsYUFBYSxHQUFHLElBQUlGLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFakM7QUFDQTVSLEVBQUUsQ0FBQ3VCLEdBQUcsQ0FBQyxDQUFDdVAsTUFBTSxFQUFFN00sSUFBSSxLQUFLO0VBQ3ZCO0VBQ0EsSUFBSSxDQUFDNk0sTUFBTSxDQUFDaUIsT0FBTyxDQUFDL04sR0FBRyxFQUFFO0lBQ3ZCOE0sTUFBTSxDQUFDaUIsT0FBTyxDQUFDL04sR0FBRyxHQUFHO01BQ25Cb0ssU0FBUyxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO01BQ25CNEQsU0FBUyxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO01BQ25CQyxTQUFTLEVBQUVBLENBQUEsS0FBTSxDQUFDLENBQUM7TUFDbkJDLEdBQUcsRUFBRUEsQ0FBQSxLQUFNLENBQUMsQ0FBQztNQUNiQyxXQUFXLEVBQUUsS0FBSztNQUNsQmhOLFVBQVUsRUFBRTtJQUNkLENBQUM7RUFDSDs7RUFFQTtFQUNBdkQsaUJBQWlCLENBQUNrUCxNQUFNLENBQUNpQixPQUFPLEVBQUVqQixNQUFNLENBQUNpQixPQUFPLENBQUMvTixHQUFHLEVBQUdoRCxHQUFHLElBQUs7SUFDN0QsSUFBSUEsR0FBRyxFQUFFO01BQ1BDLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQyx5Q0FBeUMsRUFBRTBCLEdBQUcsQ0FBQztNQUM3RCxPQUFPaUQsSUFBSSxDQUFDakQsR0FBRyxDQUFDO0lBQ2xCO0lBQ0FpRCxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBakUsRUFBRSxDQUFDdUIsR0FBRyxDQUFDLE9BQU91UCxNQUFNLEVBQUU3TSxJQUFJLEtBQUs7RUFDN0IsTUFBTTtJQUFFK0I7RUFBVSxDQUFDLEdBQUc4SyxNQUFNLENBQUNzQixTQUFTLENBQUNDLElBQUk7RUFDM0MsTUFBTW5WLE9BQU8sR0FBRzRULE1BQU0sQ0FBQ2lCLE9BQU8sQ0FBQzdVLE9BQU87RUFFdEMrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQywwRUFBMEUsQ0FBQztFQUN2RkQsT0FBTyxDQUFDQyxHQUFHLENBQUMseUJBQXlCLEVBQUU7SUFDckN3RSxTQUFTLEVBQUVvTCxNQUFNLENBQUNpQixPQUFPLENBQUNyTSxTQUFTO0lBQ25DRSxhQUFhLEVBQUUsQ0FBQyxDQUFDMUksT0FBTztJQUN4Qm1HLGFBQWEsRUFBRW5HLE9BQU8sRUFBRW1HLGFBQWE7SUFDckNDLE1BQU0sRUFBRXBHLE9BQU8sRUFBRW9HLE1BQU07SUFDdkIrQixRQUFRLEVBQUVuSSxPQUFPLEVBQUVtSSxRQUFRO0lBQzNCUyxJQUFJLEVBQUU1SSxPQUFPLEVBQUU0SSxJQUFJO0lBQ25Cd00saUJBQWlCLEVBQUUsQ0FBQyxDQUFDdE0sU0FBUztJQUM5QnVNLGdCQUFnQixFQUFFLENBQUMsQ0FBQ3JWLE9BQU8sRUFBRThJLFNBQVM7SUFDdEN3TSxLQUFLLEVBQUV4TSxTQUFTLElBQUk5SSxPQUFPLEVBQUU4SSxTQUFTLElBQUlBLFNBQVMsS0FBSzlJLE9BQU8sQ0FBQzhJO0VBQ2xFLENBQUMsQ0FBQztFQUVGL0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsOEJBQThCLEVBQUU7SUFDMUMwQixHQUFHLEVBQUVrTyxNQUFNLENBQUNpQixPQUFPLENBQUNyTSxTQUFTO0lBQzdCK00saUJBQWlCLEVBQUV6TSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztJQUNyRHNNLGdCQUFnQixFQUFFclYsT0FBTyxFQUFFOEksU0FBUyxFQUFFQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7SUFDN0Q3QixTQUFTLEVBQUUwTSxNQUFNLENBQUNpQixPQUFPLENBQUM3VSxPQUFPLEVBQUVrSCxTQUFTLEVBQUU2QixTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEtBQUs7SUFDdEVGLFNBQVMsRUFBRTdJLE9BQU8sRUFBRTZJLFNBQVM7SUFDN0JtSyxnQkFBZ0IsRUFBRWhULE9BQU8sRUFBRWdUO0VBQzdCLENBQUMsQ0FBQzs7RUFFRjtFQUNBLElBQUksQ0FBQ2hULE9BQU8sSUFBSSxDQUFDQSxPQUFPLENBQUNtRyxhQUFhLElBQUksQ0FBQ25HLE9BQU8sQ0FBQ29HLE1BQU0sRUFBRTtJQUN6RHJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdFQUFnRSxDQUFDO0lBQzdFRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRTtNQUNqQ3dFLFNBQVMsRUFBRW9MLE1BQU0sQ0FBQ2lCLE9BQU8sQ0FBQ3JNLFNBQVM7TUFDbkN4SSxPQUFPLEVBQUUsQ0FBQyxDQUFDQSxPQUFPO01BQ2xCbUcsYUFBYSxFQUFFbkcsT0FBTyxFQUFFbUcsYUFBYTtNQUNyQ0MsTUFBTSxFQUFFcEcsT0FBTyxFQUFFb0c7SUFDbkIsQ0FBQyxDQUFDO0lBQ0YsT0FBT1csSUFBSSxDQUFDLElBQUl5TyxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztFQUMzRDs7RUFFQTtFQUNBLElBQUksQ0FBQzFNLFNBQVMsSUFBSSxDQUFDOUksT0FBTyxDQUFDOEksU0FBUyxJQUFJQSxTQUFTLEtBQUs5SSxPQUFPLENBQUM4SSxTQUFTLEVBQUU7SUFDdkUvRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnRUFBZ0UsQ0FBQztJQUM3RUQsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLEVBQUU7TUFDOUN5UixRQUFRLEVBQUUzTSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztNQUM1QzJNLFFBQVEsRUFBRTFWLE9BQU8sQ0FBQzhJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO01BQ3BEdU0sS0FBSyxFQUFFeE0sU0FBUyxLQUFLOUksT0FBTyxDQUFDOEk7SUFDL0IsQ0FBQyxDQUFDO0lBQ0YsT0FBTy9CLElBQUksQ0FBQyxJQUFJeU8sS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7RUFDbEQ7RUFFQXpSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhDQUE4QyxDQUFDO0VBRTNELElBQUk7SUFDRjtJQUNBLE1BQU1rRSxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQ2hKLE9BQU8sQ0FBQ29HLE1BQU0sQ0FBQztJQUNoRCxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVG5FLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNEQUFzRCxDQUFDO01BQ25FLE9BQU8rQyxJQUFJLENBQUMsSUFBSXlPLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3JEOztJQUVBO0lBQ0EsTUFBTXBQLE1BQU0sR0FBR3BHLE9BQU8sQ0FBQ29HLE1BQU07SUFDN0IsTUFBTXVQLGVBQWUsR0FBR2hCLGVBQWUsQ0FBQ2xTLEdBQUcsQ0FBQzJELE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDeEQsTUFBTXdQLGtCQUFrQixHQUFHRCxlQUFlLEdBQUcsQ0FBQztJQUM5Q2hCLGVBQWUsQ0FBQ2tCLEdBQUcsQ0FBQ3pQLE1BQU0sRUFBRXdQLGtCQUFrQixDQUFDOztJQUUvQztJQUNBLElBQUkxTixJQUFJLENBQUM0TixRQUFRLENBQUMsQ0FBQyxFQUFFO01BQ25CL1IsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUU7UUFDNURvQyxNQUFNLEVBQUVBLE1BQU07UUFDZCtCLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCa0gsU0FBUyxFQUFFbkgsSUFBSSxDQUFDbUgsU0FBUztRQUN6QkMsVUFBVSxFQUFFcEgsSUFBSSxDQUFDb0g7TUFDbkIsQ0FBQyxDQUFDO01BQ0ZzRSxNQUFNLENBQUNtQyxJQUFJLENBQUMsUUFBUSxFQUFFO1FBQ3BCaEgsTUFBTSxFQUFFN0csSUFBSSxDQUFDbUgsU0FBUyxJQUFJLHNDQUFzQztRQUNoRVcsT0FBTyxFQUFFOUgsSUFBSSxDQUFDb0g7TUFDaEIsQ0FBQyxDQUFDO01BQ0YsT0FBT3ZJLElBQUksQ0FBQyxJQUFJeU8sS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDMUM7O0lBRUE7SUFDQSxNQUFNNUUsT0FBTyxHQUFHMUksSUFBSSxDQUFDMEksT0FBTyxDQUFDLENBQUM7SUFDOUI3TSxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRTtNQUFFbUUsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7TUFBRXlJLE9BQU87TUFBRUQsV0FBVyxFQUFFekksSUFBSSxDQUFDeUk7SUFBWSxDQUFDLENBQUM7O0lBRWhIO0lBQ0EsTUFBTXFGLFlBQVksR0FBRyxNQUFNM1YsSUFBSSxDQUFDNFYsZ0JBQWdCLENBQzlDO01BQUVoTixHQUFHLEVBQUU3QztJQUFPLENBQUMsRUFDZjtNQUNFOFAsSUFBSSxFQUFFO1FBQ0ovUixNQUFNLEVBQUV5UixrQkFBa0IsR0FBRyxDQUFDLEdBQUcsUUFBUSxHQUFHLFNBQVM7UUFDckQ5SixVQUFVLEVBQUUsSUFBSWhHLElBQUksQ0FBQztNQUN2QjtJQUNGLENBQUMsRUFDRDtNQUNFcVEsR0FBRyxFQUFFLElBQUk7TUFDVEMsYUFBYSxFQUFFO0lBQ2pCLENBQ0YsQ0FBQztJQUVELElBQUlKLFlBQVksRUFBRTtNQUNoQmpTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QmtFLElBQUksQ0FBQ0MsUUFBUSx1Q0FBdUN5TixrQkFBa0IsR0FBRyxDQUFDO01BQzlHcFYsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLCtDQUErQyxFQUFFO1FBQzNENUIsTUFBTSxFQUFFQSxNQUFNO1FBQ2QrQixRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QmtPLFdBQVcsRUFBRVQsa0JBQWtCO1FBQy9CbkMsUUFBUSxFQUFFRyxNQUFNLENBQUM5TCxFQUFFO1FBQ25CakgsU0FBUyxFQUFFLElBQUlpRixJQUFJLENBQUM7TUFDdEIsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQW9DLElBQUksQ0FBQy9ELE1BQU0sR0FBRzZSLFlBQVksR0FBR0EsWUFBWSxDQUFDN1IsTUFBTSxHQUFHLFFBQVE7SUFDM0QrRCxJQUFJLENBQUM0RCxVQUFVLEdBQUdrSyxZQUFZLEdBQUdBLFlBQVksQ0FBQ2xLLFVBQVUsR0FBRyxJQUFJaEcsSUFBSSxDQUFDLENBQUM7O0lBRXJFO0lBQ0E4TixNQUFNLENBQUN4TixNQUFNLEdBQUdwRyxPQUFPLENBQUNvRyxNQUFNO0lBQzlCd04sTUFBTSxDQUFDekwsUUFBUSxHQUFHbkksT0FBTyxDQUFDbUksUUFBUTtJQUNsQ3lMLE1BQU0sQ0FBQ2hMLElBQUksR0FBRzVJLE9BQU8sQ0FBQzRJLElBQUksSUFBSSxRQUFRO0lBQ3RDN0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0NBQXdDNFAsTUFBTSxDQUFDekwsUUFBUSxhQUFheUwsTUFBTSxDQUFDeE4sTUFBTSxHQUFHLENBQUM7SUFDakdyQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztJQUMvQyxPQUFPK0MsSUFBSSxDQUFDLENBQUM7RUFFZixDQUFDLENBQUMsT0FBTzNFLEtBQUssRUFBRTtJQUNkMkIsT0FBTyxDQUFDM0IsS0FBSyxDQUFDLGdDQUFnQyxFQUFFQSxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUM5RDNCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx1QkFBdUJBLEtBQUssQ0FBQ0QsT0FBTyxFQUFFLEVBQUU7TUFDbkRzUixRQUFRLEVBQUVHLE1BQU0sQ0FBQzlMLEVBQUU7TUFDbkJVLFNBQVMsRUFBRXhJLE9BQU8sRUFBRThILEVBQUU7TUFDdEJiLEVBQUUsRUFBRTJNLE1BQU0sQ0FBQ3NCLFNBQVMsQ0FBQ29CO0lBQ3ZCLENBQUMsQ0FBQztJQUNGLE9BQU92UCxJQUFJLENBQUMsSUFBSXlPLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0VBQ3hEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBLFNBQVNlLDBCQUEwQkEsQ0FBQSxFQUFHO0VBQ3BDLE1BQU14USxHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFDdEIsTUFBTXlRLE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQzs7RUFFdkIsS0FBSyxNQUFNLENBQUMvQyxRQUFRLEVBQUV2TCxJQUFJLENBQUMsSUFBSXFMLFdBQVcsQ0FBQ0ksT0FBTyxDQUFDLENBQUMsRUFBRTtJQUNwRCxJQUFJNU4sR0FBRyxHQUFHbUMsSUFBSSxDQUFDdU8sYUFBYSxHQUFHRCxPQUFPLEVBQUU7TUFDdEN6UyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx5Q0FBeUNrRSxJQUFJLENBQUNDLFFBQVEsRUFBRSxDQUFDOztNQUVyRTtNQUNBLE1BQU15TCxNQUFNLEdBQUc5USxFQUFFLENBQUN3USxPQUFPLENBQUNBLE9BQU8sQ0FBQzdRLEdBQUcsQ0FBQ2dSLFFBQVEsQ0FBQztNQUMvQyxJQUFJRyxNQUFNLEVBQUU7UUFDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDO01BQ3pCOztNQUVBO01BQ0EsTUFBTTZDLGVBQWUsR0FBRyxDQUFDL0IsZUFBZSxDQUFDbFMsR0FBRyxDQUFDeUYsSUFBSSxDQUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDbkV1TyxlQUFlLENBQUNrQixHQUFHLENBQUMzTixJQUFJLENBQUM5QixNQUFNLEVBQUVnSSxJQUFJLENBQUN0TSxHQUFHLENBQUMsQ0FBQyxFQUFFNFUsZUFBZSxDQUFDLENBQUM7O01BRTlEO01BQ0EsSUFBSUEsZUFBZSxJQUFJLENBQUMsRUFBRTtRQUN4QnJXLElBQUksQ0FBQ3lULGlCQUFpQixDQUFDNUwsSUFBSSxDQUFDOUIsTUFBTSxFQUFFO1VBQ2xDakMsTUFBTSxFQUFFLFNBQVM7VUFDakIySCxVQUFVLEVBQUUsSUFBSWhHLElBQUksQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQzZRLEtBQUssQ0FBQzdTLEdBQUcsSUFBSXRELE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRTBCLEdBQUcsQ0FBQyxDQUFDO1FBRXZFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxXQUFXa0UsSUFBSSxDQUFDQyxRQUFRLDBDQUEwQyxDQUFDO1FBQy9FM0gsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLG1EQUFtRCxFQUFFO1VBQy9ENUIsTUFBTSxFQUFFOEIsSUFBSSxDQUFDOUIsTUFBTTtVQUNuQitCLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1VBQ3ZCc0wsUUFBUSxFQUFFQTtRQUNaLENBQUMsQ0FBQztNQUNKO01BRUFGLFdBQVcsQ0FBQ3FELE1BQU0sQ0FBQ25ELFFBQVEsQ0FBQztJQUM5QjtFQUNGO0FBQ0Y7O0FBRUE7QUFDQSxJQUFJMVIsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLEVBQUU7RUFDbkM0VSxXQUFXLENBQUNOLDBCQUEwQixFQUFFLEtBQUssQ0FBQztBQUNoRDtBQUVBelQsRUFBRSxDQUFDZSxFQUFFLENBQUMsWUFBWSxFQUFFLE1BQU8rUCxNQUFNLElBQUs7RUFDcEM3UCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztFQUMvQ0QsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVzRQLE1BQU0sQ0FBQ3pMLFFBQVEsWUFBWSxDQUFDOztFQUVuRDtFQUNBb0wsV0FBVyxDQUFDc0MsR0FBRyxDQUFDakMsTUFBTSxDQUFDOUwsRUFBRSxFQUFFO0lBQ3pCMUIsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE4sTUFBTTtJQUNyQitCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7SUFDekJTLElBQUksRUFBRWdMLE1BQU0sQ0FBQ2hMLElBQUk7SUFDakJrTyxJQUFJLEVBQUUsSUFBSTtJQUNWTCxhQUFhLEVBQUUzUSxJQUFJLENBQUNDLEdBQUcsQ0FBQztFQUMxQixDQUFDLENBQUM7O0VBRUY7RUFDQWhDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlDQUFpQ3VQLFdBQVcsQ0FBQ3dELElBQUksdUJBQXVCbkQsTUFBTSxDQUFDekwsUUFBUSxFQUFFLENBQUM7O0VBRXRHO0VBQ0F5TCxNQUFNLENBQUMvUCxFQUFFLENBQUMsV0FBVyxFQUFFLE1BQU07SUFDM0IsTUFBTXFFLElBQUksR0FBR3FMLFdBQVcsQ0FBQzlRLEdBQUcsQ0FBQ21SLE1BQU0sQ0FBQzlMLEVBQUUsQ0FBQztJQUN2QyxJQUFJSSxJQUFJLEVBQUU7TUFDUixNQUFNbkMsR0FBRyxHQUFHRCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO01BQ3RCbUMsSUFBSSxDQUFDdU8sYUFBYSxHQUFHMVEsR0FBRztNQUN4QmhDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1DQUFtQzRQLE1BQU0sQ0FBQ3pMLFFBQVEsT0FBTyxJQUFJckMsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQ3NELFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNyRyxDQUFDLE1BQU07TUFDTDdJLE1BQU0sQ0FBQzhJLElBQUksQ0FBQywyQ0FBMkNzSyxNQUFNLENBQUM5TCxFQUFFLEVBQUUsQ0FBQztJQUNyRTtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBLE1BQU1rUCxlQUFlLEdBQUdBLENBQUEsS0FBTTtJQUM1QixNQUFNOU8sSUFBSSxHQUFHcUwsV0FBVyxDQUFDOVEsR0FBRyxDQUFDbVIsTUFBTSxDQUFDOUwsRUFBRSxDQUFDO0lBQ3ZDLElBQUlJLElBQUksRUFBRTtNQUNSQSxJQUFJLENBQUN1TyxhQUFhLEdBQUczUSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDO0VBQ0YsQ0FBQzs7RUFFRDtFQUNBLE1BQU1rUixpQkFBaUIsR0FBR0osV0FBVyxDQUFDLE1BQU07SUFDMUMsSUFBSWpELE1BQU0sQ0FBQ3NELFNBQVMsRUFBRTtNQUNwQnRELE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNsQztFQUNGLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDOztFQUVYO0VBQ0FuQyxNQUFNLENBQUMvUCxFQUFFLENBQUMsWUFBWSxFQUFFLE1BQU07SUFDNUJzVCxhQUFhLENBQUNGLGlCQUFpQixDQUFDO0lBQ2hDO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsTUFBTUcsc0JBQXNCLEdBQUcsTUFBQUEsQ0FBT0MsU0FBUyxFQUFFQyxPQUFPLEdBQUcsQ0FBQyxLQUFLO0lBQy9ELEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxJQUFJRCxPQUFPLEVBQUVDLENBQUMsRUFBRSxFQUFFO01BQ2pDLElBQUk7UUFDRixPQUFPLE1BQU1GLFNBQVMsQ0FBQyxDQUFDO01BQzFCLENBQUMsQ0FBQyxPQUFPalYsS0FBSyxFQUFFO1FBQ2QsSUFBSW1WLENBQUMsS0FBS0QsT0FBTyxFQUFFLE1BQU1sVixLQUFLO1FBQzlCNUIsTUFBTSxDQUFDOEksSUFBSSxDQUFDLG9DQUFvQ2lPLENBQUMsR0FBRyxDQUFDLElBQUlELE9BQU8sR0FBRyxFQUFFbFYsS0FBSyxDQUFDRCxPQUFPLENBQUM7UUFDbkYsTUFBTSxJQUFJZ1EsT0FBTyxDQUFDQyxPQUFPLElBQUlvRixVQUFVLENBQUNwRixPQUFPLEVBQUUsR0FBRyxJQUFJbUYsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ3BFO0lBQ0Y7RUFDRixDQUFDO0VBRUQzRCxNQUFNLENBQUMvUCxFQUFFLENBQUMsV0FBVyxFQUFFLE1BQU80VCxJQUFJLElBQUs7SUFDckNULGVBQWUsQ0FBQyxDQUFDO0lBQ2pCLE1BQU07TUFBRUY7SUFBSyxDQUFDLEdBQUdXLElBQUk7SUFDckIsSUFBSSxDQUFDWCxJQUFJLEVBQUU7TUFDVHRXLE1BQU0sQ0FBQzhJLElBQUksQ0FBQyxxQ0FBcUMsRUFBRTtRQUNqRGxELE1BQU0sRUFBRXdOLE1BQU0sQ0FBQ3hOLE1BQU07UUFDckIrQixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TDtNQUNuQixDQUFDLENBQUM7TUFDRnlMLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDbkI1VCxPQUFPLEVBQUUsdUJBQXVCO1FBQ2hDOEIsSUFBSSxFQUFFLGNBQWM7UUFDcEJwRCxTQUFTLEVBQUUsSUFBSWlGLElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUM7TUFDcEMsQ0FBQyxDQUFDO01BQ0Y7SUFDRjtJQUVBLElBQUksT0FBT3lOLElBQUksS0FBSyxRQUFRLElBQUlBLElBQUksQ0FBQ3JJLElBQUksQ0FBQyxDQUFDLENBQUN3QyxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3hEelEsTUFBTSxDQUFDOEksSUFBSSxDQUFDLHVDQUF1QyxFQUFFO1FBQ25EbEQsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE4sTUFBTTtRQUNyQitCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7UUFDekIyTztNQUNGLENBQUMsQ0FBQztNQUNGbEQsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQjVULE9BQU8sRUFBRSwwQkFBMEI7UUFDbkM4QixJQUFJLEVBQUUscUJBQXFCO1FBQzNCcEQsU0FBUyxFQUFFLElBQUlpRixJQUFJLENBQUMsQ0FBQyxDQUFDdUQsV0FBVyxDQUFDO01BQ3BDLENBQUMsQ0FBQztNQUNGO0lBQ0Y7SUFFQSxJQUFJO01BQ0YsTUFBTStOLHNCQUFzQixDQUFDLFlBQVk7UUFDdkM7UUFDQSxNQUFNaEUsT0FBTyxHQUFHLE1BQU03UyxPQUFPLENBQUNrUixPQUFPLENBQUM7VUFBRTNKLEVBQUUsRUFBRWdQO1FBQUssQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQzFELE9BQU8sRUFBRTtVQUNaNVMsTUFBTSxDQUFDOEksSUFBSSxDQUFDLHFDQUFxQyxFQUFFO1lBQ2pEbEQsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE4sTUFBTTtZQUNyQitCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7WUFDekIyTztVQUNGLENBQUMsQ0FBQztVQUNGbEQsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNuQjVULE9BQU8sRUFBRSxZQUFZMlUsSUFBSSxhQUFhO1lBQ3RDN1MsSUFBSSxFQUFFLG1CQUFtQjtZQUN6QjZTLElBQUk7WUFDSmpXLFNBQVMsRUFBRSxJQUFJaUYsSUFBSSxDQUFDLENBQUMsQ0FBQ3VELFdBQVcsQ0FBQztVQUNwQyxDQUFDLENBQUM7VUFDRixNQUFNLElBQUltTSxLQUFLLENBQUMsbUJBQW1CLENBQUM7UUFDdEM7O1FBRUE7UUFDQSxJQUFJNUIsTUFBTSxDQUFDa0QsSUFBSSxFQUFFO1VBQ2ZsRCxNQUFNLENBQUM4RCxLQUFLLENBQUM5RCxNQUFNLENBQUNrRCxJQUFJLENBQUM7VUFDekJ2RCxXQUFXLENBQUNzQyxHQUFHLENBQUNqQyxNQUFNLENBQUM5TCxFQUFFLEVBQUU7WUFBRSxHQUFHeUwsV0FBVyxDQUFDOVEsR0FBRyxDQUFDbVIsTUFBTSxDQUFDOUwsRUFBRSxDQUFDO1lBQUVnUCxJQUFJLEVBQUU7VUFBSyxDQUFDLENBQUM7O1VBRXpFO1VBQ0EsTUFBTWEsaUJBQWlCLEdBQUdDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUN2RDBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUtsRCxNQUFNLENBQUNrRCxJQUFJLENBQUMsQ0FDbkN6UCxHQUFHLENBQUMwUSxDQUFDLEtBQUs7WUFBRTVQLFFBQVEsRUFBRTRQLENBQUMsQ0FBQzVQLFFBQVE7WUFBRVMsSUFBSSxFQUFFbVAsQ0FBQyxDQUFDblA7VUFBSyxDQUFDLENBQUMsQ0FBQztVQUNyRDlGLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsY0FBYyxFQUFFNEIsaUJBQWlCLENBQUM7UUFDNUQ7UUFFQS9ELE1BQU0sQ0FBQ2tELElBQUksR0FBR0EsSUFBSTtRQUNsQmxELE1BQU0sQ0FBQ3FFLElBQUksQ0FBQ3JFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQzs7UUFFeEI7UUFDQXZELFdBQVcsQ0FBQ3NDLEdBQUcsQ0FBQ2pDLE1BQU0sQ0FBQzlMLEVBQUUsRUFBRTtVQUN6QixHQUFHeUwsV0FBVyxDQUFDOVEsR0FBRyxDQUFDbVIsTUFBTSxDQUFDOUwsRUFBRSxDQUFDO1VBQzdCZ1AsSUFBSSxFQUFFbEQsTUFBTSxDQUFDa0Q7UUFDZixDQUFDLENBQUM7UUFFRnRXLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSxnQkFBZ0J5TCxNQUFNLENBQUNrRCxJQUFJLEVBQUUsQ0FBQzs7UUFFakU7UUFDQSxNQUFNb0IsV0FBVyxHQUFHLElBQUk1WCxPQUFPLENBQUM7VUFDOUI2WCxNQUFNLEVBQUUsUUFBUTtVQUNoQi9FLE9BQU8sRUFBRVEsTUFBTSxDQUFDa0QsSUFBSTtVQUNwQnNCLElBQUksRUFBRSxHQUFHeEUsTUFBTSxDQUFDekwsUUFBUSxzQkFBc0I7VUFDOUNtRCxJQUFJLEVBQUU7UUFDUixDQUFDLENBQUM7UUFDRixNQUFNNE0sV0FBVyxDQUFDeEksSUFBSSxDQUFDLENBQUM7UUFFeEI1TSxFQUFFLENBQUNrVixFQUFFLENBQUNwRSxNQUFNLENBQUNrRCxJQUFJLENBQUMsQ0FBQ2YsSUFBSSxDQUFDLFNBQVMsRUFBRTtVQUNqQ29DLE1BQU0sRUFBRUQsV0FBVyxDQUFDQyxNQUFNO1VBQzFCL0UsT0FBTyxFQUFFOEUsV0FBVyxDQUFDOUUsT0FBTztVQUM1QmdGLElBQUksRUFBRUYsV0FBVyxDQUFDRSxJQUFJO1VBQ3RCOU0sSUFBSSxFQUFFNE0sV0FBVyxDQUFDNU0sSUFBSTtVQUN0QnpLLFNBQVMsRUFBRXFYLFdBQVcsQ0FBQ3JYO1FBQ3pCLENBQUMsQ0FBQzs7UUFFRjtRQUNBLE1BQU13WCxTQUFTLEdBQUdULEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUMvQzBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUtsRCxNQUFNLENBQUNrRCxJQUFJLENBQUMsQ0FDbkN6UCxHQUFHLENBQUMwUSxDQUFDLEtBQUs7VUFBRTVQLFFBQVEsRUFBRTRQLENBQUMsQ0FBQzVQLFFBQVE7VUFBRVMsSUFBSSxFQUFFbVAsQ0FBQyxDQUFDblA7UUFBSyxDQUFDLENBQUMsQ0FBQztRQUNyRDlGLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsY0FBYyxFQUFFc0MsU0FBUyxDQUFDOztRQUVsRDtRQUNBLE1BQU1DLE9BQU8sR0FBRyxNQUFNaFksT0FBTyxDQUFDc04sSUFBSSxDQUFDO1VBQ2pDd0YsT0FBTyxFQUFFUSxNQUFNLENBQUNrRCxJQUFJO1VBQ3BCcEYsR0FBRyxFQUFFLENBQ0g7WUFBRXBHLElBQUksRUFBRTtVQUFTLENBQUMsRUFDbEI7WUFBRUEsSUFBSSxFQUFFO1VBQVMsQ0FBQyxFQUNsQjtZQUFFNk0sTUFBTSxFQUFFdkUsTUFBTSxDQUFDekw7VUFBUyxDQUFDLEVBQzNCO1lBQUVvUSxNQUFNLEVBQUUzRSxNQUFNLENBQUN6TDtVQUFTLENBQUM7UUFFL0IsQ0FBQyxDQUFDLENBQ0MyRixJQUFJLENBQUM7VUFBRWpOLFNBQVMsRUFBRSxDQUFDO1FBQUUsQ0FBQyxDQUFDLENBQ3ZCeUQsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUNWd0osSUFBSSxDQUFDO1VBQUVqTixTQUFTLEVBQUU7UUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDOztRQUUzQitTLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxTQUFTLEVBQUV1QyxPQUFPLENBQUNqUixHQUFHLENBQUNzRixHQUFHLEtBQUs7VUFDekN3TCxNQUFNLEVBQUV4TCxHQUFHLENBQUN3TCxNQUFNO1VBQ2xCckIsSUFBSSxFQUFFbkssR0FBRyxDQUFDeUcsT0FBTztVQUNqQmdGLElBQUksRUFBRXpMLEdBQUcsQ0FBQ3lMLElBQUk7VUFDZDlNLElBQUksRUFBRXFCLEdBQUcsQ0FBQ3JCLElBQUk7VUFDZGlOLE1BQU0sRUFBRTVMLEdBQUcsQ0FBQzRMLE1BQU07VUFDbEIxWCxTQUFTLEVBQUU4TCxHQUFHLENBQUM5TDtRQUNqQixDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ04sQ0FBQyxDQUFDO0lBRUosQ0FBQyxDQUFDLE9BQU91QixLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRUEsS0FBSyxDQUFDO01BQ3hEd1IsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQjVULE9BQU8sRUFBRSw2Q0FBNkM7UUFDdEQ4QixJQUFJLEVBQUUsa0JBQWtCO1FBQ3hCcEQsU0FBUyxFQUFFLElBQUlpRixJQUFJLENBQUMsQ0FBQyxDQUFDdUQsV0FBVyxDQUFDO01BQ3BDLENBQUMsQ0FBQztJQUNKO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0F1SyxNQUFNLENBQUMvUCxFQUFFLENBQUMsYUFBYSxFQUFFLFlBQVk7SUFDbkMsSUFBSSxDQUFDK1AsTUFBTSxDQUFDa0QsSUFBSSxFQUFFO01BQ2hCbEQsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUM7TUFDMUI7SUFDRjtJQUVBLElBQUk7TUFDRixNQUFNdUMsT0FBTyxHQUFHLE1BQU1oWSxPQUFPLENBQUNzTixJQUFJLENBQUM7UUFDakN3RixPQUFPLEVBQUVRLE1BQU0sQ0FBQ2tELElBQUk7UUFDcEJwRixHQUFHLEVBQUUsQ0FDSDtVQUFFcEcsSUFBSSxFQUFFO1FBQVMsQ0FBQyxFQUNsQjtVQUFFQSxJQUFJLEVBQUU7UUFBUyxDQUFDLEVBQ2xCO1VBQUU2TSxNQUFNLEVBQUV2RSxNQUFNLENBQUN6TDtRQUFTLENBQUMsRUFDM0I7VUFBRW9RLE1BQU0sRUFBRTNFLE1BQU0sQ0FBQ3pMO1FBQVMsQ0FBQztNQUUvQixDQUFDLENBQUMsQ0FDQzJGLElBQUksQ0FBQztRQUFFak4sU0FBUyxFQUFFLENBQUM7TUFBRSxDQUFDLENBQUMsQ0FDdkJ5RCxLQUFLLENBQUMsR0FBRyxDQUFDLENBQ1Z3SixJQUFJLENBQUM7UUFBRWpOLFNBQVMsRUFBRTtNQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7O01BRTNCK1MsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLFNBQVMsRUFBRXVDLE9BQU8sQ0FBQ2pSLEdBQUcsQ0FBQ3NGLEdBQUcsS0FBSztRQUN6Q3dMLE1BQU0sRUFBRXhMLEdBQUcsQ0FBQ3dMLE1BQU07UUFDbEJyQixJQUFJLEVBQUVuSyxHQUFHLENBQUN5RyxPQUFPO1FBQUU7UUFDbkJnRixJQUFJLEVBQUV6TCxHQUFHLENBQUN5TCxJQUFJO1FBQ2Q5TSxJQUFJLEVBQUVxQixHQUFHLENBQUNyQixJQUFJO1FBQ2RpTixNQUFNLEVBQUU1TCxHQUFHLENBQUM0TCxNQUFNO1FBQ2xCMVgsU0FBUyxFQUFFOEwsR0FBRyxDQUFDOUw7TUFDakIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxPQUFPdUIsS0FBSyxFQUFFO01BQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsd0JBQXdCLEVBQUVBLEtBQUssQ0FBQztNQUM3Q3dSLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFBRTVULE9BQU8sRUFBRTtNQUFpQyxDQUFDLENBQUM7SUFDckU7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQXlSLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTzRULElBQUksSUFBSztJQUNuQ1QsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDcEQsTUFBTSxDQUFDa0QsSUFBSSxJQUFJLENBQUNXLElBQUksQ0FBQ1csSUFBSSxFQUFFM0osSUFBSSxDQUFDLENBQUMsRUFBRTs7SUFFeEM7SUFDQSxNQUFNK0osV0FBVyxHQUFHLE1BQU1uWSxJQUFJLENBQUMySSxRQUFRLENBQUM0SyxNQUFNLENBQUN4TixNQUFNLENBQUM7SUFDdEQsSUFBSW9TLFdBQVcsSUFBSUEsV0FBVyxDQUFDNUgsT0FBTyxDQUFDLENBQUMsRUFBRTtNQUN4Q2dELE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDbkI1VCxPQUFPLEVBQUUsd0NBQXdDO1FBQ2pEOEIsSUFBSSxFQUFFLFlBQVk7UUFDbEIwTSxXQUFXLEVBQUU2SCxXQUFXLENBQUM3SDtNQUMzQixDQUFDLENBQUM7TUFDRjtJQUNGO0lBRUEsSUFBSTtNQUNGLE1BQU14TyxPQUFPLEdBQUcsSUFBSTdCLE9BQU8sQ0FBQztRQUMxQjZYLE1BQU0sRUFBRXZFLE1BQU0sQ0FBQ3pMLFFBQVE7UUFDdkJpTCxPQUFPLEVBQUVRLE1BQU0sQ0FBQ2tELElBQUk7UUFDcEJzQixJQUFJLEVBQUVYLElBQUksQ0FBQ1csSUFBSSxDQUFDM0osSUFBSSxDQUFDLENBQUM7UUFDdEJuRCxJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7TUFFRixNQUFNbkosT0FBTyxDQUFDdU4sSUFBSSxDQUFDLENBQUM7TUFFcEIsTUFBTStJLFdBQVcsR0FBRztRQUNsQk4sTUFBTSxFQUFFaFcsT0FBTyxDQUFDZ1csTUFBTTtRQUN0QnJCLElBQUksRUFBRTNVLE9BQU8sQ0FBQ2lSLE9BQU87UUFBRTtRQUN2QmdGLElBQUksRUFBRWpXLE9BQU8sQ0FBQ2lXLElBQUk7UUFDbEJ2WCxTQUFTLEVBQUVzQixPQUFPLENBQUN0QixTQUFTO1FBQzVCc0QsTUFBTSxFQUFFLFdBQVc7UUFDbkJtSCxJQUFJLEVBQUVuSixPQUFPLENBQUNtSjtNQUNoQixDQUFDO01BRUR4SSxFQUFFLENBQUNrVixFQUFFLENBQUNwRSxNQUFNLENBQUNrRCxJQUFJLENBQUMsQ0FBQ2YsSUFBSSxDQUFDLFNBQVMsRUFBRTBDLFdBQVcsQ0FBQztNQUMvQ2pZLE1BQU0sQ0FBQ2tZLEtBQUssQ0FBQyxzQkFBc0I5RSxNQUFNLENBQUN6TCxRQUFRLE9BQU95TCxNQUFNLENBQUNrRCxJQUFJLEVBQUUsQ0FBQztJQUN6RSxDQUFDLENBQUMsT0FBTzFVLEtBQUssRUFBRTtNQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7TUFDNUN3UixNQUFNLENBQUNtQyxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQUU1VCxPQUFPLEVBQUU7TUFBeUIsQ0FBQyxDQUFDO0lBQzdEO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0F5UixNQUFNLENBQUMvUCxFQUFFLENBQUMsaUJBQWlCLEVBQUUsTUFBTzRULElBQUksSUFBSztJQUMzQ1QsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDcEQsTUFBTSxDQUFDa0QsSUFBSSxJQUFJLENBQUNXLElBQUksQ0FBQ08sRUFBRSxJQUFJLENBQUNQLElBQUksQ0FBQ1csSUFBSSxFQUFFM0osSUFBSSxDQUFDLENBQUMsRUFBRTtJQUVwRCxNQUFNa0ssV0FBVyxHQUFHbEIsSUFBSSxDQUFDVyxJQUFJLENBQUMzSixJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNbUssY0FBYyxHQUFHbkIsSUFBSSxDQUFDTyxFQUFFLENBQUN2SixJQUFJLENBQUMsQ0FBQztJQUVyQyxJQUFJO01BQ0ZqTyxNQUFNLENBQUNrWSxLQUFLLENBQUMsZ0NBQWdDOUUsTUFBTSxDQUFDekwsUUFBUSxPQUFPeVEsY0FBYyxFQUFFLEVBQUU7UUFDbkZDLFVBQVUsRUFBRWpGLE1BQU0sQ0FBQ2tELElBQUk7UUFDdkJnQyxjQUFjLEVBQUVsRixNQUFNLENBQUM5TCxFQUFFO1FBQ3pCMUIsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE47TUFDakIsQ0FBQyxDQUFDOztNQUVGO01BQ0EsSUFBSXdTLGNBQWMsQ0FBQzNILE1BQU0sS0FBSyxDQUFDLElBQUkySCxjQUFjLENBQUMzSCxNQUFNLEdBQUcsRUFBRSxFQUFFO1FBQzdEMkMsTUFBTSxDQUFDbUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtVQUNuQjVULE9BQU8sRUFBRSw4QkFBOEI7VUFDdkM4QixJQUFJLEVBQUU7UUFDUixDQUFDLENBQUM7UUFDRjtNQUNGOztNQUVBO01BQ0EsSUFBSTJVLGNBQWMsS0FBS2hGLE1BQU0sQ0FBQ3pMLFFBQVEsRUFBRTtRQUN0Q3lMLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxPQUFPLEVBQUU7VUFDbkI1VCxPQUFPLEVBQUUseUNBQXlDO1VBQ2xEOEIsSUFBSSxFQUFFO1FBQ1IsQ0FBQyxDQUFDO1FBQ0Y7TUFDRjs7TUFFQTtNQUNBLE1BQU04VSxVQUFVLEdBQUduQixLQUFLLENBQUNDLElBQUksQ0FBQ3RFLFdBQVcsQ0FBQ25NLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQ3dHLElBQUksQ0FDdERtSyxDQUFDLElBQUlBLENBQUMsQ0FBQzVQLFFBQVEsS0FBS3lRLGNBQWMsSUFBSWIsQ0FBQyxDQUFDakIsSUFBSSxLQUFLbEQsTUFBTSxDQUFDa0QsSUFDMUQsQ0FBQztNQUVEdFcsTUFBTSxDQUFDa1ksS0FBSyxDQUFDLDRDQUE0Q0UsY0FBYyxFQUFFLEVBQUU7UUFDekVJLFdBQVcsRUFBRSxDQUFDLENBQUNELFVBQVU7UUFDekJFLFVBQVUsRUFBRUYsVUFBVSxFQUFFakMsSUFBSTtRQUM1QitCLFVBQVUsRUFBRWpGLE1BQU0sQ0FBQ2tELElBQUk7UUFDdkJvQyxpQkFBaUIsRUFBRXRCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUNoRDBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUtsRCxNQUFNLENBQUNrRCxJQUFJLENBQUMsQ0FDbkN6UCxHQUFHLENBQUMwUSxDQUFDLEtBQUs7VUFBRTVQLFFBQVEsRUFBRTRQLENBQUMsQ0FBQzVQLFFBQVE7VUFBRTJPLElBQUksRUFBRWlCLENBQUMsQ0FBQ2pCO1FBQUssQ0FBQyxDQUFDO01BQ3RELENBQUMsQ0FBQztNQUVGLElBQUksQ0FBQ2lDLFVBQVUsRUFBRTtRQUNmO1FBQ0EsTUFBTUksdUJBQXVCLEdBQUd2QixLQUFLLENBQUNDLElBQUksQ0FBQ3RFLFdBQVcsQ0FBQ25NLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FDN0QwUSxNQUFNLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDakIsSUFBSSxLQUFLbEQsTUFBTSxDQUFDa0QsSUFBSSxDQUFDLENBQ25DelAsR0FBRyxDQUFDMFEsQ0FBQyxJQUFJQSxDQUFDLENBQUM1UCxRQUFRLENBQUM7UUFFdkJ5TCxNQUFNLENBQUNtQyxJQUFJLENBQUMsT0FBTyxFQUFFO1VBQ25CNVQsT0FBTyxFQUFFLFNBQVN5VyxjQUFjLHdEQUF3RE8sdUJBQXVCLENBQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksTUFBTSxFQUFFO1VBQ3RJaFUsSUFBSSxFQUFFLHlCQUF5QjtVQUMvQnNVLE1BQU0sRUFBRUssY0FBYztVQUN0QlEsY0FBYyxFQUFFRCx1QkFBdUI7VUFDdkNOLFVBQVUsRUFBRWpGLE1BQU0sQ0FBQ2tEO1FBQ3JCLENBQUMsQ0FBQztRQUNGO01BQ0Y7O01BRUE7TUFDQSxNQUFNM1UsT0FBTyxHQUFHLElBQUk3QixPQUFPLENBQUM7UUFDMUI2WCxNQUFNLEVBQUV2RSxNQUFNLENBQUN6TCxRQUFRO1FBQ3ZCaUwsT0FBTyxFQUFFUSxNQUFNLENBQUNrRCxJQUFJO1FBQ3BCc0IsSUFBSSxFQUFFTyxXQUFXO1FBQ2pCck4sSUFBSSxFQUFFLFNBQVM7UUFDZmlOLE1BQU0sRUFBRUs7TUFDVixDQUFDLENBQUM7TUFDRixNQUFNelcsT0FBTyxDQUFDdU4sSUFBSSxDQUFDLENBQUM7TUFFcEIsTUFBTStJLFdBQVcsR0FBRztRQUNsQk4sTUFBTSxFQUFFaFcsT0FBTyxDQUFDZ1csTUFBTTtRQUN0QnJCLElBQUksRUFBRTNVLE9BQU8sQ0FBQ2lSLE9BQU87UUFDckJnRixJQUFJLEVBQUVqVyxPQUFPLENBQUNpVyxJQUFJO1FBQ2xCdlgsU0FBUyxFQUFFc0IsT0FBTyxDQUFDdEIsU0FBUztRQUM1QnlLLElBQUksRUFBRW5KLE9BQU8sQ0FBQ21KLElBQUk7UUFDbEJpTixNQUFNLEVBQUVwVyxPQUFPLENBQUNvVyxNQUFNO1FBQ3RCcFUsTUFBTSxFQUFFO01BQ1YsQ0FBQzs7TUFFRDtNQUNBLE1BQU1rVixjQUFjLEdBQUd6QixLQUFLLENBQUNDLElBQUksQ0FBQ3RFLFdBQVcsQ0FBQzVMLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ2lHLElBQUksQ0FDeEQ5RixFQUFFLElBQUl5TCxXQUFXLENBQUM5USxHQUFHLENBQUNxRixFQUFFLENBQUMsQ0FBQ0ssUUFBUSxLQUFLeVEsY0FDekMsQ0FBQztNQUVELElBQUlTLGNBQWMsRUFBRTtRQUNsQnZXLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3FCLGNBQWMsQ0FBQyxDQUFDdEQsSUFBSSxDQUFDLGlCQUFpQixFQUFFMEMsV0FBVyxDQUFDO1FBQzFEalksTUFBTSxDQUFDa1ksS0FBSyxDQUFDLGtDQUFrQ0UsY0FBYyxFQUFFLEVBQUU7VUFDL0RTLGNBQWMsRUFBRUEsY0FBYztVQUM5QkMsTUFBTSxFQUFFMUYsTUFBTSxDQUFDekwsUUFBUTtVQUN2QjJPLElBQUksRUFBRWxELE1BQU0sQ0FBQ2tELElBQUk7VUFDakJ5QyxTQUFTLEVBQUVwWCxPQUFPLENBQUM4RztRQUNyQixDQUFDLENBQUM7TUFDSixDQUFDLE1BQU07UUFDTHpJLE1BQU0sQ0FBQzhJLElBQUksQ0FBQyxlQUFlc1AsY0FBYywrQ0FBK0MsRUFBRTtVQUN4RkEsY0FBYztVQUNkOUIsSUFBSSxFQUFFbEQsTUFBTSxDQUFDa0QsSUFBSTtVQUNqQjBDLGdCQUFnQixFQUFFakcsV0FBVyxDQUFDd0QsSUFBSTtVQUNsQ3dDLFNBQVMsRUFBRXBYLE9BQU8sQ0FBQzhHO1FBQ3JCLENBQUMsQ0FBQztRQUNGO01BQ0Y7O01BRUE7TUFDQTJLLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtRQUM3Qm9DLE1BQU0sRUFBRWhXLE9BQU8sQ0FBQ2dXLE1BQU07UUFDdEJyQixJQUFJLEVBQUUzVSxPQUFPLENBQUMyVSxJQUFJO1FBQ2xCc0IsSUFBSSxFQUFFalcsT0FBTyxDQUFDaVcsSUFBSTtRQUNsQnZYLFNBQVMsRUFBRXNCLE9BQU8sQ0FBQ3RCLFNBQVM7UUFDNUJ5SyxJQUFJLEVBQUVuSixPQUFPLENBQUNtSixJQUFJO1FBQ2xCaU4sTUFBTSxFQUFFLElBQUk7UUFBRTtRQUNkcFUsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDO01BRUYzRCxNQUFNLENBQUN3SCxJQUFJLENBQUMsbUNBQW1DLEVBQUU7UUFDL0NzUixNQUFNLEVBQUUxRixNQUFNLENBQUN6TCxRQUFRO1FBQ3ZCb1EsTUFBTSxFQUFFSyxjQUFjO1FBQ3RCOUIsSUFBSSxFQUFFbEQsTUFBTSxDQUFDa0QsSUFBSTtRQUNqQnlDLFNBQVMsRUFBRXBYLE9BQU8sQ0FBQzhHLEdBQUc7UUFDdEJ3USxhQUFhLEVBQUVkLFdBQVcsQ0FBQzFIO01BQzdCLENBQUMsQ0FBQztJQUVKLENBQUMsQ0FBQyxPQUFPN08sS0FBSyxFQUFFO01BQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsZ0NBQWdDLEVBQUU7UUFDN0NBLEtBQUssRUFBRUEsS0FBSyxDQUFDRCxPQUFPO1FBQ3BCbVgsTUFBTSxFQUFFMUYsTUFBTSxDQUFDekwsUUFBUTtRQUN2Qm9RLE1BQU0sRUFBRWQsSUFBSSxDQUFDTyxFQUFFO1FBQ2ZsQixJQUFJLEVBQUVsRCxNQUFNLENBQUNrRCxJQUFJO1FBQ2pCMVEsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE4sTUFBTTtRQUNyQnJGLEtBQUssRUFBRXFCLEtBQUssQ0FBQ3JCO01BQ2YsQ0FBQyxDQUFDO01BQ0Y2UyxNQUFNLENBQUNtQyxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQ25CNVQsT0FBTyxFQUFFLGdDQUFnQztRQUN6QzhCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0EyUCxNQUFNLENBQUMvUCxFQUFFLENBQUMsVUFBVSxFQUFHNFQsSUFBSSxJQUFLO0lBQzlCVCxlQUFlLENBQUMsQ0FBQztJQUNqQnBELE1BQU0sQ0FBQ29FLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsVUFBVSxFQUFFO01BQUU1TixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TCxRQUFRO01BQUV1UixRQUFRLEVBQUVqQyxJQUFJLENBQUNpQztJQUFTLENBQUMsQ0FBQztFQUNqRyxDQUFDLENBQUM7O0VBRUY7RUFDQTlGLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxNQUFPNFQsSUFBSSxJQUFLO0lBQzlDVCxlQUFlLENBQUMsQ0FBQztJQUNqQixNQUFNO01BQUUzRDtJQUFVLENBQUMsR0FBR29FLElBQUk7SUFDMUIsSUFBSSxDQUFDcEUsU0FBUyxFQUFFO0lBRWhCLElBQUk7TUFDRjtNQUNBLE1BQU1ELE9BQU8sR0FBRyxNQUFNN1MsT0FBTyxDQUFDa1IsT0FBTyxDQUFDO1FBQUUzSixFQUFFLEVBQUV1TCxTQUFTO1FBQUUvSCxJQUFJLEVBQUU7TUFBUSxDQUFDLENBQUM7TUFDdkUsSUFBSSxDQUFDOEgsT0FBTyxFQUFFO1FBQ1pRLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxhQUFhLEVBQUU7VUFBRTVULE9BQU8sRUFBRTtRQUEwQixDQUFDLENBQUM7UUFDbEU7TUFDRjs7TUFFQTtNQUNBLElBQUksQ0FBQ3lTLGFBQWEsQ0FBQytFLEdBQUcsQ0FBQ3RHLFNBQVMsQ0FBQyxFQUFFO1FBQ2pDdUIsYUFBYSxDQUFDaUIsR0FBRyxDQUFDeEMsU0FBUyxFQUFFLElBQUlxQixHQUFHLENBQUMsQ0FBQyxDQUFDO01BQ3pDO01BRUEsTUFBTWtGLFlBQVksR0FBR2hGLGFBQWEsQ0FBQ25TLEdBQUcsQ0FBQzRRLFNBQVMsQ0FBQzs7TUFFakQ7TUFDQU8sTUFBTSxDQUFDb0UsRUFBRSxDQUFDM0UsU0FBUyxDQUFDLENBQUMwQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7UUFBRTVOLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7UUFBRXNMLFFBQVEsRUFBRUcsTUFBTSxDQUFDOUw7TUFBRyxDQUFDLENBQUM7O01BRWxHO01BQ0E4TCxNQUFNLENBQUNxRSxJQUFJLENBQUM1RSxTQUFTLENBQUM7TUFDdEJ1RyxZQUFZLENBQUMvRCxHQUFHLENBQUNqQyxNQUFNLENBQUM5TCxFQUFFLEVBQUU7UUFBRStSLGNBQWMsRUFBRSxJQUFJO1FBQUVDLE1BQU0sRUFBRTtNQUFLLENBQUMsQ0FBQzs7TUFFbkU7TUFDQWxHLE1BQU0sQ0FBQ21HLFlBQVksR0FBRzFHLFNBQVM7TUFFL0I3UyxNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUTRMLE1BQU0sQ0FBQ3pMLFFBQVEseUJBQXlCa0wsU0FBUyxFQUFFLENBQUM7TUFDeEVPLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxjQUFjLEVBQUU7UUFBRTFDO01BQVUsQ0FBQyxDQUFDO0lBRTVDLENBQUMsQ0FBQyxPQUFPalIsS0FBSyxFQUFFO01BQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztNQUNuRHdSLE1BQU0sQ0FBQ21DLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFBRTVULE9BQU8sRUFBRTtNQUErQixDQUFDLENBQUM7SUFDekU7RUFDRixDQUFDLENBQUM7RUFFRnlSLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0lBQ3JDbVQsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDcEQsTUFBTSxDQUFDbUcsWUFBWSxFQUFFO0lBRTFCLE1BQU0xRyxTQUFTLEdBQUdPLE1BQU0sQ0FBQ21HLFlBQVk7SUFDckMsTUFBTUgsWUFBWSxHQUFHaEYsYUFBYSxDQUFDblMsR0FBRyxDQUFDNFEsU0FBUyxDQUFDO0lBRWpELElBQUl1RyxZQUFZLEVBQUU7TUFDaEJBLFlBQVksQ0FBQ2hELE1BQU0sQ0FBQ2hELE1BQU0sQ0FBQzlMLEVBQUUsQ0FBQztNQUM5QixJQUFJOFIsWUFBWSxDQUFDN0MsSUFBSSxLQUFLLENBQUMsRUFBRTtRQUMzQm5DLGFBQWEsQ0FBQ2dDLE1BQU0sQ0FBQ3ZELFNBQVMsQ0FBQztNQUNqQztJQUNGOztJQUVBO0lBQ0FPLE1BQU0sQ0FBQ29FLEVBQUUsQ0FBQzNFLFNBQVMsQ0FBQyxDQUFDMEMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO01BQUU1TixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TCxRQUFRO01BQUVzTCxRQUFRLEVBQUVHLE1BQU0sQ0FBQzlMO0lBQUcsQ0FBQyxDQUFDO0lBRWhHOEwsTUFBTSxDQUFDOEQsS0FBSyxDQUFDckUsU0FBUyxDQUFDO0lBQ3ZCTyxNQUFNLENBQUNtRyxZQUFZLEdBQUcsSUFBSTtJQUUxQnZaLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSx1QkFBdUJrTCxTQUFTLEVBQUUsQ0FBQztJQUN0RU8sTUFBTSxDQUFDbUMsSUFBSSxDQUFDLFlBQVksQ0FBQztFQUMzQixDQUFDLENBQUM7RUFFRm5DLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxhQUFhLEVBQUc0VCxJQUFJLElBQUs7SUFDakMsTUFBTTtNQUFFdUMsS0FBSztNQUFFWDtJQUFlLENBQUMsR0FBRzVCLElBQUk7SUFDdEM3RCxNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3RELElBQUksQ0FBQyxhQUFhLEVBQUU7TUFDNUNpRSxLQUFLO01BQ0xuQyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxjQUFjLEVBQUc0VCxJQUFJLElBQUs7SUFDbEMsTUFBTTtNQUFFeUMsTUFBTTtNQUFFYjtJQUFlLENBQUMsR0FBRzVCLElBQUk7SUFDdkM3RCxNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3RELElBQUksQ0FBQyxjQUFjLEVBQUU7TUFDN0NtRSxNQUFNO01BQ05yQyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxlQUFlLEVBQUc0VCxJQUFJLElBQUs7SUFDbkMsTUFBTTtNQUFFMEMsU0FBUztNQUFFZDtJQUFlLENBQUMsR0FBRzVCLElBQUk7SUFDMUM3RCxNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3RELElBQUksQ0FBQyxlQUFlLEVBQUU7TUFDOUNvRSxTQUFTO01BQ1R0QyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7O0VBRUY7RUFDQXlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxZQUFZLEVBQUUsWUFBWTtJQUNsQ3JELE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSxlQUFlLENBQUM7SUFFbkQsSUFBSTtNQUNGLE1BQU0vQixNQUFNLEdBQUd3TixNQUFNLENBQUN4TixNQUFNOztNQUU1QjtNQUNBLElBQUlBLE1BQU0sRUFBRTtRQUNWLE1BQU1nVSxZQUFZLEdBQUd6RixlQUFlLENBQUNsUyxHQUFHLENBQUMyRCxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ3JELE1BQU1pVSxRQUFRLEdBQUdqTSxJQUFJLENBQUN0TSxHQUFHLENBQUMsQ0FBQyxFQUFFc1ksWUFBWSxHQUFHLENBQUMsQ0FBQztRQUM5Q3pGLGVBQWUsQ0FBQ2tCLEdBQUcsQ0FBQ3pQLE1BQU0sRUFBRWlVLFFBQVEsQ0FBQztRQUVyQzdaLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSx5Q0FBeUNrUyxRQUFRLEdBQUcsRUFBRTtVQUN2RmpVLE1BQU0sRUFBRUEsTUFBTTtVQUNkcU4sUUFBUSxFQUFFRyxNQUFNLENBQUM5TCxFQUFFO1VBQ25CNE8sZUFBZSxFQUFFMkQ7UUFDbkIsQ0FBQyxDQUFDO01BQ0o7O01BRUE7TUFDQSxJQUFJekcsTUFBTSxDQUFDbUcsWUFBWSxFQUFFO1FBQ3ZCLE1BQU0xRyxTQUFTLEdBQUdPLE1BQU0sQ0FBQ21HLFlBQVk7UUFDckMsTUFBTUgsWUFBWSxHQUFHaEYsYUFBYSxDQUFDblMsR0FBRyxDQUFDNFEsU0FBUyxDQUFDO1FBRWpELElBQUl1RyxZQUFZLEVBQUU7VUFDaEJBLFlBQVksQ0FBQ2hELE1BQU0sQ0FBQ2hELE1BQU0sQ0FBQzlMLEVBQUUsQ0FBQztVQUM5QixJQUFJOFIsWUFBWSxDQUFDN0MsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUMzQm5DLGFBQWEsQ0FBQ2dDLE1BQU0sQ0FBQ3ZELFNBQVMsQ0FBQztVQUNqQztRQUNGOztRQUVBO1FBQ0FPLE1BQU0sQ0FBQ29FLEVBQUUsQ0FBQzNFLFNBQVMsQ0FBQyxDQUFDMEMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1VBQUU1TixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TCxRQUFRO1VBQUVzTCxRQUFRLEVBQUVHLE1BQU0sQ0FBQzlMO1FBQUcsQ0FBQyxDQUFDO01BQ2xHO01BRUEsSUFBSThMLE1BQU0sQ0FBQ2tELElBQUksRUFBRTtRQUNmbEQsTUFBTSxDQUFDOEQsS0FBSyxDQUFDOUQsTUFBTSxDQUFDa0QsSUFBSSxDQUFDOztRQUV6QjtRQUNBLE1BQU13RCxZQUFZLEdBQUcsSUFBSWhhLE9BQU8sQ0FBQztVQUMvQjZYLE1BQU0sRUFBRSxRQUFRO1VBQ2hCL0UsT0FBTyxFQUFFUSxNQUFNLENBQUNrRCxJQUFJO1VBQ3BCc0IsSUFBSSxFQUFFLEdBQUd4RSxNQUFNLENBQUN6TCxRQUFRLG9CQUFvQjtVQUM1Q21ELElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGLE1BQU1nUCxZQUFZLENBQUM1SyxJQUFJLENBQUMsQ0FBQztRQUV6QjVNLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsU0FBUyxFQUFFO1VBQ2pDb0MsTUFBTSxFQUFFbUMsWUFBWSxDQUFDbkMsTUFBTTtVQUMzQnJCLElBQUksRUFBRXdELFlBQVksQ0FBQ2xILE9BQU87VUFDMUJnRixJQUFJLEVBQUVrQyxZQUFZLENBQUNsQyxJQUFJO1VBQ3ZCOU0sSUFBSSxFQUFFZ1AsWUFBWSxDQUFDaFAsSUFBSTtVQUN2QnpLLFNBQVMsRUFBRXlaLFlBQVksQ0FBQ3paO1FBQzFCLENBQUMsQ0FBQzs7UUFFRjtRQUNBLE1BQU13WCxTQUFTLEdBQUdULEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUMvQzBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUtsRCxNQUFNLENBQUNrRCxJQUFJLElBQUlpQixDQUFDLENBQUMzUixNQUFNLEtBQUt3TixNQUFNLENBQUN4TixNQUFNLENBQUMsQ0FDakVpQixHQUFHLENBQUMwUSxDQUFDLEtBQUs7VUFBRTVQLFFBQVEsRUFBRTRQLENBQUMsQ0FBQzVQLFFBQVE7VUFBRVMsSUFBSSxFQUFFbVAsQ0FBQyxDQUFDblA7UUFBSyxDQUFDLENBQUMsQ0FBQztRQUNyRDlGLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ2tELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsY0FBYyxFQUFFc0MsU0FBUyxDQUFDO01BQ3BEOztNQUVBO01BQ0E5RSxXQUFXLENBQUNxRCxNQUFNLENBQUNoRCxNQUFNLENBQUM5TCxFQUFFLENBQUM7O01BRTdCO01BQ0F0SCxNQUFNLENBQUN3SCxJQUFJLENBQUMsZ0RBQWdEdUwsV0FBVyxDQUFDd0QsSUFBSSxFQUFFLENBQUM7O01BRS9FO01BQ0EsSUFBSTNRLE1BQU0sRUFBRTtRQUNWLE1BQU1tVSxvQkFBb0IsR0FBRzVGLGVBQWUsQ0FBQ2xTLEdBQUcsQ0FBQzJELE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDN0QsSUFBSW1VLG9CQUFvQixLQUFLLENBQUMsRUFBRTtVQUM5QixNQUFNbGEsSUFBSSxDQUFDeVQsaUJBQWlCLENBQUMxTixNQUFNLEVBQUU7WUFDbkNqQyxNQUFNLEVBQUUsU0FBUztZQUNqQjJILFVBQVUsRUFBRSxJQUFJaEcsSUFBSSxDQUFDO1VBQ3ZCLENBQUMsQ0FBQztVQUNGL0IsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVzRQLE1BQU0sQ0FBQ3pMLFFBQVEsMENBQTBDLENBQUM7VUFDakYzSCxNQUFNLENBQUN3SCxJQUFJLENBQUMsOENBQThDLEVBQUU7WUFDMUQ1QixNQUFNLEVBQUVBLE1BQU07WUFDZCtCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMO1VBQ25CLENBQUMsQ0FBQztRQUNKLENBQUMsTUFBTTtVQUNMO1VBQ0EsTUFBTTlILElBQUksQ0FBQ3lULGlCQUFpQixDQUFDMU4sTUFBTSxFQUFFO1lBQ25DMEYsVUFBVSxFQUFFLElBQUloRyxJQUFJLENBQUM7VUFDdkIsQ0FBQyxDQUFDO1VBQ0YvQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxVQUFVNFAsTUFBTSxDQUFDekwsUUFBUSxrQkFBa0JvUyxvQkFBb0Isb0JBQW9CLENBQUM7VUFDaEcvWixNQUFNLENBQUN3SCxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDakM1QixNQUFNLEVBQUVBLE1BQU07WUFDZCtCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7WUFDekJ1TyxlQUFlLEVBQUU2RDtVQUNuQixDQUFDLENBQUM7UUFDSjtNQUNGO0lBRUYsQ0FBQyxDQUFDLE9BQU9uWSxLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyw4QkFBOEIsRUFBRUEsS0FBSyxDQUFDO0lBQ3JEO0VBQ0gsQ0FBQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTW9ZLGdCQUFnQixHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUNuQyxJQUFJO0lBQ0Y7SUFDQSxNQUFNdGEsU0FBUyxDQUFDLENBQUM7O0lBRWpCO0lBQ0EsTUFBTXVhLGVBQWUsR0FBRyxDQUN0QjtNQUFFM1MsRUFBRSxFQUFFLFNBQVM7TUFBRXBCLElBQUksRUFBRSxTQUFTO01BQUU0RSxJQUFJLEVBQUUsTUFBTTtNQUFFVSxTQUFTLEVBQUU7SUFBUyxDQUFDLEVBQ3JFO01BQUVsRSxFQUFFLEVBQUUsWUFBWTtNQUFFcEIsSUFBSSxFQUFFLFlBQVk7TUFBRTRFLElBQUksRUFBRSxPQUFPO01BQUVVLFNBQVMsRUFBRTtJQUFTLENBQUMsQ0FDN0U7SUFFRCxLQUFLLE1BQU0wTyxXQUFXLElBQUlELGVBQWUsRUFBRTtNQUN6QyxNQUFNbGEsT0FBTyxDQUFDMFYsZ0JBQWdCLENBQzVCO1FBQUVuTyxFQUFFLEVBQUU0UyxXQUFXLENBQUM1UztNQUFHLENBQUMsRUFDdEI0UyxXQUFXLEVBQ1g7UUFBRUMsTUFBTSxFQUFFLElBQUk7UUFBRXhFLEdBQUcsRUFBRTtNQUFLLENBQzVCLENBQUM7SUFDSDtJQUVBM1YsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLDhCQUE4QixDQUFDOztJQUUzQztJQUNBLE1BQU00UyxJQUFJLEdBQUc3WSxPQUFPLENBQUNDLEdBQUcsQ0FBQzRZLElBQUksSUFBSSxJQUFJO0lBQ3JDbFosTUFBTSxDQUFDbVosTUFBTSxDQUFDRCxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU07TUFDbkNwYSxNQUFNLENBQUN3SCxJQUFJLENBQUMsMEJBQTBCNFMsSUFBSSxFQUFFLENBQUM7TUFDN0M3VyxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQkFBMEI0VyxJQUFJLEVBQUUsQ0FBQztJQUMvQyxDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT3hZLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUM7SUFDbkRMLE9BQU8sQ0FBQytZLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDOztBQUVEO0FBQ0EvWSxPQUFPLENBQUM4QixFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVk7RUFDL0JyRCxNQUFNLENBQUN3SCxJQUFJLENBQUMsOENBQThDLENBQUM7RUFDM0QsTUFBTTdILE9BQU8sQ0FBQyxDQUFDO0VBQ2YyQyxFQUFFLENBQUNpWSxLQUFLLENBQUMsTUFBTTtJQUNidmEsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQy9CakcsT0FBTyxDQUFDK1ksSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRi9ZLE9BQU8sQ0FBQzhCLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWTtFQUNoQ3JELE1BQU0sQ0FBQ3dILElBQUksQ0FBQywrQ0FBK0MsQ0FBQztFQUM1RCxNQUFNN0gsT0FBTyxDQUFDLENBQUM7RUFDZjJDLEVBQUUsQ0FBQ2lZLEtBQUssQ0FBQyxNQUFNO0lBQ2J2YSxNQUFNLENBQUN3SCxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDL0JqRyxPQUFPLENBQUMrWSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBTixnQkFBZ0IsQ0FBQyxDQUFDLENBQUM3RCxLQUFLLENBQUM3UyxHQUFHLElBQUk7RUFDOUJ0RCxNQUFNLENBQUM0QixLQUFLLENBQUMsd0NBQXdDLEVBQUUwQixHQUFHLENBQUM7RUFDM0QvQixPQUFPLENBQUMrWSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==