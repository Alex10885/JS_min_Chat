4fdb829280421d57e66e98d42b741cab
// Mock models
_getJestObj().mock('../../models/User', () => ({
  findById: jest.fn()
}));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const jwt = require('jsonwebtoken');
const {
  authenticateToken
} = require('../../server');
const User = require('../../models/User');
describe('Authentication Middleware', () => {
  let mockReq;
  let mockRes;
  let mockNext;
  beforeEach(() => {
    mockReq = {
      headers: {}
    };
    mockRes = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn()
    };
    mockNext = jest.fn();
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  describe('authenticateToken', () => {
    it('should authenticate user with valid token', async () => {
      const userId = '507f1f77bcf86cd799439011';
      const token = jwt.sign({
        id: userId
      }, process.env.JWT_SECRET || 'test-secret');
      const mockUser = {
        _id: userId,
        nickname: 'testuser',
        role: 'member'
      };
      mockReq.headers.authorization = `Bearer ${token}`;
      User.findById.mockResolvedValue(mockUser);
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).toHaveBeenCalled();
      expect(mockReq.user).toEqual(mockUser);
      expect(User.findById).toHaveBeenCalledWith(userId);
    });
    it('should return 401 when no token is provided', async () => {
      delete mockReq.headers.authorization;
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Access token required',
        code: 'NO_TOKEN'
      });
    });
    it('should return 401 with malformed authorization header', async () => {
      mockReq.headers.authorization = 'InvalidTokenFormat';
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Access token required',
        code: 'NO_TOKEN'
      });
    });
    it('should handle JWT verification errors', async () => {
      const invalidToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.invalid';
      mockReq.headers.authorization = `Bearer ${invalidToken}`;
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Token verification failed',
        code: 'TOKEN_VERIFICATION_FAILED'
      });
    });
    it('should handle expired tokens', async () => {
      const expiredToken = jwt.sign({
        id: 'testId'
      }, 'test-secret', {
        expiresIn: '-1h'
      });
      mockReq.headers.authorization = `Bearer ${expiredToken}`;
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Token has expired',
        code: 'TOKEN_EXPIRED'
      });
    });
    it('should handle malformed JWT tokens', async () => {
      mockReq.headers.authorization = 'Bearer not-a-jwt-token';
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Invalid token format',
        code: 'INVALID_TOKEN_FORMAT'
      });
    });
    it('should return 401 when user is not found', async () => {
      const token = jwt.sign({
        id: 'nonexistent'
      }, process.env.JWT_SECRET || 'test-secret');
      mockReq.headers.authorization = `Bearer ${token}`;
      User.findById.mockResolvedValue(null);
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'User not found',
        code: 'USER_NOT_FOUND'
      });
    });
    it('should handle database errors during user lookup', async () => {
      const token = jwt.sign({
        id: 'testid'
      }, process.env.JWT_SECRET || 'test-secret');
      mockReq.headers.authorization = `Bearer ${token}`;
      const dbError = new Error('Database connection failed');
      User.findById.mockRejectedValue(dbError);

      // Override console methods to avoid spam
      const originalConsole = global.console;
      global.console = {
        warn: jest.fn(),
        error: jest.fn()
      };
      await authenticateToken(mockReq, mockRes, mockNext);

      // Restore console
      global.console = originalConsole;
      expect(mockNext).not.toHaveBeenCalled();
      expect(mockRes.status).toHaveBeenCalledWith(401);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'Token verification failed',
        code: 'TOKEN_VERIFICATION_FAILED'
      });
    });
  });
  describe('Token extraction', () => {
    it('should extract token from Bearer authorization header', async () => {
      const token = jwt.sign({
        id: 'testId'
      }, process.env.JWT_SECRET || 'test-secret');
      const authorization = `Bearer ${token}`;
      const mockUser = {
        _id: 'testId',
        nickname: 'testuser'
      };
      mockReq.headers.authorization = authorization;
      User.findById.mockResolvedValue(mockUser);
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).toHaveBeenCalled();
      expect(User.findById).toHaveBeenCalledWith('testId');
    });
    it('should handle extra whitespace in authorization header', async () => {
      const token = jwt.sign({
        id: 'whitespacetest'
      }, process.env.JWT_SECRET || 'test-secret');
      mockReq.headers.authorization = `  Bearer    ${token}   `;
      const mockUser = {
        _id: 'whitespacetest',
        nickname: 'testuser'
      };
      User.findById.mockResolvedValue(mockUser);
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockNext).toHaveBeenCalled();
      expect(User.findById).toHaveBeenCalledWith('whitespacetest');
    });
  });
  describe('Request properties', () => {
    it('should attach user to request object', async () => {
      const token = jwt.sign({
        id: 'attachTest'
      }, process.env.JWT_SECRET || 'test-secret');
      mockReq.headers.authorization = `Bearer ${token}`;
      const mockUser = {
        _id: 'attachTest',
        nickname: 'attachUser',
        role: 'admin'
      };
      User.findById.mockResolvedValue(mockUser);
      await authenticateToken(mockReq, mockRes, mockNext);
      expect(mockReq.user).toEqual(mockUser);
      expect(mockReq.user._id).toBe('attachTest');
      expect(mockReq.user.nickname).toBe('attachUser');
      expect(mockReq.user.role).toBe('admin');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJmaW5kQnlJZCIsImplc3QiLCJmbiIsInJlcXVpcmUiLCJqd3QiLCJhdXRoZW50aWNhdGVUb2tlbiIsIlVzZXIiLCJkZXNjcmliZSIsIm1vY2tSZXEiLCJtb2NrUmVzIiwibW9ja05leHQiLCJiZWZvcmVFYWNoIiwiaGVhZGVycyIsInN0YXR1cyIsIm1vY2tSZXR1cm5UaGlzIiwianNvbiIsImFmdGVyRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInVzZXJJZCIsInRva2VuIiwic2lnbiIsImlkIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJtb2NrVXNlciIsIl9pZCIsIm5pY2tuYW1lIiwicm9sZSIsImF1dGhvcml6YXRpb24iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ1c2VyIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibm90IiwiZXJyb3IiLCJjb2RlIiwiaW52YWxpZFRva2VuIiwiZXhwaXJlZFRva2VuIiwiZXhwaXJlc0luIiwiZGJFcnJvciIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJvcmlnaW5hbENvbnNvbGUiLCJnbG9iYWwiLCJjb25zb2xlIiwid2FybiIsInRvQmUiXSwic291cmNlcyI6WyJhdXRoLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCB7IGF1dGhlbnRpY2F0ZVRva2VuIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2ZXInKTtcblxuLy8gTW9jayBtb2RlbHNcbmplc3QubW9jaygnLi4vLi4vbW9kZWxzL1VzZXInLCAoKSA9PiAoe1xuICBmaW5kQnlJZDogamVzdC5mbigpXG59KSk7XG5cbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvVXNlcicpO1xuXG5kZXNjcmliZSgnQXV0aGVudGljYXRpb24gTWlkZGxld2FyZScsICgpID0+IHtcbiAgbGV0IG1vY2tSZXE7XG4gIGxldCBtb2NrUmVzO1xuICBsZXQgbW9ja05leHQ7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja1JlcSA9IHtcbiAgICAgIGhlYWRlcnM6IHt9XG4gICAgfTtcbiAgICBtb2NrUmVzID0ge1xuICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGpzb246IGplc3QuZm4oKVxuICAgIH07XG4gICAgbW9ja05leHQgPSBqZXN0LmZuKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhdXRoZW50aWNhdGVUb2tlbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGF1dGhlbnRpY2F0ZSB1c2VyIHdpdGggdmFsaWQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAnNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDExJztcbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogdXNlcklkIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3Rlc3Qtc2VjcmV0Jyk7XG4gICAgICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICAgICAgX2lkOiB1c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiAndGVzdHVzZXInLFxuICAgICAgICByb2xlOiAnbWVtYmVyJ1xuICAgICAgfTtcblxuICAgICAgbW9ja1JlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgIFVzZXIuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXEudXNlcikudG9FcXVhbChtb2NrVXNlcik7XG4gICAgICBleHBlY3QoVXNlci5maW5kQnlJZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgodXNlcklkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aGVuIG5vIHRva2VuIGlzIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGVsZXRlIG1vY2tSZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAxKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZXJyb3I6ICdBY2Nlc3MgdG9rZW4gcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnTk9fVE9LRU4nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aXRoIG1hbGZvcm1lZCBhdXRob3JpemF0aW9uIGhlYWRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID0gJ0ludmFsaWRUb2tlbkZvcm1hdCc7XG5cbiAgICAgIGF3YWl0IGF1dGhlbnRpY2F0ZVRva2VuKG1vY2tSZXEsIG1vY2tSZXMsIG1vY2tOZXh0KTtcblxuICAgICAgZXhwZWN0KG1vY2tOZXh0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXMuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDEpO1xuICAgICAgZXhwZWN0KG1vY2tSZXMuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBlcnJvcjogJ0FjY2VzcyB0b2tlbiByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdOT19UT0tFTidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgSldUIHZlcmlmaWNhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkVG9rZW4gPSAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmludmFsaWQnO1xuICAgICAgbW9ja1JlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7aW52YWxpZFRva2VufWA7XG5cbiAgICAgIGF3YWl0IGF1dGhlbnRpY2F0ZVRva2VuKG1vY2tSZXEsIG1vY2tSZXMsIG1vY2tOZXh0KTtcblxuICAgICAgZXhwZWN0KG1vY2tOZXh0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXMuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDEpO1xuICAgICAgZXhwZWN0KG1vY2tSZXMuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBlcnJvcjogJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQnLFxuICAgICAgICBjb2RlOiAnVE9LRU5fVkVSSUZJQ0FUSU9OX0ZBSUxFRCdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXhwaXJlZCB0b2tlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleHBpcmVkVG9rZW4gPSBqd3Quc2lnbih7IGlkOiAndGVzdElkJyB9LCAndGVzdC1zZWNyZXQnLCB7IGV4cGlyZXNJbjogJy0xaCcgfSk7XG4gICAgICBtb2NrUmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHtleHBpcmVkVG9rZW59YDtcblxuICAgICAgYXdhaXQgYXV0aGVudGljYXRlVG9rZW4obW9ja1JlcSwgbW9ja1JlcywgbW9ja05leHQpO1xuXG4gICAgICBleHBlY3QobW9ja05leHQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Jlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMSk7XG4gICAgICBleHBlY3QobW9ja1Jlcy5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgICBjb2RlOiAnVE9LRU5fRVhQSVJFRCdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEpXVCB0b2tlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgbm90LWEtand0LXRva2VuJztcblxuICAgICAgYXdhaXQgYXV0aGVudGljYXRlVG9rZW4obW9ja1JlcSwgbW9ja1JlcywgbW9ja05leHQpO1xuXG4gICAgICBleHBlY3QobW9ja05leHQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Jlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMSk7XG4gICAgICBleHBlY3QobW9ja1Jlcy5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbiBmb3JtYXQnLFxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9UT0tFTl9GT1JNQVQnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aGVuIHVzZXIgaXMgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiAnbm9uZXhpc3RlbnQnIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3Rlc3Qtc2VjcmV0Jyk7XG4gICAgICBtb2NrUmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuXG4gICAgICBVc2VyLmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAxKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcsXG4gICAgICAgIGNvZGU6ICdVU0VSX05PVF9GT1VORCdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGR1cmluZyB1c2VyIGxvb2t1cCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogJ3Rlc3RpZCcgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAndGVzdC1zZWNyZXQnKTtcbiAgICAgIG1vY2tSZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID0gYEJlYXJlciAke3Rva2VufWA7XG5cbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBVc2VyLmZpbmRCeUlkLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICAvLyBPdmVycmlkZSBjb25zb2xlIG1ldGhvZHMgdG8gYXZvaWQgc3BhbVxuICAgICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlID0gZ2xvYmFsLmNvbnNvbGU7XG4gICAgICBnbG9iYWwuY29uc29sZSA9IHtcbiAgICAgICAgd2FybjogamVzdC5mbigpLFxuICAgICAgICBlcnJvcjogamVzdC5mbigpXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIC8vIFJlc3RvcmUgY29uc29sZVxuICAgICAgZ2xvYmFsLmNvbnNvbGUgPSBvcmlnaW5hbENvbnNvbGU7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAxKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZXJyb3I6ICdUb2tlbiB2ZXJpZmljYXRpb24gZmFpbGVkJyxcbiAgICAgICAgY29kZTogJ1RPS0VOX1ZFUklGSUNBVElPTl9GQUlMRUQnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rva2VuIGV4dHJhY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBleHRyYWN0IHRva2VuIGZyb20gQmVhcmVyIGF1dGhvcml6YXRpb24gaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiAndGVzdElkJyB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd0ZXN0LXNlY3JldCcpO1xuICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7IF9pZDogJ3Rlc3RJZCcsIG5pY2tuYW1lOiAndGVzdHVzZXInIH07XG5cbiAgICAgIG1vY2tSZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjtcbiAgICAgIFVzZXIuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KFVzZXIuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0SWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4dHJhIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXphdGlvbiBoZWFkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6ICd3aGl0ZXNwYWNldGVzdCcgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAndGVzdC1zZWNyZXQnKTtcbiAgICAgIG1vY2tSZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID0gYCAgQmVhcmVyICAgICR7dG9rZW59ICAgYDtcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0geyBfaWQ6ICd3aGl0ZXNwYWNldGVzdCcsIG5pY2tuYW1lOiAndGVzdHVzZXInIH07XG5cbiAgICAgIFVzZXIuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGVUb2tlbihtb2NrUmVxLCBtb2NrUmVzLCBtb2NrTmV4dCk7XG5cbiAgICAgIGV4cGVjdChtb2NrTmV4dCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KFVzZXIuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd3aGl0ZXNwYWNldGVzdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVxdWVzdCBwcm9wZXJ0aWVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYXR0YWNoIHVzZXIgdG8gcmVxdWVzdCBvYmplY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6ICdhdHRhY2hUZXN0JyB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd0ZXN0LXNlY3JldCcpO1xuICAgICAgbW9ja1JlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0geyBfaWQ6ICdhdHRhY2hUZXN0Jywgbmlja25hbWU6ICdhdHRhY2hVc2VyJywgcm9sZTogJ2FkbWluJyB9O1xuXG4gICAgICBVc2VyLmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcblxuICAgICAgYXdhaXQgYXV0aGVudGljYXRlVG9rZW4obW9ja1JlcSwgbW9ja1JlcywgbW9ja05leHQpO1xuXG4gICAgICBleHBlY3QobW9ja1JlcS51c2VyKS50b0VxdWFsKG1vY2tVc2VyKTtcbiAgICAgIGV4cGVjdChtb2NrUmVxLnVzZXIuX2lkKS50b0JlKCdhdHRhY2hUZXN0Jyk7XG4gICAgICBleHBlY3QobW9ja1JlcS51c2VyLm5pY2tuYW1lKS50b0JlKCdhdHRhY2hVc2VyJyk7XG4gICAgICBleHBlY3QobW9ja1JlcS51c2VyLnJvbGUpLnRvQmUoJ2FkbWluJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFHQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxPQUFPO0VBQ3BDQyxRQUFRLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0FBQ3BCLENBQUMsQ0FBQyxDQUFDO0FBQUMsU0FBQUosWUFBQTtFQUFBO0lBQUFHO0VBQUEsSUFBQUUsT0FBQTtFQUFBTCxXQUFBLEdBQUFBLENBQUEsS0FBQUcsSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQU5KLE1BQU1HLEdBQUcsR0FBR0QsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNO0VBQUVFO0FBQWtCLENBQUMsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQU9yRCxNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUV6Q0ksUUFBUSxDQUFDLDJCQUEyQixFQUFFLE1BQU07RUFDMUMsSUFBSUMsT0FBTztFQUNYLElBQUlDLE9BQU87RUFDWCxJQUFJQyxRQUFRO0VBRVpDLFVBQVUsQ0FBQyxN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