68298fccbd968034770c2ac694c12e61
const request = require('supertest');
const jwt = require('jsonwebtoken');
const mongoose = require('mongoose');
const {
  MongoMemoryServer
} = require('mongodb-memory-server');

// Create minimal app for middleware testing
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const {
  body,
  validationResult
} = require('express-validator');
const User = require('../../models/User');
let mongoServer;
let app;
describe('Middleware Tests', () => {
  beforeAll(async () => {
    // Start in-memory MongoDB
    mongoServer = await MongoMemoryServer.create();
    const mongoUri = mongoServer.getUri();
    await mongoose.connect(mongoUri);

    // Create minimal app with middleware
    app = express();

    // Middleware setup
    app.use(cors());
    app.use(express.json({
      limit: '10mb'
    }));
    app.use(helmet({
      contentSecurityPolicy: {
        directives: {
          defaultSrc: ["'self'"],
          styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
          fontSrc: ["'self'", "https://fonts.gstatic.com"],
          imgSrc: ["'self'", "data:"],
          scriptSrc: ["'self'", "'unsafe-inline'"],
          connectSrc: ["'self'"]
        }
      },
      crossOriginEmbedderPolicy: false
    }));

    // Error handler middleware (copied from server.js)
    const errorHandler = (err, req, res, next) => {
      console.error('Unhandled error:', err.message);
      if (err.name === 'ValidationError') {
        const errors = Object.values(err.errors).map(e => ({
          field: e.path,
          message: e.message,
          value: e.value
        }));
        return res.status(422).json({
          error: 'Validation failed',
          details: errors,
          code: 'VALIDATION_ERROR'
        });
      }
      if (err.code === 11000) {
        const field = Object.keys(err.keyValue)[0];
        const value = err.keyValue[field];
        return res.status(409).json({
          error: `${field} '${value}' already exists`,
          code: 'DUPLICATE_ERROR'
        });
      }
      res.status(500).json({
        error: 'Internal server error',
        code: 'INTERNAL_ERROR'
      });
    };

    // Authenticate token middleware (copied from server.js)
    const authenticateToken = async (req, res, next) => {
      try {
        const authHeader = req.headers['authorization'];
        const token = authHeader && authHeader.split(' ')[1];
        if (!token) {
          return res.status(401).json({
            error: 'Access token required',
            code: 'NO_TOKEN'
          });
        }
        const decoded = jwt.verify(token, process.env.JWT_SECRET || 'test-secret');
        const user = await User.findById(decoded.userId);
        if (!user) {
          return res.status(401).json({
            error: 'User not found',
            code: 'USER_NOT_FOUND'
          });
        }
        req.user = user;
        next();
      } catch (error) {
        if (error.name === 'JsonWebTokenError') {
          return res.status(401).json({
            error: 'Invalid token format',
            code: 'INVALID_TOKEN_FORMAT'
          });
        }
        if (error.name === 'TokenExpiredError') {
          return res.status(401).json({
            error: 'Token has expired',
            code: 'TOKEN_EXPIRED'
          });
        }
        return res.status(401).json({
          error: 'Token verification failed',
          code: 'TOKEN_VERIFICATION_FAILED'
        });
      }
    };

    // Request logging middleware (simplified version)
    app.use((req, res, next) => {
      const start = Date.now();
      res.on('finish', () => {
        const duration = Date.now() - start;
        console.log(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`);
      });
      next();
    });

    // Test routes
    app.get('/protected', authenticateToken, (req, res) => {
      res.json({
        userId: req.user._id,
        nickname: req.user.nickname
      });
    });
    app.post('/validation-test', [body('nickname').isLength({
      min: 3,
      max: 50
    }).trim().escape(), body('email').isEmail().normalizeEmail()], (req, res) => {
      const errors = validationResult(req);
      if (!errors.isEmpty()) {
        return res.status(400).json({
          errors: errors.array()
        });
      }
      res.json({
        success: true,
        data: req.body
      });
    });
    app.post('/duplicate-test', async (req, res) => {
      try {
        const user = new User({
          nickname: req.body.nickname,
          email: req.body.email,
          password: 'password123'
        });
        await user.save();
        res.status(201).json({
          user
        });
      } catch (error) {
        // Let error handler middleware handle it
        throw error;
      }
    });
    app.get('/test-cors', (req, res) => {
      res.json({
        cors: 'enabled'
      });
    });
    app.get('/test-helmet', (req, res) => {
      res.json({
        helmet: 'enabled'
      });
    });

    // Error handler middleware must be last
    app.use(errorHandler);

    // 404 handler
    app.use((req, res) => {
      res.status(404).json({
        error: 'Endpoint not found',
        path: req.url,
        method: req.method,
        code: 'NOT_FOUND'
      });
    });
  });
  afterAll(async () => {
    await mongoose.disconnect();
    if (mongoServer) {
      await mongoServer.stop();
    }
  });
  beforeEach(async () => {
    await User.deleteMany({});
  });
  describe('authenticateToken Middleware', () => {
    let testUser;
    let validToken;
    beforeEach(async () => {
      testUser = await new User({
        nickname: 'authtest',
        email: 'auth@example.com',
        password: 'password123'
      }).save();
      validToken = jwt.sign({
        userId: testUser._id,
        nickname: testUser.nickname
      }, process.env.JWT_SECRET || 'test-secret', {
        expiresIn: '1h'
      });
    });
    it('should pass with valid token', async () => {
      const response = await request(app).get('/protected').set('Authorization', `Bearer ${validToken}`).expect(200);
      expect(response.body.userId).toBe(testUser._id.toString());
      expect(response.body.nickname).toBe('authtest');
    });
    it('should reject without token', async () => {
      const response = await request(app).get('/protected').expect(401);
      expect(response.body.code).toBe('NO_TOKEN');
      expect(response.body.error).toBe('Access token required');
    });
    it('should reject with invalid token format', async () => {
      const response = await request(app).get('/protected').set('Authorization', 'InvalidToken').expect(401);
      expect(response.body.code).toBe('INVALID_TOKEN_FORMAT');
    });
    it('should reject with expired token', async () => {
      const expiredToken = jwt.sign({
        userId: testUser._id,
        nickname: testUser.nickname
      }, process.env.JWT_SECRET || 'test-secret', {
        expiresIn: '-1h'
      });
      const response = await request(app).get('/protected').set('Authorization', `Bearer ${expiredToken}`).expect(401);
      expect(response.body.code).toBe('TOKEN_EXPIRED');
    });
    it('should reject with valid token but non-existent user', async () => {
      // Delete the user after creating token
      await User.findByIdAndDelete(testUser._id);
      const response = await request(app).get('/protected').set('Authorization', `Bearer ${validToken}`).expect(401);
      expect(response.body.code).toBe('USER_NOT_FOUND');
    });
  });
  describe('CORS Middleware', () => {
    it('should handle CORS preflight requests', async () => {
      const response = await request(app).options('/test-cors').set('Origin', 'http://localhost:3000').set('Access-Control-Request-Method', 'GET').expect(204);
      expect(response.headers['access-control-allow-origin']).toBeDefined();
    });
    it('should include CORS headers in response', async () => {
      const response = await request(app).get('/test-cors').set('Origin', 'http://localhost:3000').expect(200);
      expect(response.headers['access-control-allow-origin']).toBeDefined();
    });
  });
  describe('Helmet Security Headers', () => {
    it('should set security headers', async () => {
      const response = await request(app).get('/test-helmet').expect(200);
      expect(response.headers['x-frame-options']).toBeDefined();
      expect(response.headers['x-content-type-options']).toBeDefined();
      expect(response.headers['content-security-policy']).toBeDefined();
    });
    it('should have CSP header configured', async () => {
      const response = await request(app).get('/test-helmet').expect(200);
      const cspHeader = response.headers['content-security-policy'];
      expect(cspHeader).toContain("default-src 'self'");
      expect(cspHeader).toContain("script-src 'self' 'unsafe-inline'");
    });
  });
  describe('Error Handler Middleware', () => {
    it('should handle validation errors', async () => {
      const response = await request(app).post('/validation-test').send({
        nickname: 'ab',
        email: 'invalid-email'
      }).expect(400);
      expect(response.body.errors).toBeDefined();
      expect(Array.isArray(response.body.errors)).toBe(true);
    });
    it('should handle duplicate key errors', async () => {
      // Create user first
      await new User({
        nickname: 'duplicateuser',
        email: 'duplicate@example.com',
        password: 'password123'
      }).save();

      // Try to create another with same data
      const response = await request(app).post('/duplicate-test').send({
        nickname: 'duplicateuser',
        email: 'duplicate@example.com'
      }).expect(409);
      expect(response.body.code).toBe('DUPLICATE_ERROR');
      expect(response.body.error).toContain('already exists');
    });
    it('should handle 404 errors', async () => {
      const response = await request(app).get('/nonexistent-route').expect(404);
      expect(response.body.code).toBe('NOT_FOUND');
      expect(response.body.path).toBe('/nonexistent-route');
    });
    it('should handle general server errors', async () => {
      // Create a route that will throw an error
      app.get('/error-test', (req, res) => {
        throw new Error('Test error');
      });
      const response = await request(app).get('/error-test').expect(500);
      expect(response.body.code).toBe('INTERNAL_ERROR');
      expect(response.body.error).toBe('Internal server error');
    });
  });
  describe('Request Logging Middleware', () => {
    it('should log request timing', async () => {
      const startTime = Date.now();
      await request(app).get('/test-helmet').expect(200);
      const endTime = Date.now();
      expect(endTime - startTime).toBeGreaterThanOrEqual(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImp3dCIsIm1vbmdvb3NlIiwiTW9uZ29NZW1vcnlTZXJ2ZXIiLCJleHByZXNzIiwiY29ycyIsImhlbG1ldCIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiVXNlciIsIm1vbmdvU2VydmVyIiwiYXBwIiwiZGVzY3JpYmUiLCJiZWZvcmVBbGwiLCJjcmVhdGUiLCJtb25nb1VyaSIsImdldFVyaSIsImNvbm5lY3QiLCJ1c2UiLCJqc29uIiwibGltaXQiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJkaXJlY3RpdmVzIiwiZGVmYXVsdFNyYyIsInN0eWxlU3JjIiwiZm9udFNyYyIsImltZ1NyYyIsInNjcmlwdFNyYyIsImNvbm5lY3RTcmMiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5IiwiZXJyb3JIYW5kbGVyIiwiZXJyIiwicmVxIiwicmVzIiwibmV4dCIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJuYW1lIiwiZXJyb3JzIiwiT2JqZWN0IiwidmFsdWVzIiwibWFwIiwiZSIsImZpZWxkIiwicGF0aCIsInZhbHVlIiwic3RhdHVzIiwiZGV0YWlscyIsImNvZGUiLCJrZXlzIiwia2V5VmFsdWUiLCJhdXRoZW50aWNhdGVUb2tlbiIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJzcGxpdCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsInVzZXIiLCJmaW5kQnlJZCIsInVzZXJJZCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsIm9uIiwiZHVyYXRpb24iLCJsb2ciLCJtZXRob2QiLCJ1cmwiLCJzdGF0dXNDb2RlIiwiZ2V0IiwiX2lkIiwibmlja25hbWUiLCJwb3N0IiwiaXNMZW5ndGgiLCJtaW4iLCJtYXgiLCJ0cmltIiwiZXNjYXBlIiwiaXNFbWFpbCIsIm5vcm1hbGl6ZUVtYWlsIiwiaXNFbXB0eSIsImFycmF5Iiwic3VjY2VzcyIsImRhdGEiLCJlbWFpbCIsInBhc3N3b3JkIiwic2F2ZSIsImFmdGVyQWxsIiwiZGlzY29ubmVjdCIsInN0b3AiLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsInRlc3RVc2VyIiwidmFsaWRUb2tlbiIsInNpZ24iLCJleHBpcmVzSW4iLCJpdCIsInJlc3BvbnNlIiwic2V0IiwiZXhwZWN0IiwidG9CZSIsInRvU3RyaW5nIiwiZXhwaXJlZFRva2VuIiwiZmluZEJ5SWRBbmREZWxldGUiLCJvcHRpb25zIiwidG9CZURlZmluZWQiLCJjc3BIZWFkZXIiLCJ0b0NvbnRhaW4iLCJzZW5kIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCJdLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgTW9uZ29NZW1vcnlTZXJ2ZXIgfSA9IHJlcXVpcmUoJ21vbmdvZGItbWVtb3J5LXNlcnZlcicpO1xuXG4vLyBDcmVhdGUgbWluaW1hbCBhcHAgZm9yIG1pZGRsZXdhcmUgdGVzdGluZ1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IHsgYm9keSwgdmFsaWRhdGlvblJlc3VsdCB9ID0gcmVxdWlyZSgnZXhwcmVzcy12YWxpZGF0b3InKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvVXNlcicpO1xuXG5sZXQgbW9uZ29TZXJ2ZXI7XG5sZXQgYXBwO1xuXG5kZXNjcmliZSgnTWlkZGxld2FyZSBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBTdGFydCBpbi1tZW1vcnkgTW9uZ29EQlxuICAgIG1vbmdvU2VydmVyID0gYXdhaXQgTW9uZ29NZW1vcnlTZXJ2ZXIuY3JlYXRlKCk7XG4gICAgY29uc3QgbW9uZ29VcmkgPSBtb25nb1NlcnZlci5nZXRVcmkoKTtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KG1vbmdvVXJpKTtcblxuICAgIC8vIENyZWF0ZSBtaW5pbWFsIGFwcCB3aXRoIG1pZGRsZXdhcmVcbiAgICBhcHAgPSBleHByZXNzKCk7XG5cbiAgICAvLyBNaWRkbGV3YXJlIHNldHVwXG4gICAgYXBwLnVzZShjb3JzKCkpO1xuICAgIGFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICcxMG1iJyB9KSk7XG4gICAgYXBwLnVzZShoZWxtZXQoe1xuICAgICAgY29udGVudFNlY3VyaXR5UG9saWN5OiB7XG4gICAgICAgIGRpcmVjdGl2ZXM6IHtcbiAgICAgICAgICBkZWZhdWx0U3JjOiBbXCInc2VsZidcIl0sXG4gICAgICAgICAgc3R5bGVTcmM6IFtcIidzZWxmJ1wiLCBcIid1bnNhZmUtaW5saW5lJ1wiLCBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb21cIl0sXG4gICAgICAgICAgZm9udFNyYzogW1wiJ3NlbGYnXCIsIFwiaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbVwiXSxcbiAgICAgICAgICBpbWdTcmM6IFtcIidzZWxmJ1wiLCBcImRhdGE6XCJdLFxuICAgICAgICAgIHNjcmlwdFNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCJdLFxuICAgICAgICAgIGNvbm5lY3RTcmM6IFtcIidzZWxmJ1wiXVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeTogZmFsc2VcbiAgICB9KSk7XG5cbiAgICAvLyBFcnJvciBoYW5kbGVyIG1pZGRsZXdhcmUgKGNvcGllZCBmcm9tIHNlcnZlci5qcylcbiAgICBjb25zdCBlcnJvckhhbmRsZXIgPSAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgIGlmIChlcnIubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICAgICAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoZSA9PiAoe1xuICAgICAgICAgIGZpZWxkOiBlLnBhdGgsXG4gICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvcnMsXG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGVyci5jb2RlID09PSAxMTAwMCkge1xuICAgICAgICBjb25zdCBmaWVsZCA9IE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZXJyLmtleVZhbHVlW2ZpZWxkXTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogYCR7ZmllbGR9ICcke3ZhbHVlfScgYWxyZWFkeSBleGlzdHNgLFxuICAgICAgICAgIGNvZGU6ICdEVVBMSUNBVEVfRVJST1InXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUidcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBBdXRoZW50aWNhdGUgdG9rZW4gbWlkZGxld2FyZSAoY29waWVkIGZyb20gc2VydmVyLmpzKVxuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZVRva2VuID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXTtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgICBlcnJvcjogJ0FjY2VzcyB0b2tlbiByZXF1aXJlZCcsXG4gICAgICAgICAgICBjb2RlOiAnTk9fVE9LRU4nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3Rlc3Qtc2VjcmV0Jyk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcklkKTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICAgIGVycm9yOiAnVXNlciBub3QgZm91bmQnLFxuICAgICAgICAgICAgY29kZTogJ1VTRVJfTk9UX0ZPVU5EJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHRva2VuIGZvcm1hdCcsXG4gICAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9UT0tFTl9GT1JNQVQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgZXJyb3I6ICdUb2tlbiBoYXMgZXhwaXJlZCcsXG4gICAgICAgICAgICBjb2RlOiAnVE9LRU5fRVhQSVJFRCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIGVycm9yOiAnVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgY29kZTogJ1RPS0VOX1ZFUklGSUNBVElPTl9GQUlMRUQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZXF1ZXN0IGxvZ2dpbmcgbWlkZGxld2FyZSAoc2ltcGxpZmllZCB2ZXJzaW9uKVxuICAgIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICByZXMub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3JlcS5tZXRob2R9ICR7cmVxLnVybH0gLSAke3Jlcy5zdGF0dXNDb2RlfSAoJHtkdXJhdGlvbn1tcylgKTtcbiAgICAgIH0pO1xuICAgICAgbmV4dCgpO1xuICAgIH0pO1xuXG4gICAgLy8gVGVzdCByb3V0ZXNcbiAgICBhcHAuZ2V0KCcvcHJvdGVjdGVkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLmpzb24oeyB1c2VySWQ6IHJlcS51c2VyLl9pZCwgbmlja25hbWU6IHJlcS51c2VyLm5pY2tuYW1lIH0pO1xuICAgIH0pO1xuXG4gICAgYXBwLnBvc3QoJy92YWxpZGF0aW9uLXRlc3QnLCBbXG4gICAgICBib2R5KCduaWNrbmFtZScpLmlzTGVuZ3RoKHsgbWluOiAzLCBtYXg6IDUwIH0pLnRyaW0oKS5lc2NhcGUoKSxcbiAgICAgIGJvZHkoJ2VtYWlsJykuaXNFbWFpbCgpLm5vcm1hbGl6ZUVtYWlsKClcbiAgICBdLCAocmVxLCByZXMpID0+IHtcbiAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXEuYm9keSB9KTtcbiAgICB9KTtcblxuICAgIGFwcC5wb3N0KCcvZHVwbGljYXRlLXRlc3QnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgICAgbmlja25hbWU6IHJlcS5ib2R5Lm5pY2tuYW1lLFxuICAgICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJ1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgdXNlciB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExldCBlcnJvciBoYW5kbGVyIG1pZGRsZXdhcmUgaGFuZGxlIGl0XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXBwLmdldCgnL3Rlc3QtY29ycycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLmpzb24oeyBjb3JzOiAnZW5hYmxlZCcgfSk7XG4gICAgfSk7XG5cbiAgICBhcHAuZ2V0KCcvdGVzdC1oZWxtZXQnLCAocmVxLCByZXMpID0+IHtcbiAgICAgIHJlcy5qc29uKHsgaGVsbWV0OiAnZW5hYmxlZCcgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBFcnJvciBoYW5kbGVyIG1pZGRsZXdhcmUgbXVzdCBiZSBsYXN0XG4gICAgYXBwLnVzZShlcnJvckhhbmRsZXIpO1xuXG4gICAgLy8gNDA0IGhhbmRsZXJcbiAgICBhcHAudXNlKChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0VuZHBvaW50IG5vdCBmb3VuZCcsXG4gICAgICAgIHBhdGg6IHJlcS51cmwsXG4gICAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgICAgY29kZTogJ05PVF9GT1VORCdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuICAgIGlmIChtb25nb1NlcnZlcikge1xuICAgICAgYXdhaXQgbW9uZ29TZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHt9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2F1dGhlbnRpY2F0ZVRva2VuIE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgbGV0IHRlc3RVc2VyO1xuICAgIGxldCB2YWxpZFRva2VuO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICB0ZXN0VXNlciA9IGF3YWl0IG5ldyBVc2VyKHtcbiAgICAgICAgbmlja25hbWU6ICdhdXRodGVzdCcsXG4gICAgICAgIGVtYWlsOiAnYXV0aEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICB9KS5zYXZlKCk7XG5cbiAgICAgIHZhbGlkVG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgeyB1c2VySWQ6IHRlc3RVc2VyLl9pZCwgbmlja25hbWU6IHRlc3RVc2VyLm5pY2tuYW1lIH0sXG4gICAgICAgIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3Rlc3Qtc2VjcmV0JyxcbiAgICAgICAgeyBleHBpcmVzSW46ICcxaCcgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFzcyB3aXRoIHZhbGlkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Byb3RlY3RlZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dmFsaWRUb2tlbn1gKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnVzZXJJZCkudG9CZSh0ZXN0VXNlci5faWQudG9TdHJpbmcoKSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5uaWNrbmFtZSkudG9CZSgnYXV0aHRlc3QnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHdpdGhvdXQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvcHJvdGVjdGVkJylcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5jb2RlKS50b0JlKCdOT19UT0tFTicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ0FjY2VzcyB0b2tlbiByZXF1aXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgd2l0aCBpbnZhbGlkIHRva2VuIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9wcm90ZWN0ZWQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgJ0ludmFsaWRUb2tlbicpXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuY29kZSkudG9CZSgnSU5WQUxJRF9UT0tFTl9GT1JNQVQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHdpdGggZXhwaXJlZCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGlyZWRUb2tlbiA9IGp3dC5zaWduKFxuICAgICAgICB7IHVzZXJJZDogdGVzdFVzZXIuX2lkLCBuaWNrbmFtZTogdGVzdFVzZXIubmlja25hbWUgfSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAndGVzdC1zZWNyZXQnLFxuICAgICAgICB7IGV4cGlyZXNJbjogJy0xaCcgfVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Byb3RlY3RlZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7ZXhwaXJlZFRva2VufWApXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuY29kZSkudG9CZSgnVE9LRU5fRVhQSVJFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgd2l0aCB2YWxpZCB0b2tlbiBidXQgbm9uLWV4aXN0ZW50IHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBEZWxldGUgdGhlIHVzZXIgYWZ0ZXIgY3JlYXRpbmcgdG9rZW5cbiAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmREZWxldGUodGVzdFVzZXIuX2lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Byb3RlY3RlZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dmFsaWRUb2tlbn1gKVxuICAgICAgICAuZXhwZWN0KDQwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvZGUpLnRvQmUoJ1VTRVJfTk9UX0ZPVU5EJyk7XG4gICAgfSk7XG4gIH0pO1xuXG5cbiAgZGVzY3JpYmUoJ0NPUlMgTWlkZGxld2FyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5vcHRpb25zKCcvdGVzdC1jb3JzJylcbiAgICAgICAgLnNldCgnT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpXG4gICAgICAgIC5zZXQoJ0FjY2Vzcy1Db250cm9sLVJlcXVlc3QtTWV0aG9kJywgJ0dFVCcpXG4gICAgICAgIC5leHBlY3QoMjA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnNbJ2FjY2Vzcy1jb250cm9sLWFsbG93LW9yaWdpbiddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIENPUlMgaGVhZGVycyBpbiByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWNvcnMnKVxuICAgICAgICAuc2V0KCdPcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVyc1snYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdIZWxtZXQgU2VjdXJpdHkgSGVhZGVycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNldCBzZWN1cml0eSBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtaGVsbWV0JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVyc1sneC1mcmFtZS1vcHRpb25zJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVyc1sneC1jb250ZW50LXR5cGUtb3B0aW9ucyddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtc2VjdXJpdHktcG9saWN5J10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgQ1NQIGhlYWRlciBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtaGVsbWV0JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBjb25zdCBjc3BIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXNlY3VyaXR5LXBvbGljeSddO1xuICAgICAgZXhwZWN0KGNzcEhlYWRlcikudG9Db250YWluKFwiZGVmYXVsdC1zcmMgJ3NlbGYnXCIpO1xuICAgICAgZXhwZWN0KGNzcEhlYWRlcikudG9Db250YWluKFwic2NyaXB0LXNyYyAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxlciBNaWRkbGV3YXJlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy92YWxpZGF0aW9uLXRlc3QnKVxuICAgICAgICAuc2VuZCh7IG5pY2tuYW1lOiAnYWInLCBlbWFpbDogJ2ludmFsaWQtZW1haWwnIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3JzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5lcnJvcnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZHVwbGljYXRlIGtleSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgdXNlciBmaXJzdFxuICAgICAgYXdhaXQgbmV3IFVzZXIoe1xuICAgICAgICBuaWNrbmFtZTogJ2R1cGxpY2F0ZXVzZXInLFxuICAgICAgICBlbWFpbDogJ2R1cGxpY2F0ZUBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICB9KS5zYXZlKCk7XG5cbiAgICAgIC8vIFRyeSB0byBjcmVhdGUgYW5vdGhlciB3aXRoIHNhbWUgZGF0YVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9kdXBsaWNhdGUtdGVzdCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBuaWNrbmFtZTogJ2R1cGxpY2F0ZXVzZXInLFxuICAgICAgICAgIGVtYWlsOiAnZHVwbGljYXRlQGV4YW1wbGUuY29tJ1xuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwOSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvZGUpLnRvQmUoJ0RVUExJQ0FURV9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignYWxyZWFkeSBleGlzdHMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIDQwNCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvbm9uZXhpc3RlbnQtcm91dGUnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvZGUpLnRvQmUoJ05PVF9GT1VORCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucGF0aCkudG9CZSgnL25vbmV4aXN0ZW50LXJvdXRlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBnZW5lcmFsIHNlcnZlciBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYSByb3V0ZSB0aGF0IHdpbGwgdGhyb3cgYW4gZXJyb3JcbiAgICAgIGFwcC5nZXQoJy9lcnJvci10ZXN0JywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVzdCBlcnJvcicpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9lcnJvci10ZXN0JylcbiAgICAgICAgLmV4cGVjdCg1MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVxdWVzdCBMb2dnaW5nIE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsb2cgcmVxdWVzdCB0aW1pbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtaGVsbWV0JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTTtFQUFFRztBQUFrQixDQUFDLEdBQUdILE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQzs7QUFFOUQ7QUFDQSxNQUFNSSxPQUFPLEdBQUdKLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1NLE1BQU0sR0FBR04sT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNO0VBQUVPLElBQUk7RUFBRUM7QUFBaUIsQ0FBQyxHQUFHUixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDL0QsTUFBTVMsSUFBSSxHQUFHVCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFFekMsSUFBSVUsV0FBVztBQUNmLElBQUlDLEdBQUc7QUFFUEMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLE1BQU07RUFDakNDLFNBQVMsQ0FBQyxZQUFZO0lBQ3BCO0lBQ0FILFdBQVcsR0FBRyxNQUFNUCxpQkFBaUIsQ0FBQ1csTUFBTSxDQUFDLENBQUM7SUFDOUMsTUFBTUMsUUFBUSxHQUFHTCxXQUFXLENBQUNNLE1BQU0sQ0FBQyxDQUFDO0lBQ3JDLE1BQU1kLFFBQVEsQ0FBQ2UsT0FBTyxDQUFDRixRQUFRLENBQUM7O0lBRWhDO0lBQ0FKLEdBQUcsR0FBR1AsT0FBTyxDQUFDLENBQUM7O0lBRWY7SUFDQU8sR0FBRyxDQUFD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