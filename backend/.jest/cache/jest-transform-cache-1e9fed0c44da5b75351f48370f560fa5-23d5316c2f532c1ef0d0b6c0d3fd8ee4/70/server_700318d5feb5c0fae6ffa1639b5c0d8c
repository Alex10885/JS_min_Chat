fbb25b11c760d0913cf5be1c1b8f5c99
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
// Import crypto for generating secure tokens
const crypto = require('crypto');
const session = require('express-session');
const MongoStore = require('connect-mongo');
const {
  connectDB,
  closeDB
} = require('./db/connection');
const emailService = require('./services/emailService');

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);
const authRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: process.env.NODE_ENV === 'test' || process.env.CYPRESS_API_SKIP ? 20000 : 10,
  // Higher limit for better UX
  message: {
    error: 'Too many authentication attempts, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false,
  skip: req => {
    return req.get('User-Agent') && req.get('User-Agent').includes('Cypress');
  }
});
const apiRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 200,
  // Increased from 100 for better reliability
  message: {
    error: 'Too many requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const generalRateLimiter = rateLimit({
  windowMs: 60 * 60 * 1000,
  // 1 hour
  max: 2000,
  // Increased from 1000
  message: {
    error: 'Too many requests from this IP, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const passwordResetRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 5,
  // Increased slightly for reliability
  message: {
    error: 'Too many password reset requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const io = socketIo(server, {
  cors: {
    origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"],
    credentials: true
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling'],
  // Connection settings for better reliability
  connectTimeout: 20000,
  // 20 seconds
  pingTimeout: 5000,
  // 5 seconds for ping
  pingInterval: 10000,
  // 10 seconds between pings
  upgradeTimeout: 10000,
  allowUpgrades: true,
  cookieHttpOnly: true,
  cookieSameSite: 'lax'
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('üîå Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '20mb',
  strict: false
})); // Increased limit and disabled strict parsing for better error tolerance
app.use(express.urlencoded({
  extended: true,
  limit: '20mb'
})); // Handle form data with increased limit

// Session configuration with secure settings and detailed logging
const sessionMiddleware = session({
  secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
  resave: false,
  saveUninitialized: false,
  store: (() => {
    const store = MongoStore.create({
      mongoUrl: process.env.MONGODB_URI || 'mongodb://localhost:27017/chatjs',
      collectionName: 'sessions',
      ttl: 24 * 60 * 60,
      // 1 day in seconds
      autoRemove: 'native',
      touchAfter: 1 * 3600 // Limit session saves to every 1 hour to reduce DB load (must be less than ttl)
    });

    // Enhanced logging for MongoDB session store operations
    ['set', 'get', 'destroy', 'touch'].forEach(method => {
      const originalMethod = store[method];
      if (typeof originalMethod === 'function') {
        store[method] = async function (sid, ...args) {
          try {
            console.log(`üîÑ MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=start`);
            const startTime = Date.now();
            const result = await originalMethod.call(this, sid, ...args);
            const duration = Date.now() - startTime;
            console.log(`‚úÖ MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=success, duration=${duration}ms, result=${!!result}`);

            // Log session content for set operations
            if (method === 'set' && args[0]) {
              console.log(`üìù Session Content: sid=${sid}, authenticated=${args[0].authenticated}, userId=${args[0].userId}`);
            }
            return result;
          } catch (error) {
            console.error(`‚ùå MongoDB Store ${method.toUpperCase()}: sessionId=${sid}, operation=failed, error=${error.message}`);
            throw error;
          }
        };
      }
    });
    return store;
  })(),
  cookie: {
    secure: process.env.NODE_ENV === 'production',
    // HTTPS only in production
    httpOnly: true,
    // Prevent XSS access to cookie
    maxAge: 24 * 60 * 60 * 1000,
    // 24 hours
    sameSite: 'lax' // CSRF protection, 'lax' for cross-origin requests
  },
  name: 'chatSession',
  // Custom name to avoid default 'connect.sid'
  rolling: false,
  // Don't extend cookie expiration on each request
  unset: 'destroy' // Destroy session on logout
});
app.use(sessionMiddleware);

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// Session authentication middleware (works parallel to JWT)
const authenticateSession = async (req, res, next) => {
  try {
    console.log('üîê Session authentication middleware called:', {
      url: req.url,
      method: req.method,
      sessionId: req.sessionID,
      sessionExists: !!req.session,
      sessionData: req.session ? {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        nickname: req.session.nickname,
        role: req.session.role,
        loginTime: req.session.loginTime,
        csrfToken: req.session.csrfToken?.substring(0, 8) + '...'
      } : null
    });

    // Check if session exists and has authenticated user
    if (req.session && req.session.authenticated && req.session.userId) {
      console.log('üéØ Found authenticated session for userId:', req.session.userId);
      console.log('üîì Session fingerprint check:', {
        sid: req.sessionID,
        csrfToken: req.session.csrfToken?.substring(0, 4) + '...',
        userAgent: req.session.userAgent?.substring(0, 20) + '...',
        loginTime: req.session.loginTime
      });
      const user = await User.findById(req.session.userId);
      if (user) {
        console.log('‚úÖ Session user found in DB:', {
          nickname: user.nickname,
          id: user._id,
          status: user.status,
          sessionValid: true
        });
        req.sessionUser = user; // Store in req.sessionUser to avoid conflict with JWT req.user

        // Update session fingerprint if needed
        if (req.session.csrfToken && req.session.userAgent) {
          req.session.lastSessionCheck = new Date().toISOString();
          console.log('üîê Session fingerprint verified and updated');
        }
      } else {
        console.log('‚ö†Ô∏è Session user not found in DB, cleaning session:', req.session.userId);
        // Clean invalid session
        delete req.session.authenticated;
        delete req.session.userId;
        delete req.session.nickname;
        delete req.session.role;
      }
    } else {
      console.log('üîç No authenticated session found or session not initialized', {
        sessionId: req.sessionID,
        session: !!req.session,
        authenticated: req.session?.authenticated,
        userId: req.session?.userId
      });
      req.sessionUser = null; // Explicitly set to null when no session
    }
    next();
  } catch (error) {
    logger.warn('Session authentication error:', {
      error: error.message,
      sessionId: req.sessionID,
      ip: req.ip
    });
    req.sessionUser = null; // Set to null on error
    next();
  }
};

// JWT authentication middleware
const authenticateToken = async (req, res, next) => {
  try {
    console.log('üîê JWT authentication middleware called:', {
      url: req.url,
      method: req.method
    });
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

    console.log('üîë Token extraction result:', {
      hasAuthHeader: !!authHeader,
      hasToken: !!token
    });
    if (!token) {
      console.log('‚ùå No token provided');
      return res.status(401).json({
        error: 'Access token required',
        code: 'NO_TOKEN'
      });
    }
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    console.log('‚úÖ JWT decoded:', {
      userId: decoded.userId,
      nickname: decoded.nickname
    });
    const user = await User.findById(decoded.userId);
    if (!user) {
      console.log('‚ùå User not found in DB for JWT userId:', decoded.userId);
      return res.status(401).json({
        error: 'User not found',
        code: 'USER_NOT_FOUND'
      });
    }
    req.user = user;
    console.log('‚úÖ JWT authentication successful for user:', user.nickname, {
      id: user._id,
      status: user.status
    });
    next();
  } catch (error) {
    logger.warn('JWT authentication failed:', {
      error: error.message,
      ip: req.ip
    });
    if (error.name === 'JsonWebTokenError') {
      return res.status(401).json({
        error: 'Invalid token format',
        code: 'INVALID_TOKEN_FORMAT'
      });
    }
    if (error.name === 'TokenExpiredError') {
      return res.status(401).json({
        error: 'Token has expired',
        code: 'TOKEN_EXPIRED'
      });
    }
    return res.status(401).json({
      error: 'Token verification failed',
      code: 'TOKEN_VERIFICATION_FAILED'
    });
  }
};

// Role-based access control middleware
const requireModerator = async (req, res, next) => {
  try {
    if (!req.user) {
      return res.status(401).json({
        error: 'Authentication required',
        code: 'AUTH_REQUIRED'
      });
    }
    if (!req.user.hasModeratorPrivileges()) {
      return res.status(403).json({
        error: 'Moderator privileges required',
        code: 'MODERATOR_REQUIRED'
      });
    }
    next();
  } catch (error) {
    logger.error('Moderator check error:', error);
    res.status(500).json({
      error: 'Server error during authorization check',
      code: 'AUTH_CHECK_ERROR'
    });
  }
};
const requireAdmin = async (req, res, next) => {
  try {
    if (!req.user) {
      return res.status(401).json({
        error: 'Authentication required',
        code: 'AUTH_REQUIRED'
      });
    }
    if (!req.user.hasAdminPrivileges()) {
      return res.status(403).json({
        error: 'Administrator privileges required',
        code: 'ADMIN_REQUIRED'
      });
    }
    next();
  } catch (error) {
    logger.error('Admin check error:', error);
    res.status(500).json({
      error: 'Server error during authorization check',
      code: 'AUTH_CHECK_ERROR'
    });
  }
};

// Error handling middleware

// Session authentication middleware (run before rate limiting)
app.use(authenticateSession);

// General rate limiting (applied to all HTTP requests)
app.use(generalRateLimiter);

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Administrative endpoints - require moderator privileges
console.log('üîß Administrative API endpoints registered at startup');

// GET /api/admin/users - List all users with moderation info
app.get('/api/admin/users', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 50;
    const skip = (page - 1) * limit;
    const users = await User.find({}).select('-password -resetPasswordToken -resetPasswordExpires -moderationToken -moderationTokenExpires').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const total = await User.countDocuments();
    logger.info(`Admin user list requested by ${req.user.nickname}`, {
      adminId: req.user._id,
      page,
      limit,
      total
    });
    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    logger.error('Error fetching users for admin:', error);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// POST /api/admin/users/:userId/ban - Ban a user
app.post('/api/admin/users/:userId/ban', authenticateToken, requireModerator, apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
}) // Max 1 year in seconds
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent banning yourself
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot ban yourself'
      });
    }

    // Prevent non-admin from banning admin
    if (user.role === 'admin' && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Cannot ban administrator'
      });
    }
    await user.ban(reason, duration, req.user._id);
    logger.info(`User ${user.nickname} banned by ${req.user.nickname}`, {
      bannedUserId: userId,
      bannedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been banned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: true,
        banReason: reason,
        banExpires: user.banExpires
      }
    });
  } catch (error) {
    logger.error('Error banning user:', error);
    res.status(500).json({
      error: 'Failed to ban user'
    });
  }
});

// POST /api/admin/users/:userId/unban - Unban a user
app.post('/api/admin/users/:userId/unban', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.banned) {
      return res.status(400).json({
        error: 'User is not banned'
      });
    }
    await user.unban();
    logger.info(`User ${user.nickname} unbanned by ${req.user.nickname}`, {
      unbannedUserId: userId,
      unbannedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unbanned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: false
      }
    });
  } catch (error) {
    logger.error('Error unbanning user:', error);
    res.status(500).json({
      error: 'Failed to unban user'
    });
  }
});

// POST /api/admin/users/:userId/warn - Issue warning to user
app.post('/api/admin/users/:userId/warn', authenticateToken, requireModerator, apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.warn(reason, req.user._id, duration);
    await user.save();
    logger.info(`Warning issued to user ${user.nickname} by ${req.user.nickname}`, {
      warnedUserId: userId,
      warnedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `Warning issued to user ${user.nickname}`,
      warning: {
        reason,
        issuedBy: req.user.nickname,
        issuedAt: new Date(),
        expires: duration ? new Date(Date.now() + duration) : null
      },
      user: {
        id: user._id,
        nickname: user.nickname,
        warningsCount: user.getActiveWarningsCount()
      }
    });
  } catch (error) {
    logger.error('Error warning user:', error);
    res.status(500).json({
      error: 'Failed to warn user'
    });
  }
});

// POST /api/admin/users/:userId/role - Change user role
app.post('/api/admin/users/:userId/role', authenticateToken, requireAdmin, apiRateLimiter, [body('role').isIn(['member', 'moderator', 'admin'])], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      role: newRole
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent modifying your own role in potentially problematic ways
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot modify your own role'
      });
    }

    // Prevent non-admin from promoting to admin or demoting admin
    if ((newRole === 'admin' || user.role === 'admin') && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Only administrators can manage admin roles'
      });
    }
    const oldRole = user.role;
    user.role = newRole;
    await user.save();
    logger.info(`User ${user.nickname} role changed from ${oldRole} to ${newRole} by ${req.user.nickname}`, {
      changedUserId: userId,
      changedById: req.user._id,
      oldRole,
      newRole
    });
    res.json({
      message: `User ${user.nickname} role changed to ${newRole}`,
      user: {
        id: user._id,
        nickname: user.nickname,
        role: newRole
      }
    });
  } catch (error) {
    logger.error('Error changing user role:', error);
    res.status(500).json({
      error: 'Failed to change user role'
    });
  }
});

// POST /api/admin/users/:userId/mute - Mute user
app.post('/api/admin/users/:userId/mute', authenticateToken, requireModerator, apiRateLimiter, [body('duration').isInt({
  min: 60,
  max: 86400
}) // 1 minute to 24 hours
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.mute(duration);
    logger.info(`User ${user.nickname} muted by ${req.user.nickname}`, {
      mutedUserId: userId,
      mutedById: req.user._id,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been muted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: user.muteExpires
      }
    });
  } catch (error) {
    logger.error('Error muting user:', error);
    res.status(500).json({
      error: 'Failed to mute user'
    });
  }
});

// POST /api/admin/users/:userId/unmute - Unmute user
app.post('/api/admin/users/:userId/unmute', authenticateToken, requireModerator, apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.isMuted()) {
      return res.status(400).json({
        error: 'User is not muted'
      });
    }
    await user.unmute();
    logger.info(`User ${user.nickname} unmuted by ${req.user.nickname}`, {
      unmutedUserId: userId,
      unmutedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unmuted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: null
      }
    });
  } catch (error) {
    logger.error('Error unmuting user:', error);
    res.status(500).json({
      error: 'Failed to unmute user'
    });
  }
});

/**
 * @swagger
 * /api/users:
 *   get:
 *     tags:
 *       - Users
 *     summary: Get list of all registered users
 *     description: Retrieves a list of all users with their roles and online status
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of users successfully retrieved
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 type: object
 *                 properties:
 *                   id:
 *                     type: string
 *                     description: User's unique identifier
 *                   nickname:
 *                     type: string
 *                     description: User's display name
 *                   role:
 *                     type: string
 *                     enum: [admin, moderator, member]
 *                     description: User's role level
 *                   status:
 *                     type: string
 *                     enum: [online, offline]
 *                     description: User's online status
 *                   createdAt:
 *                     type: string
 *                     format: date-time
 *                     description: User registration date
 *                   lastActive:
 *                     type: string
 *                     format: date-time
 *                     description: Last activity timestamp
 *             example:
 *               - id: "507f1f77bcf86cd799439011"
 *                 nickname: "john_doe"
 *                 role: "member"
 *                 status: "online"
 *                 createdAt: "2024-09-07T10:30:00Z"
 *                 lastActive: "2024-09-07T22:15:00Z"
 *       401:
 *         description: Authentication required
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       500:
 *         description: Server error
 */
console.log('üîß GET /api/users route registered at startup');
app.get('/api/users', authenticateToken, apiRateLimiter, async (req, res) => {
  try {
    const users = await User.find({}).select('_id nickname role status createdAt lastActive').sort({
      nickname: 1
    });
    logger.info(`Users list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      totalUsers: users.length
    });
    console.log('üì§ Returning users data:', users.length);
    res.json(users);
  } catch (error) {
    logger.error('Error fetching users:', error);
    console.error('‚ùå Error in GET /api/users:', error.message);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('üîÑ Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('‚ö†Ô∏è Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('‚ùå Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`üîç Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('üîß POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  try {
    console.log('üîë Incoming login request:', {
      identifier: req.body.identifier,
      hasPassword: !!req.body.password,
      ip: req.ip
    });
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      console.log('‚ùå Login validation errors:', errors.array());
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      identifier,
      password
    } = req.body;
    console.log('üîç Searching for user with identifier:', identifier);

    // Find user by nickname or email
    const user = await User.findOne({
      $or: [{
        nickname: identifier
      }, {
        email: identifier
      }]
    });
    if (!user) {
      console.log('‚ùå User not found:', identifier);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }
    console.log('‚úÖ User found:', {
      nickname: user.nickname,
      email: user.email,
      status: user.status
    });

    // Compare password
    const isPasswordValid = await user.comparePassword(password);
    console.log('üîë Password validation result:', isPasswordValid);
    if (!isPasswordValid) {
      console.log('‚ùå Invalid password for user:', user.nickname);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }

    // Update user status to online
    user.status = 'online';
    await user.save();

    // Store user in session for parallel authentication
    console.log('üîè Creating and storing user session for user:', user.nickname);
    console.log('üè∑Ô∏è Generating sessionId:', req.sessionId);
    req.session.authenticated = true;
    req.session.userId = user._id.toString();
    req.session.nickname = user.nickname; // Store additional info for convenience
    req.session.role = user.role;
    req.session.csrfToken = crypto.randomBytes(32).toString('hex'); // Generate secure unique CSRF token
    req.session.loginTime = new Date().toISOString();
    req.session.userAgent = req.get('User-Agent'); // Store user agent for additional security

    console.log('üîì Session fingerprint generated:', {
      csrfTokenHash: crypto.createHash('sha256').update(req.session.csrfToken).digest('hex').substring(0, 8),
      userAgentLength: req.session.userAgent?.length,
      loginTime: req.session.loginTime
    });

    // Save session before JWT generation
    console.log('üîê Saving session to MongoDB before JWT generation:', {
      sessionId: req.sessionId,
      userId: req.session.userId,
      nickname: req.session.nickname,
      role: req.session.role,
      csrfToken: req.session.csrfToken?.substring(0, 8) + '...',
      // Log only first part for security
      sessionData: {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        loginTime: req.session.loginTime
      }
    });
    await new Promise((resolve, reject) => {
      req.session.save(err => {
        if (err) {
          console.error('‚ùå Session save error:', {
            sessionId: req.sessionId,
            errorMessage: err.message,
            errorStack: err.stack
          });
          reject(err);
        } else {
          console.log('‚úÖ Session saved successfully with security features:', {
            sessionId: req.sessionId,
            authenticated: req.session.authenticated,
            userId: req.session.userId,
            loginTime: req.session.loginTime,
            userAgentLength: req.session.userAgent?.length
          });
          logger.info('Session saved during login', {
            sessionId: req.sessionId,
            userId: req.session.userId,
            nickname: req.session.nickname,
            role: req.session.role,
            ip: req.ip,
            userAgentHash: crypto.createHash('sha256').update(req.session.userAgent || '').digest('hex').substring(0, 16)
          });
          resolve();
        }
      });
    });

    // Generate JWT token
    console.log('üîè Generating JWT token for user:', user.nickname);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role,
      csrfToken: req.session.csrfToken,
      sessionId: req.sessionId
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('‚úÖ JWT token generated successfully');
    logger.info(`User logged in: ${user.nickname}`);
    console.log('üì§ Sending login response');
    res.json({
      token,
      // JWT for API calls and WebSockets
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      },
      session: {
        authenticated: true,
        id: req.sessionId,
        expires: req.session.cookie.expires
      }
    });
  } catch (error) {
    logger.error('Login error:', error);
    res.status(500).json({
      error: 'Server error during login'
    });
  }
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      nickname,
      email,
      password
    } = req.body;

    // Check if user exists
    const existingUser = await User.findOne({
      $or: [{
        nickname
      }, {
        email
      }]
    });
    if (existingUser) {
      const conflictField = existingUser.nickname === nickname ? 'nickname' : 'email';
      const errorMessage = conflictField === 'nickname' ? 'Nickname already taken' : 'Email already registered';
      return res.status(409).json({
        error: errorMessage
      });
    }

    // Create user
    const user = new User({
      nickname,
      email,
      password,
      role: 'member',
      status: 'online'
    });
    await user.save();
    console.log('üîè Creating and storing new user session during registration for user:', user.nickname);
    console.log('üè∑Ô∏è Generating sessionId during registration:', req.sessionId);

    // Store user in session for parallel authentication during registration
    req.session.authenticated = true;
    req.session.userId = user._id.toString();
    req.session.nickname = user.nickname;
    req.session.role = user.role;
    req.session.csrfToken = crypto.randomBytes(32).toString('hex'); // Generate secure unique CSRF token
    req.session.registrationTime = new Date().toISOString();
    req.session.userAgent = req.get('User-Agent'); // Additional security tracking

    console.log('üîì Registration session fingerprint generated:', {
      csrfTokenHash: crypto.createHash('sha256').update(req.session.csrfToken).digest('hex').substring(0, 8),
      userAgentLength: req.session.userAgent?.length,
      registrationTime: req.session.registrationTime
    });

    // Save session before JWT generation
    console.log('üîê Saving registration session to MongoDB before JWT generation:', {
      sessionId: req.sessionId,
      userId: req.session.userId,
      nickname: req.session.nickname,
      role: req.session.role,
      csrfToken: req.session.csrfToken?.substring(0, 8) + '...',
      registrationTime: req.session.registrationTime,
      sessionData: {
        authenticated: req.session.authenticated,
        userId: req.session.userId,
        registrationTime: req.session.registrationTime
      }
    });
    await new Promise((resolve, reject) => {
      req.session.save(err => {
        if (err) {
          console.error('‚ùå Session save error during registration:', {
            sessionId: req.sessionId,
            errorMessage: err.message,
            errorStack: err.stack
          });
          reject(err);
        } else {
          console.log('‚úÖ Session saved successfully during registration:', {
            sessionId: req.sessionId,
            authenticated: req.session.authenticated,
            userId: req.session.userId,
            registrationTime: req.session.registrationTime,
            userAgentLength: req.session.userAgent?.length
          });
          logger.info('Session saved during registration', {
            sessionId: req.sessionId,
            userId: req.session.userId,
            nickname: req.session.nickname,
            role: req.session.role,
            ip: req.ip,
            userAgentHash: crypto.createHash('sha256').update(req.session.userAgent || '').digest('hex').substring(0, 16)
          });
          resolve();
        }
      });
    });
    console.log('JWT_SECRET present:', !!process.env.JWT_SECRET);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role,
      csrfToken: req.session.csrfToken,
      sessionId: req.sessionId
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('JWT token generated successfully');
    logger.info(`User registered: ${user.nickname}`);
    res.status(201).json({
      token,
      // JWT for API calls and WebSockets
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      },
      session: {
        authenticated: true,
        id: req.sessionId,
        expires: req.session.cookie.expires
      }
    });
  } catch (error) {
    logger.error('Registration error:', error);
    res.status(500).json({
      error: 'Server error during registration'
    });
  }
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('üîß GET /api/channels route registered at startup');
app.get('/api/channels', authenticateToken, apiRateLimiter, async (req, res) => {
  console.log('üöÄ GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('üì§ Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('‚ùå Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('üîß POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authenticateToken, apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('üîß POST /api/logout route registered at startup');
app.post('/api/logout', authenticateToken, apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Logout request from user:', req.user.nickname, {
      userId: req.user._id
    });

    // Disconnect all Socket.IO connections for this user
    const sockets = onlineUsers;
    let disconnectedCount = 0;
    for (const [socketId, socketData] of sockets.entries()) {
      if (socketData.userId === req.user._id.toString()) {
        const socket = io.sockets.sockets.get(socketId);
        if (socket) {
          socket.disconnect();
          disconnectedCount++;
        }
      }
    }

    // Update user status to offline
    await User.findByIdAndUpdate(req.user._id, {
      status: 'offline',
      lastActive: new Date()
    });
    console.log(`‚úÖ User ${req.user.nickname} logged out successfully, ${disconnectedCount} connections disconnected`);
    logger.info(`User logged out: ${req.user.nickname}`, {
      userId: req.user._id,
      disconnectedSockets: disconnectedCount
    });
    res.json({
      success: true,
      message: 'Logged out successfully',
      disconnectedCount
    });
  } catch (error) {
    logger.error('Logout error:', error);
    res.status(500).json({
      error: 'Server error during logout'
    });
  }
});

/**
 * Session logout endpoint - destroys session
 * This complements JWT logout to handle session-based authentication
 */
app.post('/api/logout_session', apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Session logout request, sessionId:', req.sessionId);

    // Check if there's an authenticated session or JWT user
    const hasJwtAuth = !!req.user; // From JWT middleware
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    console.log('ü§î Session logout check:', {
      hasJwtAuth,
      hasSessionAuth,
      sessionUserId,
      sessionId: req.sessionId
    });
    if (hasSessionAuth) {
      const sessionUser = sessionUserId ? await User.findById(sessionUserId) : null;
      const nickname = sessionUser ? sessionUser.nickname : 'unknown';
      console.log('‚úÖ Session logout: Destroying session for user:', nickname);

      // Disconnect Socket.IO connections for this session user
      if (sessionUserId) {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === sessionUserId) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        console.log(`üóëÔ∏è Session logout: Disconnected ${disconnectedCount} socket connections`);
      }

      // Destroy the session
      await new Promise((resolve, reject) => {
        req.session.destroy(err => {
          if (err) {
            console.error('‚ùå Session destroy error:', err);
            reject(err);
          } else {
            console.log('‚úÖ Session destroyed successfully');
            resolve();
          }
        });
      });
      logger.info(`Session logged out: ${nickname}`, {
        sessionId: req.sessionId,
        ip: req.ip
      });
      res.json({
        success: true,
        message: 'Session logged out successfully',
        type: 'session_logout',
        sessionDestroyed: true
      });
    } else {
      console.log('‚ö†Ô∏è Session logout: No authenticated session to destroy');
      res.json({
        success: true,
        message: 'No active session to log out',
        type: 'session_logout',
        sessionDestroyed: false
      });
    }
  } catch (error) {
    logger.error('Session logout error:', error);
    res.status(500).json({
      error: 'Server error during session logout',
      code: 'SESSION_LOGOUT_ERROR'
    });
  }
});

// Hybrid logout endpoint - handles both JWT and session logout
app.post('/api/logout_complete', apiRateLimiter, async (req, res) => {
  try {
    console.log('üö™ Complete logout request (JWT + Session), sessionId:', req.sessionId);
    const hasJwtAuth = !!req.user;
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    let jwtLogoutResult = null;
    let sessionLogoutResult = null;

    // Handle JWT logout if JWT is provided
    if (hasJwtAuth) {
      try {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === req.user._id.toString()) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        await User.findByIdAndUpdate(req.user._id, {
          status: 'offline',
          lastActive: new Date()
        });
        jwtLogoutResult = {
          success: true,
          disconnectedCount
        };
      } catch (jwtError) {
        jwtLogoutResult = {
          success: false,
          error: jwtError.message
        };
      }
    }

    // Handle session logout if session exists
    if (hasSessionAuth) {
      try {
        if (sessionUserId) {
          const sessionUser = await User.findById(sessionUserId);
          console.log('‚úÖ Session logout: Destroying session for user:', sessionUser ? sessionUser.nickname : 'unknown');

          // Disconnect Socket.IO connections for this session user
          const sockets = onlineUsers;
          let disconnectedCount = 0;
          for (const [socketId, socketData] of sockets.entries()) {
            if (socketData.userId === sessionUserId) {
              const socket = io.sockets.sockets.get(socketId);
              if (socket) {
                socket.disconnect();
                disconnectedCount++;
              }
            }
          }
          console.log(`üóëÔ∏è Session logout: Disconnected ${disconnectedCount} socket connections`);
        }

        // Destroy the session
        await new Promise((resolve, reject) => {
          req.session.destroy(err => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
        sessionLogoutResult = {
          success: true,
          sessionDestroyed: true
        };
      } catch (sessionError) {
        sessionLogoutResult = {
          success: false,
          error: sessionError.message
        };
      }
    }
    const overallSuccess = (!jwtLogoutResult || jwtLogoutResult.success) && (!sessionLogoutResult || sessionLogoutResult.success);
    res.json({
      success: overallSuccess,
      message: 'Complete logout processed',
      type: 'complete_logout',
      jwt: jwtLogoutResult,
      session: sessionLogoutResult
    });
  } catch (error) {
    logger.error('Complete logout error:', error);
    res.status(500).json({
      error: 'Server error during complete logout',
      code: 'COMPLETE_LOGOUT_ERROR'
    });
  }
});

//  404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('‚ùå Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

// Improved Socket.IO session middleware with proper res object handling
io.use((socket, next) => {
  // Create a more complete mock res object if missing
  if (!socket.request.res) {
    socket.request.res = {
      setHeader: () => {},
      getHeader: () => {},
      writeHead: () => {},
      end: () => {},
      headersSent: false,
      statusCode: 200
    };
  }

  // Apply session middleware with error handling
  sessionMiddleware(socket.request, socket.request.res, err => {
    if (err) {
      console.error('Session middleware error for Socket.IO:', err);
      return next(err);
    }
    next();
  });
});

// Socket.IO authentication middleware
io.use(async (socket, next) => {
  const {
    csrfToken,
    sessionId
  } = socket.handshake.auth;
  let session = socket.request.session;

  // console.log('üîë Socket authentication attempt with session and CSRF fingerprint check');
  // console.log('üîç Raw socket auth data:', {
  //   csrfTokenProvided: !!csrfToken,
  //   sessionIdProvided: !!sessionId,
  //   sessionIdLength: sessionId?.length,
  //   sessionIdFromAuth: sessionId
  // });

  // If sessionId is provided in auth, try to recover the session from MongoDB store
  if (sessionId && (!session || !session.authenticated)) {
    // console.log('üîÑ Attempting session recovery from MongoDB store using sessionId:', sessionId);

    try {
      // Load session from MongoDB store using the sessionId from JWT auth
      const MongoStoreInstance = sessionMiddleware.store;
      if (MongoStoreInstance && typeof MongoStoreInstance.get === 'function') {
        const sessionData = await new Promise((resolve, reject) => {
          MongoStoreInstance.get(sessionId, (err, data) => {
            if (err) reject(err);else resolve(data);
          });
        });

        // console.log('üîÑ MongoDB session lookup result:', {
        //   sessionFound: !!sessionData,
        //   sessionAuthenticated: sessionData?.authenticated,
        //   sessionUserId: sessionData?.userId,
        //   sessionCsrfToken: !!sessionData?.csrfToken,
        //   csrfTokenMatches: csrfToken && sessionData?.csrfToken && csrfToken === sessionData.csrfToken
        // });

        if (sessionData && sessionData.authenticated) {
          // Replace socket.request.session with loaded session
          socket.request.session = sessionData;
          session = sessionData;
          console.log('‚úÖ Socket session recovered from MongoDB');
        } else {
          console.log('‚ö†Ô∏è Socket session not found in MongoDB store');
        }
      }
    } catch (error) {
      console.error('‚ùå Error loading SOCKET session from MongoDB:', error.message);
    }
  }
  console.log('üîì Fingerprint verification:', {
    sid: socket.request.sessionId,
    providedCsrfToken: csrfToken?.substring(0, 8) + '...',
    sessionCsrfToken: session?.csrfToken?.substring(0, 8) + '...',
    userAgent: socket.request.session?.userAgent?.substring(0, 20) + '...',
    loginTime: session?.loginTime,
    registrationTime: session?.registrationTime
  });

  // Validate session exists and has authentication
  if (!session || !session.authenticated || !session.userId) {
    console.log('‚ùå Socket authentication failed: No authenticated session found');
    console.log('üìã Session details:', {
      sessionId: socket.request.sessionId,
      session: !!session,
      authenticated: session?.authenticated,
      userId: session?.userId
    });
    return next(new Error('Session authentication required'));
  }

  // Validate CSRF token for additional security (must match session's unique CSRF token)
  if (!csrfToken || !session.csrfToken || csrfToken !== session.csrfToken) {
    console.log('‚ùå Socket authentication failed: Invalid CSRF token fingerprint');
    console.log('üîí Fingerprint mismatch details:', {
      provided: csrfToken?.substring(0, 8) + '...',
      expected: session.csrfToken?.substring(0, 8) + '...',
      match: csrfToken === session.csrfToken
    });
    return next(new Error('CSRF validation failed'));
  }
  console.log('‚úÖ Socket fingerprint verification successful');
  try {
    // Verify user exists in database
    const user = await User.findById(session.userId);
    if (!user) {
      console.log('‚ùå Socket authentication failed: User not found in DB');
      return next(new Error('User not found in session'));
    }

    // Handle user status update based on connection count
    const userId = session.userId;
    const connectionCount = userConnections.get(userId) || 0;
    const newConnectionCount = connectionCount + 1;
    userConnections.set(userId, newConnectionCount);

    // Check if user is banned
    if (user.isBanned()) {
      console.log('‚ùå Socket authentication failed: User is banned', {
        userId: userId,
        nickname: user.nickname,
        banReason: user.banReason,
        banExpires: user.banExpires
      });
      socket.emit('banned', {
        reason: user.banReason || 'You have been banned from the server',
        expires: user.banExpires
      });
      return next(new Error('User is banned'));
    }

    // Check if user is muted and enforce mute in chat
    const isMuted = user.isMuted();
    console.log('üîá User mute status checked:', {
      nickname: user.nickname,
      isMuted,
      muteExpires: user.muteExpires
    });

    // Update user status with connection count tracking
    const updateResult = await User.findOneAndUpdate({
      _id: userId
    }, {
      $set: {
        status: newConnectionCount > 0 ? 'online' : 'offline',
        lastActive: new Date()
      }
    }, {
      new: true,
      runValidators: true
    });
    if (updateResult) {
      console.log(`üîÑ Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
      logger.info(`User status updated to online via socket auth`, {
        userId: userId,
        nickname: user.nickname,
        connections: newConnectionCount,
        socketId: socket.id,
        timestamp: new Date()
      });
    }

    // Override local user object with updated data
    user.status = updateResult ? updateResult.status : 'online';
    user.lastActive = updateResult ? updateResult.lastActive : new Date();

    // Set socket properties for authenticated user
    socket.userId = session.userId;
    socket.nickname = session.nickname;
    socket.role = session.role || 'member';
    console.log(`üéâ Socket authenticated via session: ${socket.nickname} (userId: ${socket.userId})`);
    console.log('Socket authentication successful');
    return next();
  } catch (error) {
    console.error('‚ùå Socket authentication error:', error.message);
    logger.error(`Socket auth failed: ${error.message}`, {
      socketId: socket.id,
      sessionId: session?.id,
      ip: socket.handshake.address
    });
    return next(new Error('Socket authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`üßπ Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`üîÑ User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('üöÄ Socket connection established');
  console.log(`üë§ User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`üìä Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Enhanced heartbeat mechanism with reconnection logic
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      const now = Date.now();
      user.lastHeartbeat = now;
      console.log(`üíì Heartbeat received from user ${socket.nickname} at ${new Date(now).toISOString()}`);
    } else {
      logger.warn(`Heartbeat received from unknown socket: ${socket.id}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };

  // Send heartbeat to client periodically
  const heartbeatInterval = setInterval(() => {
    if (socket.connected) {
      socket.emit('heartbeat_request');
    }
  }, 15000); // Send heartbeat every 15 seconds

  // Clear interval on disconnect
  socket.on('disconnect', () => {
    clearInterval(heartbeatInterval);
    // ... rest of disconnect logic
  });

  // Utility function for retrying database operations
  const retryDatabaseOperation = async (operation, retries = 3) => {
    for (let i = 0; i <= retries; i++) {
      try {
        return await operation();
      } catch (error) {
        if (i === retries) throw error;
        logger.warn(`Database operation failed, retry ${i + 1}/${retries}:`, error.message);
        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1))); // Exponential backoff
      }
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      await retryDatabaseOperation(async () => {
        // Verify channel exists
        const channel = await Channel.findOne({
          id: room
        });
        if (!channel) {
          logger.warn('Join room failed: Channel not found', {
            userId: socket.userId,
            nickname: socket.nickname,
            room
          });
          socket.emit('error', {
            message: `Channel '${room}' not found`,
            code: 'CHANNEL_NOT_FOUND',
            room,
            timestamp: new Date().toISOString()
          });
          throw new Error('Channel not found');
        }

        // Leave previous room
        if (socket.room) {
          socket.leave(socket.room);
          onlineUsers.set(socket.id, {
            ...onlineUsers.get(socket.id),
            room: null
          });

          // Update online users in previous room
          const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
            nickname: u.nickname,
            role: u.role
          }));
          io.to(socket.room).emit('online_users', previousRoomUsers);
        }
        socket.room = room;
        socket.join(socket.room);

        // Update user tracking
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: socket.room
        });
        logger.info(`User ${socket.nickname} joined room ${socket.room}`);

        // Send system message about joining
        const joinMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} joined the channel.`,
          type: 'system'
        });
        await joinMessage.save();
        io.to(socket.room).emit('message', {
          author: joinMessage.author,
          channel: joinMessage.channel,
          text: joinMessage.text,
          type: joinMessage.type,
          timestamp: joinMessage.timestamp
        });

        // Send online users in current room
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);

        // Send message history
        const history = await Message.find({
          channel: socket.room,
          $or: [{
            type: 'public'
          }, {
            type: 'system'
          }, {
            author: socket.nickname
          }, {
            target: socket.nickname
          }]
        }).sort({
          timestamp: -1
        }).limit(100).sort({
          timestamp: 1
        }); // Resort for chronological order

        socket.emit('history', history.map(msg => ({
          author: msg.author,
          room: msg.channel,
          text: msg.text,
          type: msg.type,
          target: msg.target,
          timestamp: msg.timestamp
        })));
      });
    } catch (error) {
      logger.error('Error in join_room after retries:', error);
      socket.emit('error', {
        message: 'Failed to join room after multiple attempts',
        code: 'JOIN_ROOM_FAILED',
        timestamp: new Date().toISOString()
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;

    // Check if user is muted
    const currentUser = await User.findById(socket.userId);
    if (currentUser && currentUser.isMuted()) {
      socket.emit('error', {
        message: 'You are muted and cannot send messages',
        code: 'USER_MUTED',
        muteExpires: currentUser.muteExpires
      });
      return;
    }
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`üîÑ User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`‚úÖ User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Start the server
initializeServer().catch(err => {
  logger.error('Unhandled error during server startup:', err);
  process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNyeXB0byIsInNlc3Npb24iLCJNb25nb1N0b3JlIiwiY29ubmVjdERCIiwiY2xvc2VEQiIsImVtYWlsU2VydmljZSIsIlVzZXIiLCJNZXNzYWdlIiwiQ2hhbm5lbCIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImVycm9ycyIsInN0YWNrIiwianNvbiIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJDb25zb2xlIiwiY29sb3JpemUiLCJzaW1wbGUiLCJhcHAiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJ3aW5kb3dNcyIsIm1heCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIkNZUFJFU1NfQVBJX1NLSVAiLCJtZXNzYWdlIiwiZXJyb3IiLCJzdGFuZGFyZEhlYWRlcnMiLCJsZWdhY3lIZWFkZXJzIiwic2tpcCIsInJlcSIsImdldCIsImluY2x1ZGVzIiwiYXBpUmF0ZUxpbWl0ZXIiLCJnZW5lcmFsUmF0ZUxpbWl0ZXIiLCJwYXNzd29yZFJlc2V0UmF0ZUxpbWl0ZXIiLCJpbyIsIm9yaWdpbiIsIkFMTE9XRURfT1JJR0lOUyIsInNwbGl0IiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJjb25uZWN0VGltZW91dCIsInBpbmdUaW1lb3V0IiwicGluZ0ludGVydmFsIiwidXBncmFkZVRpbWVvdXQiLCJhbGxvd1VwZ3JhZGVzIiwiY29va2llSHR0cE9ubHkiLCJjb29raWVTYW1lU2l0ZSIsImVuZ2luZSIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJodHRwU3RhdHVzIiwic3RhdHVzIiwiaGVhZGVycyIsInVzZSIsImxpbWl0Iiwic3RyaWN0IiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2Vzc2lvbk1pZGRsZXdhcmUiLCJzZWNyZXQiLCJTRVNTSU9OX1NFQ1JFVCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic3RvcmUiLCJjcmVhdGUiLCJtb25nb1VybCIsIk1PTkdPREJfVVJJIiwiY29sbGVjdGlvbk5hbWUiLCJ0dGwiLCJhdXRvUmVtb3ZlIiwidG91Y2hBZnRlciIsImZvckVhY2giLCJtZXRob2QiLCJvcmlnaW5hbE1ldGhvZCIsInNpZCIsImFyZ3MiLCJ0b1VwcGVyQ2FzZSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXN1bHQiLCJjYWxsIiwiZHVyYXRpb24iLCJhdXRoZW50aWNhdGVkIiwidXNlcklkIiwiY29va2llIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJtYXhBZ2UiLCJzYW1lU2l0ZSIsIm5hbWUiLCJyb2xsaW5nIiwidW5zZXQiLCJlcnJvckhhbmRsZXIiLCJyZXMiLCJuZXh0IiwidXJsIiwiaXAiLCJ1c2VyQWdlbnQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiZmllbGQiLCJwYXRoIiwidmFsdWUiLCJkZXRhaWxzIiwia2V5cyIsImtleVZhbHVlIiwicmVxdWVzdElkIiwiaWQiLCJzdGFydCIsImluZm8iLCJzdGF0dXNDb2RlIiwidXNlciIsIm5pY2tuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsImF1dGhlbnRpY2F0ZVNlc3Npb24iLCJzZXNzaW9uSWQiLCJzZXNzaW9uSUQiLCJzZXNzaW9uRXhpc3RzIiwic2Vzc2lvbkRhdGEiLCJyb2xlIiwibG9naW5UaW1lIiwiY3NyZlRva2VuIiwic3Vic3RyaW5nIiwiZmluZEJ5SWQiLCJfaWQiLCJzZXNzaW9uVmFsaWQiLCJzZXNzaW9uVXNlciIsImxhc3RTZXNzaW9uQ2hlY2siLCJ0b0lTT1N0cmluZyIsIndhcm4iLCJhdXRoZW50aWNhdGVUb2tlbiIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsImhhc0F1dGhIZWFkZXIiLCJoYXNUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJKV1RfU0VDUkVUIiwicmVxdWlyZU1vZGVyYXRvciIsImhhc01vZGVyYXRvclByaXZpbGVnZXMiLCJyZXF1aXJlQWRtaW4iLCJoYXNBZG1pblByaXZpbGVnZXMiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJkaXJlY3RpdmVzIiwiZGVmYXVsdFNyYyIsInN0eWxlU3JjIiwiZm9udFNyYyIsImltZ1NyYyIsInNjcmlwdFNyYyIsImNvbm5lY3RTcmMiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5Iiwic3dhZ2dlck9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsInRpdGxlIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiY29udGFjdCIsInNlcnZlcnMiLCJjb21wb25lbnRzIiwic2NoZW1hcyIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZW1haWwiLCJlbnVtIiwiZGVmYXVsdCIsImNyZWF0ZWRBdCIsImxhc3RBY3RpdmUiLCJyZXF1aXJlZCIsImNyZWF0ZWRCeSIsInBvc2l0aW9uIiwiUmVnaXN0ZXJSZXF1ZXN0IiwicGFzc3dvcmQiLCJMb2dpblJlcXVlc3QiLCJpZGVudGlmaWVyIiwiQXV0aFJlc3BvbnNlIiwiJHJlZiIsIkNoYW5uZWxSZXF1ZXN0IiwiRXJyb3JSZXNwb25zZSIsIml0ZW1zIiwibXNnIiwicGFyYW0iLCJsb2NhdGlvbiIsInNlY3VyaXR5U2NoZW1lcyIsImJlYXJlckF1dGgiLCJzY2hlbWUiLCJiZWFyZXJGb3JtYXQiLCJzZWN1cml0eSIsImFwaXMiLCJzd2FnZ2VyU3BlYyIsInJlbW92ZUhlYWRlciIsInNlcnZlIiwic2V0dXAiLCJwYWdlIiwicGFyc2VJbnQiLCJxdWVyeSIsInVzZXJzIiwiZmluZCIsInNlbGVjdCIsInNvcnQiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYWRtaW5JZCIsInBhZ2luYXRpb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwicG9zdCIsImlzTGVuZ3RoIiwibWluIiwidHJpbSIsIm9wdGlvbmFsIiwiaXNJbnQiLCJpc0VtcHR5IiwiYXJyYXkiLCJwYXJhbXMiLCJyZWFzb24iLCJ0b1N0cmluZyIsImJhbiIsImJhbm5lZFVzZXJJZCIsImJhbm5lZEJ5SWQiLCJiYW5uZWQiLCJiYW5SZWFzb24iLCJiYW5FeHBpcmVzIiwidW5iYW4iLCJ1bmJhbm5lZFVzZXJJZCIsInVuYmFubmVkQnlJZCIsInNhdmUiLCJ3YXJuZWRVc2VySWQiLCJ3YXJuZWRCeUlkIiwid2FybmluZyIsImlzc3VlZEJ5IiwiaXNzdWVkQXQiLCJleHBpcmVzIiwid2FybmluZ3NDb3VudCIsImdldEFjdGl2ZVdhcm5pbmdzQ291bnQiLCJpc0luIiwibmV3Um9sZSIsIm9sZFJvbGUiLCJjaGFuZ2VkVXNlcklkIiwiY2hhbmdlZEJ5SWQiLCJtdXRlIiwibXV0ZWRVc2VySWQiLCJtdXRlZEJ5SWQiLCJtdXRlRXhwaXJlcyIsImlzTXV0ZWQiLCJ1bm11dGUiLCJ1bm11dGVkVXNlcklkIiwidW5tdXRlZEJ5SWQiLCJ0b3RhbFVzZXJzIiwibGVuZ3RoIiwic2V0SGVhZGVyIiwic2VuZCIsImF1dGhMaW1pdGVyU3RvcmUiLCJyZXNldEFsbCIsInN1Y2Nlc3MiLCJ1cHRpbWUiLCJoYXNQYXNzd29yZCIsImZpbmRPbmUiLCIkb3IiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlUGFzc3dvcmQiLCJyYW5kb21CeXRlcyIsImNzcmZUb2tlbkhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0IiwidXNlckFnZW50TGVuZ3RoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvck1lc3NhZ2UiLCJlcnJvclN0YWNrIiwidXNlckFnZW50SGFzaCIsInNpZ24iLCJleHBpcmVzSW4iLCJlc2NhcGUiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJleGlzdGluZ1VzZXIiLCJjb25mbGljdEZpZWxkIiwicmVnaXN0cmF0aW9uVGltZSIsImF1dGhvcml6YXRpb24iLCJjaGFubmVscyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJzb2NrZXRzIiwib25saW5lVXNlcnMiLCJkaXNjb25uZWN0ZWRDb3VudCIsInNvY2tldElkIiwic29ja2V0RGF0YSIsImVudHJpZXMiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJkaXNjb25uZWN0ZWRTb2NrZXRzIiwiaGFzSnd0QXV0aCIsImhhc1Nlc3Npb25BdXRoIiwic2Vzc2lvblVzZXJJZCIsImRlc3Ryb3kiLCJzZXNzaW9uRGVzdHJveWVkIiwiand0TG9nb3V0UmVzdWx0Iiwic2Vzc2lvbkxvZ291dFJlc3VsdCIsImp3dEVycm9yIiwic2Vzc2lvbkVycm9yIiwib3ZlcmFsbFN1Y2Nlc3MiLCJNYXAiLCJ1c2VyQ29ubmVjdGlvbnMiLCJ2b2ljZUNoYW5uZWxzIiwicmVxdWVzdCIsImdldEhlYWRlciIsIndyaXRlSGVhZCIsImVuZCIsImhlYWRlcnNTZW50IiwiaGFuZHNoYWtlIiwiYXV0aCIsIk1vbmdvU3RvcmVJbnN0YW5jZSIsImRhdGEiLCJwcm92aWRlZENzcmZUb2tlbiIsInNlc3Npb25Dc3JmVG9rZW4iLCJFcnJvciIsInByb3ZpZGVkIiwiZXhwZWN0ZWQiLCJtYXRjaCIsImNvbm5lY3Rpb25Db3VudCIsIm5ld0Nvbm5lY3Rpb25Db3VudCIsInNldCIsImlzQmFubmVkIiwiZW1pdCIsInVwZGF0ZVJlc3VsdCIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0IiwibmV3IiwicnVuVmFsaWRhdG9ycyIsImNvbm5lY3Rpb25zIiwiYWRkcmVzcyIsImNsZWFudXBJbmFjdGl2ZUNvbm5lY3Rpb25zIiwidGltZW91dCIsImxhc3RIZWFydGJlYXQiLCJjb25uZWN0aW9uc0xlZnQiLCJjYXRjaCIsImRlbGV0ZSIsInNldEludGVydmFsIiwicm9vbSIsInNpemUiLCJ1cGRhdGVIZWFydGJlYXQiLCJoZWFydGJlYXRJbnRlcnZhbCIsImNvbm5lY3RlZCIsImNsZWFySW50ZXJ2YWwiLCJyZXRyeURhdGFiYXNlT3BlcmF0aW9uIiwib3BlcmF0aW9uIiwicmV0cmllcyIsImkiLCJzZXRUaW1lb3V0IiwibGVhdmUiLCJwcmV2aW91c1Jvb21Vc2VycyIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsInUiLCJ0byIsImpvaW4iLCJqb2luTWVzc2FnZSIsImF1dGhvciIsInRleHQiLCJyb29tVXNlcnMiLCJoaXN0b3J5IiwidGFyZ2V0IiwiY3VycmVudFVzZXIiLCJtZXNzYWdlRGF0YSIsImRlYnVnIiwidHJpbW1lZFRleHQiLCJ0YXJnZXROaWNrbmFtZSIsInNlbmRlclJvb20iLCJzZW5kZXJTb2NrZXRJZCIsInRhcmdldFVzZXIiLCJ0YXJnZXRGb3VuZCIsInRhcmdldFJvb20iLCJvbmxpbmVVc2Vyc0luUm9vbSIsIm9ubGluZVVzZXJzSW5TZW5kZXJSb29tIiwiYXZhaWxhYmxlVXNlcnMiLCJ0YXJnZXRTb2NrZXRJZCIsInNlbmRlciIsIm1lc3NhZ2VJZCIsIm9ubGluZVVzZXJzQ291bnQiLCJtZXNzYWdlTGVuZ3RoIiwic3BlYWtpbmciLCJoYXMiLCJjaGFubmVsUGVlcnMiLCJwZWVyQ29ubmVjdGlvbiIsInN0cmVhbSIsInZvaWNlQ2hhbm5lbCIsIm9mZmVyIiwiZnJvbU5pY2tuYW1lIiwiYW5zd2VyIiwiY2FuZGlkYXRlIiwiY3VycmVudENvdW50IiwibmV3Q291bnQiLCJsZWF2ZU1lc3NhZ2UiLCJyZW1haW5pbmdDb25uZWN0aW9ucyIsImluaXRpYWxpemVTZXJ2ZXIiLCJkZWZhdWx0Q2hhbm5lbHMiLCJjaGFubmVsRGF0YSIsInVwc2VydCIsIlBPUlQiLCJsaXN0ZW4iLCJleGl0IiwiY2xvc2UiXSwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHNvY2tldElvID0gcmVxdWlyZSgnc29ja2V0LmlvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpO1xuY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IHJhdGVMaW1pdCA9IHJlcXVpcmUoJ2V4cHJlc3MtcmF0ZS1saW1pdCcpO1xuY29uc3QgeyBib2R5LCB2YWxpZGF0aW9uUmVzdWx0IH0gPSByZXF1aXJlKCdleHByZXNzLXZhbGlkYXRvcicpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuLy8gSW1wb3J0IGNyeXB0byBmb3IgZ2VuZXJhdGluZyBzZWN1cmUgdG9rZW5zXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcbmNvbnN0IE1vbmdvU3RvcmUgPSByZXF1aXJlKCdjb25uZWN0LW1vbmdvJyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xvc2VEQiB9ID0gcmVxdWlyZSgnLi9kYi9jb25uZWN0aW9uJyk7XG5jb25zdCBlbWFpbFNlcnZpY2UgPSByZXF1aXJlKCcuL3NlcnZpY2VzL2VtYWlsU2VydmljZScpO1xuXG4vLyBJbXBvcnQgbW9kZWxzXG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi9tb2RlbHMvVXNlcicpO1xuY29uc3QgTWVzc2FnZSA9IHJlcXVpcmUoJy4vbW9kZWxzL01lc3NhZ2UnKTtcbmNvbnN0IENoYW5uZWwgPSByZXF1aXJlKCcuL21vZGVscy9DaGFubmVsJyk7XG5cbi8vIExvZ2dlciBzZXR1cFxuY29uc3QgbG9nZ2VyID0gd2luc3Rvbi5jcmVhdGVMb2dnZXIoe1xuICBsZXZlbDogJ2luZm8nLFxuICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgd2luc3Rvbi5mb3JtYXQudGltZXN0YW1wKCksXG4gICAgd2luc3Rvbi5mb3JtYXQuZXJyb3JzKHsgc3RhY2s6IHRydWUgfSksXG4gICAgd2luc3Rvbi5mb3JtYXQuanNvbigpXG4gICksXG4gIGRlZmF1bHRNZXRhOiB7IHNlcnZpY2U6ICdjaGF0LXNlcnZlcicgfSxcbiAgdHJhbnNwb3J0czogW1xuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnbG9ncy9zZXJ2ZXIubG9nJyB9KSxcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5jb2xvcml6ZSgpLFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5zaW1wbGUoKVxuICAgICAgKVxuICAgIH0pXG4gIF1cbn0pO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuXG5jb25zdCBhdXRoUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnIHx8IHByb2Nlc3MuZW52LkNZUFJFU1NfQVBJX1NLSVAgPyAyMDAwMCA6IDEwLCAvLyBIaWdoZXIgbGltaXQgZm9yIGJldHRlciBVWFxuICBtZXNzYWdlOiB7IGVycm9yOiAnVG9vIG1hbnkgYXV0aGVudGljYXRpb24gYXR0ZW1wdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9LFxuICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsXG4gIGxlZ2FjeUhlYWRlcnM6IGZhbHNlLFxuICBza2lwOiAocmVxKSA9PiB7XG4gICAgcmV0dXJuIHJlcS5nZXQoJ1VzZXItQWdlbnQnKSAmJiByZXEuZ2V0KCdVc2VyLUFnZW50JykuaW5jbHVkZXMoJ0N5cHJlc3MnKTtcbiAgfVxufSk7XG5cbmNvbnN0IGFwaVJhdGVMaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dGVzXG4gIG1heDogMjAwLCAvLyBJbmNyZWFzZWQgZnJvbSAxMDAgZm9yIGJldHRlciByZWxpYWJpbGl0eVxuICBtZXNzYWdlOiB7IGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9LFxuICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsXG4gIGxlZ2FjeUhlYWRlcnM6IGZhbHNlLFxufSk7XG5cbmNvbnN0IGdlbmVyYWxSYXRlTGltaXRlciA9IHJhdGVMaW1pdCh7XG4gIHdpbmRvd01zOiA2MCAqIDYwICogMTAwMCwgLy8gMSBob3VyXG4gIG1heDogMjAwMCwgLy8gSW5jcmVhc2VkIGZyb20gMTAwMFxuICBtZXNzYWdlOiB7IGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMgZnJvbSB0aGlzIElQLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgfSxcbiAgc3RhbmRhcmRIZWFkZXJzOiB0cnVlLFxuICBsZWdhY3lIZWFkZXJzOiBmYWxzZSxcbn0pO1xuXG5jb25zdCBwYXNzd29yZFJlc2V0UmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiA1LCAvLyBJbmNyZWFzZWQgc2xpZ2h0bHkgZm9yIHJlbGlhYmlsaXR5XG4gIG1lc3NhZ2U6IHsgZXJyb3I6ICdUb28gbWFueSBwYXNzd29yZCByZXNldCByZXF1ZXN0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gIHN0YW5kYXJkSGVhZGVyczogdHJ1ZSxcbiAgbGVnYWN5SGVhZGVyczogZmFsc2UsXG59KTtcbmNvbnN0IGlvID0gc29ja2V0SW8oc2VydmVyLCB7XG4gIGNvcnM6IHtcbiAgICBvcmlnaW46IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IGZhbHNlXG4gICAgICA6IFtcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwM1wiLCBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiXSxcbiAgICBtZXRob2RzOiBbXCJHRVRcIiwgXCJQT1NUXCJdLFxuICAgIGFsbG93ZWRIZWFkZXJzOiBbXCJhdXRob3JpemF0aW9uXCIsIFwiY29udGVudC10eXBlXCJdLFxuICAgIGNyZWRlbnRpYWxzOiB0cnVlXG4gIH0sXG4gIC8vIEVuc3VyZSBib3RoIHRyYW5zcG9ydHMgYXJlIHN1cHBvcnRlZFxuICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sXG4gIC8vIENvbm5lY3Rpb24gc2V0dGluZ3MgZm9yIGJldHRlciByZWxpYWJpbGl0eVxuICBjb25uZWN0VGltZW91dDogMjAwMDAsIC8vIDIwIHNlY29uZHNcbiAgcGluZ1RpbWVvdXQ6IDUwMDAsIC8vIDUgc2Vjb25kcyBmb3IgcGluZ1xuICBwaW5nSW50ZXJ2YWw6IDEwMDAwLCAvLyAxMCBzZWNvbmRzIGJldHdlZW4gcGluZ3NcbiAgdXBncmFkZVRpbWVvdXQ6IDEwMDAwLFxuICBhbGxvd1VwZ3JhZGVzOiB0cnVlLFxuICBjb29raWVIdHRwT25seTogdHJ1ZSxcbiAgY29va2llU2FtZVNpdGU6ICdsYXgnXG59KTtcblxuLy8gTG9nIHNvY2tldCBjb25uZWN0aW9uIGVycm9ycyBmb3IgZGVidWdnaW5nXG5pby5lbmdpbmUub24oJ2Nvbm5lY3Rpb25fZXJyb3InLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5SMIFNvY2tldCBlbmdpbmUgY29ubmVjdGlvbiBlcnJvcjonLCBlcnIuY29kZSwgZXJyLm1lc3NhZ2UpO1xuICBsb2dnZXIuZXJyb3IoJ1NvY2tldCBjb25uZWN0aW9uIGVycm9yOicsIHtcbiAgICBjb2RlOiBlcnIuY29kZSxcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBodHRwU3RhdHVzOiBlcnIuc3RhdHVzLFxuICAgIGhlYWRlcnM6IGVyci5yZXE/LmhlYWRlcnNcbiAgfSk7XG59KTtcblxuLy8gQ09SUyBjb25maWd1cmF0aW9uXG5hcHAudXNlKGNvcnMoe1xuICBvcmlnaW46IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICA/IHByb2Nlc3MuZW52LkFMTE9XRURfT1JJR0lOUz8uc3BsaXQoJywnKSB8fCBmYWxzZVxuICAgIDogdHJ1ZSxcbiAgY3JlZGVudGlhbHM6IHRydWVcbn0pKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oeyBsaW1pdDogJzIwbWInLCBzdHJpY3Q6IGZhbHNlIH0pKTsgLy8gSW5jcmVhc2VkIGxpbWl0IGFuZCBkaXNhYmxlZCBzdHJpY3QgcGFyc2luZyBmb3IgYmV0dGVyIGVycm9yIHRvbGVyYW5jZVxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSwgbGltaXQ6ICcyMG1iJyB9KSk7IC8vIEhhbmRsZSBmb3JtIGRhdGEgd2l0aCBpbmNyZWFzZWQgbGltaXRcblxuLy8gU2Vzc2lvbiBjb25maWd1cmF0aW9uIHdpdGggc2VjdXJlIHNldHRpbmdzIGFuZCBkZXRhaWxlZCBsb2dnaW5nXG5jb25zdCBzZXNzaW9uTWlkZGxld2FyZSA9IHNlc3Npb24oe1xuICBzZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICd5b3VyLXZlcnktbG9uZy1zZWN1cmUtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbicsXG4gIHJlc2F2ZTogZmFsc2UsXG4gIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgc3RvcmU6ICgoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmUgPSBNb25nb1N0b3JlLmNyZWF0ZSh7XG4gICAgICBtb25nb1VybDogcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvY2hhdGpzJyxcbiAgICAgIGNvbGxlY3Rpb25OYW1lOiAnc2Vzc2lvbnMnLFxuICAgICAgdHRsOiAyNCAqIDYwICogNjAsIC8vIDEgZGF5IGluIHNlY29uZHNcbiAgICAgIGF1dG9SZW1vdmU6ICduYXRpdmUnLFxuICAgICAgdG91Y2hBZnRlcjogMSAqIDM2MDAgLy8gTGltaXQgc2Vzc2lvbiBzYXZlcyB0byBldmVyeSAxIGhvdXIgdG8gcmVkdWNlIERCIGxvYWQgKG11c3QgYmUgbGVzcyB0aGFuIHR0bClcbiAgICB9KTtcblxuICAgIC8vIEVuaGFuY2VkIGxvZ2dpbmcgZm9yIE1vbmdvREIgc2Vzc2lvbiBzdG9yZSBvcGVyYXRpb25zXG4gICAgWydzZXQnLCAnZ2V0JywgJ2Rlc3Ryb3knLCAndG91Y2gnXS5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IHN0b3JlW21ldGhvZF07XG4gICAgICBpZiAodHlwZW9mIG9yaWdpbmFsTWV0aG9kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN0b3JlW21ldGhvZF0gPSBhc3luYyBmdW5jdGlvbihzaWQsIC4uLmFyZ3MpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYPCflIQgTW9uZ29EQiBTdG9yZSAke21ldGhvZC50b1VwcGVyQ2FzZSgpfTogc2Vzc2lvbklkPSR7c2lkfSwgb3BlcmF0aW9uPXN0YXJ0YCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JpZ2luYWxNZXRob2QuY2FsbCh0aGlzLCBzaWQsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBNb25nb0RCIFN0b3JlICR7bWV0aG9kLnRvVXBwZXJDYXNlKCl9OiBzZXNzaW9uSWQ9JHtzaWR9LCBvcGVyYXRpb249c3VjY2VzcywgZHVyYXRpb249JHtkdXJhdGlvbn1tcywgcmVzdWx0PSR7ISFyZXN1bHR9YCk7XG5cbiAgICAgICAgICAgIC8vIExvZyBzZXNzaW9uIGNvbnRlbnQgZm9yIHNldCBvcGVyYXRpb25zXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSAnc2V0JyAmJiBhcmdzWzBdKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIFNlc3Npb24gQ29udGVudDogc2lkPSR7c2lkfSwgYXV0aGVudGljYXRlZD0ke2FyZ3NbMF0uYXV0aGVudGljYXRlZH0sIHVzZXJJZD0ke2FyZ3NbMF0udXNlcklkfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgTW9uZ29EQiBTdG9yZSAke21ldGhvZC50b1VwcGVyQ2FzZSgpfTogc2Vzc2lvbklkPSR7c2lkfSwgb3BlcmF0aW9uPWZhaWxlZCwgZXJyb3I9JHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0b3JlO1xuICB9KSgpLFxuICBjb29raWU6IHtcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsIC8vIEhUVFBTIG9ubHkgaW4gcHJvZHVjdGlvblxuICAgIGh0dHBPbmx5OiB0cnVlLCAvLyBQcmV2ZW50IFhTUyBhY2Nlc3MgdG8gY29va2llXG4gICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAyNCBob3Vyc1xuICAgIHNhbWVTaXRlOiAnbGF4JyAvLyBDU1JGIHByb3RlY3Rpb24sICdsYXgnIGZvciBjcm9zcy1vcmlnaW4gcmVxdWVzdHNcbiAgfSxcbiAgbmFtZTogJ2NoYXRTZXNzaW9uJywgLy8gQ3VzdG9tIG5hbWUgdG8gYXZvaWQgZGVmYXVsdCAnY29ubmVjdC5zaWQnXG4gIHJvbGxpbmc6IGZhbHNlLCAvLyBEb24ndCBleHRlbmQgY29va2llIGV4cGlyYXRpb24gb24gZWFjaCByZXF1ZXN0XG4gIHVuc2V0OiAnZGVzdHJveScgLy8gRGVzdHJveSBzZXNzaW9uIG9uIGxvZ291dFxufSk7XG5cbmFwcC51c2Uoc2Vzc2lvbk1pZGRsZXdhcmUpO1xuXG4vLyBFcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXG5jb25zdCBlcnJvckhhbmRsZXIgPSAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvcjonLCB7XG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgc3RhY2s6IGVyci5zdGFjayxcbiAgICB1cmw6IHJlcS51cmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGlwOiByZXEuaXAsXG4gICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JylcbiAgfSk7XG5cbiAgLy8gTW9uZ29vc2UgdmFsaWRhdGlvbiBlcnJvcnNcbiAgaWYgKGVyci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJykge1xuICAgIGNvbnN0IGVycm9ycyA9IE9iamVjdC52YWx1ZXMoZXJyLmVycm9ycykubWFwKGUgPT4gKHtcbiAgICAgIGZpZWxkOiBlLnBhdGgsXG4gICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICB2YWx1ZTogZS52YWx1ZVxuICAgIH0pKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuanNvbih7XG4gICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgIGRldGFpbHM6IGVycm9ycyxcbiAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJ1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTW9uZ29vc2UgZHVwbGljYXRlIGtleSBlcnJvclxuICBpZiAoZXJyLmNvZGUgPT09IDExMDAwKSB7XG4gICAgY29uc3QgZmllbGQgPSBPYmplY3Qua2V5cyhlcnIua2V5VmFsdWUpWzBdO1xuICAgIGNvbnN0IHZhbHVlID0gZXJyLmtleVZhbHVlW2ZpZWxkXTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgZXJyb3I6IGAke2ZpZWxkfSAnJHt2YWx1ZX0nIGFscmVhZHkgZXhpc3RzYCxcbiAgICAgIGNvZGU6ICdEVVBMSUNBVEVfRVJST1InXG4gICAgfSk7XG4gIH1cblxuICAvLyBKV1QgZXJyb3JzXG4gIGlmIChlcnIubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBlcnJvcjogJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbicsXG4gICAgICBjb2RlOiAnSU5WQUxJRF9UT0tFTidcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChlcnIubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBlcnJvcjogJ1Rva2VuIGhhcyBleHBpcmVkJyxcbiAgICAgIGNvZGU6ICdUT0tFTl9FWFBJUkVEJ1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRGVmYXVsdCBzZXJ2ZXIgZXJyb3JcbiAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICBjb2RlOiAnSU5URVJOQUxfRVJST1InLFxuICAgIHJlcXVlc3RJZDogcmVxLmlkIHx8ICd1bmtub3duJ1xuICB9KTtcbn07XG5cbi8vIFJlcXVlc3QgbG9nZ2luZyBtaWRkbGV3YXJlXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG5cbiAgcmVzLm9uKCdmaW5pc2gnLCAoKSA9PiB7XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgbG9nZ2VyLmluZm8oYCR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfSAtICR7cmVzLnN0YXR1c0NvZGV9ICgke2R1cmF0aW9ufW1zKWAsIHtcbiAgICAgIGlwOiByZXEuaXAsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICAgIHVzZXI6IHJlcS51c2VyPy5uaWNrbmFtZSB8fCAnYW5vbnltb3VzJyxcbiAgICAgIGJvZHk6IHJlcS5tZXRob2QgIT09ICdHRVQnID8gSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0pO1xuXG4gIG5leHQoKTtcbn0pO1xuXG4vLyBTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgKHdvcmtzIHBhcmFsbGVsIHRvIEpXVClcbmNvbnN0IGF1dGhlbnRpY2F0ZVNlc3Npb24gPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkCBTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgY2FsbGVkOicsIHtcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JRCxcbiAgICAgIHNlc3Npb25FeGlzdHM6ICEhcmVxLnNlc3Npb24sXG4gICAgICBzZXNzaW9uRGF0YTogcmVxLnNlc3Npb24gPyB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogcmVxLnNlc3Npb24ubmlja25hbWUsXG4gICAgICAgIHJvbGU6IHJlcS5zZXNzaW9uLnJvbGUsXG4gICAgICAgIGxvZ2luVGltZTogcmVxLnNlc3Npb24ubG9naW5UaW1lLFxuICAgICAgICBjc3JmVG9rZW46IHJlcS5zZXNzaW9uLmNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLidcbiAgICAgIH0gOiBudWxsXG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBpZiBzZXNzaW9uIGV4aXN0cyBhbmQgaGFzIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgIGlmIChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkICYmIHJlcS5zZXNzaW9uLnVzZXJJZCkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfjq8gRm91bmQgYXV0aGVudGljYXRlZCBzZXNzaW9uIGZvciB1c2VySWQ6JywgcmVxLnNlc3Npb24udXNlcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5STIFNlc3Npb24gZmluZ2VycHJpbnQgY2hlY2s6Jywge1xuICAgICAgICBzaWQ6IHJlcS5zZXNzaW9uSUQsXG4gICAgICAgIGNzcmZUb2tlbjogcmVxLnNlc3Npb24uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgNCkgKyAnLi4uJyxcbiAgICAgICAgdXNlckFnZW50OiByZXEuc2Vzc2lvbi51c2VyQWdlbnQ/LnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyxcbiAgICAgICAgbG9naW5UaW1lOiByZXEuc2Vzc2lvbi5sb2dpblRpbWVcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEuc2Vzc2lvbi51c2VySWQpO1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIHVzZXIgZm91bmQgaW4gREI6Jywge1xuICAgICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxuICAgICAgICAgIHNlc3Npb25WYWxpZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVxLnNlc3Npb25Vc2VyID0gdXNlcjsgLy8gU3RvcmUgaW4gcmVxLnNlc3Npb25Vc2VyIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggSldUIHJlcS51c2VyXG5cbiAgICAgICAgLy8gVXBkYXRlIHNlc3Npb24gZmluZ2VycHJpbnQgaWYgbmVlZGVkXG4gICAgICAgIGlmIChyZXEuc2Vzc2lvbi5jc3JmVG9rZW4gJiYgcmVxLnNlc3Npb24udXNlckFnZW50KSB7XG4gICAgICAgICAgcmVxLnNlc3Npb24ubGFzdFNlc3Npb25DaGVjayA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UkCBTZXNzaW9uIGZpbmdlcnByaW50IHZlcmlmaWVkIGFuZCB1cGRhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gU2Vzc2lvbiB1c2VyIG5vdCBmb3VuZCBpbiBEQiwgY2xlYW5pbmcgc2Vzc2lvbjonLCByZXEuc2Vzc2lvbi51c2VySWQpO1xuICAgICAgICAvLyBDbGVhbiBpbnZhbGlkIHNlc3Npb25cbiAgICAgICAgZGVsZXRlIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQ7XG4gICAgICAgIGRlbGV0ZSByZXEuc2Vzc2lvbi51c2VySWQ7XG4gICAgICAgIGRlbGV0ZSByZXEuc2Vzc2lvbi5uaWNrbmFtZTtcbiAgICAgICAgZGVsZXRlIHJlcS5zZXNzaW9uLnJvbGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIE5vIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiBmb3VuZCBvciBzZXNzaW9uIG5vdCBpbml0aWFsaXplZCcsIHtcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklELFxuICAgICAgICBzZXNzaW9uOiAhIXJlcS5zZXNzaW9uLFxuICAgICAgICBhdXRoZW50aWNhdGVkOiByZXEuc2Vzc2lvbj8uYXV0aGVudGljYXRlZCxcbiAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbj8udXNlcklkXG4gICAgICB9KTtcbiAgICAgIHJlcS5zZXNzaW9uVXNlciA9IG51bGw7IC8vIEV4cGxpY2l0bHkgc2V0IHRvIG51bGwgd2hlbiBubyBzZXNzaW9uXG4gICAgfVxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIud2FybignU2Vzc2lvbiBhdXRoZW50aWNhdGlvbiBlcnJvcjonLCB7XG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JRCxcbiAgICAgIGlwOiByZXEuaXBcbiAgICB9KTtcbiAgICByZXEuc2Vzc2lvblVzZXIgPSBudWxsOyAvLyBTZXQgdG8gbnVsbCBvbiBlcnJvclxuICAgIG5leHQoKTtcbiAgfVxufTtcblxuLy8gSldUIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmNvbnN0IGF1dGhlbnRpY2F0ZVRva2VuID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflJAgSldUIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgY2FsbGVkOicsIHsgdXJsOiByZXEudXJsLCBtZXRob2Q6IHJlcS5tZXRob2QgfSk7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTsgLy8gQmVhcmVyIFRPS0VOXG5cbiAgICBjb25zb2xlLmxvZygn8J+UkSBUb2tlbiBleHRyYWN0aW9uIHJlc3VsdDonLCB7IGhhc0F1dGhIZWFkZXI6ICEhYXV0aEhlYWRlciwgaGFzVG9rZW46ICEhdG9rZW4gfSk7XG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIE5vIHRva2VuIHByb3ZpZGVkJyk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0FjY2VzcyB0b2tlbiByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdOT19UT0tFTidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIEpXVCBkZWNvZGVkOicsIHsgdXNlcklkOiBkZWNvZGVkLnVzZXJJZCwgbmlja25hbWU6IGRlY29kZWQubmlja25hbWUgfSk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZGVjb2RlZC51c2VySWQpO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFVzZXIgbm90IGZvdW5kIGluIERCIGZvciBKV1QgdXNlcklkOicsIGRlY29kZWQudXNlcklkKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnVXNlciBub3QgZm91bmQnLFxuICAgICAgICBjb2RlOiAnVVNFUl9OT1RfRk9VTkQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXEudXNlciA9IHVzZXI7XG4gICAgY29uc29sZS5sb2coJ+KchSBKV1QgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3IgdXNlcjonLCB1c2VyLm5pY2tuYW1lLCB7IGlkOiB1c2VyLl9pZCwgc3RhdHVzOiB1c2VyLnN0YXR1cyB9KTtcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0pXVCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6Jywge1xuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBpcDogcmVxLmlwXG4gICAgfSk7XG5cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHRva2VuIGZvcm1hdCcsXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX1RPS0VOX0ZPUk1BVCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ1Rva2VuIGhhcyBleHBpcmVkJyxcbiAgICAgICAgY29kZTogJ1RPS0VOX0VYUElSRUQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgZXJyb3I6ICdUb2tlbiB2ZXJpZmljYXRpb24gZmFpbGVkJyxcbiAgICAgIGNvZGU6ICdUT0tFTl9WRVJJRklDQVRJT05fRkFJTEVEJ1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBSb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sIG1pZGRsZXdhcmVcbmNvbnN0IHJlcXVpcmVNb2RlcmF0b3IgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXJlcS51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ0FVVEhfUkVRVUlSRUQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcS51c2VyLmhhc01vZGVyYXRvclByaXZpbGVnZXMoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdNb2RlcmF0b3IgcHJpdmlsZWdlcyByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdNT0RFUkFUT1JfUkVRVUlSRUQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdNb2RlcmF0b3IgY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBhdXRob3JpemF0aW9uIGNoZWNrJyxcbiAgICAgIGNvZGU6ICdBVVRIX0NIRUNLX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCByZXF1aXJlQWRtaW4gPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXJlcS51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyxcbiAgICAgICAgY29kZTogJ0FVVEhfUkVRVUlSRUQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcS51c2VyLmhhc0FkbWluUHJpdmlsZWdlcygpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0FkbWluaXN0cmF0b3IgcHJpdmlsZWdlcyByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdBRE1JTl9SRVFVSVJFRCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0FkbWluIGNoZWNrIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgYXV0aG9yaXphdGlvbiBjaGVjaycsXG4gICAgICBjb2RlOiAnQVVUSF9DSEVDS19FUlJPUidcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxuXG4vLyBTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgKHJ1biBiZWZvcmUgcmF0ZSBsaW1pdGluZylcbmFwcC51c2UoYXV0aGVudGljYXRlU2Vzc2lvbik7XG5cbi8vIEdlbmVyYWwgcmF0ZSBsaW1pdGluZyAoYXBwbGllZCB0byBhbGwgSFRUUCByZXF1ZXN0cylcbmFwcC51c2UoZ2VuZXJhbFJhdGVMaW1pdGVyKTtcblxuLy8gSGVsbWV0IHNlY3VyaXR5IGhlYWRlcnNcbmFwcC51c2UoXG4gIGhlbG1ldCh7XG4gICAgY29udGVudFNlY3VyaXR5UG9saWN5OiB7XG4gICAgICBkaXJlY3RpdmVzOiB7XG4gICAgICAgIGRlZmF1bHRTcmM6IFtcIidzZWxmJ1wiXSxcbiAgICAgICAgc3R5bGVTcmM6IFtcIidzZWxmJ1wiLCBcIid1bnNhZmUtaW5saW5lJ1wiLCBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb21cIl0sXG4gICAgICAgIGZvbnRTcmM6IFtcIidzZWxmJ1wiLCBcImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIl0sXG4gICAgICAgIGltZ1NyYzogW1wiJ3NlbGYnXCIsIFwiZGF0YTpcIl0sXG4gICAgICAgIHNjcmlwdFNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCJdLFxuICAgICAgICBjb25uZWN0U3JjOiBbXCInc2VsZidcIl1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNyb3NzT3JpZ2luRW1iZWRkZXJQb2xpY3k6IGZhbHNlXG4gIH0pXG4pO1xuXG4vLyBTd2FnZ2VyIGNvbmZpZ3VyYXRpb25cbmNvbnN0IHN3YWdnZXJPcHRpb25zID0ge1xuICBkZWZpbml0aW9uOiB7XG4gICAgb3BlbmFwaTogJzMuMC4wJyxcbiAgICBpbmZvOiB7XG4gICAgICB0aXRsZTogJ0NoYXQtSlMgQVBJJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JFU1QgQVBJIGZvciBDaGF0LUpTIGFwcGxpY2F0aW9uIHdpdGggcmVhbC10aW1lIG1lc3NhZ2luZyBhbmQgdm9pY2UgY2hhbm5lbHMnLFxuICAgICAgY29udGFjdDoge1xuICAgICAgICBuYW1lOiAnQ2hhdC1KUyBTdXBwb3J0J1xuICAgICAgfVxuICAgIH0sXG4gICAgc2VydmVyczogW1xuICAgICAge1xuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0RldmVsb3BtZW50IHNlcnZlcidcbiAgICAgIH1cbiAgICBdLFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIHNjaGVtYXM6IHtcbiAgICAgICAgVXNlcjoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgdW5pcXVlIGlkZW50aWZpZXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmlja25hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBuaWNrbmFtZScsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdlbWFpbCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBlbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJvbGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsnYWRtaW4nLCAnbWVtYmVyJ10sXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICdtZW1iZXInLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgcm9sZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBjcmVhdGlvbiB0aW1lc3RhbXAnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFzdEFjdGl2ZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMYXN0IGFjdGl2aXR5IHRpbWVzdGFtcCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsnb25saW5lJywgJ29mZmxpbmUnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIG9ubGluZSBzdGF0dXMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWyduaWNrbmFtZScsICdlbWFpbCcsICdwYXNzd29yZCcsICdyb2xlJ11cbiAgICAgICAgfSxcbiAgICAgICAgQ2hhbm5lbDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdW5pcXVlIGlkZW50aWZpZXIgKGF1dG8tZ2VuZXJhdGVkIGZyb20gbmFtZSknXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgbmFtZScsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RleHQnLCAndm9pY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHR5cGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0b3Igbmlja25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkaXNwbGF5IHBvc2l0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnaWQnLCAnbmFtZScsICd0eXBlJywgJ2NyZWF0ZWRCeSddXG4gICAgICAgIH0sXG4gICAgICAgIFJlZ2lzdGVyUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbmlja25hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVbmlxdWUgdXNlcm5hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWYWxpZCBlbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDYsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBwYXNzd29yZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIExvZ2luUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2lkZW50aWZpZXInLCAncGFzc3dvcmQnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXJuYW1lIG9yIGVtYWlsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgcGFzc3dvcmQnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBBdXRoUmVzcG9uc2U6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdKV1QgYWNjZXNzIHRva2VuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBDaGFubmVsUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25hbWUnLCAndHlwZSddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMDAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkaXNwbGF5IG5hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWyd0ZXh0JywgJ3ZvaWNlJ10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB0eXBlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdPcHRpb25hbCBjaGFubmVsIGRlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgRXJyb3JSZXNwb25zZToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yIG1lc3NhZ2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgbXNnOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBwYXJhbTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHsgdHlwZTogJ3N0cmluZycgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWYWxpZGF0aW9uIGVycm9ycyBhcnJheSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZWN1cml0eVNjaGVtZXM6IHtcbiAgICAgICAgYmVhcmVyQXV0aDoge1xuICAgICAgICAgIHR5cGU6ICdodHRwJyxcbiAgICAgICAgICBzY2hlbWU6ICdiZWFyZXInLFxuICAgICAgICAgIGJlYXJlckZvcm1hdDogJ0pXVCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2VjdXJpdHk6IFtcbiAgICAgIHtcbiAgICAgICAgYmVhcmVyQXV0aDogW11cbiAgICAgIH1cbiAgICBdXG4gIH0sXG4gIGFwaXM6IFsnLi9zZXJ2ZXIuanMnXSAvLyBQYXRoIHRvIHRoZSBBUEkgcm91dGVzXG59O1xuXG5jb25zdCBzd2FnZ2VyU3BlYyA9IHN3YWdnZXJKc2RvYyhzd2FnZ2VyT3B0aW9ucyk7XG5cbi8vIFN3YWdnZXIgVUkgd2l0aCBDU1AgZGlzYWJsZWQgZm9yIHRoaXMgcm91dGVcbmFwcC51c2UoJy9hcGktZG9jcycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAvLyBEaXNhYmxlIENTUCBmb3IgU3dhZ2dlciBVSVxuICByZXMucmVtb3ZlSGVhZGVyKCdDb250ZW50LVNlY3VyaXR5LVBvbGljeScpO1xuICBuZXh0KCk7XG59LCBzd2FnZ2VyVWkuc2VydmUsIHN3YWdnZXJVaS5zZXR1cChzd2FnZ2VyU3BlYykpO1xuXG4vLyBBZG1pbmlzdHJhdGl2ZSBlbmRwb2ludHMgLSByZXF1aXJlIG1vZGVyYXRvciBwcml2aWxlZ2VzXG5jb25zb2xlLmxvZygn8J+UpyBBZG1pbmlzdHJhdGl2ZSBBUEkgZW5kcG9pbnRzIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuXG4vLyBHRVQgL2FwaS9hZG1pbi91c2VycyAtIExpc3QgYWxsIHVzZXJzIHdpdGggbW9kZXJhdGlvbiBpbmZvXG5hcHAuZ2V0KCcvYXBpL2FkbWluL3VzZXJzJywgYXV0aGVudGljYXRlVG9rZW4sIHJlcXVpcmVNb2RlcmF0b3IsIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UpIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDUwO1xuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJy1wYXNzd29yZCAtcmVzZXRQYXNzd29yZFRva2VuIC1yZXNldFBhc3N3b3JkRXhwaXJlcyAtbW9kZXJhdGlvblRva2VuIC1tb2RlcmF0aW9uVG9rZW5FeHBpcmVzJylcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgICAgLnNraXAoc2tpcClcbiAgICAgIC5saW1pdChsaW1pdCk7XG5cbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBBZG1pbiB1c2VyIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgYWRtaW5JZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcGFnZSxcbiAgICAgIGxpbWl0LFxuICAgICAgdG90YWxcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHVzZXJzLFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBwYWdlLFxuICAgICAgICBsaW1pdCxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzIGZvciBhZG1pbjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB1c2VycycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9iYW4gLSBCYW4gYSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL2JhbicsIGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlTW9kZXJhdG9yLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdyZWFzb24nKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MDAgfSkudHJpbSgpLFxuICBib2R5KCdkdXJhdGlvbicpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDEsIG1heDogMzE1MzYwMDAgfSkgLy8gTWF4IDEgeWVhciBpbiBzZWNvbmRzXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcmVhc29uLCBkdXJhdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBiYW5uaW5nIHlvdXJzZWxmXG4gICAgaWYgKHVzZXIuX2lkLnRvU3RyaW5nKCkgPT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBiYW4geW91cnNlbGYnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbm9uLWFkbWluIGZyb20gYmFubmluZyBhZG1pblxuICAgIGlmICh1c2VyLnJvbGUgPT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgYmFuIGFkbWluaXN0cmF0b3InIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIuYmFuKHJlYXNvbiwgZHVyYXRpb24sIHJlcS51c2VyLl9pZCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IGJhbm5lZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIGJhbm5lZFVzZXJJZDogdXNlcklkLFxuICAgICAgYmFubmVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcmVhc29uLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gYmFubmVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgYmFubmVkOiB0cnVlLFxuICAgICAgICBiYW5SZWFzb246IHJlYXNvbixcbiAgICAgICAgYmFuRXhwaXJlczogdXNlci5iYW5FeHBpcmVzXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBiYW5uaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gYmFuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5iYW4gLSBVbmJhbiBhIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5iYW4nLCBhdXRoZW50aWNhdGVUb2tlbiwgcmVxdWlyZU1vZGVyYXRvciwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXIuYmFubmVkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXIgaXMgbm90IGJhbm5lZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci51bmJhbigpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSB1bmJhbm5lZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVuYmFubmVkVXNlcklkOiB1c2VySWQsXG4gICAgICB1bmJhbm5lZEJ5SWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiB1bmJhbm5lZGAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGJhbm5lZDogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVuYmFubmluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVuYmFuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvd2FybiAtIElzc3VlIHdhcm5pbmcgdG8gdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC93YXJuJywgYXV0aGVudGljYXRlVG9rZW4sIHJlcXVpcmVNb2RlcmF0b3IsIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JlYXNvbicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwMCB9KS50cmltKCksXG4gIGJvZHkoJ2R1cmF0aW9uJykub3B0aW9uYWwoKS5pc0ludCh7IG1pbjogMSwgbWF4OiAzMTUzNjAwMCB9KVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHJlYXNvbiwgZHVyYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIud2FybihyZWFzb24sIHJlcS51c2VyLl9pZCwgZHVyYXRpb24pO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFdhcm5pbmcgaXNzdWVkIHRvIHVzZXIgJHt1c2VyLm5pY2tuYW1lfSBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHdhcm5lZFVzZXJJZDogdXNlcklkLFxuICAgICAgd2FybmVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcmVhc29uLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBXYXJuaW5nIGlzc3VlZCB0byB1c2VyICR7dXNlci5uaWNrbmFtZX1gLFxuICAgICAgd2FybmluZzoge1xuICAgICAgICByZWFzb24sXG4gICAgICAgIGlzc3VlZEJ5OiByZXEudXNlci5uaWNrbmFtZSxcbiAgICAgICAgaXNzdWVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGV4cGlyZXM6IGR1cmF0aW9uID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIGR1cmF0aW9uKSA6IG51bGxcbiAgICAgIH0sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIHdhcm5pbmdzQ291bnQ6IHVzZXIuZ2V0QWN0aXZlV2FybmluZ3NDb3VudCgpXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciB3YXJuaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gd2FybiB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3JvbGUgLSBDaGFuZ2UgdXNlciByb2xlXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3JvbGUnLCBhdXRoZW50aWNhdGVUb2tlbiwgcmVxdWlyZUFkbWluLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdyb2xlJykuaXNJbihbJ21lbWJlcicsICdtb2RlcmF0b3InLCAnYWRtaW4nXSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyByb2xlOiBuZXdSb2xlIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG1vZGlmeWluZyB5b3VyIG93biByb2xlIGluIHBvdGVudGlhbGx5IHByb2JsZW1hdGljIHdheXNcbiAgICBpZiAodXNlci5faWQudG9TdHJpbmcoKSA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQ2Fubm90IG1vZGlmeSB5b3VyIG93biByb2xlJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG5vbi1hZG1pbiBmcm9tIHByb21vdGluZyB0byBhZG1pbiBvciBkZW1vdGluZyBhZG1pblxuICAgIGlmICgobmV3Um9sZSA9PT0gJ2FkbWluJyB8fCB1c2VyLnJvbGUgPT09ICdhZG1pbicpICYmIHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnT25seSBhZG1pbmlzdHJhdG9ycyBjYW4gbWFuYWdlIGFkbWluIHJvbGVzJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRSb2xlID0gdXNlci5yb2xlO1xuICAgIHVzZXIucm9sZSA9IG5ld1JvbGU7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHJvbGUgY2hhbmdlZCBmcm9tICR7b2xkUm9sZX0gdG8gJHtuZXdSb2xlfSBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIGNoYW5nZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIGNoYW5nZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICBvbGRSb2xlLFxuICAgICAgbmV3Um9sZVxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSByb2xlIGNoYW5nZWQgdG8gJHtuZXdSb2xlfWAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIHJvbGU6IG5ld1JvbGVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNoYW5naW5nIHVzZXIgcm9sZTonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjaGFuZ2UgdXNlciByb2xlJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL211dGUgLSBNdXRlIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvbXV0ZScsIGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlTW9kZXJhdG9yLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdkdXJhdGlvbicpLmlzSW50KHsgbWluOiA2MCwgbWF4OiA4NjQwMCB9KSAvLyAxIG1pbnV0ZSB0byAyNCBob3Vyc1xuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IGR1cmF0aW9uIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLm11dGUoZHVyYXRpb24pO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBtdXRlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIG11dGVkVXNlcklkOiB1c2VySWQsXG4gICAgICBtdXRlZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGR1cmF0aW9uXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIG11dGVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IHVzZXIubXV0ZUV4cGlyZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIG11dGluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIG11dGUgdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bm11dGUgLSBVbm11dGUgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bm11dGUnLCBhdXRoZW50aWNhdGVUb2tlbiwgcmVxdWlyZU1vZGVyYXRvciwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXIuaXNNdXRlZCgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXIgaXMgbm90IG11dGVkJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLnVubXV0ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSB1bm11dGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdW5tdXRlZFVzZXJJZDogdXNlcklkLFxuICAgICAgdW5tdXRlZEJ5SWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiB1bm11dGVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IG51bGxcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVubXV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdW5tdXRlIHVzZXInIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS91c2VyczpcbiAqICAgZ2V0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIFVzZXJzXG4gKiAgICAgc3VtbWFyeTogR2V0IGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogUmV0cmlldmVzIGEgbGlzdCBvZiBhbGwgdXNlcnMgd2l0aCB0aGVpciByb2xlcyBhbmQgb25saW5lIHN0YXR1c1xuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IExpc3Qgb2YgdXNlcnMgc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgICAgICBpZDpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3MgdW5pcXVlIGlkZW50aWZpZXJcbiAqICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyBkaXNwbGF5IG5hbWVcbiAqICAgICAgICAgICAgICAgICAgIHJvbGU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBlbnVtOiBbYWRtaW4sIG1vZGVyYXRvciwgbWVtYmVyXVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIHJvbGUgbGV2ZWxcbiAqICAgICAgICAgICAgICAgICAgIHN0YXR1czpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGVudW06IFtvbmxpbmUsIG9mZmxpbmVdXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3Mgb25saW5lIHN0YXR1c1xuICogICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBkYXRlLXRpbWVcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcmVnaXN0cmF0aW9uIGRhdGVcbiAqICAgICAgICAgICAgICAgICAgIGxhc3RBY3RpdmU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGRhdGUtdGltZVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogTGFzdCBhY3Rpdml0eSB0aW1lc3RhbXBcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIC0gaWQ6IFwiNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDExXCJcbiAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gKiAgICAgICAgICAgICAgICAgcm9sZTogXCJtZW1iZXJcIlxuICogICAgICAgICAgICAgICAgIHN0YXR1czogXCJvbmxpbmVcIlxuICogICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogXCIyMDI0LTA5LTA3VDEwOjMwOjAwWlwiXG4gKiAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZTogXCIyMDI0LTA5LTA3VDIyOjE1OjAwWlwiXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBBdXRoZW50aWNhdGlvbiByZXF1aXJlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gKi9cbmNvbnNvbGUubG9nKCfwn5SnIEdFVCAvYXBpL3VzZXJzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLmdldCgnL2FwaS91c2VycycsIGF1dGhlbnRpY2F0ZVRva2VuLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoe30pXG4gICAgICAuc2VsZWN0KCdfaWQgbmlja25hbWUgcm9sZSBzdGF0dXMgY3JlYXRlZEF0IGxhc3RBY3RpdmUnKVxuICAgICAgLnNvcnQoeyBuaWNrbmFtZTogMSB9KTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VycyBsaXN0IHJlcXVlc3RlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgdG90YWxVc2VyczogdXNlcnMubGVuZ3RoXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBSZXR1cm5pbmcgdXNlcnMgZGF0YTonLCB1c2Vycy5sZW5ndGgpO1xuICAgIHJlcy5qc29uKHVzZXJzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gR0VUIC9hcGkvdXNlcnM6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB1c2VycycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG4vLyBTd2FnZ2VyIEpTT04gZW5kcG9pbnRcbmFwcC5nZXQoJy9hcGktZG9jcy5qc29uJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5yZW1vdmVIZWFkZXIoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5Jyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gIHJlcy5zZW5kKHN3YWdnZXJTcGVjKTtcbn0pO1xuXG4vLyBEZXZlbG9wbWVudCBhbmQgdGVzdCBlbmRwb2ludCB0byByZXNldCByYXRlIGxpbWl0aW5nXG5hcHAucG9zdCgnL2FwaS9yZXNldC1yYXRlbGltaXQnLCAocmVxLCByZXMpID0+IHtcbiAgLy8gSW4gYSByZWFsIGFwcGxpY2F0aW9uLCB5b3UnZCB3YW50IHRvIGdldCB0aGUgc3RvcmUgZnJvbSB0aGUgbGltaXRlciBpbnN0YW5jZVxuICAvLyBGb3IgZXhwcmVzcy1yYXRlLWxpbWl0IHY3KywgeW91IGNhbiBhY2Nlc3MgdGhlIHN0b3JlIGxpa2UgdGhpczpcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoTGltaXRlclN0b3JlID0gYXV0aFJhdGVMaW1pdGVyLnN0b3JlO1xuICAgIGlmIChhdXRoTGltaXRlclN0b3JlICYmIHR5cGVvZiBhdXRoTGltaXRlclN0b3JlLnJlc2V0QWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhdXRoTGltaXRlclN0b3JlLnJlc2V0QWxsKCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBSYXRlIGxpbWl0aW5nIHJlc2V0IGZvciB0ZXN0aW5nIHB1cnBvc2VzJyk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdSYXRlIGxpbWl0aW5nIGhhcyBiZWVuIHJlc2V0JyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgc3RvcmUgZG9lc24ndCBleHBvc2UgcmVzZXRBbGwsIGNyZWF0ZSBhIHRlbXBvcmFyeSB3b3JrYXJvdW5kXG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFJhdGUgbGltaXRlciBzdG9yZSBkb2VzblxcJ3Qgc3VwcG9ydCByZXNldEFsbCAtIHJhdGUgbGltaXRpbmcgd2lsbCBleHBpcmUgbmF0dXJhbGx5Jyk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ2Fubm90IHJlc2V0IHJhdGUgbGltaXRpbmcgYXV0b21hdGljYWxseSwgd2FpdCBmb3IgdGltZW91dCcgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgRXJyb3IgcmVzZXR0aW5nIHJhdGUgbGltaXRpbmc6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gcmVzZXQgcmF0ZSBsaW1pdGluZycgfSk7XG4gIH1cbn0pO1xuXG4vLyBIZWFsdGggY2hlY2sgZW5kcG9pbnRcbmFwcC5nZXQoJy9oZWFsdGgnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwdGltZTogcHJvY2Vzcy51cHRpbWUoKVxuICB9KTtcbn0pO1xuXG4vLyBMb2cgbWlkZGxld2FyZSB0byBjaGVjayBpbmNvbWluZyByZXF1ZXN0c1xuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgbG9nZ2VyLmluZm8oYPCflI0gSW5jb21pbmcgcmVxdWVzdDogJHtyZXEubWV0aG9kfSAke3JlcS51cmx9YCwge1xuICAgIGlwOiByZXEuaXAsXG4gICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JyksXG4gICAgaGVhZGVyczogcmVxLmhlYWRlcnNcbiAgfSk7XG4gIG5leHQoKTtcbn0pO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLyoqXG4gICAqIEBzd2FnZ2VyXG4gICAqIC9hcGkvbG9naW46XG4gICAqICAgcG9zdDpcbiAgICogICAgIHRhZ3M6XG4gICAqICAgICAgIC0gQXV0aGVudGljYXRpb25cbiAgICogICAgIHN1bW1hcnk6IExvZ2luIGV4aXN0aW5nIHVzZXJcbiAgICogICAgIGRlc2NyaXB0aW9uOiBBdXRoZW50aWNhdGVzIGFuZCBsb2dzIGluIGFuIGV4aXN0aW5nIHVzZXIgd2l0aCBKV1QgdG9rZW5cbiAgICogICAgIHJlcXVlc3RCb2R5OlxuICAgKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgKiAgICAgICBjb250ZW50OlxuICAgKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Mb2dpblJlcXVlc3QnXG4gICAqICAgICByZXNwb25zZXM6XG4gICAqICAgICAgIDIwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogTG9naW4gc3VjY2Vzc2Z1bFxuICAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhSZXNwb25zZSdcbiAgICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgICogICAgICAgICAgICAgICB0b2tlbjogXCJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuLi5cIlxuICAgKiAgICAgICAgICAgICAgIHVzZXI6XG4gICAqICAgICAgICAgICAgICAgICBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICAgKiAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAgKiAgICAgICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gICAqICAgICAgIDQwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogSW52YWxpZCBjcmVkZW50aWFscyBvciB2YWxpZGF0aW9uIGVycm9yc1xuICAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gICAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gICAqICAgICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFsc1wiXG4gICAqICAgICAgIDUwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gICAqL1xuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2xvZ2luIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLnBvc3QoJy9hcGkvbG9naW4nLCBbXG4gIGJvZHkoJ2lkZW50aWZpZXInKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KS50cmltKCksXG4gIGJvZHkoJ3Bhc3N3b3JkJykuaXNMZW5ndGgoeyBtaW46IDYsIG1heDogMTAwIH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkSBJbmNvbWluZyBsb2dpbiByZXF1ZXN0OicsIHsgaWRlbnRpZmllcjogcmVxLmJvZHkuaWRlbnRpZmllciwgaGFzUGFzc3dvcmQ6ICEhcmVxLmJvZHkucGFzc3dvcmQsIGlwOiByZXEuaXAgfSk7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBMb2dpbiB2YWxpZGF0aW9uIGVycm9yczonLCBlcnJvcnMuYXJyYXkoKSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWRlbnRpZmllciwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFNlYXJjaGluZyBmb3IgdXNlciB3aXRoIGlkZW50aWZpZXI6JywgaWRlbnRpZmllcik7XG5cbiAgICAvLyBGaW5kIHVzZXIgYnkgbmlja25hbWUgb3IgZW1haWxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICRvcjogW3sgbmlja25hbWU6IGlkZW50aWZpZXIgfSwgeyBlbWFpbDogaWRlbnRpZmllciB9XVxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFVzZXIgbm90IGZvdW5kOicsIGlkZW50aWZpZXIpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFVzZXIgZm91bmQ6JywgeyBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSwgZW1haWw6IHVzZXIuZW1haWwsIHN0YXR1czogdXNlci5zdGF0dXMgfSk7XG5cbiAgICAvLyBDb21wYXJlIHBhc3N3b3JkXG4gICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgdXNlci5jb21wYXJlUGFzc3dvcmQocGFzc3dvcmQpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SRIFBhc3N3b3JkIHZhbGlkYXRpb24gcmVzdWx0OicsIGlzUGFzc3dvcmRWYWxpZCk7XG5cbiAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBJbnZhbGlkIHBhc3N3b3JkIGZvciB1c2VyOicsIHVzZXIubmlja25hbWUpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgdG8gb25saW5lXG4gICAgdXNlci5zdGF0dXMgPSAnb25saW5lJztcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIC8vIFN0b3JlIHVzZXIgaW4gc2Vzc2lvbiBmb3IgcGFyYWxsZWwgYXV0aGVudGljYXRpb25cbiAgICBjb25zb2xlLmxvZygn8J+UjyBDcmVhdGluZyBhbmQgc3RvcmluZyB1c2VyIHNlc3Npb24gZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgY29uc29sZS5sb2coJ/Cfj7fvuI8gR2VuZXJhdGluZyBzZXNzaW9uSWQ6JywgcmVxLnNlc3Npb25JZCk7XG5cbiAgICByZXEuc2Vzc2lvbi5hdXRoZW50aWNhdGVkID0gdHJ1ZTtcbiAgICByZXEuc2Vzc2lvbi51c2VySWQgPSB1c2VyLl9pZC50b1N0cmluZygpO1xuICAgIHJlcS5zZXNzaW9uLm5pY2tuYW1lID0gdXNlci5uaWNrbmFtZTsgLy8gU3RvcmUgYWRkaXRpb25hbCBpbmZvIGZvciBjb252ZW5pZW5jZVxuICAgIHJlcS5zZXNzaW9uLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgcmVxLnNlc3Npb24uY3NyZlRva2VuID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7IC8vIEdlbmVyYXRlIHNlY3VyZSB1bmlxdWUgQ1NSRiB0b2tlblxuICAgIHJlcS5zZXNzaW9uLmxvZ2luVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICByZXEuc2Vzc2lvbi51c2VyQWdlbnQgPSByZXEuZ2V0KCdVc2VyLUFnZW50Jyk7IC8vIFN0b3JlIHVzZXIgYWdlbnQgZm9yIGFkZGl0aW9uYWwgc2VjdXJpdHlcblxuICAgIGNvbnNvbGUubG9nKCfwn5STIFNlc3Npb24gZmluZ2VycHJpbnQgZ2VuZXJhdGVkOicsIHtcbiAgICAgIGNzcmZUb2tlbkhhc2g6IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUocmVxLnNlc3Npb24uY3NyZlRva2VuKS5kaWdlc3QoJ2hleCcpLnN1YnN0cmluZygwLCA4KSxcbiAgICAgIHVzZXJBZ2VudExlbmd0aDogcmVxLnNlc3Npb24udXNlckFnZW50Py5sZW5ndGgsXG4gICAgICBsb2dpblRpbWU6IHJlcS5zZXNzaW9uLmxvZ2luVGltZVxuICAgIH0pO1xuXG4gICAgLy8gU2F2ZSBzZXNzaW9uIGJlZm9yZSBKV1QgZ2VuZXJhdGlvblxuICAgIGNvbnNvbGUubG9nKCfwn5SQIFNhdmluZyBzZXNzaW9uIHRvIE1vbmdvREIgYmVmb3JlIEpXVCBnZW5lcmF0aW9uOicsIHtcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgbmlja25hbWU6IHJlcS5zZXNzaW9uLm5pY2tuYW1lLFxuICAgICAgcm9sZTogcmVxLnNlc3Npb24ucm9sZSxcbiAgICAgIGNzcmZUb2tlbjogcmVxLnNlc3Npb24uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJywgLy8gTG9nIG9ubHkgZmlyc3QgcGFydCBmb3Igc2VjdXJpdHlcbiAgICAgIHNlc3Npb25EYXRhOiB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICBsb2dpblRpbWU6IHJlcS5zZXNzaW9uLmxvZ2luVGltZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVxLnNlc3Npb24uc2F2ZSgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgU2Vzc2lvbiBzYXZlIGVycm9yOicsIHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnIuc3RhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gc2F2ZWQgc3VjY2Vzc2Z1bGx5IHdpdGggc2VjdXJpdHkgZmVhdHVyZXM6Jywge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICAgICAgYXV0aGVudGljYXRlZDogcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCxcbiAgICAgICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICAgICAgbG9naW5UaW1lOiByZXEuc2Vzc2lvbi5sb2dpblRpbWUsXG4gICAgICAgICAgICB1c2VyQWdlbnRMZW5ndGg6IHJlcS5zZXNzaW9uLnVzZXJBZ2VudD8ubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oJ1Nlc3Npb24gc2F2ZWQgZHVyaW5nIGxvZ2luJywge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogcmVxLnNlc3Npb24ubmlja25hbWUsXG4gICAgICAgICAgICByb2xlOiByZXEuc2Vzc2lvbi5yb2xlLFxuICAgICAgICAgICAgaXA6IHJlcS5pcCxcbiAgICAgICAgICAgIHVzZXJBZ2VudEhhc2g6IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUocmVxLnNlc3Npb24udXNlckFnZW50IHx8ICcnKS5kaWdlc3QoJ2hleCcpLnN1YnN0cmluZygwLCAxNilcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXG4gICAgY29uc29sZS5sb2coJ/CflI8gR2VuZXJhdGluZyBKV1QgdG9rZW4gZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgIHtcbiAgICAgICAgdXNlcklkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgY3NyZlRva2VuOiByZXEuc2Vzc2lvbi5jc3JmVG9rZW4sXG4gICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZFxuICAgICAgfSxcbiAgICAgIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsXG4gICAgICB7IGV4cGlyZXNJbjogJzI0aCcgfVxuICAgICk7XG4gICAgY29uc29sZS5sb2coJ+KchSBKV1QgdG9rZW4gZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgbG9nZ2VkIGluOiAke3VzZXIubmlja25hbWV9YCk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBTZW5kaW5nIGxvZ2luIHJlc3BvbnNlJyk7XG4gICAgcmVzLmpzb24oe1xuICAgICAgdG9rZW4sIC8vIEpXVCBmb3IgQVBJIGNhbGxzIGFuZCBXZWJTb2NrZXRzXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGVcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uOiB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICBleHBpcmVzOiByZXEuc2Vzc2lvbi5jb29raWUuZXhwaXJlc1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignTG9naW4gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGxvZ2luJyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICAgKiBAc3dhZ2dlclxuICAgKiAvYXBpL3JlZ2lzdGVyOlxuICAqICAgcG9zdDpcbiAgKiAgICAgdGFnczpcbiAgKiAgICAgICAtIEF1dGhlbnRpY2F0aW9uXG4gICogICAgIHN1bW1hcnk6IFJlZ2lzdGVyIG5ldyB1c2VyXG4gICogICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgcmV0dXJucyBKV1QgdG9rZW5cbiAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgKiAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9SZWdpc3RlclJlcXVlc3QnXG4gICogICAgICAgICAgIGV4YW1wbGU6XG4gICogICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAqICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgIHBhc3N3b3JkOiBcInNlY3VyZVBhc3MxMjNcIlxuICAqICAgICByZXNwb25zZXM6XG4gICogICAgICAgMjAxOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsXG4gICogICAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9BdXRoUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICogICAgICAgICAgICAgICB1c2VyOlxuICAqICAgICAgICAgICAgICAgICBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICogICAgICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gICogICAgICAgNDAwOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFZhbGlkYXRpb24gZXJyb3JzIG9yIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIGVycm9yOiBcIk5pY2tuYW1lIGFscmVhZHkgdGFrZW5cIlxuICAqICAgICAgIDUwMDpcbiAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgKi9cbmFwcC5wb3N0KCcvYXBpL3JlZ2lzdGVyJywgYXV0aFJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ25pY2tuYW1lJykuaXNMZW5ndGgoeyBtaW46IDMsIG1heDogNTAgfSkudHJpbSgpLmVzY2FwZSgpLFxuICBib2R5KCdlbWFpbCcpLmlzRW1haWwoKS5ub3JtYWxpemVFbWFpbCgpLFxuICBib2R5KCdwYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA2IH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAkb3I6IFt7IG5pY2tuYW1lIH0sIHsgZW1haWwgfV1cbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIGNvbnN0IGNvbmZsaWN0RmllbGQgPSBleGlzdGluZ1VzZXIubmlja25hbWUgPT09IG5pY2tuYW1lID8gJ25pY2tuYW1lJyA6ICdlbWFpbCc7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBjb25mbGljdEZpZWxkID09PSAnbmlja25hbWUnID8gJ05pY2tuYW1lIGFscmVhZHkgdGFrZW4nIDogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZCc7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB1c2VyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHsgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCwgcm9sZTogJ21lbWJlcicsIHN0YXR1czogJ29ubGluZScgfSk7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjyBDcmVhdGluZyBhbmQgc3RvcmluZyBuZXcgdXNlciBzZXNzaW9uIGR1cmluZyByZWdpc3RyYXRpb24gZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgY29uc29sZS5sb2coJ/Cfj7fvuI8gR2VuZXJhdGluZyBzZXNzaW9uSWQgZHVyaW5nIHJlZ2lzdHJhdGlvbjonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIC8vIFN0b3JlIHVzZXIgaW4gc2Vzc2lvbiBmb3IgcGFyYWxsZWwgYXV0aGVudGljYXRpb24gZHVyaW5nIHJlZ2lzdHJhdGlvblxuICAgIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgIHJlcS5zZXNzaW9uLnVzZXJJZCA9IHVzZXIuX2lkLnRvU3RyaW5nKCk7XG4gICAgcmVxLnNlc3Npb24ubmlja25hbWUgPSB1c2VyLm5pY2tuYW1lO1xuICAgIHJlcS5zZXNzaW9uLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgcmVxLnNlc3Npb24uY3NyZlRva2VuID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7IC8vIEdlbmVyYXRlIHNlY3VyZSB1bmlxdWUgQ1NSRiB0b2tlblxuICAgIHJlcS5zZXNzaW9uLnJlZ2lzdHJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgcmVxLnNlc3Npb24udXNlckFnZW50ID0gcmVxLmdldCgnVXNlci1BZ2VudCcpOyAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IHRyYWNraW5nXG5cbiAgICBjb25zb2xlLmxvZygn8J+UkyBSZWdpc3RyYXRpb24gc2Vzc2lvbiBmaW5nZXJwcmludCBnZW5lcmF0ZWQ6Jywge1xuICAgICAgY3NyZlRva2VuSGFzaDogY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShyZXEuc2Vzc2lvbi5jc3JmVG9rZW4pLmRpZ2VzdCgnaGV4Jykuc3Vic3RyaW5nKDAsIDgpLFxuICAgICAgdXNlckFnZW50TGVuZ3RoOiByZXEuc2Vzc2lvbi51c2VyQWdlbnQ/Lmxlbmd0aCxcbiAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IHJlcS5zZXNzaW9uLnJlZ2lzdHJhdGlvblRpbWVcbiAgICB9KTtcblxuICAgIC8vIFNhdmUgc2Vzc2lvbiBiZWZvcmUgSldUIGdlbmVyYXRpb25cbiAgICBjb25zb2xlLmxvZygn8J+UkCBTYXZpbmcgcmVnaXN0cmF0aW9uIHNlc3Npb24gdG8gTW9uZ29EQiBiZWZvcmUgSldUIGdlbmVyYXRpb246Jywge1xuICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VySWQsXG4gICAgICBuaWNrbmFtZTogcmVxLnNlc3Npb24ubmlja25hbWUsXG4gICAgICByb2xlOiByZXEuc2Vzc2lvbi5yb2xlLFxuICAgICAgY3NyZlRva2VuOiByZXEuc2Vzc2lvbi5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgICAgcmVnaXN0cmF0aW9uVGltZTogcmVxLnNlc3Npb24ucmVnaXN0cmF0aW9uVGltZSxcbiAgICAgIHNlc3Npb25EYXRhOiB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICByZWdpc3RyYXRpb25UaW1lOiByZXEuc2Vzc2lvbi5yZWdpc3RyYXRpb25UaW1lXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXEuc2Vzc2lvbi5zYXZlKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTZXNzaW9uIHNhdmUgZXJyb3IgZHVyaW5nIHJlZ2lzdHJhdGlvbjonLCB7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyLnN0YWNrXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIHNhdmVkIHN1Y2Nlc3NmdWxseSBkdXJpbmcgcmVnaXN0cmF0aW9uOicsIHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQ6IHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgICAgICB1c2VySWQ6IHJlcS5zZXNzaW9uLnVzZXJJZCxcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IHJlcS5zZXNzaW9uLnJlZ2lzdHJhdGlvblRpbWUsXG4gICAgICAgICAgICB1c2VyQWdlbnRMZW5ndGg6IHJlcS5zZXNzaW9uLnVzZXJBZ2VudD8ubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oJ1Nlc3Npb24gc2F2ZWQgZHVyaW5nIHJlZ2lzdHJhdGlvbicsIHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHJlcS5zZXNzaW9uLm5pY2tuYW1lLFxuICAgICAgICAgICAgcm9sZTogcmVxLnNlc3Npb24ucm9sZSxcbiAgICAgICAgICAgIGlwOiByZXEuaXAsXG4gICAgICAgICAgICB1c2VyQWdlbnRIYXNoOiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHJlcS5zZXNzaW9uLnVzZXJBZ2VudCB8fCAnJykuZGlnZXN0KCdoZXgnKS5zdWJzdHJpbmcoMCwgMTYpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdKV1RfU0VDUkVUIHByZXNlbnQ6JywgISFwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICB1c2VySWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICBjc3JmVG9rZW46IHJlcS5zZXNzaW9uLmNzcmZUb2tlbixcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkXG4gICAgICB9LFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9XG4gICAgKTtcblxuICAgIGNvbnNvbGUubG9nKCdKV1QgdG9rZW4gZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIGxvZ2dlci5pbmZvKGBVc2VyIHJlZ2lzdGVyZWQ6ICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHRva2VuLCAvLyBKV1QgZm9yIEFQSSBjYWxscyBhbmQgV2ViU29ja2V0c1xuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgcm9sZTogdXNlci5yb2xlXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbjoge1xuICAgICAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgZXhwaXJlczogcmVxLnNlc3Npb24uY29va2llLmV4cGlyZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1JlZ2lzdHJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgcmVnaXN0cmF0aW9uJyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvY2hhbm5lbHM6XG4gKiAgIGdldDpcbiAqICAgICB0YWdzOlxuICogICAgICAgLSBDaGFubmVsc1xuICogICAgIHN1bW1hcnk6IEdldCBsaXN0IG9mIGNoYW5uZWxzXG4gKiAgICAgZGVzY3JpcHRpb246IFJldHJpZXZlcyBhIGxpc3Qgb2YgYWxsIGF2YWlsYWJsZSBjaGFubmVsc1xuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IExpc3Qgb2YgY2hhbm5lbHNcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBhcnJheVxuICogICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbCdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIC0gaWQ6IFwiZ2VuZXJhbFwiXG4gKiAgICAgICAgICAgICAgICAgbmFtZTogXCJHZW5lcmFsXCJcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiXG4gKiAgICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBcInN5c3RlbVwiXG4gKiAgICAgICAgICAgICAgICAgcG9zaXRpb246IDBcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgZXJyb3I6IFwiQWNjZXNzIHRva2VuIHJlcXVpcmVkXCJcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludGVybmFsIHNlcnZlciBlcnJvclxuICovXG5jb25zb2xlLmxvZygn8J+UpyBHRVQgL2FwaS9jaGFubmVscyByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5nZXQoJy9hcGkvY2hhbm5lbHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZygn8J+agCBHRVQgL2FwaS9jaGFubmVscyBlbmRwb2ludCBjYWxsZWQnLCB7IG1ldGhvZDogcmVxLm1ldGhvZCwgdXJsOiByZXEudXJsLCBoZWFkZXJzOiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID8gJ2F1dGggaGVhZGVyIHByZXNlbnQnIDogJ25vIGF1dGggaGVhZGVyJyB9KTtcbiAgdHJ5IHtcbiAgICBjb25zdCBjaGFubmVscyA9IGF3YWl0IENoYW5uZWwuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJy1faWQgaWQgbmFtZSB0eXBlIGRlc2NyaXB0aW9uIGNyZWF0ZWRCeSBwb3NpdGlvbicpXG4gICAgICAuc29ydCh7IHBvc2l0aW9uOiAxIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oYENoYW5uZWxzIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXG4gICAgICBjaGFubmVsQ291bnQ6IGNoYW5uZWxzLmxlbmd0aFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfk6QgUmV0dXJuaW5nIGNoYW5uZWxzIGRhdGE6JywgY2hhbm5lbHMubGVuZ3RoKTtcbiAgICByZXMuanNvbihjaGFubmVscyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBjaGFubmVsczonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluIEdFVCAvYXBpL2NoYW5uZWxzOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggY2hhbm5lbHMnLCBjb2RlOiAnREFUQUJBU0VfRVJST1InIH0pO1xuICB9XG59KTtcblxuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2NoYW5uZWxzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL2NoYW5uZWxzOlxuICogICBwb3N0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIENoYW5uZWxzXG4gKiAgICAgc3VtbWFyeTogQ3JlYXRlIGEgbmV3IGNoYW5uZWxcbiAqICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlcyBhIG5ldyB0ZXh0IG9yIHZvaWNlIGNoYW5uZWxcbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsUmVxdWVzdCdcbiAqICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgbmFtZTogXCJOZXdDaGFubmVsXCJcbiAqICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXNjcmlwdGlvbiBvZiB0aGUgbmV3IGNoYW5uZWxcIlxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENoYW5uZWwgY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbCdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGlkOiBcIm5ld2NoYW5uZWxcIlxuICogICAgICAgICAgICAgICBuYW1lOiBcIk5ld0NoYW5uZWxcIlxuICogICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXNjcmlwdGlvbiBvZiB0aGUgbmV3IGNoYW5uZWxcIlxuICogICAgICAgICAgICAgICBjcmVhdGVkQnk6IFwiam9obl9kb2VcIlxuICogICAgICAgICAgICAgICBwb3NpdGlvbjogMTBcbiAqICAgICAgIDQwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludmFsaWQgcmVxdWVzdCBkYXRhXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVbmF1dGhvcml6ZWRcbiAqICAgICAgIDQwOTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENoYW5uZWwgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gKi9cbmFwcC5wb3N0KCcvYXBpL2NoYW5uZWxzJywgYXV0aGVudGljYXRlVG9rZW4sIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ25hbWUnKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiAxMDAgfSkudHJpbSgpLmVzY2FwZSgpLFxuICBib2R5KCd0eXBlJykuaXNJbihbJ3RleHQnLCAndm9pY2UnXSkudHJpbSgpLFxuICBib2R5KCdkZXNjcmlwdGlvbicpLm9wdGlvbmFsKCkuaXNMZW5ndGgoeyBtYXg6IDUwMCB9KS50cmltKClcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBuYW1lLCB0eXBlLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgY3JlYXRlZEJ5ID0gcmVxLnVzZXIubmlja25hbWU7XG5cbiAgICAvLyBDcmVhdGUgbmV3IGNoYW5uZWwgKElEIHdpbGwgYmUgYXV0by1nZW5lcmF0ZWQgaW4gcHJlLXNhdmUgbWlkZGxld2FyZSlcbiAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgbmFtZSxcbiAgICAgIHR5cGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGNyZWF0ZWRCeVxuICAgIH0pO1xuXG4gICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgQ2hhbm5lbCAnJHtuYW1lfScgY3JlYXRlZCBieSAke2NyZWF0ZWRCeX1gLCB7XG4gICAgICBjaGFubmVsSWQ6IGNoYW5uZWwuaWQsXG4gICAgICB0eXBlLFxuICAgICAgdXNlcklkOiByZXEudXNlci5faWRcbiAgICB9KTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGlkOiBjaGFubmVsLmlkLFxuICAgICAgbmFtZTogY2hhbm5lbC5uYW1lLFxuICAgICAgdHlwZTogY2hhbm5lbC50eXBlLFxuICAgICAgZGVzY3JpcHRpb246IGNoYW5uZWwuZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQnk6IGNoYW5uZWwuY3JlYXRlZEJ5LFxuICAgICAgcG9zaXRpb246IGNoYW5uZWwucG9zaXRpb25cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2hhbm5lbDonLCBlcnJvcik7XG5cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjaGFubmVsIGRhdGEnLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gMTEwMDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQ2hhbm5lbCBuYW1lIGFscmVhZHkgZXhpc3RzJyxcbiAgICAgICAgY29kZTogJ0RVUExJQ0FURV9DSEFOTkVMJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNoYW5uZWwnLFxuICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2xvZ291dCByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5wb3N0KCcvYXBpL2xvZ291dCcsIGF1dGhlbnRpY2F0ZVRva2VuLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogTG9nb3V0IHJlcXVlc3QgZnJvbSB1c2VyOicsIHJlcS51c2VyLm5pY2tuYW1lLCB7IHVzZXJJZDogcmVxLnVzZXIuX2lkIH0pO1xuXG4gICAgLy8gRGlzY29ubmVjdCBhbGwgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHVzZXJcbiAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgdG8gb2ZmbGluZVxuICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuX2lkLCB7XG4gICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgVXNlciAke3JlcS51c2VyLm5pY2tuYW1lfSBsb2dnZWQgb3V0IHN1Y2Nlc3NmdWxseSwgJHtkaXNjb25uZWN0ZWRDb3VudH0gY29ubmVjdGlvbnMgZGlzY29ubmVjdGVkYCk7XG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgbG9nZ2VkIG91dDogJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGRpc2Nvbm5lY3RlZFNvY2tldHM6IGRpc2Nvbm5lY3RlZENvdW50XG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0xvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRpc2Nvbm5lY3RlZENvdW50XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdMb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGxvZ291dCcgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFNlc3Npb24gbG9nb3V0IGVuZHBvaW50IC0gZGVzdHJveXMgc2Vzc2lvblxuICogVGhpcyBjb21wbGVtZW50cyBKV1QgbG9nb3V0IHRvIGhhbmRsZSBzZXNzaW9uLWJhc2VkIGF1dGhlbnRpY2F0aW9uXG4gKi9cbmFwcC5wb3N0KCcvYXBpL2xvZ291dF9zZXNzaW9uJywgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5qqIFNlc3Npb24gbG9nb3V0IHJlcXVlc3QsIHNlc3Npb25JZDonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gYXV0aGVudGljYXRlZCBzZXNzaW9uIG9yIEpXVCB1c2VyXG4gICAgY29uc3QgaGFzSnd0QXV0aCA9ICEhcmVxLnVzZXI7IC8vIEZyb20gSldUIG1pZGRsZXdhcmVcbiAgICBjb25zdCBoYXNTZXNzaW9uQXV0aCA9IHJlcS5zZXNzaW9uVXNlciB8fCAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCk7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXJJZCA9IHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnVzZXJJZDtcblxuICAgIGNvbnNvbGUubG9nKCfwn6SUIFNlc3Npb24gbG9nb3V0IGNoZWNrOicsIHtcbiAgICAgIGhhc0p3dEF1dGgsXG4gICAgICBoYXNTZXNzaW9uQXV0aCxcbiAgICAgIHNlc3Npb25Vc2VySWQsXG4gICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWRcbiAgICB9KTtcblxuICAgIGlmIChoYXNTZXNzaW9uQXV0aCkge1xuICAgICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBzZXNzaW9uVXNlcklkID8gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uVXNlcklkKSA6IG51bGw7XG4gICAgICBjb25zdCBuaWNrbmFtZSA9IHNlc3Npb25Vc2VyID8gc2Vzc2lvblVzZXIubmlja25hbWUgOiAndW5rbm93bic7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBsb2dvdXQ6IERlc3Ryb3lpbmcgc2Vzc2lvbiBmb3IgdXNlcjonLCBuaWNrbmFtZSk7XG5cbiAgICAgIC8vIERpc2Nvbm5lY3QgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHNlc3Npb24gdXNlclxuICAgICAgaWYgKHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgY29uc3Qgc29ja2V0cyA9IG9ubGluZVVzZXJzO1xuICAgICAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoc29ja2V0RGF0YS51c2VySWQgPT09IHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFNlc3Npb24gbG9nb3V0OiBEaXNjb25uZWN0ZWQgJHtkaXNjb25uZWN0ZWRDb3VudH0gc29ja2V0IGNvbm5lY3Rpb25zYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlc3Ryb3kgdGhlIHNlc3Npb25cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFNlc3Npb24gZGVzdHJveSBlcnJvcjonLCBlcnIpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBkZXN0cm95ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgU2Vzc2lvbiBsb2dnZWQgb3V0OiAke25pY2tuYW1lfWAsIHtcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICBpcDogcmVxLmlwXG4gICAgICB9KTtcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnU2Vzc2lvbiBsb2dnZWQgb3V0IHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIHR5cGU6ICdzZXNzaW9uX2xvZ291dCcsXG4gICAgICAgIHNlc3Npb25EZXN0cm95ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFNlc3Npb24gbG9nb3V0OiBObyBhdXRoZW50aWNhdGVkIHNlc3Npb24gdG8gZGVzdHJveScpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnTm8gYWN0aXZlIHNlc3Npb24gdG8gbG9nIG91dCcsXG4gICAgICAgIHR5cGU6ICdzZXNzaW9uX2xvZ291dCcsXG4gICAgICAgIHNlc3Npb25EZXN0cm95ZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1Nlc3Npb24gbG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgc2Vzc2lvbiBsb2dvdXQnLFxuICAgICAgY29kZTogJ1NFU1NJT05fTE9HT1VUX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLy8gSHlicmlkIGxvZ291dCBlbmRwb2ludCAtIGhhbmRsZXMgYm90aCBKV1QgYW5kIHNlc3Npb24gbG9nb3V0XG5hcHAucG9zdCgnL2FwaS9sb2dvdXRfY29tcGxldGUnLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogQ29tcGxldGUgbG9nb3V0IHJlcXVlc3QgKEpXVCArIFNlc3Npb24pLCBzZXNzaW9uSWQ6JywgcmVxLnNlc3Npb25JZCk7XG5cbiAgICBjb25zdCBoYXNKd3RBdXRoID0gISFyZXEudXNlcjtcbiAgICBjb25zdCBoYXNTZXNzaW9uQXV0aCA9IHJlcS5zZXNzaW9uVXNlciB8fCAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCk7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXJJZCA9IHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnVzZXJJZDtcblxuICAgIGxldCBqd3RMb2dvdXRSZXN1bHQgPSBudWxsO1xuICAgIGxldCBzZXNzaW9uTG9nb3V0UmVzdWx0ID0gbnVsbDtcblxuICAgIC8vIEhhbmRsZSBKV1QgbG9nb3V0IGlmIEpXVCBpcyBwcm92aWRlZFxuICAgIGlmIChoYXNKd3RBdXRoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuX2lkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICB9KTtcblxuICAgICAgICBqd3RMb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoand0RXJyb3IpIHtcbiAgICAgICAgand0TG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBqd3RFcnJvci5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNlc3Npb24gbG9nb3V0IGlmIHNlc3Npb24gZXhpc3RzXG4gICAgaWYgKGhhc1Nlc3Npb25BdXRoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25Vc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uVXNlcklkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gbG9nb3V0OiBEZXN0cm95aW5nIHNlc3Npb24gZm9yIHVzZXI6Jywgc2Vzc2lvblVzZXIgPyBzZXNzaW9uVXNlci5uaWNrbmFtZSA6ICd1bmtub3duJyk7XG5cbiAgICAgICAgICAvLyBEaXNjb25uZWN0IFNvY2tldC5JTyBjb25uZWN0aW9ucyBmb3IgdGhpcyBzZXNzaW9uIHVzZXJcbiAgICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyBTZXNzaW9uIGxvZ291dDogRGlzY29ubmVjdGVkICR7ZGlzY29ubmVjdGVkQ291bnR9IHNvY2tldCBjb25uZWN0aW9uc2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVzdHJveSB0aGUgc2Vzc2lvblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXNzaW9uTG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoc2Vzc2lvbkVycm9yKSB7XG4gICAgICAgIHNlc3Npb25Mb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHNlc3Npb25FcnJvci5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcmFsbFN1Y2Nlc3MgPSAoIWp3dExvZ291dFJlc3VsdCB8fCBqd3RMb2dvdXRSZXN1bHQuc3VjY2VzcykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKCFzZXNzaW9uTG9nb3V0UmVzdWx0IHx8IHNlc3Npb25Mb2dvdXRSZXN1bHQuc3VjY2Vzcyk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiBvdmVyYWxsU3VjY2VzcyxcbiAgICAgIG1lc3NhZ2U6ICdDb21wbGV0ZSBsb2dvdXQgcHJvY2Vzc2VkJyxcbiAgICAgIHR5cGU6ICdjb21wbGV0ZV9sb2dvdXQnLFxuICAgICAgand0OiBqd3RMb2dvdXRSZXN1bHQsXG4gICAgICBzZXNzaW9uOiBzZXNzaW9uTG9nb3V0UmVzdWx0XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0NvbXBsZXRlIGxvZ291dCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGNvbXBsZXRlIGxvZ291dCcsXG4gICAgICBjb2RlOiAnQ09NUExFVEVfTE9HT1VUX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLy8gIDQwNCBoYW5kbGVyIChtdXN0IGJlIGJlZm9yZSBnbG9iYWwgZXJyb3IgaGFuZGxlcilcbmFwcC51c2UoKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUud2Fybign4p2MIEZpbmFsIDQwNCBoYW5kbGVyIGV4ZWN1dGVkIC0gcm91dGUgbm90IGZvdW5kIScsIHsgbWV0aG9kOiByZXEubWV0aG9kLCB1cmw6IHJlcS51cmwgfSk7XG4gIGxvZ2dlci53YXJuKGA0MDQgLSAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgZXJyb3I6ICdFbmRwb2ludCBub3QgZm91bmQnLFxuICAgIHBhdGg6IHJlcS51cmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGNvZGU6ICdOT1RfRk9VTkQnXG4gIH0pO1xufSk7XG5cbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlIChtdXN0IGJlIGxhc3QpXG5hcHAudXNlKGVycm9ySGFuZGxlcik7XG5cblxuXG5cblxuXG5cblxuXG4vLyBHbG9iYWwgdXNlcnMgbWFwIGZvciBzb2NrZXQgbWFuYWdlbWVudCB7c29ja2V0SWQ6IHt1c2VySWQsIG5pY2tuYW1lLCByb29tfX1cbmxldCBvbmxpbmVVc2VycyA9IG5ldyBNYXAoKTtcblxuLy8gVXNlciBjb25uZWN0aW9uIGNvdW50ZXIge3VzZXJJZDogY29ubmVjdGlvbkNvdW50fVxubGV0IHVzZXJDb25uZWN0aW9ucyA9IG5ldyBNYXAoKTtcblxuLy8gVm9pY2UgY2hhbm5lbHMgbWFuYWdlbWVudFxuY29uc3Qgdm9pY2VDaGFubmVscyA9IG5ldyBNYXAoKTsgLy8gY2hhbm5lbElkIC0+IHsgc29ja2V0SWQ6IHsgcGVlckNvbm5lY3Rpb24sIHN0cmVhbSB9IH1cblxuLy8gSW1wcm92ZWQgU29ja2V0LklPIHNlc3Npb24gbWlkZGxld2FyZSB3aXRoIHByb3BlciByZXMgb2JqZWN0IGhhbmRsaW5nXG5pby51c2UoKHNvY2tldCwgbmV4dCkgPT4ge1xuICAvLyBDcmVhdGUgYSBtb3JlIGNvbXBsZXRlIG1vY2sgcmVzIG9iamVjdCBpZiBtaXNzaW5nXG4gIGlmICghc29ja2V0LnJlcXVlc3QucmVzKSB7XG4gICAgc29ja2V0LnJlcXVlc3QucmVzID0ge1xuICAgICAgc2V0SGVhZGVyOiAoKSA9PiB7fSxcbiAgICAgIGdldEhlYWRlcjogKCkgPT4ge30sXG4gICAgICB3cml0ZUhlYWQ6ICgpID0+IHt9LFxuICAgICAgZW5kOiAoKSA9PiB7fSxcbiAgICAgIGhlYWRlcnNTZW50OiBmYWxzZSxcbiAgICAgIHN0YXR1c0NvZGU6IDIwMFxuICAgIH07XG4gIH1cblxuICAvLyBBcHBseSBzZXNzaW9uIG1pZGRsZXdhcmUgd2l0aCBlcnJvciBoYW5kbGluZ1xuICBzZXNzaW9uTWlkZGxld2FyZShzb2NrZXQucmVxdWVzdCwgc29ja2V0LnJlcXVlc3QucmVzLCAoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBtaWRkbGV3YXJlIGVycm9yIGZvciBTb2NrZXQuSU86JywgZXJyKTtcbiAgICAgIHJldHVybiBuZXh0KGVycik7XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfSk7XG59KTtcblxuLy8gU29ja2V0LklPIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmlvLnVzZShhc3luYyAoc29ja2V0LCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgY3NyZlRva2VuLCBzZXNzaW9uSWQgfSA9IHNvY2tldC5oYW5kc2hha2UuYXV0aDtcbiAgbGV0IHNlc3Npb24gPSBzb2NrZXQucmVxdWVzdC5zZXNzaW9uO1xuXG4gIC8vIGNvbnNvbGUubG9nKCfwn5SRIFNvY2tldCBhdXRoZW50aWNhdGlvbiBhdHRlbXB0IHdpdGggc2Vzc2lvbiBhbmQgQ1NSRiBmaW5nZXJwcmludCBjaGVjaycpO1xuICAvLyBjb25zb2xlLmxvZygn8J+UjSBSYXcgc29ja2V0IGF1dGggZGF0YTonLCB7XG4gIC8vICAgY3NyZlRva2VuUHJvdmlkZWQ6ICEhY3NyZlRva2VuLFxuICAvLyAgIHNlc3Npb25JZFByb3ZpZGVkOiAhIXNlc3Npb25JZCxcbiAgLy8gICBzZXNzaW9uSWRMZW5ndGg6IHNlc3Npb25JZD8ubGVuZ3RoLFxuICAvLyAgIHNlc3Npb25JZEZyb21BdXRoOiBzZXNzaW9uSWRcbiAgLy8gfSk7XG5cbiAgLy8gSWYgc2Vzc2lvbklkIGlzIHByb3ZpZGVkIGluIGF1dGgsIHRyeSB0byByZWNvdmVyIHRoZSBzZXNzaW9uIGZyb20gTW9uZ29EQiBzdG9yZVxuICBpZiAoc2Vzc2lvbklkICYmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hdXRoZW50aWNhdGVkKSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCfwn5SEIEF0dGVtcHRpbmcgc2Vzc2lvbiByZWNvdmVyeSBmcm9tIE1vbmdvREIgc3RvcmUgdXNpbmcgc2Vzc2lvbklkOicsIHNlc3Npb25JZCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCBzZXNzaW9uIGZyb20gTW9uZ29EQiBzdG9yZSB1c2luZyB0aGUgc2Vzc2lvbklkIGZyb20gSldUIGF1dGhcbiAgICAgIGNvbnN0IE1vbmdvU3RvcmVJbnN0YW5jZSA9IHNlc3Npb25NaWRkbGV3YXJlLnN0b3JlO1xuICAgICAgaWYgKE1vbmdvU3RvcmVJbnN0YW5jZSAmJiB0eXBlb2YgTW9uZ29TdG9yZUluc3RhbmNlLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBNb25nb1N0b3JlSW5zdGFuY2UuZ2V0KHNlc3Npb25JZCwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgICAgICBlbHNlIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfwn5SEIE1vbmdvREIgc2Vzc2lvbiBsb29rdXAgcmVzdWx0OicsIHtcbiAgICAgICAgLy8gICBzZXNzaW9uRm91bmQ6ICEhc2Vzc2lvbkRhdGEsXG4gICAgICAgIC8vICAgc2Vzc2lvbkF1dGhlbnRpY2F0ZWQ6IHNlc3Npb25EYXRhPy5hdXRoZW50aWNhdGVkLFxuICAgICAgICAvLyAgIHNlc3Npb25Vc2VySWQ6IHNlc3Npb25EYXRhPy51c2VySWQsXG4gICAgICAgIC8vICAgc2Vzc2lvbkNzcmZUb2tlbjogISFzZXNzaW9uRGF0YT8uY3NyZlRva2VuLFxuICAgICAgICAvLyAgIGNzcmZUb2tlbk1hdGNoZXM6IGNzcmZUb2tlbiAmJiBzZXNzaW9uRGF0YT8uY3NyZlRva2VuICYmIGNzcmZUb2tlbiA9PT0gc2Vzc2lvbkRhdGEuY3NyZlRva2VuXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGlmIChzZXNzaW9uRGF0YSAmJiBzZXNzaW9uRGF0YS5hdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSBzb2NrZXQucmVxdWVzdC5zZXNzaW9uIHdpdGggbG9hZGVkIHNlc3Npb25cbiAgICAgICAgICBzb2NrZXQucmVxdWVzdC5zZXNzaW9uID0gc2Vzc2lvbkRhdGE7XG4gICAgICAgICAgc2Vzc2lvbiA9IHNlc3Npb25EYXRhO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU29ja2V0IHNlc3Npb24gcmVjb3ZlcmVkIGZyb20gTW9uZ29EQicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gU29ja2V0IHNlc3Npb24gbm90IGZvdW5kIGluIE1vbmdvREIgc3RvcmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgbG9hZGluZyBTT0NLRVQgc2Vzc2lvbiBmcm9tIE1vbmdvREI6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ/CflJMgRmluZ2VycHJpbnQgdmVyaWZpY2F0aW9uOicsIHtcbiAgICBzaWQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb25JZCxcbiAgICBwcm92aWRlZENzcmZUb2tlbjogY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICBzZXNzaW9uQ3NyZlRva2VuOiBzZXNzaW9uPy5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgIHVzZXJBZ2VudDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbj8udXNlckFnZW50Py5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicsXG4gICAgbG9naW5UaW1lOiBzZXNzaW9uPy5sb2dpblRpbWUsXG4gICAgcmVnaXN0cmF0aW9uVGltZTogc2Vzc2lvbj8ucmVnaXN0cmF0aW9uVGltZVxuICB9KTtcblxuICAvLyBWYWxpZGF0ZSBzZXNzaW9uIGV4aXN0cyBhbmQgaGFzIGF1dGhlbnRpY2F0aW9uXG4gIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hdXRoZW50aWNhdGVkIHx8ICFzZXNzaW9uLnVzZXJJZCkge1xuICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogTm8gYXV0aGVudGljYXRlZCBzZXNzaW9uIGZvdW5kJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgU2Vzc2lvbiBkZXRhaWxzOicsIHtcbiAgICAgIHNlc3Npb25JZDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbklkLFxuICAgICAgc2Vzc2lvbjogISFzZXNzaW9uLFxuICAgICAgYXV0aGVudGljYXRlZDogc2Vzc2lvbj8uYXV0aGVudGljYXRlZCxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlcklkXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJykpO1xuICB9XG5cbiAgLy8gVmFsaWRhdGUgQ1NSRiB0b2tlbiBmb3IgYWRkaXRpb25hbCBzZWN1cml0eSAobXVzdCBtYXRjaCBzZXNzaW9uJ3MgdW5pcXVlIENTUkYgdG9rZW4pXG4gIGlmICghY3NyZlRva2VuIHx8ICFzZXNzaW9uLmNzcmZUb2tlbiB8fCBjc3JmVG9rZW4gIT09IHNlc3Npb24uY3NyZlRva2VuKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBJbnZhbGlkIENTUkYgdG9rZW4gZmluZ2VycHJpbnQnKTtcbiAgICBjb25zb2xlLmxvZygn8J+UkiBGaW5nZXJwcmludCBtaXNtYXRjaCBkZXRhaWxzOicsIHtcbiAgICAgIHByb3ZpZGVkOiBjc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgICAgZXhwZWN0ZWQ6IHNlc3Npb24uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICAgIG1hdGNoOiBjc3JmVG9rZW4gPT09IHNlc3Npb24uY3NyZlRva2VuXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdDU1JGIHZhbGlkYXRpb24gZmFpbGVkJykpO1xuICB9XG5cbiAgY29uc29sZS5sb2coJ+KchSBTb2NrZXQgZmluZ2VycHJpbnQgdmVyaWZpY2F0aW9uIHN1Y2Nlc3NmdWwnKTtcblxuICB0cnkge1xuICAgIC8vIFZlcmlmeSB1c2VyIGV4aXN0cyBpbiBkYXRhYmFzZVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb24udXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogVXNlciBub3QgZm91bmQgaW4gREInKTtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignVXNlciBub3QgZm91bmQgaW4gc2Vzc2lvbicpKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdXNlciBzdGF0dXMgdXBkYXRlIGJhc2VkIG9uIGNvbm5lY3Rpb24gY291bnRcbiAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLnVzZXJJZDtcbiAgICBjb25zdCBjb25uZWN0aW9uQ291bnQgPSB1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXJJZCkgfHwgMDtcbiAgICBjb25zdCBuZXdDb25uZWN0aW9uQ291bnQgPSBjb25uZWN0aW9uQ291bnQgKyAxO1xuICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlcklkLCBuZXdDb25uZWN0aW9uQ291bnQpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBiYW5uZWRcbiAgICBpZiAodXNlci5pc0Jhbm5lZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IFVzZXIgaXMgYmFubmVkJywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGJhblJlYXNvbjogdXNlci5iYW5SZWFzb24sXG4gICAgICAgIGJhbkV4cGlyZXM6IHVzZXIuYmFuRXhwaXJlc1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnYmFubmVkJywge1xuICAgICAgICByZWFzb246IHVzZXIuYmFuUmVhc29uIHx8ICdZb3UgaGF2ZSBiZWVuIGJhbm5lZCBmcm9tIHRoZSBzZXJ2ZXInLFxuICAgICAgICBleHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdVc2VyIGlzIGJhbm5lZCcpKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIG11dGVkIGFuZCBlbmZvcmNlIG11dGUgaW4gY2hhdFxuICAgIGNvbnN0IGlzTXV0ZWQgPSB1c2VyLmlzTXV0ZWQoKTtcbiAgICBjb25zb2xlLmxvZygn8J+UhyBVc2VyIG11dGUgc3RhdHVzIGNoZWNrZWQ6JywgeyBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSwgaXNNdXRlZCwgbXV0ZUV4cGlyZXM6IHVzZXIubXV0ZUV4cGlyZXMgfSk7XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgd2l0aCBjb25uZWN0aW9uIGNvdW50IHRyYWNraW5nXG4gICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgeyBfaWQ6IHVzZXJJZCB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgc3RhdHVzOiBuZXdDb25uZWN0aW9uQ291bnQgPiAwID8gJ29ubGluZScgOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWVcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKHVwZGF0ZVJlc3VsdCkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgU29ja2V0IGF1dGg6IFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9ubGluZSAoY29ubmVjdGlvbnM6ICR7bmV3Q29ubmVjdGlvbkNvdW50fSlgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHN0YXR1cyB1cGRhdGVkIHRvIG9ubGluZSB2aWEgc29ja2V0IGF1dGhgLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgY29ubmVjdGlvbnM6IG5ld0Nvbm5lY3Rpb25Db3VudCxcbiAgICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPdmVycmlkZSBsb2NhbCB1c2VyIG9iamVjdCB3aXRoIHVwZGF0ZWQgZGF0YVxuICAgIHVzZXIuc3RhdHVzID0gdXBkYXRlUmVzdWx0ID8gdXBkYXRlUmVzdWx0LnN0YXR1cyA6ICdvbmxpbmUnO1xuICAgIHVzZXIubGFzdEFjdGl2ZSA9IHVwZGF0ZVJlc3VsdCA/IHVwZGF0ZVJlc3VsdC5sYXN0QWN0aXZlIDogbmV3IERhdGUoKTtcblxuICAgIC8vIFNldCBzb2NrZXQgcHJvcGVydGllcyBmb3IgYXV0aGVudGljYXRlZCB1c2VyXG4gICAgc29ja2V0LnVzZXJJZCA9IHNlc3Npb24udXNlcklkO1xuICAgIHNvY2tldC5uaWNrbmFtZSA9IHNlc3Npb24ubmlja25hbWU7XG4gICAgc29ja2V0LnJvbGUgPSBzZXNzaW9uLnJvbGUgfHwgJ21lbWJlcic7XG4gICAgY29uc29sZS5sb2coYPCfjokgU29ja2V0IGF1dGhlbnRpY2F0ZWQgdmlhIHNlc3Npb246ICR7c29ja2V0Lm5pY2tuYW1lfSAodXNlcklkOiAke3NvY2tldC51c2VySWR9KWApO1xuICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCcpO1xuICAgIHJldHVybiBuZXh0KCk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIGxvZ2dlci5lcnJvcihgU29ja2V0IGF1dGggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwge1xuICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbj8uaWQsXG4gICAgICBpcDogc29ja2V0LmhhbmRzaGFrZS5hZGRyZXNzXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkJykpO1xuICB9XG59KTtcblxuLyoqXG4gKiBDbGVhbnVwIGluYWN0aXZlIGNvbm5lY3Rpb25zIGJhc2VkIG9uIGhlYXJ0YmVhdFxuICovXG5mdW5jdGlvbiBjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucygpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgdGltZW91dCA9IDYwMDAwOyAvLyA2MCBzZWNvbmRzIHRpbWVvdXRcblxuICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgdXNlcl0gb2Ygb25saW5lVXNlcnMuZW50cmllcygpKSB7XG4gICAgaWYgKG5vdyAtIHVzZXIubGFzdEhlYXJ0YmVhdCA+IHRpbWVvdXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuc2luZyBkZWFkIGNvbm5lY3Rpb24gZm9yIHVzZXIgJHt1c2VyLm5pY2tuYW1lfWApO1xuXG4gICAgICAvLyBGb3JjZSBkaXNjb25uZWN0IHNvY2tldFxuICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgIHNvY2tldC5kaXNjb25uZWN0KHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdXNlciBjb25uZWN0aW9ucyBjb3VudFxuICAgICAgY29uc3QgY29ubmVjdGlvbnNMZWZ0ID0gKHVzZXJDb25uZWN0aW9ucy5nZXQodXNlci51c2VySWQpIHx8IDApIC0gMTtcbiAgICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlci51c2VySWQsIE1hdGgubWF4KDAsIGNvbm5lY3Rpb25zTGVmdCkpO1xuXG4gICAgICAvLyBTZXQgc3RhdHVzIHRvIG9mZmxpbmUgaWYgbGFzdCBjb25uZWN0aW9uXG4gICAgICBpZiAoY29ubmVjdGlvbnNMZWZ0IDw9IDApIHtcbiAgICAgICAgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VyLnVzZXJJZCwge1xuICAgICAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3RhdHVzIG9uIGNsZWFudXA6JywgZXJyKSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3VzZXIubmlja25hbWV9IHN0YXR1cyBzZXQgdG8gb2ZmbGluZSAoZGVhZCBjb25uZWN0aW9uKWApO1xuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgZHVlIHRvIGRlYWQgY29ubmVjdGlvbmAsIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIudXNlcklkLFxuICAgICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXRJZFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgb25saW5lVXNlcnMuZGVsZXRlKHNvY2tldElkKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUnVuIGNsZWFudXAgZXZlcnkgMzAgc2Vjb25kcyAtIERJU0FCTEVEIGZvciB0ZXN0IGVudmlyb25tZW50XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0Jykge1xuICBzZXRJbnRlcnZhbChjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucywgMzAwMDApO1xufVxuXG5pby5vbignY29ubmVjdGlvbicsIGFzeW5jIChzb2NrZXQpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfmoAgU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcbiAgY29uc29sZS5sb2coYPCfkaQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gY29ubmVjdGVkYCk7XG5cbiAgLy8gVHJhY2sgb25saW5lIHVzZXJcbiAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwge1xuICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgIHJvbGU6IHNvY2tldC5yb2xlLFxuICAgIHJvb206IG51bGwsXG4gICAgbGFzdEhlYXJ0YmVhdDogRGF0ZS5ub3coKVxuICB9KTtcblxuICAvLyBMb2cgY3VycmVudCBhY3RpdmUgY29ubmVjdGlvbnMgY291bnRcbiAgY29uc29sZS5sb2coYPCfk4ogQWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfSAtIGF1dGggc3VjY2VzcyBmb3IgJHtzb2NrZXQubmlja25hbWV9YCk7XG5cbiAgLy8gRW5oYW5jZWQgaGVhcnRiZWF0IG1lY2hhbmlzbSB3aXRoIHJlY29ubmVjdGlvbiBsb2dpY1xuICBzb2NrZXQub24oJ2hlYXJ0YmVhdCcsICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gb25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICB1c2VyLmxhc3RIZWFydGJlYXQgPSBub3c7XG4gICAgICBjb25zb2xlLmxvZyhg8J+SkyBIZWFydGJlYXQgcmVjZWl2ZWQgZnJvbSB1c2VyICR7c29ja2V0Lm5pY2tuYW1lfSBhdCAke25ldyBEYXRlKG5vdykudG9JU09TdHJpbmcoKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLndhcm4oYEhlYXJ0YmVhdCByZWNlaXZlZCBmcm9tIHVua25vd24gc29ja2V0OiAke3NvY2tldC5pZH1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSBoZWFydGJlYXQgb24gdXNlciBhY3Rpdml0eVxuICBjb25zdCB1cGRhdGVIZWFydGJlYXQgPSAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICB1c2VyLmxhc3RIZWFydGJlYXQgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZW5kIGhlYXJ0YmVhdCB0byBjbGllbnQgcGVyaW9kaWNhbGx5XG4gIGNvbnN0IGhlYXJ0YmVhdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmIChzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnaGVhcnRiZWF0X3JlcXVlc3QnKTtcbiAgICB9XG4gIH0sIDE1MDAwKTsgLy8gU2VuZCBoZWFydGJlYXQgZXZlcnkgMTUgc2Vjb25kc1xuXG4gIC8vIENsZWFyIGludGVydmFsIG9uIGRpc2Nvbm5lY3RcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgIGNsZWFySW50ZXJ2YWwoaGVhcnRiZWF0SW50ZXJ2YWwpO1xuICAgIC8vIC4uLiByZXN0IG9mIGRpc2Nvbm5lY3QgbG9naWNcbiAgfSk7XG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cnlpbmcgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICBjb25zdCByZXRyeURhdGFiYXNlT3BlcmF0aW9uID0gYXN5bmMgKG9wZXJhdGlvbiwgcmV0cmllcyA9IDMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSByZXRyaWVzOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChpID09PSByZXRyaWVzKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgbG9nZ2VyLndhcm4oYERhdGFiYXNlIG9wZXJhdGlvbiBmYWlsZWQsIHJldHJ5ICR7aSArIDF9LyR7cmV0cmllc306YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAgKiAoaSArIDEpKSk7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgc29ja2V0Lm9uKCdqb2luX3Jvb20nLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGNvbnN0IHsgcm9vbSB9ID0gZGF0YTtcbiAgICBpZiAoIXJvb20pIHtcbiAgICAgIGxvZ2dlci53YXJuKCdKb2luIHJvb20gZmFpbGVkOiBObyByb29tIHNwZWNpZmllZCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ1Jvb20gbmFtZSBpcyByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdNSVNTSU5HX1JPT00nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByb29tICE9PSAnc3RyaW5nJyB8fCByb29tLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGxvZ2dlci53YXJuKCdKb2luIHJvb20gZmFpbGVkOiBJbnZhbGlkIHJvb20gZm9ybWF0Jywge1xuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHJvb21cbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCByb29tIG5hbWUgZm9ybWF0JyxcbiAgICAgICAgY29kZTogJ0lOVkFMSURfUk9PTV9GT1JNQVQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJldHJ5RGF0YWJhc2VPcGVyYXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBWZXJpZnkgY2hhbm5lbCBleGlzdHNcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZE9uZSh7IGlkOiByb29tIH0pO1xuICAgICAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogQ2hhbm5lbCBub3QgZm91bmQnLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICAgICAgcm9vbVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBDaGFubmVsICcke3Jvb219JyBub3QgZm91bmRgLFxuICAgICAgICAgICAgY29kZTogJ0NIQU5ORUxfTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIHJvb20sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbm5lbCBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlYXZlIHByZXZpb3VzIHJvb21cbiAgICAgICAgaWYgKHNvY2tldC5yb29tKSB7XG4gICAgICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tKTtcbiAgICAgICAgICBvbmxpbmVVc2Vycy5zZXQoc29ja2V0LmlkLCB7IC4uLm9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpLCByb29tOiBudWxsIH0pO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIG9ubGluZSB1c2VycyBpbiBwcmV2aW91cyByb29tXG4gICAgICAgICAgY29uc3QgcHJldmlvdXNSb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvbGU6IHUucm9sZSB9KSk7XG4gICAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHByZXZpb3VzUm9vbVVzZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvY2tldC5yb29tID0gcm9vbTtcbiAgICAgICAgc29ja2V0LmpvaW4oc29ja2V0LnJvb20pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB1c2VyIHRyYWNraW5nXG4gICAgICAgIG9ubGluZVVzZXJzLnNldChzb2NrZXQuaWQsIHtcbiAgICAgICAgICAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHJvb20gJHtzb2NrZXQucm9vbX1gKTtcblxuICAgICAgICAvLyBTZW5kIHN5c3RlbSBtZXNzYWdlIGFib3V0IGpvaW5pbmdcbiAgICAgICAgY29uc3Qgam9pbk1lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG4gICAgICAgICAgYXV0aG9yOiAnU3lzdGVtJyxcbiAgICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICB0ZXh0OiBgJHtzb2NrZXQubmlja25hbWV9IGpvaW5lZCB0aGUgY2hhbm5lbC5gLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBqb2luTWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgYXV0aG9yOiBqb2luTWVzc2FnZS5hdXRob3IsXG4gICAgICAgICAgY2hhbm5lbDogam9pbk1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBqb2luTWVzc2FnZS50ZXh0LFxuICAgICAgICAgIHR5cGU6IGpvaW5NZXNzYWdlLnR5cGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBqb2luTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2VuZCBvbmxpbmUgdXNlcnMgaW4gY3VycmVudCByb29tXG4gICAgICAgIGNvbnN0IHJvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcm9vbVVzZXJzKTtcblxuICAgICAgICAvLyBTZW5kIG1lc3NhZ2UgaGlzdG9yeVxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgTWVzc2FnZS5maW5kKHtcbiAgICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgIHsgdHlwZTogJ3B1YmxpYycgfSxcbiAgICAgICAgICAgIHsgdHlwZTogJ3N5c3RlbScgfSxcbiAgICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICAgIHsgdGFyZ2V0OiBzb2NrZXQubmlja25hbWUgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogLTEgfSlcbiAgICAgICAgICAubGltaXQoMTAwKVxuICAgICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIGhpc3RvcnkubWFwKG1zZyA9PiAoe1xuICAgICAgICAgIGF1dGhvcjogbXNnLmF1dGhvcixcbiAgICAgICAgICByb29tOiBtc2cuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBtc2cudGV4dCxcbiAgICAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICAgICB0YXJnZXQ6IG1zZy50YXJnZXQsXG4gICAgICAgICAgdGltZXN0YW1wOiBtc2cudGltZXN0YW1wXG4gICAgICAgIH0pKSk7XG4gICAgICB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGpvaW5fcm9vbSBhZnRlciByZXRyaWVzOicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBqb2luIHJvb20gYWZ0ZXIgbXVsdGlwbGUgYXR0ZW1wdHMnLFxuICAgICAgICBjb2RlOiAnSk9JTl9ST09NX0ZBSUxFRCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIExvYWQgaGlzdG9yeSAoZmFsbGJhY2ssIGlmIG5lZWRlZClcbiAgc29ja2V0Lm9uKCdnZXRfaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNvY2tldC5yb29tKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIFtdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAkb3I6IFtcbiAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnc3lzdGVtJyB9LFxuICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxMDApXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgYXV0aG9yOiBtc2cuYXV0aG9yLFxuICAgICAgICByb29tOiBtc2cuY2hhbm5lbCwgLy8gVXNpbmcgY2hhbm5lbCBpbnN0ZWFkIG9mIHJvb20gZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgIHRleHQ6IG1zZy50ZXh0LFxuICAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtc2cudGFyZ2V0LFxuICAgICAgICB0aW1lc3RhbXA6IG1zZy50aW1lc3RhbXBcbiAgICAgIH0pKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2FkIG1lc3NhZ2UgaGlzdG9yeScgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQdWJsaWMgbWVzc2FnZVxuICBzb2NrZXQub24oJ21lc3NhZ2UnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGlmICghc29ja2V0LnJvb20gfHwgIWRhdGEudGV4dD8udHJpbSgpKSByZXR1cm47XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIG11dGVkXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNvY2tldC51c2VySWQpO1xuICAgIGlmIChjdXJyZW50VXNlciAmJiBjdXJyZW50VXNlci5pc011dGVkKCkpIHtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ1lvdSBhcmUgbXV0ZWQgYW5kIGNhbm5vdCBzZW5kIG1lc3NhZ2VzJyxcbiAgICAgICAgY29kZTogJ1VTRVJfTVVURUQnLFxuICAgICAgICBtdXRlRXhwaXJlczogY3VycmVudFVzZXIubXV0ZUV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgIHRleHQ6IGRhdGEudGV4dC50cmltKCksXG4gICAgICAgIHR5cGU6ICdwdWJsaWMnXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgbWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLmNoYW5uZWwsIC8vIEtlZXBpbmcgJ3Jvb20nIGZvciBmcm9udGVuZCBjb21wYXRpYmlsaXR5XG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJyxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlXG4gICAgICB9O1xuXG4gICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2VEYXRhKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgTWVzc2FnZSBzYXZlZCBmcm9tICR7c29ja2V0Lm5pY2tuYW1lfSBpbiAke3NvY2tldC5yb29tfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNhdmluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UnIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHJpdmF0ZSBtZXNzYWdlXG4gIHNvY2tldC5vbigncHJpdmF0ZV9tZXNzYWdlJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC5yb29tIHx8ICFkYXRhLnRvIHx8ICFkYXRhLnRleHQ/LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgdHJpbW1lZFRleHQgPSBkYXRhLnRleHQudHJpbSgpO1xuICAgIGNvbnN0IHRhcmdldE5pY2tuYW1lID0gZGF0YS50by50cmltKCk7XG5cbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBQcml2YXRlIG1lc3NhZ2UgYXR0ZW1wdCBmcm9tICR7c29ja2V0Lm5pY2tuYW1lfSB0byAke3RhcmdldE5pY2tuYW1lfWAsIHtcbiAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIHNlbmRlclNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRhcmdldCBuaWNrbmFtZSBmb3JtYXRcbiAgICAgIGlmICh0YXJnZXROaWNrbmFtZS5sZW5ndGggPT09IDAgfHwgdGFyZ2V0Tmlja25hbWUubGVuZ3RoID4gNTApIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHRhcmdldCB1c2VyIG5pY2tuYW1lJyxcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9UQVJHRVRfTklDS05BTUUnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXZlbnQgc2VsZi1tZXNzYWdpbmdcbiAgICAgIGlmICh0YXJnZXROaWNrbmFtZSA9PT0gc29ja2V0Lm5pY2tuYW1lKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnQ2Fubm90IHNlbmQgcHJpdmF0ZSBtZXNzYWdlIHRvIHlvdXJzZWxmJyxcbiAgICAgICAgICBjb2RlOiAnU0VMRl9NRVNTQUdFX05PVF9BTExPV0VEJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRhcmdldCB1c2VyIGluIHNhbWUgcm9vbSB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICAgIGNvbnN0IHRhcmdldFVzZXIgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKS5maW5kKFxuICAgICAgICB1ID0+IHUubmlja25hbWUgPT09IHRhcmdldE5pY2tuYW1lICYmIHUucm9vbSA9PT0gc29ja2V0LnJvb21cbiAgICAgICk7XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIHRhcmdldCBzZWFyY2ggcmVzdWx0IGZvciAke3RhcmdldE5pY2tuYW1lfWAsIHtcbiAgICAgICAgdGFyZ2V0Rm91bmQ6ICEhdGFyZ2V0VXNlcixcbiAgICAgICAgdGFyZ2V0Um9vbTogdGFyZ2V0VXNlcj8ucm9vbSxcbiAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIG9ubGluZVVzZXJzSW5Sb29tOiBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9vbTogdS5yb29tIH0pKVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGFyZ2V0VXNlcikge1xuICAgICAgICAvLyBFbmhhbmNlZCBlcnJvciBtZXNzYWdlIHdpdGggbW9yZSBjb250ZXh0XG4gICAgICAgIGNvbnN0IG9ubGluZVVzZXJzSW5TZW5kZXJSb29tID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gdS5uaWNrbmFtZSk7XG5cbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6IGBVc2VyICcke3RhcmdldE5pY2tuYW1lfScgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGNoYW5uZWwuIEF2YWlsYWJsZSB1c2VyczogJHtvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbS5qb2luKCcsICcpIHx8ICdub25lJ31gLFxuICAgICAgICAgIGNvZGU6ICdUQVJHRVRfVVNFUl9OT1RfSU5fUk9PTScsXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXROaWNrbmFtZSxcbiAgICAgICAgICBhdmFpbGFibGVVc2Vyczogb25saW5lVXNlcnNJblNlbmRlclJvb20sXG4gICAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb21cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIG1lc3NhZ2Ugb2JqZWN0XG4gICAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgIHRleHQ6IHRyaW1tZWRUZXh0LFxuICAgICAgICB0eXBlOiAncHJpdmF0ZScsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWVcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgbWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLmNoYW5uZWwsXG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgICB0YXJnZXQ6IG1lc3NhZ2UudGFyZ2V0LFxuICAgICAgICBzdGF0dXM6ICdkZWxpdmVyZWQnXG4gICAgICB9O1xuXG4gICAgICAvLyBTZW5kIHRvIHRhcmdldCB1c2VyIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICAgIGNvbnN0IHRhcmdldFNvY2tldElkID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy5rZXlzKCkpLmZpbmQoXG4gICAgICAgIGlkID0+IG9ubGluZVVzZXJzLmdldChpZCkubmlja25hbWUgPT09IHRhcmdldE5pY2tuYW1lXG4gICAgICApO1xuXG4gICAgICBpZiAodGFyZ2V0U29ja2V0SWQpIHtcbiAgICAgICAgaW8udG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ3ByaXZhdGVfbWVzc2FnZScsIG1lc3NhZ2VEYXRhKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBQcml2YXRlIG1lc3NhZ2Ugc2VudCB0byB0YXJnZXQgJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgICAgdGFyZ2V0U29ja2V0SWQ6IHRhcmdldFNvY2tldElkLFxuICAgICAgICAgIHNlbmRlcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5faWRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIud2FybihgVGFyZ2V0IHVzZXIgJHt0YXJnZXROaWNrbmFtZX0gZm91bmQgaW4gb25saW5lVXNlcnMgYnV0IHNvY2tldCBJRCBub3QgZm91bmRgLCB7XG4gICAgICAgICAgdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgICAgb25saW5lVXNlcnNDb3VudDogb25saW5lVXNlcnMuc2l6ZSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBNZXNzYWdlIHN0aWxsIHNhdmVkIHRvIGRhdGFiYXNlIGZvciBsYXRlciBkZWxpdmVyeSBpZiB1c2VyIHJlY29ubmVjdHNcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCBjb25maXJtYXRpb24gdG8gc2VuZGVyICh3aXRob3V0IHRhcmdldCBmb3IgcHJpdmFjeSlcbiAgICAgIHNvY2tldC5lbWl0KCdwcml2YXRlX21lc3NhZ2UnLCB7XG4gICAgICAgIGF1dGhvcjogbWVzc2FnZS5hdXRob3IsXG4gICAgICAgIHJvb206IG1lc3NhZ2Uucm9vbSxcbiAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wLFxuICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsXG4gICAgICAgIHRhcmdldDogbnVsbCwgLy8gSGlkZSB0YXJnZXQgZnJvbSBzZW5kZXIncyBjb25maXJtYXRpb25cbiAgICAgICAgc3RhdHVzOiAnc2VudCdcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5YCwge1xuICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROaWNrbmFtZSxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5faWQsXG4gICAgICAgIG1lc3NhZ2VMZW5ndGg6IHRyaW1tZWRUZXh0Lmxlbmd0aFxuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZW5kaW5nIHByaXZhdGUgbWVzc2FnZTonLCB7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgdGFyZ2V0OiBkYXRhLnRvLFxuICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHNlbmQgcHJpdmF0ZSBtZXNzYWdlJyxcbiAgICAgICAgY29kZTogJ1BSSVZBVEVfTUVTU0FHRV9GQUlMRUQnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFNwZWFraW5nXG4gIHNvY2tldC5vbignc3BlYWtpbmcnLCAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIHNvY2tldC50byhzb2NrZXQucm9vbSkuZW1pdCgnc3BlYWtpbmcnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNwZWFraW5nOiBkYXRhLnNwZWFraW5nIH0pO1xuICB9KTtcblxuICAvLyBWb2ljZSBjaGFubmVsIGV2ZW50c1xuICBzb2NrZXQub24oJ2pvaW5fdm9pY2VfY2hhbm5lbCcsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgY29uc3QgeyBjaGFubmVsSWQgfSA9IGRhdGE7XG4gICAgaWYgKCFjaGFubmVsSWQpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZnkgY2hhbm5lbCBleGlzdHMgYW5kIGlzIHZvaWNlXG4gICAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kT25lKHsgaWQ6IGNoYW5uZWxJZCwgdHlwZTogJ3ZvaWNlJyB9KTtcbiAgICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgICBzb2NrZXQuZW1pdCgndm9pY2VfZXJyb3InLCB7IG1lc3NhZ2U6ICdWb2ljZSBjaGFubmVsIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSB2b2ljZSBjaGFubmVsIGlmIG5vdCBleGlzdHNcbiAgICAgIGlmICghdm9pY2VDaGFubmVscy5oYXMoY2hhbm5lbElkKSkge1xuICAgICAgICB2b2ljZUNoYW5uZWxzLnNldChjaGFubmVsSWQsIG5ldyBNYXAoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICAgIC8vIE5vdGlmeSBvdGhlcnMgaW4gdGhlIGNoYW5uZWxcbiAgICAgIHNvY2tldC50byhjaGFubmVsSWQpLmVtaXQoJ3VzZXJfam9pbmVkX3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuXG4gICAgICAvLyBBZGQgc29ja2V0IHRvIHZvaWNlIGNoYW5uZWwgcm9vbVxuICAgICAgc29ja2V0LmpvaW4oY2hhbm5lbElkKTtcbiAgICAgIGNoYW5uZWxQZWVycy5zZXQoc29ja2V0LmlkLCB7IHBlZXJDb25uZWN0aW9uOiBudWxsLCBzdHJlYW06IG51bGwgfSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB1c2VyJ3Mgdm9pY2UgY2hhbm5lbCBzdGF0dXNcbiAgICAgIHNvY2tldC52b2ljZUNoYW5uZWwgPSBjaGFubmVsSWQ7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBqb2luZWQgdm9pY2UgY2hhbm5lbCAke2NoYW5uZWxJZH1gKTtcbiAgICAgIHNvY2tldC5lbWl0KCd2b2ljZV9qb2luZWQnLCB7IGNoYW5uZWxJZCB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgdm9pY2UgY2hhbm5lbDonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgndm9pY2VfZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiB2b2ljZSBjaGFubmVsJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHNvY2tldC5vbignbGVhdmVfdm9pY2VfY2hhbm5lbCcsICgpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC52b2ljZUNoYW5uZWwpIHJldHVybjtcblxuICAgIGNvbnN0IGNoYW5uZWxJZCA9IHNvY2tldC52b2ljZUNoYW5uZWw7XG4gICAgY29uc3QgY2hhbm5lbFBlZXJzID0gdm9pY2VDaGFubmVscy5nZXQoY2hhbm5lbElkKTtcblxuICAgIGlmIChjaGFubmVsUGVlcnMpIHtcbiAgICAgIGNoYW5uZWxQZWVycy5kZWxldGUoc29ja2V0LmlkKTtcbiAgICAgIGlmIChjaGFubmVsUGVlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICB2b2ljZUNoYW5uZWxzLmRlbGV0ZShjaGFubmVsSWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdGlmeSBvdGhlcnNcbiAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2xlZnRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG5cbiAgICBzb2NrZXQubGVhdmUoY2hhbm5lbElkKTtcbiAgICBzb2NrZXQudm9pY2VDaGFubmVsID0gbnVsbDtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBsZWZ0IHZvaWNlIGNoYW5uZWwgJHtjaGFubmVsSWR9YCk7XG4gICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2xlZnQnKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCd2b2ljZV9vZmZlcicsIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBvZmZlciwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCd2b2ljZV9vZmZlcicsIHtcbiAgICAgIG9mZmVyLFxuICAgICAgZnJvbTogc29ja2V0LmlkLFxuICAgICAgZnJvbU5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCd2b2ljZV9hbnN3ZXInLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgYW5zd2VyLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ3ZvaWNlX2Fuc3dlcicsIHtcbiAgICAgIGFuc3dlcixcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbignaWNlX2NhbmRpZGF0ZScsIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBjYW5kaWRhdGUsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgnaWNlX2NhbmRpZGF0ZScsIHtcbiAgICAgIGNhbmRpZGF0ZSxcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIERpc2Nvbm5lY3RcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBkaXNjb25uZWN0ZWRgKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSBzb2NrZXQudXNlcklkO1xuXG4gICAgICAvLyBEZWNyZWFzZSBjb25uZWN0aW9uIGNvdW50IGZvciB0aGlzIHVzZXJcbiAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgICAgIGNvbnN0IG5ld0NvdW50ID0gTWF0aC5tYXgoMCwgY3VycmVudENvdW50IC0gMSk7XG4gICAgICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlcklkLCBuZXdDb3VudCk7XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGRpc2Nvbm5lY3RlZCAocmVtYWluaW5nIGNvbm5lY3Rpb25zOiAke25ld0NvdW50fSlgLCB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgICAgICBjb25uZWN0aW9uc0xlZnQ6IG5ld0NvdW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMZWF2ZSB2b2ljZSBjaGFubmVsIGlmIGluIG9uZVxuICAgICAgaWYgKHNvY2tldC52b2ljZUNoYW5uZWwpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbElkID0gc29ja2V0LnZvaWNlQ2hhbm5lbDtcbiAgICAgICAgY29uc3QgY2hhbm5lbFBlZXJzID0gdm9pY2VDaGFubmVscy5nZXQoY2hhbm5lbElkKTtcblxuICAgICAgICBpZiAoY2hhbm5lbFBlZXJzKSB7XG4gICAgICAgICAgY2hhbm5lbFBlZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuICAgICAgICAgIGlmIChjaGFubmVsUGVlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdm9pY2VDaGFubmVscy5kZWxldGUoY2hhbm5lbElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb3RpZnkgb3RoZXJzXG4gICAgICAgIHNvY2tldC50byhjaGFubmVsSWQpLmVtaXQoJ3VzZXJfbGVmdF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNvY2tldC5yb29tKSB7XG4gICAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGxlYXZlIG1lc3NhZ2VcbiAgICAgICAgY29uc3QgbGVhdmVNZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICAgIGF1dGhvcjogJ1N5c3RlbScsXG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgdGV4dDogYCR7c29ja2V0Lm5pY2tuYW1lfSBsZWZ0IHRoZSBjaGFubmVsLmAsXG4gICAgICAgICAgdHlwZTogJ3N5c3RlbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGxlYXZlTWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgYXV0aG9yOiBsZWF2ZU1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICAgIHJvb206IGxlYXZlTWVzc2FnZS5jaGFubmVsLFxuICAgICAgICAgIHRleHQ6IGxlYXZlTWVzc2FnZS50ZXh0LFxuICAgICAgICAgIHR5cGU6IGxlYXZlTWVzc2FnZS50eXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbGVhdmVNZXNzYWdlLnRpbWVzdGFtcFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgb25saW5lIHVzZXJzIGxpc3RcbiAgICAgICAgY29uc3Qgcm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSAmJiB1LnVzZXJJZCAhPT0gc29ja2V0LnVzZXJJZClcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvbGU6IHUucm9sZSB9KSk7XG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCByb29tVXNlcnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZnJvbSB0cmFja2luZ1xuICAgICAgb25saW5lVXNlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG5cbiAgICAgIC8vIExvZyBjdXJyZW50IGNvbm5lY3Rpb25zIGFmdGVyIGRpc2Nvbm5lY3RcbiAgICAgIGxvZ2dlci5pbmZvKGBBZnRlciBkaXNjb25uZWN0LCBhY3RpdmUgc29ja2V0IGNvbm5lY3Rpb25zOiAke29ubGluZVVzZXJzLnNpemV9YCk7XG5cbiAgICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyBpbiBkYXRhYmFzZSBpZiB0aGlzIHdhcyB0aGUgbGFzdCBjb25uZWN0aW9uXG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0Nvbm5lY3Rpb25zID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgICAgIGlmIChyZW1haW5pbmdDb25uZWN0aW9ucyA9PT0gMCkge1xuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGxhc3QgY29ubmVjdGlvbilgKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGxhc3QgY29ubmVjdGlvbilgLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBVcGRhdGUgbGFzdEFjdGl2ZSBidXQga2VlcCBzdGF0dXMgb25saW5lXG4gICAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VySWQsIHtcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFVzZXIgJHtzb2NrZXQubmlja25hbWV9IHN0aWxsIG9ubGluZSAoJHtyZW1haW5pbmdDb25uZWN0aW9uc30gY29ubmVjdGlvbnMgbGVmdClgKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciByZW1haW5zIG9ubGluZWAsIHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICAgIGNvbm5lY3Rpb25zTGVmdDogcmVtYWluaW5nQ29ubmVjdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gZGlzY29ubmVjdCBoYW5kbGVyOicsIGVycm9yKTtcbiAgICB9XG4gfSk7XG59KTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBhbmQgc3RhcnQgc2VydmVyIChkdXBsaWNhdGUgcmVtb3ZlZClcbmNvbnN0IGluaXRpYWxpemVTZXJ2ZXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byBNb25nb0RCXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBjaGFubmVscyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgY29uc3QgZGVmYXVsdENoYW5uZWxzID0gW1xuICAgICAgeyBpZDogJ2dlbmVyYWwnLCBuYW1lOiAnR2VuZXJhbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9LFxuICAgICAgeyBpZDogJ3ZvaWNlLWNoYXQnLCBuYW1lOiAnVm9pY2UgQ2hhdCcsIHR5cGU6ICd2b2ljZScsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfVxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGNoYW5uZWxEYXRhIG9mIGRlZmF1bHRDaGFubmVscykge1xuICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IGlkOiBjaGFubmVsRGF0YS5pZCB9LFxuICAgICAgICBjaGFubmVsRGF0YSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKCdEZWZhdWx0IGNoYW5uZWxzIGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBTdGFydCBzZXJ2ZXJcbiAgICBjb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxO1xuICAgIHNlcnZlci5saXN0ZW4oUE9SVCwgJzAuMC4wLjAnLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIHNlcnZlcjonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59O1xuXG4vLyBHcmFjZWZ1bCBzaHV0ZG93blxucHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnUmVjZWl2ZWQgU0lHSU5ULCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nKTtcbiAgYXdhaXQgY2xvc2VEQigpO1xuICBpby5jbG9zZSgoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1NlcnZlciBzaHV0IGRvd24nKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xufSk7XG5cbnByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdSZWNlaXZlZCBTSUdURVJNLCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nKTtcbiAgYXdhaXQgY2xvc2VEQigpO1xuICBpby5jbG9zZSgoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1NlcnZlciBzaHV0IGRvd24nKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xufSk7XG5cbi8vIFN0YXJ0IHRoZSBzZXJ2ZXJcbmluaXRpYWxpemVTZXJ2ZXIoKS5jYXRjaChlcnIgPT4ge1xuICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvciBkdXJpbmcgc2VydmVyIHN0YXJ0dXA6JywgZXJyKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQzFCLE1BQU1DLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUksUUFBUSxHQUFHSixPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3JDLE1BQU1LLEdBQUcsR0FBR0wsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTU8sT0FBTyxHQUFHUCxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1RLFlBQVksR0FBR1IsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUM3QyxNQUFNUyxTQUFTLEdBQUdULE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMvQyxNQUFNVSxNQUFNLEdBQUdWLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTVcsU0FBUyxHQUFHWCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTTtFQUFFWSxJQUFJO0VBQUVDO0FBQWlCLENBQUMsR0FBR2IsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQy9ELE1BQU1jLFFBQVEsR0FBR2QsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQztBQUNBLE1BQU1lLE1BQU0sR0FBR2YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNZ0IsT0FBTyxHQUFHaEIsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQzFDLE1BQU1pQixVQUFVLEdBQUdqQixPQUFPLENBQUMsZUFBZSxDQUFDO0FBQzNDLE1BQU07RUFBRWtCLFNBQVM7RUFBRUM7QUFBUSxDQUFDLEdBQUduQixPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDekQsTUFBTW9CLFlBQVksR0FBR3BCLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQzs7QUFFdkQ7QUFDQSxNQUFNcUIsSUFBSSxHQUFHckIsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNc0IsT0FBTyxHQUFHdEIsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQzNDLE1BQU11QixPQUFPLEdBQUd2QixPQUFPLENBQUMsa0JBQWtCLENBQUM7O0FBRTNDO0FBQ0EsTUFBTXdCLE1BQU0sR0FBR2pCLE9BQU8sQ0FBQ2tCLFlBQVksQ0FBQztFQUNsQ0MsS0FBSyxFQUFFLE1BQU07RUFDYkMsTUFBTSxFQUFFcEIsT0FBTyxDQUFDb0IsTUFBTSxDQUFDQyxPQUFPLENBQzVCckIsT0FBTyxDQUFDb0IsTUFBTSxDQUFDRSxTQUFTLENBQUMsQ0FBQyxFQUMxQnRCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ0csTUFBTSxDQUFDO0lBQUVDLEtBQUssRUFBRTtFQUFLLENBQUMsQ0FBQyxFQUN0Q3hCLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLENBQ3RCLENBQUM7RUFDREMsV0FBVyxFQUFFO0lBQUVDLE9BQU8sRUFBRTtFQUFjLENBQUM7RUFDdkNDLFVBQVUsRUFBRSxDQUNWLElBQUk1QixPQUFPLENBQUM0QixVQUFVLENBQUNDLElBQUksQ0FBQztJQUFFQyxRQUFRLEVBQUU7RUFBa0IsQ0FBQyxDQUFDLEVBQzVELElBQUk5QixPQUFPLENBQUM0QixVQUFVLENBQUNHLE9BQU8sQ0FBQztJQUM3QlgsTUFBTSxFQUFFcEIsT0FBTyxDQUFDb0IsTUFBTSxDQUFDQyxPQUFPLENBQzVCckIsT0FBTyxDQUFDb0IsTUFBTSxDQUFDWSxRQUFRLENBQUMsQ0FBQyxFQUN6QmhDLE9BQU8sQ0FBQ29CLE1BQU0sQ0FBQ2EsTUFBTSxDQUFDLENBQ3hCO0VBQ0YsQ0FBQyxDQUFDO0FBRU4sQ0FBQyxDQUFDO0FBRUYsTUFBTUMsR0FBRyxHQUFHdkMsT0FBTyxDQUFDLENBQUM7QUFDckIsTUFBTXdDLE1BQU0sR0FBR3ZDLElBQUksQ0FBQ3dDLFlBQVksQ0FBQ0YsR0FBRyxDQUFDO0FBRXJDLE1BQU1HLGVBQWUsR0FBR2pDLFNBQVMsQ0FBQztFQUNoQ2tDLFFBQVEsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7RUFBRTtFQUMxQkMsR0FBRyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLE1BQU0sSUFBSUYsT0FBTyxDQUFDQyxHQUFHLENBQUNFLGdCQUFnQixHQUFHLEtBQUssR0FBRyxFQUFFO0VBQUU7RUFDbkZDLE9BQU8sRUFBRTtJQUFFQyxLQUFLLEVBQUU7RUFBNEQsQ0FBQztFQUMvRUMsZUFBZSxFQUFFLElBQUk7RUFDckJDLGFBQWEsRUFBRSxLQUFLO0VBQ3BCQyxJQUFJLEVBQUdDLEdBQUcsSUFBSztJQUNiLE9BQU9BLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJRCxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLFNBQVMsQ0FBQztFQUMzRTtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1DLGNBQWMsR0FBR2hELFNBQVMsQ0FBQztFQUMvQmtDLFFBQVEsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7RUFBRTtFQUMxQkMsR0FBRyxFQUFFLEdBQUc7RUFBRTtFQUNWSyxPQUFPLEVBQUU7SUFBRUMsS0FBSyxFQUFFO0VBQTZDLENBQUM7RUFDaEVDLGVBQWUsRUFBRSxJQUFJO0VBQ3JCQyxhQUFhLEVBQUU7QUFDakIsQ0FBQyxDQUFDO0FBRUYsTUFBTU0sa0JBQWtCLEdBQUdqRCxTQUFTLENBQUM7RUFDbkNrQyxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0VBQUU7RUFDMUJDLEdBQUcsRUFBRSxJQUFJO0VBQUU7RUFDWEssT0FBTyxFQUFFO0lBQUVDLEtBQUssRUFBRTtFQUEwRCxDQUFDO0VBQzdFQyxlQUFlLEVBQUUsSUFBSTtFQUNyQkMsYUFBYSxFQUFFO0FBQ2pCLENBQUMsQ0FBQztBQUVGLE1BQU1PLHdCQUF3QixHQUFHbEQsU0FBUyxDQUFDO0VBQ3pDa0MsUUFBUSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSTtFQUFFO0VBQzFCQyxHQUFHLEVBQUUsQ0FBQztFQUFFO0VBQ1JLLE9BQU8sRUFBRTtJQUFFQyxLQUFLLEVBQUU7RUFBNEQsQ0FBQztFQUMvRUMsZUFBZSxFQUFFLElBQUk7RUFDckJDLGFBQWEsRUFBRTtBQUNqQixDQUFDLENBQUM7QUFDRixNQUFNUSxFQUFFLEdBQUcxRCxRQUFRLENBQUNzQyxNQUFNLEVBQUU7RUFDMUJwQyxJQUFJLEVBQUU7SUFDSnlELE1BQU0sRUFBRWhCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssWUFBWSxHQUN6Q0YsT0FBTyxDQUFDQyxHQUFHLENBQUNnQixlQUFlLEVBQUVDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLEdBQ2hELENBQUMsdUJBQXVCLEVBQUUsdUJBQXVCLENBQUM7SUFDdERDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUM7SUFDeEJDLGNBQWMsRUFBRSxDQUFDLGVBQWUsRUFBRSxjQUFjLENBQUM7SUFDakRDLFdBQVcsRUFBRTtFQUNmLENBQUM7RUFDRDtFQUNBakMsVUFBVSxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztFQUNwQztFQUNBa0MsY0FBYyxFQUFFLEtBQUs7RUFBRTtFQUN2QkMsV0FBVyxFQUFFLElBQUk7RUFBRTtFQUNuQkMsWUFBWSxFQUFFLEtBQUs7RUFBRTtFQUNyQkMsY0FBYyxFQUFFLEtBQUs7RUFDckJDLGFBQWEsRUFBRSxJQUFJO0VBQ25CQyxjQUFjLEVBQUUsSUFBSTtFQUNwQkMsY0FBYyxFQUFFO0FBQ2xCLENBQUMsQ0FBQzs7QUFFRjtBQUNBYixFQUFFLENBQUNjLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLGtCQUFrQixFQUFHQyxHQUFHLElBQUs7RUFDeENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9DQUFvQyxFQUFFRixHQUFHLENBQUNHLElBQUksRUFBRUgsR0FBRyxDQUFDM0IsT0FBTyxDQUFDO0VBQ3hFM0IsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLDBCQUEwQixFQUFFO0lBQ3ZDNkIsSUFBSSxFQUFFSCxHQUFHLENBQUNHLElBQUk7SUFDZDlCLE9BQU8sRUFBRTJCLEdBQUcsQ0FBQzNCLE9BQU87SUFDcEIrQixVQUFVLEVBQUVKLEdBQUcsQ0FBQ0ssTUFBTTtJQUN0QkMsT0FBTyxFQUFFTixHQUFHLENBQUN0QixHQUFHLEVBQUU0QjtFQUNwQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTNDLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQy9FLElBQUksQ0FBQztFQUNYeUQsTUFBTSxFQUFFaEIsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEdBQ3pDRixPQUFPLENBQUNDLEdBQUcsQ0FBQ2dCLGVBQWUsRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssR0FDaEQsSUFBSTtFQUNSRyxXQUFXLEVBQUU7QUFDZixDQUFDLENBQUMsQ0FBQztBQUVIM0IsR0FBRyxDQUFDNEMsR0FBRyxDQUFDbkYsT0FBTyxDQUFDOEIsSUFBSSxDQUFDO0VBQUVzRCxLQUFLLEVBQUUsTUFBTTtFQUFFQyxNQUFNLEVBQUU7QUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekQ5QyxHQUFHLENBQUM0QyxHQUFHLENBQUNuRixPQUFPLENBQUNzRixVQUFVLENBQUM7RUFBRUMsUUFBUSxFQUFFLElBQUk7RUFBRUgsS0FBSyxFQUFFO0FBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVoRTtBQUNBLE1BQU1JLGlCQUFpQixHQUFHMUUsT0FBTyxDQUFDO0VBQ2hDMkUsTUFBTSxFQUFFNUMsT0FBTyxDQUFDQyxHQUFHLENBQUM0QyxjQUFjLElBQUksdURBQXVEO0VBQzdGQyxNQUFNLEVBQUUsS0FBSztFQUNiQyxpQkFBaUIsRUFBRSxLQUFLO0VBQ3hCQyxLQUFLLEVBQUUsQ0FBQyxNQUFNO0lBQ1osTUFBTUEsS0FBSyxHQUFHOUUsVUFBVSxDQUFDK0UsTUFBTSxDQUFDO01BQzlCQyxRQUFRLEVBQUVsRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ2tELFdBQVcsSUFBSSxrQ0FBa0M7TUFDdkVDLGNBQWMsRUFBRSxVQUFVO01BQzFCQyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO01BQUU7TUFDbkJDLFVBQVUsRUFBRSxRQUFRO01BQ3BCQyxVQUFVLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN2QixDQUFDLENBQUM7O0lBRUY7SUFDQSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLENBQUNDLE1BQU0sSUFBSTtNQUNuRCxNQUFNQyxjQUFjLEdBQUdWLEtBQUssQ0FBQ1MsTUFBTSxDQUFDO01BQ3BDLElBQUksT0FBT0MsY0FBYyxLQUFLLFVBQVUsRUFBRTtRQUN4Q1YsS0FBSyxDQUFDUyxNQUFNLENBQUMsR0FBRyxnQkFBZUUsR0FBRyxFQUFFLEdBQUdDLElBQUksRUFBRTtVQUMzQyxJQUFJO1lBQ0Y1QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0J3QixNQUFNLENBQUNJLFdBQVcsQ0FBQyxDQUFDLGVBQWVGLEdBQUcsbUJBQW1CLENBQUM7WUFDMUYsTUFBTUcsU0FBUyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO1lBQzVCLE1BQU1DLE1BQU0sR0FBRyxNQUFNUCxjQUFjLENBQUNRLElBQUksQ0FBQyxJQUFJLEVBQUVQLEdBQUcsRUFBRSxHQUFHQyxJQUFJLENBQUM7WUFDNUQsTUFBTU8sUUFBUSxHQUFHSixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLFNBQVM7WUFDdkM5QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUJ3QixNQUFNLENBQUNJLFdBQVcsQ0FBQyxDQUFDLGVBQWVGLEdBQUcsaUNBQWlDUSxRQUFRLGNBQWMsQ0FBQyxDQUFDRixNQUFNLEVBQUUsQ0FBQzs7WUFFdkk7WUFDQSxJQUFJUixNQUFNLEtBQUssS0FBSyxJQUFJRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7Y0FDL0I1QixPQUFPLENBQUNDLEdBQUcsQ0FBQywyQkFBMkIwQixHQUFHLG1CQUFtQkMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDUSxhQUFhLFlBQVlSLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ1MsTUFBTSxFQUFFLENBQUM7WUFDakg7WUFFQSxPQUFPSixNQUFNO1VBQ2YsQ0FBQyxDQUFDLE9BQU81RCxLQUFLLEVBQUU7WUFDZDJCLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQyxtQkFBbUJvRCxNQUFNLENBQUNJLFdBQVcsQ0FBQyxDQUFDLGVBQWVGLEdBQUcsNkJBQTZCdEQsS0FBSyxDQUFDRCxPQUFPLEVBQUUsQ0FBQztZQUNwSCxNQUFNQyxLQUFLO1VBQ2I7UUFDRixDQUFDO01BQ0g7SUFDRixDQUFDLENBQUM7SUFFRixPQUFPMkMsS0FBSztFQUNkLENBQUMsRUFBRSxDQUFDO0VBQ0pzQixNQUFNLEVBQUU7SUFDTkMsTUFBTSxFQUFFdkUsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZO0lBQUU7SUFDL0NzRSxRQUFRLEVBQUUsSUFBSTtJQUFFO0lBQ2hCQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSTtJQUFFO0lBQzdCQyxRQUFRLEVBQUUsS0FBSyxDQUFDO0VBQ2xCLENBQUM7RUFDREMsSUFBSSxFQUFFLGFBQWE7RUFBRTtFQUNyQkMsT0FBTyxFQUFFLEtBQUs7RUFBRTtFQUNoQkMsS0FBSyxFQUFFLFNBQVMsQ0FBQztBQUNuQixDQUFDLENBQUM7QUFFRm5GLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQ0ssaUJBQWlCLENBQUM7O0FBRTFCO0FBQ0EsTUFBTW1DLFlBQVksR0FBR0EsQ0FBQy9DLEdBQUcsRUFBRXRCLEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzVDdkcsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLGtCQUFrQixFQUFFO0lBQy9CRCxPQUFPLEVBQUUyQixHQUFHLENBQUMzQixPQUFPO0lBQ3BCcEIsS0FBSyxFQUFFK0MsR0FBRyxDQUFDL0MsS0FBSztJQUNoQmlHLEdBQUcsRUFBRXhFLEdBQUcsQ0FBQ3dFLEdBQUc7SUFDWnhCLE1BQU0sRUFBRWhELEdBQUcsQ0FBQ2dELE1BQU07SUFDbEJ5QixFQUFFLEVBQUV6RSxHQUFHLENBQUN5RSxFQUFFO0lBQ1ZDLFNBQVMsRUFBRTFFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVk7RUFDakMsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsSUFBSXFCLEdBQUcsQ0FBQzRDLElBQUksS0FBSyxpQkFBaUIsRUFBRTtJQUNsQyxNQUFNNUYsTUFBTSxHQUFHcUcsTUFBTSxDQUFDQyxNQUFNLENBQUN0RCxHQUFHLENBQUNoRCxNQUFNLENBQUMsQ0FBQ3VHLEdBQUcsQ0FBQ0MsQ0FBQyxLQUFLO01BQ2pEQyxLQUFLLEVBQUVELENBQUMsQ0FBQ0UsSUFBSTtNQUNickYsT0FBTyxFQUFFbUYsQ0FBQyxDQUFDbkYsT0FBTztNQUNsQnNGLEtBQUssRUFBRUgsQ0FBQyxDQUFDRztJQUNYLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBT1gsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQzFCb0IsS0FBSyxFQUFFLG1CQUFtQjtNQUMxQnNGLE9BQU8sRUFBRTVHLE1BQU07TUFDZm1ELElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKOztFQUVBO0VBQ0EsSUFBSUgsR0FBRyxDQUFDRyxJQUFJLEtBQUssS0FBSyxFQUFFO0lBQ3RCLE1BQU1zRCxLQUFLLEdBQUdKLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDN0QsR0FBRyxDQUFDOEQsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFDLE1BQU1ILEtBQUssR0FBRzNELEdBQUcsQ0FBQzhELFFBQVEsQ0FBQ0wsS0FBSyxDQUFDO0lBQ2pDLE9BQU9ULEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUMxQm9CLEtBQUssRUFBRSxHQUFHbUYsS0FBSyxLQUFLRSxLQUFLLGtCQUFrQjtNQUMzQ3hELElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKOztFQUVBO0VBQ0EsSUFBSUgsR0FBRyxDQUFDNEMsSUFBSSxLQUFLLG1CQUFtQixFQUFFO0lBQ3BDLE9BQU9JLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUMxQm9CLEtBQUssRUFBRSwwQkFBMEI7TUFDakM2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtFQUVBLElBQUlILEdBQUcsQ0FBQzRDLElBQUksS0FBSyxtQkFBbUIsRUFBRTtJQUNwQyxPQUFPSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDMUJvQixLQUFLLEVBQUUsbUJBQW1CO01BQzFCNkIsSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0VBQ0o7O0VBRUE7RUFDQTZDLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztJQUNuQm9CLEtBQUssRUFBRSx1QkFBdUI7SUFDOUI2QixJQUFJLEVBQUUsZ0JBQWdCO0lBQ3RCNEQsU0FBUyxFQUFFckYsR0FBRyxDQUFDc0YsRUFBRSxJQUFJO0VBQ3ZCLENBQUMsQ0FBQztBQUNKLENBQUM7O0FBRUQ7QUFDQXJHLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQyxDQUFDN0IsR0FBRyxFQUFFc0UsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUIsTUFBTWdCLEtBQUssR0FBR2pDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFFeEJlLEdBQUcsQ0FBQ2pELEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTTtJQUNyQixNQUFNcUMsUUFBUSxHQUFHSixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdnQyxLQUFLO0lBQ25DdkgsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLEdBQUd4RixHQUFHLENBQUNnRCxNQUFNLElBQUloRCxHQUFHLENBQUN3RSxHQUFHLE1BQU1GLEdBQUcsQ0FBQ21CLFVBQVUsS0FBSy9CLFFBQVEsS0FBSyxFQUFFO01BQzFFZSxFQUFFLEVBQUV6RSxHQUFHLENBQUN5RSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTFFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVksQ0FBQztNQUNoQ3lGLElBQUksRUFBRTFGLEdBQUcsQ0FBQzBGLElBQUksRUFBRUMsUUFBUSxJQUFJLFdBQVc7TUFDdkN2SSxJQUFJLEVBQUU0QyxHQUFHLENBQUNnRCxNQUFNLEtBQUssS0FBSyxHQUFHNEMsSUFBSSxDQUFDQyxTQUFTLENBQUM3RixHQUFHLENBQUM1QyxJQUFJLENBQUMsR0FBRzBJO0lBQzFELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGdkIsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLENBQUM7O0FBRUY7QUFDQSxNQUFNd0IsbUJBQW1CLEdBQUcsTUFBQUEsQ0FBTy9GLEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3BELElBQUk7SUFDRmhELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhDQUE4QyxFQUFFO01BQzFEZ0QsR0FBRyxFQUFFeEUsR0FBRyxDQUFDd0UsR0FBRztNQUNaeEIsTUFBTSxFQUFFaEQsR0FBRyxDQUFDZ0QsTUFBTTtNQUNsQmdELFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2lHLFNBQVM7TUFDeEJDLGFBQWEsRUFBRSxDQUFDLENBQUNsRyxHQUFHLENBQUN4QyxPQUFPO01BQzVCMkksV0FBVyxFQUFFbkcsR0FBRyxDQUFDeEMsT0FBTyxHQUFHO1FBQ3pCbUcsYUFBYSxFQUFFM0QsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYTtRQUN4Q0MsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtRQUMxQitCLFFBQVEsRUFBRTNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21JLFFBQVE7UUFDOUJTLElBQUksRUFBRXBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUk7UUFDdEJDLFNBQVMsRUFBRXJHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzZJLFNBQVM7UUFDaENDLFNBQVMsRUFBRXRHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRztNQUN0RCxDQUFDLEdBQUc7SUFDTixDQUFDLENBQUM7O0lBRUY7SUFDQSxJQUFJdkcsR0FBRyxDQUFDeEMsT0FBTyxJQUFJd0MsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYSxJQUFJM0QsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTSxFQUFFO01BQ2xFckMsT0FBTyxDQUFDQyxHQUFHLENBQUMsNENBQTRDLEVBQUV4QixHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNLENBQUM7TUFDN0VyQyxPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsRUFBRTtRQUMzQzBCLEdBQUcsRUFBRWxELEdBQUcsQ0FBQ2lHLFNBQVM7UUFDbEJLLFNBQVMsRUFBRXRHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO1FBQ3pEN0IsU0FBUyxFQUFFMUUsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxFQUFFNkIsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLO1FBQzFERixTQUFTLEVBQUVyRyxHQUFHLENBQUN4QyxPQUFPLENBQUM2STtNQUN6QixDQUFDLENBQUM7TUFFRixNQUFNWCxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQ3hHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU0sQ0FBQztNQUNwRCxJQUFJOEIsSUFBSSxFQUFFO1FBQ1JuRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRTtVQUN6Q21FLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1VBQ3ZCTCxFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztVQUNaOUUsTUFBTSxFQUFFK0QsSUFBSSxDQUFDL0QsTUFBTTtVQUNuQitFLFlBQVksRUFBRTtRQUNoQixDQUFDLENBQUM7UUFDRjFHLEdBQUcsQ0FBQzJHLFdBQVcsR0FBR2pCLElBQUksQ0FBQyxDQUFDOztRQUV4QjtRQUNBLElBQUkxRixHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLElBQUl0RyxHQUFHLENBQUN4QyxPQUFPLENBQUNrSCxTQUFTLEVBQUU7VUFDbEQxRSxHQUFHLENBQUN4QyxPQUFPLENBQUNvSixnQkFBZ0IsR0FBRyxJQUFJdEQsSUFBSSxDQUFDLENBQUMsQ0FBQ3VELFdBQVcsQ0FBQyxDQUFDO1VBQ3ZEdEYsT0FBTyxDQUFDQyxHQUFHLENBQUMsNkNBQTZDLENBQUM7UUFDNUQ7TUFDRixDQUFDLE1BQU07UUFDTEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0RBQW9ELEVBQUV4QixHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNLENBQUM7UUFDckY7UUFDQSxPQUFPNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYTtRQUNoQyxPQUFPM0QsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtRQUN6QixPQUFPNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUksUUFBUTtRQUMzQixPQUFPM0YsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNEksSUFBSTtNQUN6QjtJQUNGLENBQUMsTUFBTTtNQUNMN0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsOERBQThELEVBQUU7UUFDMUV3RSxTQUFTLEVBQUVoRyxHQUFHLENBQUNpRyxTQUFTO1FBQ3hCekksT0FBTyxFQUFFLENBQUMsQ0FBQ3dDLEdBQUcsQ0FBQ3hDLE9BQU87UUFDdEJtRyxhQUFhLEVBQUUzRCxHQUFHLENBQUN4QyxPQUFPLEVBQUVtRyxhQUFhO1FBQ3pDQyxNQUFNLEVBQUU1RCxHQUFHLENBQUN4QyxPQUFPLEVBQUVvRztNQUN2QixDQUFDLENBQUM7TUFDRjVELEdBQUcsQ0FBQzJHLFdBQVcsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUMxQjtJQUNBcEMsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDLENBQUMsT0FBTzNFLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDOEksSUFBSSxDQUFDLCtCQUErQixFQUFFO01BQzNDbEgsS0FBSyxFQUFFQSxLQUFLLENBQUNELE9BQU87TUFDcEJxRyxTQUFTLEVBQUVoRyxHQUFHLENBQUNpRyxTQUFTO01BQ3hCeEIsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUU7SUFDVixDQUFDLENBQUM7SUFDRnpFLEdBQUcsQ0FBQzJHLFdBQVcsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUN4QnBDLElBQUksQ0FBQyxDQUFDO0VBQ1I7QUFDRixDQUFDOztBQUVEO0FBQ0EsTUFBTXdDLGlCQUFpQixHQUFHLE1BQUFBLENBQU8vRyxHQUFHLEVBQUVzRSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNsRCxJQUFJO0lBQ0ZoRCxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQ0FBMEMsRUFBRTtNQUFFZ0QsR0FBRyxFQUFFeEUsR0FBRyxDQUFDd0UsR0FBRztNQUFFeEIsTUFBTSxFQUFFaEQsR0FBRyxDQUFDZ0Q7SUFBTyxDQUFDLENBQUM7SUFDN0YsTUFBTWdFLFVBQVUsR0FBR2hILEdBQUcsQ0FBQzRCLE9BQU8sQ0FBQyxlQUFlLENBQUM7SUFDL0MsTUFBTXFGLEtBQUssR0FBR0QsVUFBVSxJQUFJQSxVQUFVLENBQUN2RyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFdERjLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixFQUFFO01BQUUwRixhQUFhLEVBQUUsQ0FBQyxDQUFDRixVQUFVO01BQUVHLFFBQVEsRUFBRSxDQUFDLENBQUNGO0lBQU0sQ0FBQyxDQUFDO0lBRTlGLElBQUksQ0FBQ0EsS0FBSyxFQUFFO01BQ1YxRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztNQUNsQyxPQUFPOEMsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLHVCQUF1QjtRQUM5QjZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUEsTUFBTTJGLE9BQU8sR0FBR3ZLLEdBQUcsQ0FBQ3dLLE1BQU0sQ0FBQ0osS0FBSyxFQUFFMUgsT0FBTyxDQUFDQyxHQUFHLENBQUM4SCxVQUFVLENBQUM7SUFDekQvRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtNQUFFb0MsTUFBTSxFQUFFd0QsT0FBTyxDQUFDeEQsTUFBTTtNQUFFK0IsUUFBUSxFQUFFeUIsT0FBTyxDQUFDekI7SUFBUyxDQUFDLENBQUM7SUFDckYsTUFBTUQsSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUNZLE9BQU8sQ0FBQ3hELE1BQU0sQ0FBQztJQUVoRCxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVG5FLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdDQUF3QyxFQUFFNEYsT0FBTyxDQUFDeEQsTUFBTSxDQUFDO01BQ3JFLE9BQU9VLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSxnQkFBZ0I7UUFDdkI2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBekIsR0FBRyxDQUFDMEYsSUFBSSxHQUFHQSxJQUFJO0lBQ2ZuRSxPQUFPLENBQUNDLEdBQUcsQ0FBQywyQ0FBMkMsRUFBRWtFLElBQUksQ0FBQ0MsUUFBUSxFQUFFO01BQUVMLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO01BQUU5RSxNQUFNLEVBQUUrRCxJQUFJLENBQUMvRDtJQUFPLENBQUMsQ0FBQztJQUM5RzRDLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDLE9BQU8zRSxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzhJLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtNQUN4Q2xILEtBQUssRUFBRUEsS0FBSyxDQUFDRCxPQUFPO01BQ3BCOEUsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUU7SUFDVixDQUFDLENBQUM7SUFFRixJQUFJN0UsS0FBSyxDQUFDc0UsSUFBSSxLQUFLLG1CQUFtQixFQUFFO01BQ3RDLE9BQU9JLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSxzQkFBc0I7UUFDN0I2QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUk3QixLQUFLLENBQUNzRSxJQUFJLEtBQUssbUJBQW1CLEVBQUU7TUFDdEMsT0FBT0ksR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLG1CQUFtQjtRQUMxQjZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUEsT0FBTzZDLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUMxQm9CLEtBQUssRUFBRSwyQkFBMkI7TUFDbEM2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7O0FBRUQ7QUFDQSxNQUFNOEYsZ0JBQWdCLEdBQUcsTUFBQUEsQ0FBT3ZILEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2pELElBQUk7SUFDRixJQUFJLENBQUN2RSxHQUFHLENBQUMwRixJQUFJLEVBQUU7TUFDYixPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLHlCQUF5QjtRQUNoQzZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUEsSUFBSSxDQUFDekIsR0FBRyxDQUFDMEYsSUFBSSxDQUFDOEIsc0JBQXNCLENBQUMsQ0FBQyxFQUFFO01BQ3RDLE9BQU9sRCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFDMUJvQixLQUFLLEVBQUUsK0JBQStCO1FBQ3RDNkIsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7SUFFQThDLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDLE9BQU8zRSxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO0lBQzdDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQ25Cb0IsS0FBSyxFQUFFLHlDQUF5QztNQUNoRDZCLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUVELE1BQU1nRyxZQUFZLEdBQUcsTUFBQUEsQ0FBT3pILEdBQUcsRUFBRXNFLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzdDLElBQUk7SUFDRixJQUFJLENBQUN2RSxHQUFHLENBQUMwRixJQUFJLEVBQUU7TUFDYixPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLHlCQUF5QjtRQUNoQzZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUEsSUFBSSxDQUFDekIsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZ0Msa0JBQWtCLENBQUMsQ0FBQyxFQUFFO01BQ2xDLE9BQU9wRCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFDMUJvQixLQUFLLEVBQUUsbUNBQW1DO1FBQzFDNkIsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7SUFFQThDLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDLE9BQU8zRSxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxvQkFBb0IsRUFBRUEsS0FBSyxDQUFDO0lBQ3pDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQ25Cb0IsS0FBSyxFQUFFLHlDQUF5QztNQUNoRDZCLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBeEMsR0FBRyxDQUFDNEMsR0FBRyxDQUFDa0UsbUJBQW1CLENBQUM7O0FBRTVCO0FBQ0E5RyxHQUFHLENBQUM0QyxHQUFHLENBQUN6QixrQkFBa0IsQ0FBQzs7QUFFM0I7QUFDQW5CLEdBQUcsQ0FBQzRDLEdBQUcsQ0FDTDNFLE1BQU0sQ0FBQztFQUNMeUsscUJBQXFCLEVBQUU7SUFDckJDLFVBQVUsRUFBRTtNQUNWQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUM7TUFDdEJDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSw4QkFBOEIsQ0FBQztNQUN2RUMsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLDJCQUEyQixDQUFDO01BQ2hEQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDO01BQzNCQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLENBQUM7TUFDeENDLFVBQVUsRUFBRSxDQUFDLFFBQVE7SUFDdkI7RUFDRixDQUFDO0VBQ0RDLHlCQUF5QixFQUFFO0FBQzdCLENBQUMsQ0FDSCxDQUFDOztBQUVEO0FBQ0EsTUFBTUMsY0FBYyxHQUFHO0VBQ3JCQyxVQUFVLEVBQUU7SUFDVkMsT0FBTyxFQUFFLE9BQU87SUFDaEI5QyxJQUFJLEVBQUU7TUFDSitDLEtBQUssRUFBRSxhQUFhO01BQ3BCQyxPQUFPLEVBQUUsT0FBTztNQUNoQkMsV0FBVyxFQUFFLDhFQUE4RTtNQUMzRkMsT0FBTyxFQUFFO1FBQ1B4RSxJQUFJLEVBQUU7TUFDUjtJQUNGLENBQUM7SUFDRHlFLE9BQU8sRUFBRSxDQUNQO01BQ0VuRSxHQUFHLEVBQUUsdUJBQXVCO01BQzVCaUUsV0FBVyxFQUFFO0lBQ2YsQ0FBQyxDQUNGO0lBQ0RHLFVBQVUsRUFBRTtNQUNWQyxPQUFPLEVBQUU7UUFDUGhMLElBQUksRUFBRTtVQUNKaUwsSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1Z6RCxFQUFFLEVBQUU7Y0FDRndELElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRDlDLFFBQVEsRUFBRTtjQUNSbUQsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFLGVBQWU7Y0FDNUJPLFNBQVMsRUFBRSxDQUFDO2NBQ1pDLFNBQVMsRUFBRTtZQUNiLENBQUM7WUFDREMsS0FBSyxFQUFFO2NBQ0xKLElBQUksRUFBRSxRQUFRO2NBQ2QzSyxNQUFNLEVBQUUsT0FBTztjQUNmc0ssV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEckMsSUFBSSxFQUFFO2NBQ0owQyxJQUFJLEVBQUUsUUFBUTtjQUNkSyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDO2NBQ3pCQyxPQUFPLEVBQUUsUUFBUTtjQUNqQlgsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEWSxTQUFTLEVBQUU7Y0FDVFAsSUFBSSxFQUFFLFFBQVE7Y0FDZDNLLE1BQU0sRUFBRSxXQUFXO2NBQ25Cc0ssV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEYSxVQUFVLEVBQUU7Y0FDVlIsSUFBSSxFQUFFLFFBQVE7Y0FDZDNLLE1BQU0sRUFBRSxXQUFXO2NBQ25Cc0ssV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEOUcsTUFBTSxFQUFFO2NBQ05tSCxJQUFJLEVBQUUsUUFBUTtjQUNkSyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDO2NBQzNCVixXQUFXLEVBQUU7WUFDZjtVQUNGLENBQUM7VUFDRGMsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTTtRQUNwRCxDQUFDO1FBQ0R4TCxPQUFPLEVBQUU7VUFDUCtLLElBQUksRUFBRSxRQUFRO1VBQ2RDLFVBQVUsRUFBRTtZQUNWekQsRUFBRSxFQUFFO2NBQ0Z3RCxJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0R2RSxJQUFJLEVBQUU7Y0FDSjRFLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRSxzQkFBc0I7Y0FDbkNPLFNBQVMsRUFBRSxDQUFDO2NBQ1pDLFNBQVMsRUFBRTtZQUNiLENBQUM7WUFDREgsSUFBSSxFQUFFO2NBQ0pBLElBQUksRUFBRSxRQUFRO2NBQ2RLLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7Y0FDdkJWLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDREEsV0FBVyxFQUFFO2NBQ1hLLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRSxxQkFBcUI7Y0FDbENRLFNBQVMsRUFBRTtZQUNiLENBQUM7WUFDRE8sU0FBUyxFQUFFO2NBQ1RWLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRGdCLFFBQVEsRUFBRTtjQUNSWCxJQUFJLEVBQUUsUUFBUTtjQUNkTSxPQUFPLEVBQUUsQ0FBQztjQUNWWCxXQUFXLEVBQUU7WUFDZjtVQUNGLENBQUM7VUFDRGMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsV0FBVztRQUM5QyxDQUFDO1FBQ0RHLGVBQWUsRUFBRTtVQUNmWixJQUFJLEVBQUUsUUFBUTtVQUNkUyxRQUFRLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQztVQUMzQ1IsVUFBVSxFQUFFO1lBQ1ZwRCxRQUFRLEVBQUU7Y0FDUm1ELElBQUksRUFBRSxRQUFRO2NBQ2RFLFNBQVMsRUFBRSxDQUFDO2NBQ1pDLFNBQVMsRUFBRSxFQUFFO2NBQ2JSLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRFMsS0FBSyxFQUFFO2NBQ0xKLElBQUksRUFBRSxRQUFRO2NBQ2QzSyxNQUFNLEVBQUUsT0FBTztjQUNmc0ssV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEa0IsUUFBUSxFQUFFO2NBQ1JiLElBQUksRUFBRSxRQUFRO2NBQ2RFLFNBQVMsRUFBRSxDQUFDO2NBQ1pQLFdBQVcsRUFBRTtZQUNmO1VBQ0Y7UUFDRixDQUFDO1FBQ0RtQixZQUFZLEVBQUU7VUFDWmQsSUFBSSxFQUFFLFFBQVE7VUFDZFMsUUFBUSxFQUFFLENBQUMsWUFBWSxFQUFFLFVBQVUsQ0FBQztVQUNwQ1IsVUFBVSxFQUFFO1lBQ1ZjLFVBQVUsRUFBRTtjQUNWZixJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RrQixRQUFRLEVBQUU7Y0FDUmIsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGLENBQUM7UUFDRHFCLFlBQVksRUFBRTtVQUNaaEIsSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1Y5QixLQUFLLEVBQUU7Y0FDTDZCLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRC9DLElBQUksRUFBRTtjQUNKcUUsSUFBSSxFQUFFO1lBQ1I7VUFDRjtRQUNGLENBQUM7UUFDREMsY0FBYyxFQUFFO1VBQ2RsQixJQUFJLEVBQUUsUUFBUTtVQUNkUyxRQUFRLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1VBQzFCUixVQUFVLEVBQUU7WUFDVjdFLElBQUksRUFBRTtjQUNKNEUsSUFBSSxFQUFFLFFBQVE7Y0FDZEUsU0FBUyxFQUFFLENBQUM7Y0FDWkMsU0FBUyxFQUFFLEdBQUc7Y0FDZFIsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNESyxJQUFJLEVBQUU7Y0FDSkEsSUFBSSxFQUFFLFFBQVE7Y0FDZEssSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztjQUN2QlYsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEQSxXQUFXLEVBQUU7Y0FDWEssSUFBSSxFQUFFLFFBQVE7Y0FDZEcsU0FBUyxFQUFFLEdBQUc7Y0FDZFIsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGLENBQUM7UUFDRHdCLGFBQWEsRUFBRTtVQUNibkIsSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1ZuSixLQUFLLEVBQUU7Y0FDTGtKLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRG5LLE1BQU0sRUFBRTtjQUNOd0ssSUFBSSxFQUFFLE9BQU87Y0FDYm9CLEtBQUssRUFBRTtnQkFDTHBCLElBQUksRUFBRSxRQUFRO2dCQUNkQyxVQUFVLEVBQUU7a0JBQ1ZvQixHQUFHLEVBQUU7b0JBQUVyQixJQUFJLEVBQUU7a0JBQVMsQ0FBQztrQkFDdkJzQixLQUFLLEVBQUU7b0JBQUV0QixJQUFJLEVBQUU7a0JBQVMsQ0FBQztrQkFDekJ1QixRQUFRLEVBQUU7b0JBQUV2QixJQUFJLEVBQUU7a0JBQVM7Z0JBQzdCO2NBQ0YsQ0FBQztjQUNETCxXQUFXLEVBQUU7WUFDZjtVQUNGO1FBQ0Y7TUFDRixDQUFDO01BQ0Q2QixlQUFlLEVBQUU7UUFDZkMsVUFBVSxFQUFFO1VBQ1Z6QixJQUFJLEVBQUUsTUFBTTtVQUNaMEIsTUFBTSxFQUFFLFFBQVE7VUFDaEJDLFlBQVksRUFBRTtRQUNoQjtNQUNGO0lBQ0YsQ0FBQztJQUNEQyxRQUFRLEVBQUUsQ0FDUjtNQUNFSCxVQUFVLEVBQUU7SUFDZCxDQUFDO0VBRUwsQ0FBQztFQUNESSxJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN4QixDQUFDO0FBRUQsTUFBTUMsV0FBVyxHQUFHNU4sWUFBWSxDQUFDb0wsY0FBYyxDQUFDOztBQUVoRDtBQUNBbkosR0FBRyxDQUFDNEMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDN0IsR0FBRyxFQUFFc0UsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdkM7RUFDQUQsR0FBRyxDQUFDdUcsWUFBWSxDQUFDLHlCQUF5QixDQUFDO0VBQzNDdEcsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLEVBQUV0SCxTQUFTLENBQUM2TixLQUFLLEVBQUU3TixTQUFTLENBQUM4TixLQUFLLENBQUNILFdBQVcsQ0FBQyxDQUFDOztBQUVqRDtBQUNBckosT0FBTyxDQUFDQyxHQUFHLENBQUMsdURBQXVELENBQUM7O0FBRXBFO0FBQ0F2QyxHQUFHLENBQUNnQixHQUFHLENBQUMsa0JBQWtCLEVBQUU4RyxpQkFBaUIsRUFBRVEsZ0JBQWdCLEVBQUVwSCxjQUFjLEVBQUUsT0FBT0gsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ25HLElBQUk7SUFDRixNQUFNMEcsSUFBSSxHQUFHQyxRQUFRLENBQUNqTCxHQUFHLENBQUNrTCxLQUFLLENBQUNGLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDMUMsTUFBTWxKLEtBQUssR0FBR21KLFFBQVEsQ0FBQ2pMLEdBQUcsQ0FBQ2tMLEtBQUssQ0FBQ3BKLEtBQUssQ0FBQyxJQUFJLEVBQUU7SUFDN0MsTUFBTS9CLElBQUksR0FBRyxDQUFDaUwsSUFBSSxHQUFHLENBQUMsSUFBSWxKLEtBQUs7SUFFL0IsTUFBTXFKLEtBQUssR0FBRyxNQUFNdE4sSUFBSSxDQUFDdU4sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzlCQyxNQUFNLENBQUMsOEZBQThGLENBQUMsQ0FDdEdDLElBQUksQ0FBQztNQUFFakMsU0FBUyxFQUFFLENBQUM7SUFBRSxDQUFDLENBQUMsQ0FDdkJ0SixJQUFJLENBQUNBLElBQUksQ0FBQyxDQUNWK0IsS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFFZixNQUFNeUosS0FBSyxHQUFHLE1BQU0xTixJQUFJLENBQUMyTixjQUFjLENBQUMsQ0FBQztJQUV6Q3hOLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxnQ0FBZ0N4RixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQy9EOEYsT0FBTyxFQUFFekwsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHO01BQ3JCdUUsSUFBSTtNQUNKbEosS0FBSztNQUNMeUo7SUFDRixDQUFDLENBQUM7SUFFRmpILEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQMk0sS0FBSztNQUNMTyxVQUFVLEVBQUU7UUFDVlYsSUFBSTtRQUNKbEosS0FBSztRQUNMeUosS0FBSztRQUNMSSxLQUFLLEVBQUVDLElBQUksQ0FBQ0MsSUFBSSxDQUFDTixLQUFLLEdBQUd6SixLQUFLO01BQ2hDO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9sQyxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxpQ0FBaUMsRUFBRUEsS0FBSyxDQUFDO0lBQ3REMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUUsdUJBQXVCO01BQUU2QixJQUFJLEVBQUU7SUFBaUIsQ0FBQyxDQUFDO0VBQ2xGO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0F4QyxHQUFHLENBQUM2TSxJQUFJLENBQUMsOEJBQThCLEVBQUUvRSxpQkFBaUIsRUFBRVEsZ0JBQWdCLEVBQUVwSCxjQUFjLEVBQUUsQ0FDNUYvQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMyTyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDMk0sSUFBSSxDQUFDLENBQUMsRUFDcEQ3TyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM4TyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUM7RUFBRUgsR0FBRyxFQUFFLENBQUM7RUFBRTFNLEdBQUcsRUFBRTtBQUFTLENBQUMsQ0FBQyxDQUFDO0FBQUEsQ0FDOUQsRUFBRSxPQUFPVSxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDckIsSUFBSTtJQUNGLE1BQU1oRyxNQUFNLEdBQUdqQixnQkFBZ0IsQ0FBQzJDLEdBQUcsQ0FBQztJQUNwQyxJQUFJLENBQUMxQixNQUFNLENBQUM4TixPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3JCLE9BQU85SCxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRUYsTUFBTSxFQUFFQSxNQUFNLENBQUMrTixLQUFLLENBQUM7TUFBRSxDQUFDLENBQUM7SUFDekQ7SUFFQSxNQUFNO01BQUV6STtJQUFPLENBQUMsR0FBRzVELEdBQUcsQ0FBQ3NNLE1BQU07SUFDN0IsTUFBTTtNQUFFQyxNQUFNO01BQUU3STtJQUFTLENBQUMsR0FBRzFELEdBQUcsQ0FBQzVDLElBQUk7SUFFckMsTUFBTXNJLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDNUMsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQzhCLElBQUksRUFBRTtNQUNULE9BQU9wQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7O0lBRUE7SUFDQSxJQUFJOEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxLQUFLeE0sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxFQUFFO01BQ25ELE9BQU9sSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFzQixDQUFDLENBQUM7SUFDL0Q7O0lBRUE7SUFDQSxJQUFJOEYsSUFBSSxDQUFDVSxJQUFJLEtBQUssT0FBTyxJQUFJcEcsR0FBRyxDQUFDMEYsSUFBSSxDQUFDVSxJQUFJLEtBQUssT0FBTyxFQUFFO01BQ3RELE9BQU85QixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUEyQixDQUFDLENBQUM7SUFDcEU7SUFFQSxNQUFNOEYsSUFBSSxDQUFDK0csR0FBRyxDQUFDRixNQUFNLEVBQUU3SSxRQUFRLEVBQUUxRCxHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUcsQ0FBQztJQUU5Q3pJLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsY0FBYzNGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDbEUrRyxZQUFZLEVBQUU5SSxNQUFNO01BQ3BCK0ksVUFBVSxFQUFFM00sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHO01BQ3hCOEYsTUFBTTtNQUNON0k7SUFDRixDQUFDLENBQUM7SUFFRlksR0FBRyxDQUFDOUYsSUFBSSxDQUFDO01BQ1BtQixPQUFPLEVBQUUsUUFBUStGLElBQUksQ0FBQ0MsUUFBUSxrQkFBa0I7TUFDaERELElBQUksRUFBRTtRQUNKSixFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztRQUNaZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QmlILE1BQU0sRUFBRSxJQUFJO1FBQ1pDLFNBQVMsRUFBRU4sTUFBTTtRQUNqQk8sVUFBVSxFQUFFcEgsSUFBSSxDQUFDb0g7TUFDbkI7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT2xOLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7SUFDMUMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUFxQixDQUFDLENBQUM7RUFDdkQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQVgsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLGdDQUFnQyxFQUFFL0UsaUJBQWlCLEVBQUVRLGdCQUFnQixFQUFFcEgsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNsSCxJQUFJO0lBQ0YsTUFBTTtNQUFFVjtJQUFPLENBQUMsR0FBRzVELEdBQUcsQ0FBQ3NNLE1BQU07SUFDN0IsTUFBTTVHLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDNUMsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQzhCLElBQUksRUFBRTtNQUNULE9BQU9wQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7SUFFQSxJQUFJLENBQUM4RixJQUFJLENBQUNrSCxNQUFNLEVBQUU7TUFDaEIsT0FBT3RJLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUM5RDtJQUVBLE1BQU04RixJQUFJLENBQUNxSCxLQUFLLENBQUMsQ0FBQztJQUVsQi9PLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsZ0JBQWdCM0YsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNwRXFILGNBQWMsRUFBRXBKLE1BQU07TUFDdEJxSixZQUFZLEVBQUVqTixHQUFHLENBQUMwRixJQUFJLENBQUNlO0lBQ3pCLENBQUMsQ0FBQztJQUVGbkMsR0FBRyxDQUFDOUYsSUFBSSxDQUFDO01BQ1BtQixPQUFPLEVBQUUsUUFBUStGLElBQUksQ0FBQ0MsUUFBUSxvQkFBb0I7TUFDbERELElBQUksRUFBRTtRQUNKSixFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztRQUNaZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QmlILE1BQU0sRUFBRTtNQUNWO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9oTixLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx1QkFBdUIsRUFBRUEsS0FBSyxDQUFDO0lBQzVDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBdUIsQ0FBQyxDQUFDO0VBQ3pEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQywrQkFBK0IsRUFBRS9FLGlCQUFpQixFQUFFUSxnQkFBZ0IsRUFBRXBILGNBQWMsRUFBRSxDQUM3Ri9DLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQUMyTSxJQUFJLENBQUMsQ0FBQyxFQUNwRDdPLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzhPLFFBQVEsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBQztFQUFFSCxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQVMsQ0FBQyxDQUFDLENBQzdELEVBQUUsT0FBT1UsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNaEcsTUFBTSxHQUFHakIsZ0JBQWdCLENBQUMyQyxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUIsTUFBTSxDQUFDOE4sT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQixPQUFPOUgsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDK04sS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFekk7SUFBTyxDQUFDLEdBQUc1RCxHQUFHLENBQUNzTSxNQUFNO0lBQzdCLE1BQU07TUFBRUMsTUFBTTtNQUFFN0k7SUFBUyxDQUFDLEdBQUcxRCxHQUFHLENBQUM1QyxJQUFJO0lBRXJDLE1BQU1zSSxJQUFJLEdBQUcsTUFBTTdILElBQUksQ0FBQzJJLFFBQVEsQ0FBQzVDLE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVCxPQUFPcEIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsTUFBTThGLElBQUksQ0FBQ29CLElBQUksQ0FBQ3lGLE1BQU0sRUFBRXZNLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRyxFQUFFL0MsUUFBUSxDQUFDO0lBQy9DLE1BQU1nQyxJQUFJLENBQUN3SCxJQUFJLENBQUMsQ0FBQztJQUVqQmxQLE1BQU0sQ0FBQ3dILElBQUksQ0FBQywwQkFBMEJFLElBQUksQ0FBQ0MsUUFBUSxPQUFPM0YsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUM3RXdILFlBQVksRUFBRXZKLE1BQU07TUFDcEJ3SixVQUFVLEVBQUVwTixHQUFHLENBQUMwRixJQUFJLENBQUNlLEdBQUc7TUFDeEI4RixNQUFNO01BQ043STtJQUNGLENBQUMsQ0FBQztJQUVGWSxHQUFHLENBQUM5RixJQUFJLENBQUM7TUFDUG1CLE9BQU8sRUFBRSwwQkFBMEIrRixJQUFJLENBQUNDLFFBQVEsRUFBRTtNQUNsRDBILE9BQU8sRUFBRTtRQUNQZCxNQUFNO1FBQ05lLFFBQVEsRUFBRXROLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUTtRQUMzQjRILFFBQVEsRUFBRSxJQUFJakssSUFBSSxDQUFDLENBQUM7UUFDcEJrSyxPQUFPLEVBQUU5SixRQUFRLEdBQUcsSUFBSUosSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdHLFFBQVEsQ0FBQyxHQUFHO01BQ3hELENBQUM7TUFDRGdDLElBQUksRUFBRTtRQUNKSixFQUFFLEVBQUVJLElBQUksQ0FBQ2UsR0FBRztRQUNaZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QjhILGFBQWEsRUFBRS9ILElBQUksQ0FBQ2dJLHNCQUFzQixDQUFDO01BQzdDO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU85TixLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxxQkFBcUIsRUFBRUEsS0FBSyxDQUFDO0lBQzFDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQUVvQixLQUFLLEVBQUU7SUFBc0IsQ0FBQyxDQUFDO0VBQ3hEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLEdBQUcsQ0FBQzZNLElBQUksQ0FBQywrQkFBK0IsRUFBRS9FLGlCQUFpQixFQUFFVSxZQUFZLEVBQUV0SCxjQUFjLEVBQUUsQ0FDekYvQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUN1USxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQ3BELEVBQUUsT0FBTzNOLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTWhHLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBTzlILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRXpJO0lBQU8sQ0FBQyxHQUFHNUQsR0FBRyxDQUFDc00sTUFBTTtJQUM3QixNQUFNO01BQUVsRyxJQUFJLEVBQUV3SDtJQUFRLENBQUMsR0FBRzVOLEdBQUcsQ0FBQzVDLElBQUk7SUFFbEMsTUFBTXNJLElBQUksR0FBRyxNQUFNN0gsSUFBSSxDQUFDMkksUUFBUSxDQUFDNUMsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQzhCLElBQUksRUFBRTtNQUNULE9BQU9wQixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7O0lBRUE7SUFDQSxJQUFJOEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxLQUFLeE0sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxFQUFFO01BQ25ELE9BQU9sSSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUE4QixDQUFDLENBQUM7SUFDdkU7O0lBRUE7SUFDQSxJQUFJLENBQUNnTyxPQUFPLEtBQUssT0FBTyxJQUFJbEksSUFBSSxDQUFDVSxJQUFJLEtBQUssT0FBTyxLQUFLcEcsR0FBRyxDQUFDMEYsSUFBSSxDQUFDVSxJQUFJLEtBQUssT0FBTyxFQUFFO01BQy9FLE9BQU85QixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUE2QyxDQUFDLENBQUM7SUFDdEY7SUFFQSxNQUFNaU8sT0FBTyxHQUFHbkksSUFBSSxDQUFDVSxJQUFJO0lBQ3pCVixJQUFJLENBQUNVLElBQUksR0FBR3dILE9BQU87SUFDbkIsTUFBTWxJLElBQUksQ0FBQ3dILElBQUksQ0FBQyxDQUFDO0lBRWpCbFAsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLFFBQVFFLElBQUksQ0FBQ0MsUUFBUSxzQkFBc0JrSSxPQUFPLE9BQU9ELE9BQU8sT0FBTzVOLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDdEdtSSxhQUFhLEVBQUVsSyxNQUFNO01BQ3JCbUssV0FBVyxFQUFFL04sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHO01BQ3pCb0gsT0FBTztNQUNQRDtJQUNGLENBQUMsQ0FBQztJQUVGdEosR0FBRyxDQUFDOUYsSUFBSSxDQUFDO01BQ1BtQixPQUFPLEVBQUUsUUFBUStGLElBQUksQ0FBQ0MsUUFBUSxvQkFBb0JpSSxPQUFPLEVBQUU7TUFDM0RsSSxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJTLElBQUksRUFBRXdIO01BQ1I7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT2hPLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLDJCQUEyQixFQUFFQSxLQUFLLENBQUM7SUFDaEQwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUE2QixDQUFDLENBQUM7RUFDL0Q7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQVgsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLCtCQUErQixFQUFFL0UsaUJBQWlCLEVBQUVRLGdCQUFnQixFQUFFcEgsY0FBYyxFQUFFLENBQzdGL0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDK08sS0FBSyxDQUFDO0VBQUVILEdBQUcsRUFBRSxFQUFFO0VBQUUxTSxHQUFHLEVBQUU7QUFBTSxDQUFDLENBQUMsQ0FBQztBQUFBLENBQ2pELEVBQUUsT0FBT1UsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNaEcsTUFBTSxHQUFHakIsZ0JBQWdCLENBQUMyQyxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUIsTUFBTSxDQUFDOE4sT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQixPQUFPOUgsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDK04sS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFekk7SUFBTyxDQUFDLEdBQUc1RCxHQUFHLENBQUNzTSxNQUFNO0lBQzdCLE1BQU07TUFBRTVJO0lBQVMsQ0FBQyxHQUFHMUQsR0FBRyxDQUFDNUMsSUFBSTtJQUU3QixNQUFNc0ksSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUM1QyxNQUFNLENBQUM7SUFDeEMsSUFBSSxDQUFDOEIsSUFBSSxFQUFFO01BQ1QsT0FBT3BCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQWlCLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU04RixJQUFJLENBQUNzSSxJQUFJLENBQUN0SyxRQUFRLENBQUM7SUFFekIxRixNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUUUsSUFBSSxDQUFDQyxRQUFRLGFBQWEzRixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQ2pFc0ksV0FBVyxFQUFFckssTUFBTTtNQUNuQnNLLFNBQVMsRUFBRWxPLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUN2Qi9DO0lBQ0YsQ0FBQyxDQUFDO0lBRUZZLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQbUIsT0FBTyxFQUFFLFFBQVErRixJQUFJLENBQUNDLFFBQVEsaUJBQWlCO01BQy9DRCxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJ3SSxXQUFXLEVBQUV6SSxJQUFJLENBQUN5STtNQUNwQjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPdk8sS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsb0JBQW9CLEVBQUVBLEtBQUssQ0FBQztJQUN6QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFO0lBQXNCLENBQUMsQ0FBQztFQUN4RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBWCxHQUFHLENBQUM2TSxJQUFJLENBQUMsaUNBQWlDLEVBQUUvRSxpQkFBaUIsRUFBRVEsZ0JBQWdCLEVBQUVwSCxjQUFjLEVBQUUsT0FBT0gsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ25ILElBQUk7SUFDRixNQUFNO01BQUVWO0lBQU8sQ0FBQyxHQUFHNUQsR0FBRyxDQUFDc00sTUFBTTtJQUM3QixNQUFNNUcsSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUM1QyxNQUFNLENBQUM7SUFDeEMsSUFBSSxDQUFDOEIsSUFBSSxFQUFFO01BQ1QsT0FBT3BCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQWlCLENBQUMsQ0FBQztJQUMxRDtJQUVBLElBQUksQ0FBQzhGLElBQUksQ0FBQzBJLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDbkIsT0FBTzlKLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFO01BQW9CLENBQUMsQ0FBQztJQUM3RDtJQUVBLE1BQU04RixJQUFJLENBQUMySSxNQUFNLENBQUMsQ0FBQztJQUVuQnJRLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsZUFBZTNGLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDbkUySSxhQUFhLEVBQUUxSyxNQUFNO01BQ3JCMkssV0FBVyxFQUFFdk8sR0FBRyxDQUFDMEYsSUFBSSxDQUFDZTtJQUN4QixDQUFDLENBQUM7SUFFRm5DLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQbUIsT0FBTyxFQUFFLFFBQVErRixJQUFJLENBQUNDLFFBQVEsbUJBQW1CO01BQ2pERCxJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJ3SSxXQUFXLEVBQUU7TUFDZjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPdk8sS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsc0JBQXNCLEVBQUVBLEtBQUssQ0FBQztJQUMzQzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUMxRDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBMkIsT0FBTyxDQUFDQyxHQUFHLENBQUMsK0NBQStDLENBQUM7QUFDNUR2QyxHQUFHLENBQUNnQixHQUFHLENBQUMsWUFBWSxFQUFFOEcsaUJBQWlCLEVBQUU1RyxjQUFjLEVBQUUsT0FBT0gsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQzNFLElBQUk7SUFDRixNQUFNNkcsS0FBSyxHQUFHLE1BQU10TixJQUFJLENBQUN1TixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDOUJDLE1BQU0sQ0FBQywrQ0FBK0MsQ0FBQyxDQUN2REMsSUFBSSxDQUFDO01BQUUzRixRQUFRLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFFeEIzSCxNQUFNLENBQUN3SCxJQUFJLENBQUMsMkJBQTJCeEYsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUMxRC9CLE1BQU0sRUFBRTVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUNwQitILFVBQVUsRUFBRXJELEtBQUssQ0FBQ3NEO0lBQ3BCLENBQUMsQ0FBQztJQUVGbE4sT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCLEVBQUUySixLQUFLLENBQUNzRCxNQUFNLENBQUM7SUFDckRuSyxHQUFHLENBQUM5RixJQUFJLENBQUMyTSxLQUFLLENBQUM7RUFDakIsQ0FBQyxDQUFDLE9BQU92TCxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx1QkFBdUIsRUFBRUEsS0FBSyxDQUFDO0lBQzVDMkIsT0FBTyxDQUFDM0IsS0FBSyxDQUFDLDRCQUE0QixFQUFFQSxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUMxRDJFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFb0IsS0FBSyxFQUFFLHVCQUF1QjtNQUFFNkIsSUFBSSxFQUFFO0lBQWlCLENBQUMsQ0FBQztFQUNsRjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBeEMsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUNELEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUN0Q0EsR0FBRyxDQUFDdUcsWUFBWSxDQUFDLHlCQUF5QixDQUFDO0VBQzNDdkcsR0FBRyxDQUFDb0ssU0FBUyxDQUFDLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQztFQUNqRHBLLEdBQUcsQ0FBQ3FLLElBQUksQ0FBQy9ELFdBQVcsQ0FBQztBQUN2QixDQUFDLENBQUM7O0FBRUY7QUFDQTNMLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDOUwsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQzdDO0VBQ0E7RUFDQSxJQUFJO0lBQ0YsTUFBTXNLLGdCQUFnQixHQUFHeFAsZUFBZSxDQUFDbUQsS0FBSztJQUM5QyxJQUFJcU0sZ0JBQWdCLElBQUksT0FBT0EsZ0JBQWdCLENBQUNDLFFBQVEsS0FBSyxVQUFVLEVBQUU7TUFDdkVELGdCQUFnQixDQUFDQyxRQUFRLENBQUMsQ0FBQztNQUMzQnROLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZDQUE2QyxDQUFDO01BQzFEOEMsR0FBRyxDQUFDOUYsSUFBSSxDQUFDO1FBQUVzUSxPQUFPLEVBQUUsSUFBSTtRQUFFblAsT0FBTyxFQUFFO01BQStCLENBQUMsQ0FBQztJQUN0RSxDQUFDLE1BQU07TUFDTDtNQUNBNEIsT0FBTyxDQUFDQyxHQUFHLENBQUMsdUZBQXVGLENBQUM7TUFDcEc4QyxHQUFHLENBQUM5RixJQUFJLENBQUM7UUFBRXNRLE9BQU8sRUFBRSxLQUFLO1FBQUVuUCxPQUFPLEVBQUU7TUFBNkQsQ0FBQyxDQUFDO0lBQ3JHO0VBQ0YsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUNkMkIsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLEVBQUU1QixLQUFLLENBQUNELE9BQU8sQ0FBQztJQUM5RDJFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUFFc1EsT0FBTyxFQUFFLEtBQUs7TUFBRWxQLEtBQUssRUFBRTtJQUFnQyxDQUFDLENBQUM7RUFDbEY7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQVgsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDRCxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDL0JBLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztJQUNQbUQsTUFBTSxFQUFFLFNBQVM7SUFDakJ0RCxTQUFTLEVBQUUsSUFBSWlGLElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUMsQ0FBQztJQUNuQ2tJLE1BQU0sRUFBRXhQLE9BQU8sQ0FBQ3dQLE1BQU0sQ0FBQztFQUN6QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTlQLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQyxDQUFDN0IsR0FBRyxFQUFFc0UsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUJ2RyxNQUFNLENBQUN3SCxJQUFJLENBQUMsd0JBQXdCeEYsR0FBRyxDQUFDZ0QsTUFBTSxJQUFJaEQsR0FBRyxDQUFDd0UsR0FBRyxFQUFFLEVBQUU7SUFDM0RDLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFLEVBQUU7SUFDVkMsU0FBUyxFQUFFMUUsR0FBRyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDO0lBQ2hDMkIsT0FBTyxFQUFFNUIsR0FBRyxDQUFDNEI7RUFDZixDQUFDLENBQUM7RUFDRjJDLElBQUksQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxDQUFDOztBQWFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBaEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELENBQUM7QUFDN0R2QyxHQUFHLENBQUM2TSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQ3JCMU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDMk8sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUUxTSxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FBQzJNLElBQUksQ0FBQyxDQUFDLEVBQ3ZEN08sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDMk8sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUUxTSxHQUFHLEVBQUU7QUFBSSxDQUFDLENBQUMsQ0FDaEQsRUFBRSxPQUFPVSxHQUFHLEVBQUVzRSxHQUFHLEtBQUs7RUFDckIsSUFBSTtJQUNGL0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsNEJBQTRCLEVBQUU7TUFBRXFJLFVBQVUsRUFBRTdKLEdBQUcsQ0FBQzVDLElBQUksQ0FBQ3lNLFVBQVU7TUFBRW1GLFdBQVcsRUFBRSxDQUFDLENBQUNoUCxHQUFHLENBQUM1QyxJQUFJLENBQUN1TSxRQUFRO01BQUVsRixFQUFFLEVBQUV6RSxHQUFHLENBQUN5RTtJQUFHLENBQUMsQ0FBQztJQUM1SCxNQUFNbkcsTUFBTSxHQUFHakIsZ0JBQWdCLENBQUMyQyxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUIsTUFBTSxDQUFDOE4sT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQjdLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFbEQsTUFBTSxDQUFDK04sS0FBSyxDQUFDLENBQUMsQ0FBQztNQUN6RCxPQUFPL0gsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDK04sS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFeEMsVUFBVTtNQUFFRjtJQUFTLENBQUMsR0FBRzNKLEdBQUcsQ0FBQzVDLElBQUk7SUFDekNtRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3Q0FBd0MsRUFBRXFJLFVBQVUsQ0FBQzs7SUFFakU7SUFDQSxNQUFNbkUsSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUNvUixPQUFPLENBQUM7TUFDOUJDLEdBQUcsRUFBRSxDQUFDO1FBQUV2SixRQUFRLEVBQUVrRTtNQUFXLENBQUMsRUFBRTtRQUFFWCxLQUFLLEVBQUVXO01BQVcsQ0FBQztJQUN2RCxDQUFDLENBQUM7SUFFRixJQUFJLENBQUNuRSxJQUFJLEVBQUU7TUFDVG5FLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQixFQUFFcUksVUFBVSxDQUFDO01BQzVDLE9BQU92RixHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7UUFBRW9CLEtBQUssRUFBRTtNQUFzQixDQUFDLENBQUM7SUFDL0Q7SUFFQTJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRTtNQUFFbUUsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7TUFBRXVELEtBQUssRUFBRXhELElBQUksQ0FBQ3dELEtBQUs7TUFBRXZILE1BQU0sRUFBRStELElBQUksQ0FBQy9EO0lBQU8sQ0FBQyxDQUFDOztJQUVqRztJQUNBLE1BQU13TixlQUFlLEdBQUcsTUFBTXpKLElBQUksQ0FBQzBKLGVBQWUsQ0FBQ3pGLFFBQVEsQ0FBQztJQUM1RHBJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxFQUFFMk4sZUFBZSxDQUFDO0lBRTlELElBQUksQ0FBQ0EsZUFBZSxFQUFFO01BQ3BCNU4sT0FBTyxDQUFDQyxHQUFHLENBQUMsOEJBQThCLEVBQUVrRSxJQUFJLENBQUNDLFFBQVEsQ0FBQztNQUMxRCxPQUFPckIsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVvQixLQUFLLEVBQUU7TUFBc0IsQ0FBQyxDQUFDO0lBQy9EOztJQUVBO0lBQ0E4RixJQUFJLENBQUMvRCxNQUFNLEdBQUcsUUFBUTtJQUN0QixNQUFNK0QsSUFBSSxDQUFDd0gsSUFBSSxDQUFDLENBQUM7O0lBRWpCO0lBQ0EzTCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsRUFBRWtFLElBQUksQ0FBQ0MsUUFBUSxDQUFDO0lBQzVFcEUsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCLEVBQUV4QixHQUFHLENBQUNnRyxTQUFTLENBQUM7SUFFdkRoRyxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFhLEdBQUcsSUFBSTtJQUNoQzNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU0sR0FBRzhCLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUM7SUFDeEN4TSxHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRLEdBQUdELElBQUksQ0FBQ0MsUUFBUSxDQUFDLENBQUM7SUFDdEMzRixHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJLEdBQUdWLElBQUksQ0FBQ1UsSUFBSTtJQUM1QnBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsR0FBRy9JLE1BQU0sQ0FBQzhSLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQzdDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2hFeE0sR0FBRyxDQUFDeEMsT0FBTyxDQUFDNkksU0FBUyxHQUFHLElBQUkvQyxJQUFJLENBQUMsQ0FBQyxDQUFDdUQsV0FBVyxDQUFDLENBQUM7SUFDaEQ3RyxHQUFHLENBQUN4QyxPQUFPLENBQUNrSCxTQUFTLEdBQUcxRSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOztJQUUvQ3NCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1DQUFtQyxFQUFFO01BQy9DOE4sYUFBYSxFQUFFL1IsTUFBTSxDQUFDZ1MsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUN4UCxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTLENBQUMsQ0FBQ21KLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQ2xKLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO01BQ3RHbUosZUFBZSxFQUFFMVAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxFQUFFK0osTUFBTTtNQUM5Q3BJLFNBQVMsRUFBRXJHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzZJO0lBQ3pCLENBQUMsQ0FBQzs7SUFFRjtJQUNBOUUsT0FBTyxDQUFDQyxHQUFHLENBQUMscURBQXFELEVBQUU7TUFDakV3RSxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO01BQ3hCcEMsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtNQUMxQitCLFFBQVEsRUFBRTNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21JLFFBQVE7TUFDOUJTLElBQUksRUFBRXBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUk7TUFDdEJFLFNBQVMsRUFBRXRHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO01BQUU7TUFDM0RKLFdBQVcsRUFBRTtRQUNYeEMsYUFBYSxFQUFFM0QsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYTtRQUN4Q0MsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtRQUMxQnlDLFNBQVMsRUFBRXJHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzZJO01BQ3pCO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsTUFBTSxJQUFJc0osT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO01BQ3JDN1AsR0FBRyxDQUFDeEMsT0FBTyxDQUFDMFAsSUFBSSxDQUFFNUwsR0FBRyxJQUFLO1FBQ3hCLElBQUlBLEdBQUcsRUFBRTtVQUNQQyxPQUFPLENBQUMzQixLQUFLLENBQUMsdUJBQXVCLEVBQUU7WUFDckNvRyxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO1lBQ3hCOEosWUFBWSxFQUFFeE8sR0FBRyxDQUFDM0IsT0FBTztZQUN6Qm9RLFVBQVUsRUFBRXpPLEdBQUcsQ0FBQy9DO1VBQ2xCLENBQUMsQ0FBQztVQUNGc1IsTUFBTSxDQUFDdk8sR0FBRyxDQUFDO1FBQ2IsQ0FBQyxNQUFNO1VBQ0xDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNEQUFzRCxFQUFFO1lBQ2xFd0UsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztZQUN4QnJDLGFBQWEsRUFBRTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7WUFDeENDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07WUFDMUJ5QyxTQUFTLEVBQUVyRyxHQUFHLENBQUN4QyxPQUFPLENBQUM2SSxTQUFTO1lBQ2hDcUosZUFBZSxFQUFFMVAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxFQUFFK0o7VUFDMUMsQ0FBQyxDQUFDO1VBQ0Z6USxNQUFNLENBQUN3SCxJQUFJLENBQUMsNEJBQTRCLEVBQUU7WUFDeENRLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHLFNBQVM7WUFDeEJwQyxNQUFNLEVBQUU1RCxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO1lBQzFCK0IsUUFBUSxFQUFFM0YsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUksUUFBUTtZQUM5QlMsSUFBSSxFQUFFcEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDNEksSUFBSTtZQUN0QjNCLEVBQUUsRUFBRXpFLEdBQUcsQ0FBQ3lFLEVBQUU7WUFDVnVMLGFBQWEsRUFBRXpTLE1BQU0sQ0FBQ2dTLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDeFAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxJQUFJLEVBQUUsQ0FBQyxDQUFDK0ssTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDbEosU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFO1VBQzlHLENBQUMsQ0FBQztVQUNGcUosT0FBTyxDQUFDLENBQUM7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQzs7SUFFRjtJQUNBck8sT0FBTyxDQUFDQyxHQUFHLENBQUMsbUNBQW1DLEVBQUVrRSxJQUFJLENBQUNDLFFBQVEsQ0FBQztJQUMvRCxNQUFNc0IsS0FBSyxHQUFHcEssR0FBRyxDQUFDb1QsSUFBSSxDQUNwQjtNQUNFck0sTUFBTSxFQUFFOEIsSUFBSSxDQUFDZSxHQUFHO01BQ2hCZCxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtNQUN2QlMsSUFBSSxFQUFFVixJQUFJLENBQUNVLElBQUk7TUFDZkUsU0FBUyxFQUFFdEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUztNQUNoQ04sU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0c7SUFDakIsQ0FBQyxFQUNEekcsT0FBTyxDQUFDQyxHQUFHLENBQUM4SCxVQUFVLEVBQ3RCO01BQUU0SSxTQUFTLEVBQUU7SUFBTSxDQUNyQixDQUFDO0lBQ0QzTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0MsQ0FBQztJQUVqRHhELE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxtQkFBbUJFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLENBQUM7SUFFL0NwRSxPQUFPLENBQUNDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQztJQUN4QzhDLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQeUksS0FBSztNQUFFO01BQ1B2QixJQUFJLEVBQUU7UUFDSkosRUFBRSxFQUFFSSxJQUFJLENBQUNlLEdBQUc7UUFDWmQsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJ1RCxLQUFLLEVBQUV4RCxJQUFJLENBQUN3RCxLQUFLO1FBQ2pCOUMsSUFBSSxFQUFFVixJQUFJLENBQUNVO01BQ2IsQ0FBQztNQUNENUksT0FBTyxFQUFFO1FBQ1BtRyxhQUFhLEVBQUUsSUFBSTtRQUNuQjJCLEVBQUUsRUFBRXRGLEdBQUcsQ0FBQ2dHLFNBQVM7UUFDakJ3SCxPQUFPLEVBQUV4TixHQUFHLENBQUN4QyxPQUFPLENBQUNxRyxNQUFNLENBQUMySjtNQUM5QjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPNU4sS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsY0FBYyxFQUFFQSxLQUFLLENBQUM7SUFDbkMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUE0QixDQUFDLENBQUM7RUFDOUQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQVgsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLGVBQWUsRUFBRTFNLGVBQWUsRUFBRSxDQUN6Q2hDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQUMyTSxJQUFJLENBQUMsQ0FBQyxDQUFDa0UsTUFBTSxDQUFDLENBQUMsRUFDOUQvUyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNnVCxPQUFPLENBQUMsQ0FBQyxDQUFDQyxjQUFjLENBQUMsQ0FBQyxFQUN4Q2pULElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRSxDQUFDLENBQUMsQ0FDdEMsRUFBRSxPQUFPaE0sR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNaEcsTUFBTSxHQUFHakIsZ0JBQWdCLENBQUMyQyxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUIsTUFBTSxDQUFDOE4sT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQixPQUFPOUgsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDK04sS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFMUcsUUFBUTtNQUFFdUQsS0FBSztNQUFFUztJQUFTLENBQUMsR0FBRzNKLEdBQUcsQ0FBQzVDLElBQUk7O0lBRTlDO0lBQ0EsTUFBTWtULFlBQVksR0FBRyxNQUFNelMsSUFBSSxDQUFDb1IsT0FBTyxDQUFDO01BQ3RDQyxHQUFHLEVBQUUsQ0FBQztRQUFFdko7TUFBUyxDQUFDLEVBQUU7UUFBRXVEO01BQU0sQ0FBQztJQUMvQixDQUFDLENBQUM7SUFFRixJQUFJb0gsWUFBWSxFQUFFO01BQ2hCLE1BQU1DLGFBQWEsR0FBR0QsWUFBWSxDQUFDM0ssUUFBUSxLQUFLQSxRQUFRLEdBQUcsVUFBVSxHQUFHLE9BQU87TUFDL0UsTUFBTW1LLFlBQVksR0FBR1MsYUFBYSxLQUFLLFVBQVUsR0FBRyx3QkFBd0IsR0FBRywwQkFBMEI7TUFDekcsT0FBT2pNLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFb0IsS0FBSyxFQUFFa1E7TUFBYSxDQUFDLENBQUM7SUFDdEQ7O0lBRUE7SUFDQSxNQUFNcEssSUFBSSxHQUFHLElBQUk3SCxJQUFJLENBQUM7TUFBRThILFFBQVE7TUFBRXVELEtBQUs7TUFBRVMsUUFBUTtNQUFFdkQsSUFBSSxFQUFFLFFBQVE7TUFBRXpFLE1BQU0sRUFBRTtJQUFTLENBQUMsQ0FBQztJQUN0RixNQUFNK0QsSUFBSSxDQUFDd0gsSUFBSSxDQUFDLENBQUM7SUFFakIzTCxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3RUFBd0UsRUFBRWtFLElBQUksQ0FBQ0MsUUFBUSxDQUFDO0lBQ3BHcEUsT0FBTyxDQUFDQyxHQUFHLENBQUMsK0NBQStDLEVBQUV4QixHQUFHLENBQUNnRyxTQUFTLENBQUM7O0lBRTNFO0lBQ0FoRyxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFhLEdBQUcsSUFBSTtJQUNoQzNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU0sR0FBRzhCLElBQUksQ0FBQ2UsR0FBRyxDQUFDK0YsUUFBUSxDQUFDLENBQUM7SUFDeEN4TSxHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRLEdBQUdELElBQUksQ0FBQ0MsUUFBUTtJQUNwQzNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUksR0FBR1YsSUFBSSxDQUFDVSxJQUFJO0lBQzVCcEcsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUyxHQUFHL0ksTUFBTSxDQUFDOFIsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDN0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDaEV4TSxHQUFHLENBQUN4QyxPQUFPLENBQUNnVCxnQkFBZ0IsR0FBRyxJQUFJbE4sSUFBSSxDQUFDLENBQUMsQ0FBQ3VELFdBQVcsQ0FBQyxDQUFDO0lBQ3ZEN0csR0FBRyxDQUFDeEMsT0FBTyxDQUFDa0gsU0FBUyxHQUFHMUUsR0FBRyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzs7SUFFL0NzQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsRUFBRTtNQUM1RDhOLGFBQWEsRUFBRS9SLE1BQU0sQ0FBQ2dTLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDeFAsR0FBRyxDQUFDeEMsT0FBTyxDQUFDOEksU0FBUyxDQUFDLENBQUNtSixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUNsSixTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUN0R21KLGVBQWUsRUFBRTFQLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2tILFNBQVMsRUFBRStKLE1BQU07TUFDOUMrQixnQkFBZ0IsRUFBRXhRLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2dUO0lBQ2hDLENBQUMsQ0FBQzs7SUFFRjtJQUNBalAsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0VBQWtFLEVBQUU7TUFDOUV3RSxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO01BQ3hCcEMsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtNQUMxQitCLFFBQVEsRUFBRTNGLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21JLFFBQVE7TUFDOUJTLElBQUksRUFBRXBHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzRJLElBQUk7TUFDdEJFLFNBQVMsRUFBRXRHLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQzhJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO01BQ3pEaUssZ0JBQWdCLEVBQUV4USxHQUFHLENBQUN4QyxPQUFPLENBQUNnVCxnQkFBZ0I7TUFDOUNySyxXQUFXLEVBQUU7UUFDWHhDLGFBQWEsRUFBRTNELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWE7UUFDeENDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07UUFDMUI0TSxnQkFBZ0IsRUFBRXhRLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ2dUO01BQ2hDO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsTUFBTSxJQUFJYixPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7TUFDckM3UCxHQUFHLENBQUN4QyxPQUFPLENBQUMwUCxJQUFJLENBQUU1TCxHQUFHLElBQUs7UUFDeEIsSUFBSUEsR0FBRyxFQUFFO1VBQ1BDLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQywyQ0FBMkMsRUFBRTtZQUN6RG9HLFNBQVMsRUFBRWhHLEdBQUcsQ0FBQ2dHLFNBQVM7WUFDeEI4SixZQUFZLEVBQUV4TyxHQUFHLENBQUMzQixPQUFPO1lBQ3pCb1EsVUFBVSxFQUFFek8sR0FBRyxDQUFDL0M7VUFDbEIsQ0FBQyxDQUFDO1VBQ0ZzUixNQUFNLENBQUN2TyxHQUFHLENBQUM7UUFDYixDQUFDLE1BQU07VUFDTEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsbURBQW1ELEVBQUU7WUFDL0R3RSxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO1lBQ3hCckMsYUFBYSxFQUFFM0QsR0FBRyxDQUFDeEMsT0FBTyxDQUFDbUcsYUFBYTtZQUN4Q0MsTUFBTSxFQUFFNUQsR0FBRyxDQUFDeEMsT0FBTyxDQUFDb0csTUFBTTtZQUMxQjRNLGdCQUFnQixFQUFFeFEsR0FBRyxDQUFDeEMsT0FBTyxDQUFDZ1QsZ0JBQWdCO1lBQzlDZCxlQUFlLEVBQUUxUCxHQUFHLENBQUN4QyxPQUFPLENBQUNrSCxTQUFTLEVBQUUrSjtVQUMxQyxDQUFDLENBQUM7VUFDRnpRLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxtQ0FBbUMsRUFBRTtZQUMvQ1EsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0csU0FBUztZQUN4QnBDLE1BQU0sRUFBRTVELEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07WUFDMUIrQixRQUFRLEVBQUUzRixHQUFHLENBQUN4QyxPQUFPLENBQUNtSSxRQUFRO1lBQzlCUyxJQUFJLEVBQUVwRyxHQUFHLENBQUN4QyxPQUFPLENBQUM0SSxJQUFJO1lBQ3RCM0IsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUUsRUFBRTtZQUNWdUwsYUFBYSxFQUFFelMsTUFBTSxDQUFDZ1MsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUN4UCxHQUFHLENBQUN4QyxPQUFPLENBQUNrSCxTQUFTLElBQUksRUFBRSxDQUFDLENBQUMrSyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUNsSixTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUU7VUFDOUcsQ0FBQyxDQUFDO1VBQ0ZxSixPQUFPLENBQUMsQ0FBQztRQUNYO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZyTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLENBQUNqQyxPQUFPLENBQUNDLEdBQUcsQ0FBQzhILFVBQVUsQ0FBQztJQUM1RCxNQUFNTCxLQUFLLEdBQUdwSyxHQUFHLENBQUNvVCxJQUFJLENBQ3BCO01BQ0VyTSxNQUFNLEVBQUU4QixJQUFJLENBQUNlLEdBQUc7TUFDaEJkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO01BQ3ZCUyxJQUFJLEVBQUVWLElBQUksQ0FBQ1UsSUFBSTtNQUNmRSxTQUFTLEVBQUV0RyxHQUFHLENBQUN4QyxPQUFPLENBQUM4SSxTQUFTO01BQ2hDTixTQUFTLEVBQUVoRyxHQUFHLENBQUNnRztJQUNqQixDQUFDLEVBQ0R6RyxPQUFPLENBQUNDLEdBQUcsQ0FBQzhILFVBQVUsRUFDdEI7TUFBRTRJLFNBQVMsRUFBRTtJQUFNLENBQ3JCLENBQUM7SUFFRDNPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0lBQy9DeEQsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLG9CQUFvQkUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsQ0FBQztJQUVoRHJCLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQnlJLEtBQUs7TUFBRTtNQUNQdkIsSUFBSSxFQUFFO1FBQ0pKLEVBQUUsRUFBRUksSUFBSSxDQUFDZSxHQUFHO1FBQ1pkLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCdUQsS0FBSyxFQUFFeEQsSUFBSSxDQUFDd0QsS0FBSztRQUNqQjlDLElBQUksRUFBRVYsSUFBSSxDQUFDVTtNQUNiLENBQUM7TUFDRDVJLE9BQU8sRUFBRTtRQUNQbUcsYUFBYSxFQUFFLElBQUk7UUFDbkIyQixFQUFFLEVBQUV0RixHQUFHLENBQUNnRyxTQUFTO1FBQ2pCd0gsT0FBTyxFQUFFeE4sR0FBRyxDQUFDeEMsT0FBTyxDQUFDcUcsTUFBTSxDQUFDMko7TUFDOUI7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBTzVOLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7SUFDMUMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUFtQyxDQUFDLENBQUM7RUFDckU7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtEQUFrRCxDQUFDO0FBQy9EdkMsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLGVBQWUsRUFBRThHLGlCQUFpQixFQUFFNUcsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUM5RS9DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNDQUFzQyxFQUFFO0lBQUV3QixNQUFNLEVBQUVoRCxHQUFHLENBQUNnRCxNQUFNO0lBQUV3QixHQUFHLEVBQUV4RSxHQUFHLENBQUN3RSxHQUFHO0lBQUU1QyxPQUFPLEVBQUU1QixHQUFHLENBQUM0QixPQUFPLENBQUM2TyxhQUFhLEdBQUcscUJBQXFCLEdBQUc7RUFBaUIsQ0FBQyxDQUFDO0VBQ3hLLElBQUk7SUFDRixNQUFNQyxRQUFRLEdBQUcsTUFBTTNTLE9BQU8sQ0FBQ3FOLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNwQ0MsTUFBTSxDQUFDLGtEQUFrRCxDQUFDLENBQzFEQyxJQUFJLENBQUM7TUFBRTdCLFFBQVEsRUFBRTtJQUFFLENBQUMsQ0FBQztJQUV4QnpMLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyw4QkFBOEJ4RixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQzdEL0IsTUFBTSxFQUFFNUQsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHO01BQ3BCa0ssWUFBWSxFQUFFRCxRQUFRLENBQUNqQztJQUN6QixDQUFDLENBQUM7SUFFRmxOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixFQUFFa1AsUUFBUSxDQUFDakMsTUFBTSxDQUFDO0lBQzNEbkssR0FBRyxDQUFDOUYsSUFBSSxDQUFDa1MsUUFBUSxDQUFDO0VBQ3BCLENBQUMsQ0FBQyxPQUFPOVEsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsMEJBQTBCLEVBQUVBLEtBQUssQ0FBQztJQUMvQzJCLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQywrQkFBK0IsRUFBRUEsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDN0QyRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRSwwQkFBMEI7TUFBRTZCLElBQUksRUFBRTtJQUFpQixDQUFDLENBQUM7RUFDckY7QUFDRixDQUFDLENBQUM7QUFFRkYsT0FBTyxDQUFDQyxHQUFHLENBQUMsbURBQW1ELENBQUM7O0FBRWhFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQXZDLEdBQUcsQ0FBQzZNLElBQUksQ0FBQyxlQUFlLEVBQUUvRSxpQkFBaUIsRUFBRTVHLGNBQWMsRUFBRSxDQUMzRC9DLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzJPLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFMU0sR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQUMyTSxJQUFJLENBQUMsQ0FBQyxDQUFDa0UsTUFBTSxDQUFDLENBQUMsRUFDM0QvUyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUN1USxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzFCLElBQUksQ0FBQyxDQUFDLEVBQzNDN08sSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDOE8sUUFBUSxDQUFDLENBQUMsQ0FBQ0gsUUFBUSxDQUFDO0VBQUV6TSxHQUFHLEVBQUU7QUFBSSxDQUFDLENBQUMsQ0FBQzJNLElBQUksQ0FBQyxDQUFDLENBQzdELEVBQUUsT0FBT2pNLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTWhHLE1BQU0sR0FBR2pCLGdCQUFnQixDQUFDMkMsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzhOLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBTzlILEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQytOLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRW5JLElBQUk7TUFBRTRFLElBQUk7TUFBRUw7SUFBWSxDQUFDLEdBQUd6SSxHQUFHLENBQUM1QyxJQUFJO0lBQzVDLE1BQU1vTSxTQUFTLEdBQUd4SixHQUFHLENBQUMwRixJQUFJLENBQUNDLFFBQVE7O0lBRW5DO0lBQ0EsTUFBTWlMLE9BQU8sR0FBRyxJQUFJN1MsT0FBTyxDQUFDO01BQzFCbUcsSUFBSTtNQUNKNEUsSUFBSTtNQUNKTCxXQUFXO01BQ1hlO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsTUFBTW9ILE9BQU8sQ0FBQzFELElBQUksQ0FBQyxDQUFDO0lBRXBCbFAsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLFlBQVl0QixJQUFJLGdCQUFnQnNGLFNBQVMsRUFBRSxFQUFFO01BQ3ZEcUgsU0FBUyxFQUFFRCxPQUFPLENBQUN0TCxFQUFFO01BQ3JCd0QsSUFBSTtNQUNKbEYsTUFBTSxFQUFFNUQsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZTtJQUNuQixDQUFDLENBQUM7SUFFRm5DLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQjhHLEVBQUUsRUFBRXNMLE9BQU8sQ0FBQ3RMLEVBQUU7TUFDZHBCLElBQUksRUFBRTBNLE9BQU8sQ0FBQzFNLElBQUk7TUFDbEI0RSxJQUFJLEVBQUU4SCxPQUFPLENBQUM5SCxJQUFJO01BQ2xCTCxXQUFXLEVBQUVtSSxPQUFPLENBQUNuSSxXQUFXO01BQ2hDZSxTQUFTLEVBQUVvSCxPQUFPLENBQUNwSCxTQUFTO01BQzVCQyxRQUFRLEVBQUVtSCxPQUFPLENBQUNuSDtJQUNwQixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBTzdKLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLHlCQUF5QixFQUFFQSxLQUFLLENBQUM7SUFFOUMsSUFBSUEsS0FBSyxDQUFDc0UsSUFBSSxLQUFLLGlCQUFpQixFQUFFO01BQ3BDLE9BQU9JLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztRQUMxQm9CLEtBQUssRUFBRSxzQkFBc0I7UUFDN0JzRixPQUFPLEVBQUV0RixLQUFLLENBQUNEO01BQ2pCLENBQUMsQ0FBQztJQUNKO0lBRUEsSUFBSUMsS0FBSyxDQUFDNkIsSUFBSSxLQUFLLEtBQUssRUFBRTtNQUN4QixPQUFPNkMsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO1FBQzFCb0IsS0FBSyxFQUFFLDZCQUE2QjtRQUNwQzZCLElBQUksRUFBRTtNQUNSLENBQUMsQ0FBQztJQUNKO0lBRUE2QyxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFDbkJvQixLQUFLLEVBQUUsMEJBQTBCO01BQ2pDNkIsSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7QUFFRkYsT0FBTyxDQUFDQyxHQUFHLENBQUMsaURBQWlELENBQUM7QUFDOUR2QyxHQUFHLENBQUM2TSxJQUFJLENBQUMsYUFBYSxFQUFFL0UsaUJBQWlCLEVBQUU1RyxjQUFjLEVBQUUsT0FBT0gsR0FBRyxFQUFFc0UsR0FBRyxLQUFLO0VBQzdFLElBQUk7SUFDRi9DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhCQUE4QixFQUFFeEIsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUU7TUFBRS9CLE1BQU0sRUFBRTVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2U7SUFBSSxDQUFDLENBQUM7O0lBRXhGO0lBQ0EsTUFBTXFLLE9BQU8sR0FBR0MsV0FBVztJQUMzQixJQUFJQyxpQkFBaUIsR0FBRyxDQUFDO0lBQ3pCLEtBQUssTUFBTSxDQUFDQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQyxJQUFJSixPQUFPLENBQUNLLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDdEQsSUFBSUQsVUFBVSxDQUFDdE4sTUFBTSxLQUFLNUQsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxFQUFFO1FBQ2pELE1BQU00RSxNQUFNLEdBQUc5USxFQUFFLENBQUN3USxPQUFPLENBQUNBLE9BQU8sQ0FBQzdRLEdBQUcsQ0FBQ2dSLFFBQVEsQ0FBQztRQUMvQyxJQUFJRyxNQUFNLEVBQUU7VUFDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQztVQUNuQkwsaUJBQWlCLEVBQUU7UUFDckI7TUFDRjtJQUNGOztJQUVBO0lBQ0EsTUFBTW5ULElBQUksQ0FBQ3lULGlCQUFpQixDQUFDdFIsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLEVBQUU7TUFDekM5RSxNQUFNLEVBQUUsU0FBUztNQUNqQjJILFVBQVUsRUFBRSxJQUFJaEcsSUFBSSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQztJQUVGL0IsT0FBTyxDQUFDQyxHQUFHLENBQUMsVUFBVXhCLEdBQUcsQ0FBQzBGLElBQUksQ0FBQ0MsUUFBUSw2QkFBNkJxTCxpQkFBaUIsMkJBQTJCLENBQUM7SUFDakhoVCxNQUFNLENBQUN3SCxJQUFJLENBQUMsb0JBQW9CeEYsR0FBRyxDQUFDMEYsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNuRC9CLE1BQU0sRUFBRTVELEdBQUcsQ0FBQzBGLElBQUksQ0FBQ2UsR0FBRztNQUNwQjhLLG1CQUFtQixFQUFFUDtJQUN2QixDQUFDLENBQUM7SUFFRjFNLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQc1EsT0FBTyxFQUFFLElBQUk7TUFDYm5QLE9BQU8sRUFBRSx5QkFBeUI7TUFDbENxUjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPcFIsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsZUFBZSxFQUFFQSxLQUFLLENBQUM7SUFDcEMwRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7TUFBRW9CLEtBQUssRUFBRTtJQUE2QixDQUFDLENBQUM7RUFDL0Q7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQVgsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLHFCQUFxQixFQUFFM0wsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNsRSxJQUFJO0lBQ0YvQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx1Q0FBdUMsRUFBRXhCLEdBQUcsQ0FBQ2dHLFNBQVMsQ0FBQzs7SUFFbkU7SUFDQSxNQUFNd0wsVUFBVSxHQUFHLENBQUMsQ0FBQ3hSLEdBQUcsQ0FBQzBGLElBQUksQ0FBQyxDQUFDO0lBQy9CLE1BQU0rTCxjQUFjLEdBQUd6UixHQUFHLENBQUMyRyxXQUFXLElBQUszRyxHQUFHLENBQUN4QyxPQUFPLElBQUl3QyxHQUFHLENBQUN4QyxPQUFPLENBQUNtRyxhQUFjO0lBQ3BGLE1BQU0rTixhQUFhLEdBQUcxUixHQUFHLENBQUN4QyxPQUFPLElBQUl3QyxHQUFHLENBQUN4QyxPQUFPLENBQUNvRyxNQUFNO0lBRXZEckMsT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCLEVBQUU7TUFDdENnUSxVQUFVO01BQ1ZDLGNBQWM7TUFDZEMsYUFBYTtNQUNiMUwsU0FBUyxFQUFFaEcsR0FBRyxDQUFDZ0c7SUFDakIsQ0FBQyxDQUFDO0lBRUYsSUFBSXlMLGNBQWMsRUFBRTtNQUNsQixNQUFNOUssV0FBVyxHQUFHK0ssYUFBYSxHQUFHLE1BQU03VCxJQUFJLENBQUMySSxRQUFRLENBQUNrTCxhQUFhLENBQUMsR0FBRyxJQUFJO01BQzdFLE1BQU0vTCxRQUFRLEdBQUdnQixXQUFXLEdBQUdBLFdBQVcsQ0FBQ2hCLFFBQVEsR0FBRyxTQUFTO01BRS9EcEUsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUVtRSxRQUFRLENBQUM7O01BRXZFO01BQ0EsSUFBSStMLGFBQWEsRUFBRTtRQUNqQixNQUFNWixPQUFPLEdBQUdDLFdBQVc7UUFDM0IsSUFBSUMsaUJBQWlCLEdBQUcsQ0FBQztRQUN6QixLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLENBQUMsSUFBSUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFO1VBQ3RELElBQUlELFVBQVUsQ0FBQ3ROLE1BQU0sS0FBSzhOLGFBQWEsRUFBRTtZQUN2QyxNQUFNTixNQUFNLEdBQUc5USxFQUFFLENBQUN3USxPQUFPLENBQUNBLE9BQU8sQ0FBQzdRLEdBQUcsQ0FBQ2dSLFFBQVEsQ0FBQztZQUMvQyxJQUFJRyxNQUFNLEVBQUU7Y0FDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQztjQUNuQkwsaUJBQWlCLEVBQUU7WUFDckI7VUFDRjtRQUNGO1FBRUF6UCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0N3UCxpQkFBaUIscUJBQXFCLENBQUM7TUFDekY7O01BRUE7TUFDQSxNQUFNLElBQUlyQixPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7UUFDckM3UCxHQUFHLENBQUN4QyxPQUFPLENBQUNtVSxPQUFPLENBQUVyUSxHQUFHLElBQUs7VUFDM0IsSUFBSUEsR0FBRyxFQUFFO1lBQ1BDLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQywwQkFBMEIsRUFBRTBCLEdBQUcsQ0FBQztZQUM5Q3VPLE1BQU0sQ0FBQ3ZPLEdBQUcsQ0FBQztVQUNiLENBQUMsTUFBTTtZQUNMQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztZQUMvQ29PLE9BQU8sQ0FBQyxDQUFDO1VBQ1g7UUFDRixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7TUFFRjVSLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyx1QkFBdUJHLFFBQVEsRUFBRSxFQUFFO1FBQzdDSyxTQUFTLEVBQUVoRyxHQUFHLENBQUNnRyxTQUFTO1FBQ3hCdkIsRUFBRSxFQUFFekUsR0FBRyxDQUFDeUU7TUFDVixDQUFDLENBQUM7TUFFRkgsR0FBRyxDQUFDOUYsSUFBSSxDQUFDO1FBQ1BzUSxPQUFPLEVBQUUsSUFBSTtRQUNiblAsT0FBTyxFQUFFLGlDQUFpQztRQUMxQ21KLElBQUksRUFBRSxnQkFBZ0I7UUFDdEI4SSxnQkFBZ0IsRUFBRTtNQUNwQixDQUFDLENBQUM7SUFDSixDQUFDLE1BQU07TUFDTHJRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdEQUF3RCxDQUFDO01BQ3JFOEMsR0FBRyxDQUFDOUYsSUFBSSxDQUFDO1FBQ1BzUSxPQUFPLEVBQUUsSUFBSTtRQUNiblAsT0FBTyxFQUFFLDhCQUE4QjtRQUN2Q21KLElBQUksRUFBRSxnQkFBZ0I7UUFDdEI4SSxnQkFBZ0IsRUFBRTtNQUNwQixDQUFDLENBQUM7SUFDSjtFQUVGLENBQUMsQ0FBQyxPQUFPaFMsS0FBSyxFQUFFO0lBQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM1QzBFLEdBQUcsQ0FBQzNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ25ELElBQUksQ0FBQztNQUNuQm9CLEtBQUssRUFBRSxvQ0FBb0M7TUFDM0M2QixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBeEMsR0FBRyxDQUFDNk0sSUFBSSxDQUFDLHNCQUFzQixFQUFFM0wsY0FBYyxFQUFFLE9BQU9ILEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNuRSxJQUFJO0lBQ0YvQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3REFBd0QsRUFBRXhCLEdBQUcsQ0FBQ2dHLFNBQVMsQ0FBQztJQUVwRixNQUFNd0wsVUFBVSxHQUFHLENBQUMsQ0FBQ3hSLEdBQUcsQ0FBQzBGLElBQUk7SUFDN0IsTUFBTStMLGNBQWMsR0FBR3pSLEdBQUcsQ0FBQzJHLFdBQVcsSUFBSzNHLEdBQUcsQ0FBQ3hDLE9BQU8sSUFBSXdDLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ21HLGFBQWM7SUFDcEYsTUFBTStOLGFBQWEsR0FBRzFSLEdBQUcsQ0FBQ3hDLE9BQU8sSUFBSXdDLEdBQUcsQ0FBQ3hDLE9BQU8sQ0FBQ29HLE1BQU07SUFFdkQsSUFBSWlPLGVBQWUsR0FBRyxJQUFJO0lBQzFCLElBQUlDLG1CQUFtQixHQUFHLElBQUk7O0lBRTlCO0lBQ0EsSUFBSU4sVUFBVSxFQUFFO01BQ2QsSUFBSTtRQUNGLE1BQU1WLE9BQU8sR0FBR0MsV0FBVztRQUMzQixJQUFJQyxpQkFBaUIsR0FBRyxDQUFDO1FBQ3pCLEtBQUssTUFBTSxDQUFDQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQyxJQUFJSixPQUFPLENBQUNLLE9BQU8sQ0FBQyxDQUFDLEVBQUU7VUFDdEQsSUFBSUQsVUFBVSxDQUFDdE4sTUFBTSxLQUFLNUQsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLENBQUMrRixRQUFRLENBQUMsQ0FBQyxFQUFFO1lBQ2pELE1BQU00RSxNQUFNLEdBQUc5USxFQUFFLENBQUN3USxPQUFPLENBQUNBLE9BQU8sQ0FBQzdRLEdBQUcsQ0FBQ2dSLFFBQVEsQ0FBQztZQUMvQyxJQUFJRyxNQUFNLEVBQUU7Y0FDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQztjQUNuQkwsaUJBQWlCLEVBQUU7WUFDckI7VUFDRjtRQUNGO1FBRUEsTUFBTW5ULElBQUksQ0FBQ3lULGlCQUFpQixDQUFDdFIsR0FBRyxDQUFDMEYsSUFBSSxDQUFDZSxHQUFHLEVBQUU7VUFDekM5RSxNQUFNLEVBQUUsU0FBUztVQUNqQjJILFVBQVUsRUFBRSxJQUFJaEcsSUFBSSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQztRQUVGdU8sZUFBZSxHQUFHO1VBQ2hCL0MsT0FBTyxFQUFFLElBQUk7VUFDYmtDO1FBQ0YsQ0FBQztNQUNILENBQUMsQ0FBQyxPQUFPZSxRQUFRLEVBQUU7UUFDakJGLGVBQWUsR0FBRztVQUNoQi9DLE9BQU8sRUFBRSxLQUFLO1VBQ2RsUCxLQUFLLEVBQUVtUyxRQUFRLENBQUNwUztRQUNsQixDQUFDO01BQ0g7SUFDRjs7SUFFQTtJQUNBLElBQUk4UixjQUFjLEVBQUU7TUFDbEIsSUFBSTtRQUNGLElBQUlDLGFBQWEsRUFBRTtVQUNqQixNQUFNL0ssV0FBVyxHQUFHLE1BQU05SSxJQUFJLENBQUMySSxRQUFRLENBQUNrTCxhQUFhLENBQUM7VUFDdERuUSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsRUFBRW1GLFdBQVcsR0FBR0EsV0FBVyxDQUFDaEIsUUFBUSxHQUFHLFNBQVMsQ0FBQzs7VUFFN0c7VUFDQSxNQUFNbUwsT0FBTyxHQUFHQyxXQUFXO1VBQzNCLElBQUlDLGlCQUFpQixHQUFHLENBQUM7VUFDekIsS0FBSyxNQUFNLENBQUNDLFFBQVEsRUFBRUMsVUFBVSxDQUFDLElBQUlKLE9BQU8sQ0FBQ0ssT0FBTyxDQUFDLENBQUMsRUFBRTtZQUN0RCxJQUFJRCxVQUFVLENBQUN0TixNQUFNLEtBQUs4TixhQUFhLEVBQUU7Y0FDdkMsTUFBTU4sTUFBTSxHQUFHOVEsRUFBRSxDQUFDd1EsT0FBTyxDQUFDQSxPQUFPLENBQUM3USxHQUFHLENBQUNnUixRQUFRLENBQUM7Y0FDL0MsSUFBSUcsTUFBTSxFQUFFO2dCQUNWQSxNQUFNLENBQUNDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuQkwsaUJBQWlCLEVBQUU7Y0FDckI7WUFDRjtVQUNGO1VBQ0F6UCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0N3UCxpQkFBaUIscUJBQXFCLENBQUM7UUFDekY7O1FBRUE7UUFDQSxNQUFNLElBQUlyQixPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7VUFDckM3UCxHQUFHLENBQUN4QyxPQUFPLENBQUNtVSxPQUFPLENBQUVyUSxHQUFHLElBQUs7WUFDM0IsSUFBSUEsR0FBRyxFQUFFO2NBQ1B1TyxNQUFNLENBQUN2TyxHQUFHLENBQUM7WUFDYixDQUFDLE1BQU07Y0FDTHNPLE9BQU8sQ0FBQyxDQUFDO1lBQ1g7VUFDRixDQUFDLENBQUM7UUFDSixDQUFDLENBQUM7UUFFRmtDLG1CQUFtQixHQUFHO1VBQ3BCaEQsT0FBTyxFQUFFLElBQUk7VUFDYjhDLGdCQUFnQixFQUFFO1FBQ3BCLENBQUM7TUFDSCxDQUFDLENBQUMsT0FBT0ksWUFBWSxFQUFFO1FBQ3JCRixtQkFBbUIsR0FBRztVQUNwQmhELE9BQU8sRUFBRSxLQUFLO1VBQ2RsUCxLQUFLLEVBQUVvUyxZQUFZLENBQUNyUztRQUN0QixDQUFDO01BQ0g7SUFDRjtJQUVBLE1BQU1zUyxjQUFjLEdBQUcsQ0FBQyxDQUFDSixlQUFlLElBQUlBLGVBQWUsQ0FBQy9DLE9BQU8sTUFDNUMsQ0FBQ2dELG1CQUFtQixJQUFJQSxtQkFBbUIsQ0FBQ2hELE9BQU8sQ0FBQztJQUUzRXhLLEdBQUcsQ0FBQzlGLElBQUksQ0FBQztNQUNQc1EsT0FBTyxFQUFFbUQsY0FBYztNQUN2QnRTLE9BQU8sRUFBRSwyQkFBMkI7TUFDcENtSixJQUFJLEVBQUUsaUJBQWlCO01BQ3ZCak0sR0FBRyxFQUFFZ1YsZUFBZTtNQUNwQnJVLE9BQU8sRUFBRXNVO0lBQ1gsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU9sUyxLQUFLLEVBQUU7SUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO0lBQzdDMEUsR0FBRyxDQUFDM0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDbkQsSUFBSSxDQUFDO01BQ25Cb0IsS0FBSyxFQUFFLHFDQUFxQztNQUM1QzZCLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0F4QyxHQUFHLENBQUM0QyxHQUFHLENBQUMsQ0FBQzdCLEdBQUcsRUFBRXNFLEdBQUcsS0FBSztFQUNwQi9DLE9BQU8sQ0FBQ3VGLElBQUksQ0FBQyxpREFBaUQsRUFBRTtJQUFFOUQsTUFBTSxFQUFFaEQsR0FBRyxDQUFDZ0QsTUFBTTtJQUFFd0IsR0FBRyxFQUFFeEUsR0FBRyxDQUFDd0U7RUFBSSxDQUFDLENBQUM7RUFDckd4RyxNQUFNLENBQUM4SSxJQUFJLENBQUMsU0FBUzlHLEdBQUcsQ0FBQ2dELE1BQU0sSUFBSWhELEdBQUcsQ0FBQ3dFLEdBQUcsRUFBRSxFQUFFO0lBQzVDQyxFQUFFLEVBQUV6RSxHQUFHLENBQUN5RSxFQUFFO0lBQ1ZDLFNBQVMsRUFBRTFFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFlBQVk7RUFDakMsQ0FBQyxDQUFDO0VBRUZxRSxHQUFHLENBQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNuRCxJQUFJLENBQUM7SUFDbkJvQixLQUFLLEVBQUUsb0JBQW9CO0lBQzNCb0YsSUFBSSxFQUFFaEYsR0FBRyxDQUFDd0UsR0FBRztJQUNieEIsTUFBTSxFQUFFaEQsR0FBRyxDQUFDZ0QsTUFBTTtJQUNsQnZCLElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBeEMsR0FBRyxDQUFDNEMsR0FBRyxDQUFDd0MsWUFBWSxDQUFDOztBQVVyQjtBQUNBLElBQUkwTSxXQUFXLEdBQUcsSUFBSW1CLEdBQUcsQ0FBQyxDQUFDOztBQUUzQjtBQUNBLElBQUlDLGVBQWUsR0FBRyxJQUFJRCxHQUFHLENBQUMsQ0FBQzs7QUFFL0I7QUFDQSxNQUFNRSxhQUFhLEdBQUcsSUFBSUYsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVqQztBQUNBNVIsRUFBRSxDQUFDdUIsR0FBRyxDQUFDLENBQUN1UCxNQUFNLEVBQUU3TSxJQUFJLEtBQUs7RUFDdkI7RUFDQSxJQUFJLENBQUM2TSxNQUFNLENBQUNpQixPQUFPLENBQUMvTixHQUFHLEVBQUU7SUFDdkI4TSxNQUFNLENBQUNpQixPQUFPLENBQUMvTixHQUFHLEdBQUc7TUFDbkJvSyxTQUFTLEVBQUVBLENBQUEsS0FBTSxDQUFDLENBQUM7TUFDbkI0RCxTQUFTLEVBQUVBLENBQUEsS0FBTSxDQUFDLENBQUM7TUFDbkJDLFNBQVMsRUFBRUEsQ0FBQSxLQUFNLENBQUMsQ0FBQztNQUNuQkMsR0FBRyxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO01BQ2JDLFdBQVcsRUFBRSxLQUFLO01BQ2xCaE4sVUFBVSxFQUFFO0lBQ2QsQ0FBQztFQUNIOztFQUVBO0VBQ0F2RCxpQkFBaUIsQ0FBQ2tQLE1BQU0sQ0FBQ2lCLE9BQU8sRUFBRWpCLE1BQU0sQ0FBQ2lCLE9BQU8sQ0FBQy9OLEdBQUcsRUFBR2hELEdBQUcsSUFBSztJQUM3RCxJQUFJQSxHQUFHLEVBQUU7TUFDUEMsT0FBTyxDQUFDM0IsS0FBSyxDQUFDLHlDQUF5QyxFQUFFMEIsR0FBRyxDQUFDO01BQzdELE9BQU9pRCxJQUFJLENBQUNqRCxHQUFHLENBQUM7SUFDbEI7SUFDQWlELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0FqRSxFQUFFLENBQUN1QixHQUFHLENBQUMsT0FBT3VQLE1BQU0sRUFBRTdNLElBQUksS0FBSztFQUM3QixNQUFNO0lBQUUrQixTQUFTO0lBQUVOO0VBQVUsQ0FBQyxHQUFHb0wsTUFBTSxDQUFDc0IsU0FBUyxDQUFDQyxJQUFJO0VBQ3RELElBQUluVixPQUFPLEdBQUc0VCxNQUFNLENBQUNpQixPQUFPLENBQUM3VSxPQUFPOztFQUVwQztFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBLElBQUl3SSxTQUFTLEtBQUssQ0FBQ3hJLE9BQU8sSUFBSSxDQUFDQSxPQUFPLENBQUNtRyxhQUFhLENBQUMsRUFBRTtJQUNyRDs7SUFFQSxJQUFJO01BQ0Y7TUFDQSxNQUFNaVAsa0JBQWtCLEdBQUcxUSxpQkFBaUIsQ0FBQ0ssS0FBSztNQUNsRCxJQUFJcVEsa0JBQWtCLElBQUksT0FBT0Esa0JBQWtCLENBQUMzUyxHQUFHLEtBQUssVUFBVSxFQUFFO1FBQ3RFLE1BQU1rRyxXQUFXLEdBQUcsTUFBTSxJQUFJd0osT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO1VBQ3pEK0Msa0JBQWtCLENBQUMzUyxHQUFHLENBQUMrRixTQUFTLEVBQUUsQ0FBQzFFLEdBQUcsRUFBRXVSLElBQUksS0FBSztZQUMvQyxJQUFJdlIsR0FBRyxFQUFFdU8sTUFBTSxDQUFDdk8sR0FBRyxDQUFDLENBQUMsS0FDaEJzTyxPQUFPLENBQUNpRCxJQUFJLENBQUM7VUFDcEIsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDOztRQUVGO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBLElBQUkxTSxXQUFXLElBQUlBLFdBQVcsQ0FBQ3hDLGFBQWEsRUFBRTtVQUM1QztVQUNBeU4sTUFBTSxDQUFDaUIsT0FBTyxDQUFDN1UsT0FBTyxHQUFHMkksV0FBVztVQUNwQzNJLE9BQU8sR0FBRzJJLFdBQVc7VUFDckI1RSxPQUFPLENBQUNDLEdBQUcsQ0FBQyx5Q0FBeUMsQ0FBQztRQUN4RCxDQUFDLE1BQU07VUFDTEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsOENBQThDLENBQUM7UUFDN0Q7TUFDRjtJQUNGLENBQUMsQ0FBQyxPQUFPNUIsS0FBSyxFQUFFO01BQ2QyQixPQUFPLENBQUMzQixLQUFLLENBQUMsOENBQThDLEVBQUVBLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQzlFO0VBQ0Y7RUFFQTRCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhCQUE4QixFQUFFO0lBQzFDMEIsR0FBRyxFQUFFa08sTUFBTSxDQUFDaUIsT0FBTyxDQUFDck0sU0FBUztJQUM3QjhNLGlCQUFpQixFQUFFeE0sU0FBUyxFQUFFQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7SUFDckR3TSxnQkFBZ0IsRUFBRXZWLE9BQU8sRUFBRThJLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO0lBQzdEN0IsU0FBUyxFQUFFME0sTUFBTSxDQUFDaUIsT0FBTyxDQUFDN1UsT0FBTyxFQUFFa0gsU0FBUyxFQUFFNkIsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLO0lBQ3RFRixTQUFTLEVBQUU3SSxPQUFPLEVBQUU2SSxTQUFTO0lBQzdCbUssZ0JBQWdCLEVBQUVoVCxPQUFPLEVBQUVnVDtFQUM3QixDQUFDLENBQUM7O0VBRUY7RUFDQSxJQUFJLENBQUNoVCxPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUFDbUcsYUFBYSxJQUFJLENBQUNuRyxPQUFPLENBQUNvRyxNQUFNLEVBQUU7SUFDekRyQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnRUFBZ0UsQ0FBQztJQUM3RUQsT0FBTyxDQUFDQyxHQUFHLENBQUMscUJBQXFCLEVBQUU7TUFDakN3RSxTQUFTLEVBQUVvTCxNQUFNLENBQUNpQixPQUFPLENBQUNyTSxTQUFTO01BQ25DeEksT0FBTyxFQUFFLENBQUMsQ0FBQ0EsT0FBTztNQUNsQm1HLGFBQWEsRUFBRW5HLE9BQU8sRUFBRW1HLGFBQWE7TUFDckNDLE1BQU0sRUFBRXBHLE9BQU8sRUFBRW9HO0lBQ25CLENBQUMsQ0FBQztJQUNGLE9BQU9XLElBQUksQ0FBQyxJQUFJeU8sS0FBSyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7RUFDM0Q7O0VBRUE7RUFDQSxJQUFJLENBQUMxTSxTQUFTLElBQUksQ0FBQzlJLE9BQU8sQ0FBQzhJLFNBQVMsSUFBSUEsU0FBUyxLQUFLOUksT0FBTyxDQUFDOEksU0FBUyxFQUFFO0lBQ3ZFL0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0VBQWdFLENBQUM7SUFDN0VELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxFQUFFO01BQzlDeVIsUUFBUSxFQUFFM00sU0FBUyxFQUFFQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7TUFDNUMyTSxRQUFRLEVBQUUxVixPQUFPLENBQUM4SSxTQUFTLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSztNQUNwRDRNLEtBQUssRUFBRTdNLFNBQVMsS0FBSzlJLE9BQU8sQ0FBQzhJO0lBQy9CLENBQUMsQ0FBQztJQUNGLE9BQU8vQixJQUFJLENBQUMsSUFBSXlPLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0VBQ2xEO0VBRUF6UixPQUFPLENBQUNDLEdBQUcsQ0FBQyw4Q0FBOEMsQ0FBQztFQUUzRCxJQUFJO0lBQ0Y7SUFDQSxNQUFNa0UsSUFBSSxHQUFHLE1BQU03SCxJQUFJLENBQUMySSxRQUFRLENBQUNoSixPQUFPLENBQUNvRyxNQUFNLENBQUM7SUFDaEQsSUFBSSxDQUFDOEIsSUFBSSxFQUFFO01BQ1RuRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzREFBc0QsQ0FBQztNQUNuRSxPQUFPK0MsSUFBSSxDQUFDLElBQUl5TyxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUNyRDs7SUFFQTtJQUNBLE1BQU1wUCxNQUFNLEdBQUdwRyxPQUFPLENBQUNvRyxNQUFNO0lBQzdCLE1BQU13UCxlQUFlLEdBQUdqQixlQUFlLENBQUNsUyxHQUFHLENBQUMyRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ3hELE1BQU15UCxrQkFBa0IsR0FBR0QsZUFBZSxHQUFHLENBQUM7SUFDOUNqQixlQUFlLENBQUNtQixHQUFHLENBQUMxUCxNQUFNLEVBQUV5UCxrQkFBa0IsQ0FBQzs7SUFFL0M7SUFDQSxJQUFJM04sSUFBSSxDQUFDNk4sUUFBUSxDQUFDLENBQUMsRUFBRTtNQUNuQmhTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdEQUFnRCxFQUFFO1FBQzVEb0MsTUFBTSxFQUFFQSxNQUFNO1FBQ2QrQixRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QmtILFNBQVMsRUFBRW5ILElBQUksQ0FBQ21ILFNBQVM7UUFDekJDLFVBQVUsRUFBRXBILElBQUksQ0FBQ29IO01BQ25CLENBQUMsQ0FBQztNQUNGc0UsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUNwQmpILE1BQU0sRUFBRTdHLElBQUksQ0FBQ21ILFNBQVMsSUFBSSxzQ0FBc0M7UUFDaEVXLE9BQU8sRUFBRTlILElBQUksQ0FBQ29IO01BQ2hCLENBQUMsQ0FBQztNQUNGLE9BQU92SSxJQUFJLENBQUMsSUFBSXlPLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzFDOztJQUVBO0lBQ0EsTUFBTTVFLE9BQU8sR0FBRzFJLElBQUksQ0FBQzBJLE9BQU8sQ0FBQyxDQUFDO0lBQzlCN00sT0FBTyxDQUFDQyxHQUFHLENBQUMsOEJBQThCLEVBQUU7TUFBRW1FLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO01BQUV5SSxPQUFPO01BQUVELFdBQVcsRUFBRXpJLElBQUksQ0FBQ3lJO0lBQVksQ0FBQyxDQUFDOztJQUVoSDtJQUNBLE1BQU1zRixZQUFZLEdBQUcsTUFBTTVWLElBQUksQ0FBQzZWLGdCQUFnQixDQUM5QztNQUFFak4sR0FBRyxFQUFFN0M7SUFBTyxDQUFDLEVBQ2Y7TUFDRStQLElBQUksRUFBRTtRQUNKaFMsTUFBTSxFQUFFMFIsa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLFFBQVEsR0FBRyxTQUFTO1FBQ3JEL0osVUFBVSxFQUFFLElBQUloRyxJQUFJLENBQUM7TUFDdkI7SUFDRixDQUFDLEVBQ0Q7TUFDRXNRLEdBQUcsRUFBRSxJQUFJO01BQ1RDLGFBQWEsRUFBRTtJQUNqQixDQUNGLENBQUM7SUFFRCxJQUFJSixZQUFZLEVBQUU7TUFDaEJsUyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3QkFBd0JrRSxJQUFJLENBQUNDLFFBQVEsdUNBQXVDME4sa0JBQWtCLEdBQUcsQ0FBQztNQUM5R3JWLE1BQU0sQ0FBQ3dILElBQUksQ0FBQywrQ0FBK0MsRUFBRTtRQUMzRDVCLE1BQU0sRUFBRUEsTUFBTTtRQUNkK0IsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJtTyxXQUFXLEVBQUVULGtCQUFrQjtRQUMvQnBDLFFBQVEsRUFBRUcsTUFBTSxDQUFDOUwsRUFBRTtRQUNuQmpILFNBQVMsRUFBRSxJQUFJaUYsSUFBSSxDQUFDO01BQ3RCLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0FvQyxJQUFJLENBQUMvRCxNQUFNLEdBQUc4UixZQUFZLEdBQUdBLFlBQVksQ0FBQzlSLE1BQU0sR0FBRyxRQUFRO0lBQzNEK0QsSUFBSSxDQUFDNEQsVUFBVSxHQUFHbUssWUFBWSxHQUFHQSxZQUFZLENBQUNuSyxVQUFVLEdBQUcsSUFBSWhHLElBQUksQ0FBQyxDQUFDOztJQUVyRTtJQUNBOE4sTUFBTSxDQUFDeE4sTUFBTSxHQUFHcEcsT0FBTyxDQUFDb0csTUFBTTtJQUM5QndOLE1BQU0sQ0FBQ3pMLFFBQVEsR0FBR25JLE9BQU8sQ0FBQ21JLFFBQVE7SUFDbEN5TCxNQUFNLENBQUNoTCxJQUFJLEdBQUc1SSxPQUFPLENBQUM0SSxJQUFJLElBQUksUUFBUTtJQUN0QzdFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdDQUF3QzRQLE1BQU0sQ0FBQ3pMLFFBQVEsYUFBYXlMLE1BQU0sQ0FBQ3hOLE1BQU0sR0FBRyxDQUFDO0lBQ2pHckMsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLENBQUM7SUFDL0MsT0FBTytDLElBQUksQ0FBQyxDQUFDO0VBRWYsQ0FBQyxDQUFDLE9BQU8zRSxLQUFLLEVBQUU7SUFDZDJCLE9BQU8sQ0FBQzNCLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRUEsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDOUQzQixNQUFNLENBQUM0QixLQUFLLENBQUMsdUJBQXVCQSxLQUFLLENBQUNELE9BQU8sRUFBRSxFQUFFO01BQ25Ec1IsUUFBUSxFQUFFRyxNQUFNLENBQUM5TCxFQUFFO01BQ25CVSxTQUFTLEVBQUV4SSxPQUFPLEVBQUU4SCxFQUFFO01BQ3RCYixFQUFFLEVBQUUyTSxNQUFNLENBQUNzQixTQUFTLENBQUNxQjtJQUN2QixDQUFDLENBQUM7SUFDRixPQUFPeFAsSUFBSSxDQUFDLElBQUl5TyxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztFQUN4RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxTQUFTZ0IsMEJBQTBCQSxDQUFBLEVBQUc7RUFDcEMsTUFBTXpRLEdBQUcsR0FBR0QsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztFQUN0QixNQUFNMFEsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDOztFQUV2QixLQUFLLE1BQU0sQ0FBQ2hELFFBQVEsRUFBRXZMLElBQUksQ0FBQyxJQUFJcUwsV0FBVyxDQUFDSSxPQUFPLENBQUMsQ0FBQyxFQUFFO0lBQ3BELElBQUk1TixHQUFHLEdBQUdtQyxJQUFJLENBQUN3TyxhQUFhLEdBQUdELE9BQU8sRUFBRTtNQUN0QzFTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHlDQUF5Q2tFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLENBQUM7O01BRXJFO01BQ0EsTUFBTXlMLE1BQU0sR0FBRzlRLEVBQUUsQ0FBQ3dRLE9BQU8sQ0FBQ0EsT0FBTyxDQUFDN1EsR0FBRyxDQUFDZ1IsUUFBUSxDQUFDO01BQy9DLElBQUlHLE1BQU0sRUFBRTtRQUNWQSxNQUFNLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUM7TUFDekI7O01BRUE7TUFDQSxNQUFNOEMsZUFBZSxHQUFHLENBQUNoQyxlQUFlLENBQUNsUyxHQUFHLENBQUN5RixJQUFJLENBQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNuRXVPLGVBQWUsQ0FBQ21CLEdBQUcsQ0FBQzVOLElBQUksQ0FBQzlCLE1BQU0sRUFBRWdJLElBQUksQ0FBQ3RNLEdBQUcsQ0FBQyxDQUFDLEVBQUU2VSxlQUFlLENBQUMsQ0FBQzs7TUFFOUQ7TUFDQSxJQUFJQSxlQUFlLElBQUksQ0FBQyxFQUFFO1FBQ3hCdFcsSUFBSSxDQUFDeVQsaUJBQWlCLENBQUM1TCxJQUFJLENBQUM5QixNQUFNLEVBQUU7VUFDbENqQyxNQUFNLEVBQUUsU0FBUztVQUNqQjJILFVBQVUsRUFBRSxJQUFJaEcsSUFBSSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDOFEsS0FBSyxDQUFDOVMsR0FBRyxJQUFJdEQsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLG1DQUFtQyxFQUFFMEIsR0FBRyxDQUFDLENBQUM7UUFFdkVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFdBQVdrRSxJQUFJLENBQUNDLFFBQVEsMENBQTBDLENBQUM7UUFDL0UzSCxNQUFNLENBQUN3SCxJQUFJLENBQUMsbURBQW1ELEVBQUU7VUFDL0Q1QixNQUFNLEVBQUU4QixJQUFJLENBQUM5QixNQUFNO1VBQ25CK0IsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7VUFDdkJzTCxRQUFRLEVBQUVBO1FBQ1osQ0FBQyxDQUFDO01BQ0o7TUFFQUYsV0FBVyxDQUFDc0QsTUFBTSxDQUFDcEQsUUFBUSxDQUFDO0lBQzlCO0VBQ0Y7QUFDRjs7QUFFQTtBQUNBLElBQUkxUixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLE1BQU0sRUFBRTtFQUNuQzZVLFdBQVcsQ0FBQ04sMEJBQTBCLEVBQUUsS0FBSyxDQUFDO0FBQ2hEO0FBRUExVCxFQUFFLENBQUNlLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTytQLE1BQU0sSUFBSztFQUNwQzdQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0VBQy9DRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxXQUFXNFAsTUFBTSxDQUFDekwsUUFBUSxZQUFZLENBQUM7O0VBRW5EO0VBQ0FvTCxXQUFXLENBQUN1QyxHQUFHLENBQUNsQyxNQUFNLENBQUM5TCxFQUFFLEVBQUU7SUFDekIxQixNQUFNLEVBQUV3TixNQUFNLENBQUN4TixNQUFNO0lBQ3JCK0IsUUFBUSxFQUFFeUwsTUFBTSxDQUFDekwsUUFBUTtJQUN6QlMsSUFBSSxFQUFFZ0wsTUFBTSxDQUFDaEwsSUFBSTtJQUNqQm1PLElBQUksRUFBRSxJQUFJO0lBQ1ZMLGFBQWEsRUFBRTVRLElBQUksQ0FBQ0MsR0FBRyxDQUFDO0VBQzFCLENBQUMsQ0FBQzs7RUFFRjtFQUNBaEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUNBQWlDdVAsV0FBVyxDQUFDeUQsSUFBSSx1QkFBdUJwRCxNQUFNLENBQUN6TCxRQUFRLEVBQUUsQ0FBQzs7RUFFdEc7RUFDQXlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxXQUFXLEVBQUUsTUFBTTtJQUMzQixNQUFNcUUsSUFBSSxHQUFHcUwsV0FBVyxDQUFDOVEsR0FBRyxDQUFDbVIsTUFBTSxDQUFDOUwsRUFBRSxDQUFDO0lBQ3ZDLElBQUlJLElBQUksRUFBRTtNQUNSLE1BQU1uQyxHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7TUFDdEJtQyxJQUFJLENBQUN3TyxhQUFhLEdBQUczUSxHQUFHO01BQ3hCaEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsbUNBQW1DNFAsTUFBTSxDQUFDekwsUUFBUSxPQUFPLElBQUlyQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDc0QsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3JHLENBQUMsTUFBTTtNQUNMN0ksTUFBTSxDQUFDOEksSUFBSSxDQUFDLDJDQUEyQ3NLLE1BQU0sQ0FBQzlMLEVBQUUsRUFBRSxDQUFDO0lBQ3JFO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsTUFBTW1QLGVBQWUsR0FBR0EsQ0FBQSxLQUFNO0lBQzVCLE1BQU0vTyxJQUFJLEdBQUdxTCxXQUFXLENBQUM5USxHQUFHLENBQUNtUixNQUFNLENBQUM5TCxFQUFFLENBQUM7SUFDdkMsSUFBSUksSUFBSSxFQUFFO01BQ1JBLElBQUksQ0FBQ3dPLGFBQWEsR0FBRzVRLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7SUFDakM7RUFDRixDQUFDOztFQUVEO0VBQ0EsTUFBTW1SLGlCQUFpQixHQUFHSixXQUFXLENBQUMsTUFBTTtJQUMxQyxJQUFJbEQsTUFBTSxDQUFDdUQsU0FBUyxFQUFFO01BQ3BCdkQsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ2xDO0VBQ0YsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7O0VBRVg7RUFDQXBDLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTTtJQUM1QnVULGFBQWEsQ0FBQ0YsaUJBQWlCLENBQUM7SUFDaEM7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQSxNQUFNRyxzQkFBc0IsR0FBRyxNQUFBQSxDQUFPQyxTQUFTLEVBQUVDLE9BQU8sR0FBRyxDQUFDLEtBQUs7SUFDL0QsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLElBQUlELE9BQU8sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7TUFDakMsSUFBSTtRQUNGLE9BQU8sTUFBTUYsU0FBUyxDQUFDLENBQUM7TUFDMUIsQ0FBQyxDQUFDLE9BQU9sVixLQUFLLEVBQUU7UUFDZCxJQUFJb1YsQ0FBQyxLQUFLRCxPQUFPLEVBQUUsTUFBTW5WLEtBQUs7UUFDOUI1QixNQUFNLENBQUM4SSxJQUFJLENBQUMsb0NBQW9Da08sQ0FBQyxHQUFHLENBQUMsSUFBSUQsT0FBTyxHQUFHLEVBQUVuVixLQUFLLENBQUNELE9BQU8sQ0FBQztRQUNuRixNQUFNLElBQUlnUSxPQUFPLENBQUNDLE9BQU8sSUFBSXFGLFVBQVUsQ0FBQ3JGLE9BQU8sRUFBRSxHQUFHLElBQUlvRixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDcEU7SUFDRjtFQUNGLENBQUM7RUFFRDVELE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxXQUFXLEVBQUUsTUFBT3dSLElBQUksSUFBSztJQUNyQzRCLGVBQWUsQ0FBQyxDQUFDO0lBQ2pCLE1BQU07TUFBRUY7SUFBSyxDQUFDLEdBQUcxQixJQUFJO0lBQ3JCLElBQUksQ0FBQzBCLElBQUksRUFBRTtNQUNUdlcsTUFBTSxDQUFDOEksSUFBSSxDQUFDLHFDQUFxQyxFQUFFO1FBQ2pEbEQsTUFBTSxFQUFFd04sTUFBTSxDQUFDeE4sTUFBTTtRQUNyQitCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMO01BQ25CLENBQUMsQ0FBQztNQUNGeUwsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQjdULE9BQU8sRUFBRSx1QkFBdUI7UUFDaEM4QixJQUFJLEVBQUUsY0FBYztRQUNwQnBELFNBQVMsRUFBRSxJQUFJaUYsSUFBSSxDQUFDLENBQUMsQ0FBQ3VELFdBQVcsQ0FBQztNQUNwQyxDQUFDLENBQUM7TUFDRjtJQUNGO0lBRUEsSUFBSSxPQUFPME4sSUFBSSxLQUFLLFFBQVEsSUFBSUEsSUFBSSxDQUFDdEksSUFBSSxDQUFDLENBQUMsQ0FBQ3dDLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDeER6USxNQUFNLENBQUM4SSxJQUFJLENBQUMsdUNBQXVDLEVBQUU7UUFDbkRsRCxNQUFNLEVBQUV3TixNQUFNLENBQUN4TixNQUFNO1FBQ3JCK0IsUUFBUSxFQUFFeUwsTUFBTSxDQUFDekwsUUFBUTtRQUN6QjRPO01BQ0YsQ0FBQyxDQUFDO01BQ0ZuRCxNQUFNLENBQUNvQyxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQ25CN1QsT0FBTyxFQUFFLDBCQUEwQjtRQUNuQzhCLElBQUksRUFBRSxxQkFBcUI7UUFDM0JwRCxTQUFTLEVBQUUsSUFBSWlGLElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUM7TUFDcEMsQ0FBQyxDQUFDO01BQ0Y7SUFDRjtJQUVBLElBQUk7TUFDRixNQUFNZ08sc0JBQXNCLENBQUMsWUFBWTtRQUN2QztRQUNBLE1BQU1qRSxPQUFPLEdBQUcsTUFBTTdTLE9BQU8sQ0FBQ2tSLE9BQU8sQ0FBQztVQUFFM0osRUFBRSxFQUFFaVA7UUFBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDM0QsT0FBTyxFQUFFO1VBQ1o1UyxNQUFNLENBQUM4SSxJQUFJLENBQUMscUNBQXFDLEVBQUU7WUFDakRsRCxNQUFNLEVBQUV3TixNQUFNLENBQUN4TixNQUFNO1lBQ3JCK0IsUUFBUSxFQUFFeUwsTUFBTSxDQUFDekwsUUFBUTtZQUN6QjRPO1VBQ0YsQ0FBQyxDQUFDO1VBQ0ZuRCxNQUFNLENBQUNvQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ25CN1QsT0FBTyxFQUFFLFlBQVk0VSxJQUFJLGFBQWE7WUFDdEM5UyxJQUFJLEVBQUUsbUJBQW1CO1lBQ3pCOFMsSUFBSTtZQUNKbFcsU0FBUyxFQUFFLElBQUlpRixJQUFJLENBQUMsQ0FBQyxDQUFDdUQsV0FBVyxDQUFDO1VBQ3BDLENBQUMsQ0FBQztVQUNGLE1BQU0sSUFBSW1NLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQztRQUN0Qzs7UUFFQTtRQUNBLElBQUk1QixNQUFNLENBQUNtRCxJQUFJLEVBQUU7VUFDZm5ELE1BQU0sQ0FBQzhELEtBQUssQ0FBQzlELE1BQU0sQ0FBQ21ELElBQUksQ0FBQztVQUN6QnhELFdBQVcsQ0FBQ3VDLEdBQUcsQ0FBQ2xDLE1BQU0sQ0FBQzlMLEVBQUUsRUFBRTtZQUFFLEdBQUd5TCxXQUFXLENBQUM5USxHQUFHLENBQUNtUixNQUFNLENBQUM5TCxFQUFFLENBQUM7WUFBRWlQLElBQUksRUFBRTtVQUFLLENBQUMsQ0FBQzs7VUFFekU7VUFDQSxNQUFNWSxpQkFBaUIsR0FBR0MsS0FBSyxDQUFDQyxJQUFJLENBQUN0RSxXQUFXLENBQUNuTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQ3ZEMFEsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hCLElBQUksS0FBS25ELE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUNuQzFQLEdBQUcsQ0FBQzBRLENBQUMsS0FBSztZQUFFNVAsUUFBUSxFQUFFNFAsQ0FBQyxDQUFDNVAsUUFBUTtZQUFFUyxJQUFJLEVBQUVtUCxDQUFDLENBQUNuUDtVQUFLLENBQUMsQ0FBQyxDQUFDO1VBQ3JEOUYsRUFBRSxDQUFDa1YsRUFBRSxDQUFDcEUsTUFBTSxDQUFDbUQsSUFBSSxDQUFDLENBQUNmLElBQUksQ0FBQyxjQUFjLEVBQUUyQixpQkFBaUIsQ0FBQztRQUM1RDtRQUVBL0QsTUFBTSxDQUFDbUQsSUFBSSxHQUFHQSxJQUFJO1FBQ2xCbkQsTUFBTSxDQUFDcUUsSUFBSSxDQUFDckUsTUFBTSxDQUFDbUQsSUFBSSxDQUFDOztRQUV4QjtRQUNBeEQsV0FBVyxDQUFDdUMsR0FBRyxDQUFDbEMsTUFBTSxDQUFDOUwsRUFBRSxFQUFFO1VBQ3pCLEdBQUd5TCxXQUFXLENBQUM5USxHQUFHLENBQUNtUixNQUFNLENBQUM5TCxFQUFFLENBQUM7VUFDN0JpUCxJQUFJLEVBQUVuRCxNQUFNLENBQUNtRDtRQUNmLENBQUMsQ0FBQztRQUVGdlcsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLFFBQVE0TCxNQUFNLENBQUN6TCxRQUFRLGdCQUFnQnlMLE1BQU0sQ0FBQ21ELElBQUksRUFBRSxDQUFDOztRQUVqRTtRQUNBLE1BQU1tQixXQUFXLEdBQUcsSUFBSTVYLE9BQU8sQ0FBQztVQUM5QjZYLE1BQU0sRUFBRSxRQUFRO1VBQ2hCL0UsT0FBTyxFQUFFUSxNQUFNLENBQUNtRCxJQUFJO1VBQ3BCcUIsSUFBSSxFQUFFLEdBQUd4RSxNQUFNLENBQUN6TCxRQUFRLHNCQUFzQjtVQUM5Q21ELElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGLE1BQU00TSxXQUFXLENBQUN4SSxJQUFJLENBQUMsQ0FBQztRQUV4QjVNLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsU0FBUyxFQUFFO1VBQ2pDbUMsTUFBTSxFQUFFRCxXQUFXLENBQUNDLE1BQU07VUFDMUIvRSxPQUFPLEVBQUU4RSxXQUFXLENBQUM5RSxPQUFPO1VBQzVCZ0YsSUFBSSxFQUFFRixXQUFXLENBQUNFLElBQUk7VUFDdEI5TSxJQUFJLEVBQUU0TSxXQUFXLENBQUM1TSxJQUFJO1VBQ3RCekssU0FBUyxFQUFFcVgsV0FBVyxDQUFDclg7UUFDekIsQ0FBQyxDQUFDOztRQUVGO1FBQ0EsTUFBTXdYLFNBQVMsR0FBR1QsS0FBSyxDQUFDQyxJQUFJLENBQUN0RSxXQUFXLENBQUNuTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQy9DMFEsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hCLElBQUksS0FBS25ELE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUNuQzFQLEdBQUcsQ0FBQzBRLENBQUMsS0FBSztVQUFFNVAsUUFBUSxFQUFFNFAsQ0FBQyxDQUFDNVAsUUFBUTtVQUFFUyxJQUFJLEVBQUVtUCxDQUFDLENBQUNuUDtRQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3JEOUYsRUFBRSxDQUFDa1YsRUFBRSxDQUFDcEUsTUFBTSxDQUFDbUQsSUFBSSxDQUFDLENBQUNmLElBQUksQ0FBQyxjQUFjLEVBQUVxQyxTQUFTLENBQUM7O1FBRWxEO1FBQ0EsTUFBTUMsT0FBTyxHQUFHLE1BQU1oWSxPQUFPLENBQUNzTixJQUFJLENBQUM7VUFDakN3RixPQUFPLEVBQUVRLE1BQU0sQ0FBQ21ELElBQUk7VUFDcEJyRixHQUFHLEVBQUUsQ0FDSDtZQUFFcEcsSUFBSSxFQUFFO1VBQVMsQ0FBQyxFQUNsQjtZQUFFQSxJQUFJLEVBQUU7VUFBUyxDQUFDLEVBQ2xCO1lBQUU2TSxNQUFNLEVBQUV2RSxNQUFNLENBQUN6TDtVQUFTLENBQUMsRUFDM0I7WUFBRW9RLE1BQU0sRUFBRTNFLE1BQU0sQ0FBQ3pMO1VBQVMsQ0FBQztRQUUvQixDQUFDLENBQUMsQ0FDQzJGLElBQUksQ0FBQztVQUFFak4sU0FBUyxFQUFFLENBQUM7UUFBRSxDQUFDLENBQUMsQ0FDdkJ5RCxLQUFLLENBQUMsR0FBRyxDQUFDLENBQ1Z3SixJQUFJLENBQUM7VUFBRWpOLFNBQVMsRUFBRTtRQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7O1FBRTNCK1MsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLFNBQVMsRUFBRXNDLE9BQU8sQ0FBQ2pSLEdBQUcsQ0FBQ3NGLEdBQUcsS0FBSztVQUN6Q3dMLE1BQU0sRUFBRXhMLEdBQUcsQ0FBQ3dMLE1BQU07VUFDbEJwQixJQUFJLEVBQUVwSyxHQUFHLENBQUN5RyxPQUFPO1VBQ2pCZ0YsSUFBSSxFQUFFekwsR0FBRyxDQUFDeUwsSUFBSTtVQUNkOU0sSUFBSSxFQUFFcUIsR0FBRyxDQUFDckIsSUFBSTtVQUNkaU4sTUFBTSxFQUFFNUwsR0FBRyxDQUFDNEwsTUFBTTtVQUNsQjFYLFNBQVMsRUFBRThMLEdBQUcsQ0FBQzlMO1FBQ2pCLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDTixDQUFDLENBQUM7SUFFSixDQUFDLENBQUMsT0FBT3VCLEtBQUssRUFBRTtNQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLG1DQUFtQyxFQUFFQSxLQUFLLENBQUM7TUFDeER3UixNQUFNLENBQUNvQyxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQ25CN1QsT0FBTyxFQUFFLDZDQUE2QztRQUN0RDhCLElBQUksRUFBRSxrQkFBa0I7UUFDeEJwRCxTQUFTLEVBQUUsSUFBSWlGLElBQUksQ0FBQyxDQUFDLENBQUN1RCxXQUFXLENBQUM7TUFDcEMsQ0FBQyxDQUFDO0lBQ0o7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQXVLLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxhQUFhLEVBQUUsWUFBWTtJQUNuQyxJQUFJLENBQUMrUCxNQUFNLENBQUNtRCxJQUFJLEVBQUU7TUFDaEJuRCxNQUFNLENBQUNvQyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQztNQUMxQjtJQUNGO0lBRUEsSUFBSTtNQUNGLE1BQU1zQyxPQUFPLEdBQUcsTUFBTWhZLE9BQU8sQ0FBQ3NOLElBQUksQ0FBQztRQUNqQ3dGLE9BQU8sRUFBRVEsTUFBTSxDQUFDbUQsSUFBSTtRQUNwQnJGLEdBQUcsRUFBRSxDQUNIO1VBQUVwRyxJQUFJLEVBQUU7UUFBUyxDQUFDLEVBQ2xCO1VBQUVBLElBQUksRUFBRTtRQUFTLENBQUMsRUFDbEI7VUFBRTZNLE1BQU0sRUFBRXZFLE1BQU0sQ0FBQ3pMO1FBQVMsQ0FBQyxFQUMzQjtVQUFFb1EsTUFBTSxFQUFFM0UsTUFBTSxDQUFDekw7UUFBUyxDQUFDO01BRS9CLENBQUMsQ0FBQyxDQUNDMkYsSUFBSSxDQUFDO1FBQUVqTixTQUFTLEVBQUUsQ0FBQztNQUFFLENBQUMsQ0FBQyxDQUN2QnlELEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FDVndKLElBQUksQ0FBQztRQUFFak4sU0FBUyxFQUFFO01BQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7TUFFM0IrUyxNQUFNLENBQUNvQyxJQUFJLENBQUMsU0FBUyxFQUFFc0MsT0FBTyxDQUFDalIsR0FBRyxDQUFDc0YsR0FBRyxLQUFLO1FBQ3pDd0wsTUFBTSxFQUFFeEwsR0FBRyxDQUFDd0wsTUFBTTtRQUNsQnBCLElBQUksRUFBRXBLLEdBQUcsQ0FBQ3lHLE9BQU87UUFBRTtRQUNuQmdGLElBQUksRUFBRXpMLEdBQUcsQ0FBQ3lMLElBQUk7UUFDZDlNLElBQUksRUFBRXFCLEdBQUcsQ0FBQ3JCLElBQUk7UUFDZGlOLE1BQU0sRUFBRTVMLEdBQUcsQ0FBQzRMLE1BQU07UUFDbEIxWCxTQUFTLEVBQUU4TCxHQUFHLENBQUM5TDtNQUNqQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDLE9BQU91QixLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO01BQzdDd1IsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUFFN1QsT0FBTyxFQUFFO01BQWlDLENBQUMsQ0FBQztJQUNyRTtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBeVIsTUFBTSxDQUFDL1AsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFPd1IsSUFBSSxJQUFLO0lBQ25DNEIsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDckQsTUFBTSxDQUFDbUQsSUFBSSxJQUFJLENBQUMxQixJQUFJLENBQUMrQyxJQUFJLEVBQUUzSixJQUFJLENBQUMsQ0FBQyxFQUFFOztJQUV4QztJQUNBLE1BQU0rSixXQUFXLEdBQUcsTUFBTW5ZLElBQUksQ0FBQzJJLFFBQVEsQ0FBQzRLLE1BQU0sQ0FBQ3hOLE1BQU0sQ0FBQztJQUN0RCxJQUFJb1MsV0FBVyxJQUFJQSxXQUFXLENBQUM1SCxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3hDZ0QsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQjdULE9BQU8sRUFBRSx3Q0FBd0M7UUFDakQ4QixJQUFJLEVBQUUsWUFBWTtRQUNsQjBNLFdBQVcsRUFBRTZILFdBQVcsQ0FBQzdIO01BQzNCLENBQUMsQ0FBQztNQUNGO0lBQ0Y7SUFFQSxJQUFJO01BQ0YsTUFBTXhPLE9BQU8sR0FBRyxJQUFJN0IsT0FBTyxDQUFDO1FBQzFCNlgsTUFBTSxFQUFFdkUsTUFBTSxDQUFDekwsUUFBUTtRQUN2QmlMLE9BQU8sRUFBRVEsTUFBTSxDQUFDbUQsSUFBSTtRQUNwQnFCLElBQUksRUFBRS9DLElBQUksQ0FBQytDLElBQUksQ0FBQzNKLElBQUksQ0FBQyxDQUFDO1FBQ3RCbkQsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO01BRUYsTUFBTW5KLE9BQU8sQ0FBQ3VOLElBQUksQ0FBQyxDQUFDO01BRXBCLE1BQU0rSSxXQUFXLEdBQUc7UUFDbEJOLE1BQU0sRUFBRWhXLE9BQU8sQ0FBQ2dXLE1BQU07UUFDdEJwQixJQUFJLEVBQUU1VSxPQUFPLENBQUNpUixPQUFPO1FBQUU7UUFDdkJnRixJQUFJLEVBQUVqVyxPQUFPLENBQUNpVyxJQUFJO1FBQ2xCdlgsU0FBUyxFQUFFc0IsT0FBTyxDQUFDdEIsU0FBUztRQUM1QnNELE1BQU0sRUFBRSxXQUFXO1FBQ25CbUgsSUFBSSxFQUFFbkosT0FBTyxDQUFDbUo7TUFDaEIsQ0FBQztNQUVEeEksRUFBRSxDQUFDa1YsRUFBRSxDQUFDcEUsTUFBTSxDQUFDbUQsSUFBSSxDQUFDLENBQUNmLElBQUksQ0FBQyxTQUFTLEVBQUV5QyxXQUFXLENBQUM7TUFDL0NqWSxNQUFNLENBQUNrWSxLQUFLLENBQUMsc0JBQXNCOUUsTUFBTSxDQUFDekwsUUFBUSxPQUFPeUwsTUFBTSxDQUFDbUQsSUFBSSxFQUFFLENBQUM7SUFDekUsQ0FBQyxDQUFDLE9BQU8zVSxLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyx1QkFBdUIsRUFBRUEsS0FBSyxDQUFDO01BQzVDd1IsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUFFN1QsT0FBTyxFQUFFO01BQXlCLENBQUMsQ0FBQztJQUM3RDtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBeVIsTUFBTSxDQUFDL1AsRUFBRSxDQUFDLGlCQUFpQixFQUFFLE1BQU93UixJQUFJLElBQUs7SUFDM0M0QixlQUFlLENBQUMsQ0FBQztJQUNqQixJQUFJLENBQUNyRCxNQUFNLENBQUNtRCxJQUFJLElBQUksQ0FBQzFCLElBQUksQ0FBQzJDLEVBQUUsSUFBSSxDQUFDM0MsSUFBSSxDQUFDK0MsSUFBSSxFQUFFM0osSUFBSSxDQUFDLENBQUMsRUFBRTtJQUVwRCxNQUFNa0ssV0FBVyxHQUFHdEQsSUFBSSxDQUFDK0MsSUFBSSxDQUFDM0osSUFBSSxDQUFDLENBQUM7SUFDcEMsTUFBTW1LLGNBQWMsR0FBR3ZELElBQUksQ0FBQzJDLEVBQUUsQ0FBQ3ZKLElBQUksQ0FBQyxDQUFDO0lBRXJDLElBQUk7TUFDRmpPLE1BQU0sQ0FBQ2tZLEtBQUssQ0FBQyxnQ0FBZ0M5RSxNQUFNLENBQUN6TCxRQUFRLE9BQU95USxjQUFjLEVBQUUsRUFBRTtRQUNuRkMsVUFBVSxFQUFFakYsTUFBTSxDQUFDbUQsSUFBSTtRQUN2QitCLGNBQWMsRUFBRWxGLE1BQU0sQ0FBQzlMLEVBQUU7UUFDekIxQixNQUFNLEVBQUV3TixNQUFNLENBQUN4TjtNQUNqQixDQUFDLENBQUM7O01BRUY7TUFDQSxJQUFJd1MsY0FBYyxDQUFDM0gsTUFBTSxLQUFLLENBQUMsSUFBSTJILGNBQWMsQ0FBQzNILE1BQU0sR0FBRyxFQUFFLEVBQUU7UUFDN0QyQyxNQUFNLENBQUNvQyxJQUFJLENBQUMsT0FBTyxFQUFFO1VBQ25CN1QsT0FBTyxFQUFFLDhCQUE4QjtVQUN2QzhCLElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGO01BQ0Y7O01BRUE7TUFDQSxJQUFJMlUsY0FBYyxLQUFLaEYsTUFBTSxDQUFDekwsUUFBUSxFQUFFO1FBQ3RDeUwsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtVQUNuQjdULE9BQU8sRUFBRSx5Q0FBeUM7VUFDbEQ4QixJQUFJLEVBQUU7UUFDUixDQUFDLENBQUM7UUFDRjtNQUNGOztNQUVBO01BQ0EsTUFBTThVLFVBQVUsR0FBR25CLEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDd0csSUFBSSxDQUN0RG1LLENBQUMsSUFBSUEsQ0FBQyxDQUFDNVAsUUFBUSxLQUFLeVEsY0FBYyxJQUFJYixDQUFDLENBQUNoQixJQUFJLEtBQUtuRCxNQUFNLENBQUNtRCxJQUMxRCxDQUFDO01BRUR2VyxNQUFNLENBQUNrWSxLQUFLLENBQUMsNENBQTRDRSxjQUFjLEVBQUUsRUFBRTtRQUN6RUksV0FBVyxFQUFFLENBQUMsQ0FBQ0QsVUFBVTtRQUN6QkUsVUFBVSxFQUFFRixVQUFVLEVBQUVoQyxJQUFJO1FBQzVCOEIsVUFBVSxFQUFFakYsTUFBTSxDQUFDbUQsSUFBSTtRQUN2Qm1DLGlCQUFpQixFQUFFdEIsS0FBSyxDQUFDQyxJQUFJLENBQUN0RSxXQUFXLENBQUNuTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQ2hEMFEsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hCLElBQUksS0FBS25ELE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUNuQzFQLEdBQUcsQ0FBQzBRLENBQUMsS0FBSztVQUFFNVAsUUFBUSxFQUFFNFAsQ0FBQyxDQUFDNVAsUUFBUTtVQUFFNE8sSUFBSSxFQUFFZ0IsQ0FBQyxDQUFDaEI7UUFBSyxDQUFDLENBQUM7TUFDdEQsQ0FBQyxDQUFDO01BRUYsSUFBSSxDQUFDZ0MsVUFBVSxFQUFFO1FBQ2Y7UUFDQSxNQUFNSSx1QkFBdUIsR0FBR3ZCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUM3RDBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNoQixJQUFJLEtBQUtuRCxNQUFNLENBQUNtRCxJQUFJLENBQUMsQ0FDbkMxUCxHQUFHLENBQUMwUSxDQUFDLElBQUlBLENBQUMsQ0FBQzVQLFFBQVEsQ0FBQztRQUV2QnlMLE1BQU0sQ0FBQ29DLElBQUksQ0FBQyxPQUFPLEVBQUU7VUFDbkI3VCxPQUFPLEVBQUUsU0FBU3lXLGNBQWMsd0RBQXdETyx1QkFBdUIsQ0FBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLEVBQUU7VUFDdEloVSxJQUFJLEVBQUUseUJBQXlCO1VBQy9Cc1UsTUFBTSxFQUFFSyxjQUFjO1VBQ3RCUSxjQUFjLEVBQUVELHVCQUF1QjtVQUN2Q04sVUFBVSxFQUFFakYsTUFBTSxDQUFDbUQ7UUFDckIsQ0FBQyxDQUFDO1FBQ0Y7TUFDRjs7TUFFQTtNQUNBLE1BQU01VSxPQUFPLEdBQUcsSUFBSTdCLE9BQU8sQ0FBQztRQUMxQjZYLE1BQU0sRUFBRXZFLE1BQU0sQ0FBQ3pMLFFBQVE7UUFDdkJpTCxPQUFPLEVBQUVRLE1BQU0sQ0FBQ21ELElBQUk7UUFDcEJxQixJQUFJLEVBQUVPLFdBQVc7UUFDakJyTixJQUFJLEVBQUUsU0FBUztRQUNmaU4sTUFBTSxFQUFFSztNQUNWLENBQUMsQ0FBQztNQUNGLE1BQU16VyxPQUFPLENBQUN1TixJQUFJLENBQUMsQ0FBQztNQUVwQixNQUFNK0ksV0FBVyxHQUFHO1FBQ2xCTixNQUFNLEVBQUVoVyxPQUFPLENBQUNnVyxNQUFNO1FBQ3RCcEIsSUFBSSxFQUFFNVUsT0FBTyxDQUFDaVIsT0FBTztRQUNyQmdGLElBQUksRUFBRWpXLE9BQU8sQ0FBQ2lXLElBQUk7UUFDbEJ2WCxTQUFTLEVBQUVzQixPQUFPLENBQUN0QixTQUFTO1FBQzVCeUssSUFBSSxFQUFFbkosT0FBTyxDQUFDbUosSUFBSTtRQUNsQmlOLE1BQU0sRUFBRXBXLE9BQU8sQ0FBQ29XLE1BQU07UUFDdEJwVSxNQUFNLEVBQUU7TUFDVixDQUFDOztNQUVEO01BQ0EsTUFBTWtWLGNBQWMsR0FBR3pCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDNUwsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDaUcsSUFBSSxDQUN4RDlGLEVBQUUsSUFBSXlMLFdBQVcsQ0FBQzlRLEdBQUcsQ0FBQ3FGLEVBQUUsQ0FBQyxDQUFDSyxRQUFRLEtBQUt5USxjQUN6QyxDQUFDO01BRUQsSUFBSVMsY0FBYyxFQUFFO1FBQ2xCdlcsRUFBRSxDQUFDa1YsRUFBRSxDQUFDcUIsY0FBYyxDQUFDLENBQUNyRCxJQUFJLENBQUMsaUJBQWlCLEVBQUV5QyxXQUFXLENBQUM7UUFDMURqWSxNQUFNLENBQUNrWSxLQUFLLENBQUMsa0NBQWtDRSxjQUFjLEVBQUUsRUFBRTtVQUMvRFMsY0FBYyxFQUFFQSxjQUFjO1VBQzlCQyxNQUFNLEVBQUUxRixNQUFNLENBQUN6TCxRQUFRO1VBQ3ZCNE8sSUFBSSxFQUFFbkQsTUFBTSxDQUFDbUQsSUFBSTtVQUNqQndDLFNBQVMsRUFBRXBYLE9BQU8sQ0FBQzhHO1FBQ3JCLENBQUMsQ0FBQztNQUNKLENBQUMsTUFBTTtRQUNMekksTUFBTSxDQUFDOEksSUFBSSxDQUFDLGVBQWVzUCxjQUFjLCtDQUErQyxFQUFFO1VBQ3hGQSxjQUFjO1VBQ2Q3QixJQUFJLEVBQUVuRCxNQUFNLENBQUNtRCxJQUFJO1VBQ2pCeUMsZ0JBQWdCLEVBQUVqRyxXQUFXLENBQUN5RCxJQUFJO1VBQ2xDdUMsU0FBUyxFQUFFcFgsT0FBTyxDQUFDOEc7UUFDckIsQ0FBQyxDQUFDO1FBQ0Y7TUFDRjs7TUFFQTtNQUNBMkssTUFBTSxDQUFDb0MsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1FBQzdCbUMsTUFBTSxFQUFFaFcsT0FBTyxDQUFDZ1csTUFBTTtRQUN0QnBCLElBQUksRUFBRTVVLE9BQU8sQ0FBQzRVLElBQUk7UUFDbEJxQixJQUFJLEVBQUVqVyxPQUFPLENBQUNpVyxJQUFJO1FBQ2xCdlgsU0FBUyxFQUFFc0IsT0FBTyxDQUFDdEIsU0FBUztRQUM1QnlLLElBQUksRUFBRW5KLE9BQU8sQ0FBQ21KLElBQUk7UUFDbEJpTixNQUFNLEVBQUUsSUFBSTtRQUFFO1FBQ2RwVSxNQUFNLEVBQUU7TUFDVixDQUFDLENBQUM7TUFFRjNELE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxtQ0FBbUMsRUFBRTtRQUMvQ3NSLE1BQU0sRUFBRTFGLE1BQU0sQ0FBQ3pMLFFBQVE7UUFDdkJvUSxNQUFNLEVBQUVLLGNBQWM7UUFDdEI3QixJQUFJLEVBQUVuRCxNQUFNLENBQUNtRCxJQUFJO1FBQ2pCd0MsU0FBUyxFQUFFcFgsT0FBTyxDQUFDOEcsR0FBRztRQUN0QndRLGFBQWEsRUFBRWQsV0FBVyxDQUFDMUg7TUFDN0IsQ0FBQyxDQUFDO0lBRUosQ0FBQyxDQUFDLE9BQU83TyxLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRTtRQUM3Q0EsS0FBSyxFQUFFQSxLQUFLLENBQUNELE9BQU87UUFDcEJtWCxNQUFNLEVBQUUxRixNQUFNLENBQUN6TCxRQUFRO1FBQ3ZCb1EsTUFBTSxFQUFFbEQsSUFBSSxDQUFDMkMsRUFBRTtRQUNmakIsSUFBSSxFQUFFbkQsTUFBTSxDQUFDbUQsSUFBSTtRQUNqQjNRLE1BQU0sRUFBRXdOLE1BQU0sQ0FBQ3hOLE1BQU07UUFDckJyRixLQUFLLEVBQUVxQixLQUFLLENBQUNyQjtNQUNmLENBQUMsQ0FBQztNQUNGNlMsTUFBTSxDQUFDb0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQjdULE9BQU8sRUFBRSxnQ0FBZ0M7UUFDekM4QixJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7SUFDSjtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBMlAsTUFBTSxDQUFDL1AsRUFBRSxDQUFDLFVBQVUsRUFBR3dSLElBQUksSUFBSztJQUM5QjRCLGVBQWUsQ0FBQyxDQUFDO0lBQ2pCckQsTUFBTSxDQUFDb0UsRUFBRSxDQUFDcEUsTUFBTSxDQUFDbUQsSUFBSSxDQUFDLENBQUNmLElBQUksQ0FBQyxVQUFVLEVBQUU7TUFBRTdOLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7TUFBRXVSLFFBQVEsRUFBRXJFLElBQUksQ0FBQ3FFO0lBQVMsQ0FBQyxDQUFDO0VBQ2pHLENBQUMsQ0FBQzs7RUFFRjtFQUNBOUYsTUFBTSxDQUFDL1AsRUFBRSxDQUFDLG9CQUFvQixFQUFFLE1BQU93UixJQUFJLElBQUs7SUFDOUM0QixlQUFlLENBQUMsQ0FBQztJQUNqQixNQUFNO01BQUU1RDtJQUFVLENBQUMsR0FBR2dDLElBQUk7SUFDMUIsSUFBSSxDQUFDaEMsU0FBUyxFQUFFO0lBRWhCLElBQUk7TUFDRjtNQUNBLE1BQU1ELE9BQU8sR0FBRyxNQUFNN1MsT0FBTyxDQUFDa1IsT0FBTyxDQUFDO1FBQUUzSixFQUFFLEVBQUV1TCxTQUFTO1FBQUUvSCxJQUFJLEVBQUU7TUFBUSxDQUFDLENBQUM7TUFDdkUsSUFBSSxDQUFDOEgsT0FBTyxFQUFFO1FBQ1pRLE1BQU0sQ0FBQ29DLElBQUksQ0FBQyxhQUFhLEVBQUU7VUFBRTdULE9BQU8sRUFBRTtRQUEwQixDQUFDLENBQUM7UUFDbEU7TUFDRjs7TUFFQTtNQUNBLElBQUksQ0FBQ3lTLGFBQWEsQ0FBQytFLEdBQUcsQ0FBQ3RHLFNBQVMsQ0FBQyxFQUFFO1FBQ2pDdUIsYUFBYSxDQUFDa0IsR0FBRyxDQUFDekMsU0FBUyxFQUFFLElBQUlxQixHQUFHLENBQUMsQ0FBQyxDQUFDO01BQ3pDO01BRUEsTUFBTWtGLFlBQVksR0FBR2hGLGFBQWEsQ0FBQ25TLEdBQUcsQ0FBQzRRLFNBQVMsQ0FBQzs7TUFFakQ7TUFDQU8sTUFBTSxDQUFDb0UsRUFBRSxDQUFDM0UsU0FBUyxDQUFDLENBQUMyQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7UUFBRTdOLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7UUFBRXNMLFFBQVEsRUFBRUcsTUFBTSxDQUFDOUw7TUFBRyxDQUFDLENBQUM7O01BRWxHO01BQ0E4TCxNQUFNLENBQUNxRSxJQUFJLENBQUM1RSxTQUFTLENBQUM7TUFDdEJ1RyxZQUFZLENBQUM5RCxHQUFHLENBQUNsQyxNQUFNLENBQUM5TCxFQUFFLEVBQUU7UUFBRStSLGNBQWMsRUFBRSxJQUFJO1FBQUVDLE1BQU0sRUFBRTtNQUFLLENBQUMsQ0FBQzs7TUFFbkU7TUFDQWxHLE1BQU0sQ0FBQ21HLFlBQVksR0FBRzFHLFNBQVM7TUFFL0I3UyxNQUFNLENBQUN3SCxJQUFJLENBQUMsUUFBUTRMLE1BQU0sQ0FBQ3pMLFFBQVEseUJBQXlCa0wsU0FBUyxFQUFFLENBQUM7TUFDeEVPLE1BQU0sQ0FBQ29DLElBQUksQ0FBQyxjQUFjLEVBQUU7UUFBRTNDO01BQVUsQ0FBQyxDQUFDO0lBRTVDLENBQUMsQ0FBQyxPQUFPalIsS0FBSyxFQUFFO01BQ2Q1QixNQUFNLENBQUM0QixLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztNQUNuRHdSLE1BQU0sQ0FBQ29DLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFBRTdULE9BQU8sRUFBRTtNQUErQixDQUFDLENBQUM7SUFDekU7RUFDRixDQUFDLENBQUM7RUFFRnlSLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0lBQ3JDb1QsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDckQsTUFBTSxDQUFDbUcsWUFBWSxFQUFFO0lBRTFCLE1BQU0xRyxTQUFTLEdBQUdPLE1BQU0sQ0FBQ21HLFlBQVk7SUFDckMsTUFBTUgsWUFBWSxHQUFHaEYsYUFBYSxDQUFDblMsR0FBRyxDQUFDNFEsU0FBUyxDQUFDO0lBRWpELElBQUl1RyxZQUFZLEVBQUU7TUFDaEJBLFlBQVksQ0FBQy9DLE1BQU0sQ0FBQ2pELE1BQU0sQ0FBQzlMLEVBQUUsQ0FBQztNQUM5QixJQUFJOFIsWUFBWSxDQUFDNUMsSUFBSSxLQUFLLENBQUMsRUFBRTtRQUMzQnBDLGFBQWEsQ0FBQ2lDLE1BQU0sQ0FBQ3hELFNBQVMsQ0FBQztNQUNqQztJQUNGOztJQUVBO0lBQ0FPLE1BQU0sQ0FBQ29FLEVBQUUsQ0FBQzNFLFNBQVMsQ0FBQyxDQUFDMkMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO01BQUU3TixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TCxRQUFRO01BQUVzTCxRQUFRLEVBQUVHLE1BQU0sQ0FBQzlMO0lBQUcsQ0FBQyxDQUFDO0lBRWhHOEwsTUFBTSxDQUFDOEQsS0FBSyxDQUFDckUsU0FBUyxDQUFDO0lBQ3ZCTyxNQUFNLENBQUNtRyxZQUFZLEdBQUcsSUFBSTtJQUUxQnZaLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSx1QkFBdUJrTCxTQUFTLEVBQUUsQ0FBQztJQUN0RU8sTUFBTSxDQUFDb0MsSUFBSSxDQUFDLFlBQVksQ0FBQztFQUMzQixDQUFDLENBQUM7RUFFRnBDLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxhQUFhLEVBQUd3UixJQUFJLElBQUs7SUFDakMsTUFBTTtNQUFFMkUsS0FBSztNQUFFWDtJQUFlLENBQUMsR0FBR2hFLElBQUk7SUFDdEN6QixNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3JELElBQUksQ0FBQyxhQUFhLEVBQUU7TUFDNUNnRSxLQUFLO01BQ0xuQyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxjQUFjLEVBQUd3UixJQUFJLElBQUs7SUFDbEMsTUFBTTtNQUFFNkUsTUFBTTtNQUFFYjtJQUFlLENBQUMsR0FBR2hFLElBQUk7SUFDdkN6QixNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3JELElBQUksQ0FBQyxjQUFjLEVBQUU7TUFDN0NrRSxNQUFNO01BQ05yQyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxlQUFlLEVBQUd3UixJQUFJLElBQUs7SUFDbkMsTUFBTTtNQUFFOEUsU0FBUztNQUFFZDtJQUFlLENBQUMsR0FBR2hFLElBQUk7SUFDMUN6QixNQUFNLENBQUNvRSxFQUFFLENBQUNxQixjQUFjLENBQUMsQ0FBQ3JELElBQUksQ0FBQyxlQUFlLEVBQUU7TUFDOUNtRSxTQUFTO01BQ1R0QyxJQUFJLEVBQUVqRSxNQUFNLENBQUM5TCxFQUFFO01BQ2ZtUyxZQUFZLEVBQUVyRyxNQUFNLENBQUN6TDtJQUN2QixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7O0VBRUY7RUFDQXlMLE1BQU0sQ0FBQy9QLEVBQUUsQ0FBQyxZQUFZLEVBQUUsWUFBWTtJQUNsQ3JELE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSxlQUFlLENBQUM7SUFFbkQsSUFBSTtNQUNGLE1BQU0vQixNQUFNLEdBQUd3TixNQUFNLENBQUN4TixNQUFNOztNQUU1QjtNQUNBLElBQUlBLE1BQU0sRUFBRTtRQUNWLE1BQU1nVSxZQUFZLEdBQUd6RixlQUFlLENBQUNsUyxHQUFHLENBQUMyRCxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ3JELE1BQU1pVSxRQUFRLEdBQUdqTSxJQUFJLENBQUN0TSxHQUFHLENBQUMsQ0FBQyxFQUFFc1ksWUFBWSxHQUFHLENBQUMsQ0FBQztRQUM5Q3pGLGVBQWUsQ0FBQ21CLEdBQUcsQ0FBQzFQLE1BQU0sRUFBRWlVLFFBQVEsQ0FBQztRQUVyQzdaLE1BQU0sQ0FBQ3dILElBQUksQ0FBQyxRQUFRNEwsTUFBTSxDQUFDekwsUUFBUSx5Q0FBeUNrUyxRQUFRLEdBQUcsRUFBRTtVQUN2RmpVLE1BQU0sRUFBRUEsTUFBTTtVQUNkcU4sUUFBUSxFQUFFRyxNQUFNLENBQUM5TCxFQUFFO1VBQ25CNk8sZUFBZSxFQUFFMEQ7UUFDbkIsQ0FBQyxDQUFDO01BQ0o7O01BRUE7TUFDQSxJQUFJekcsTUFBTSxDQUFDbUcsWUFBWSxFQUFFO1FBQ3ZCLE1BQU0xRyxTQUFTLEdBQUdPLE1BQU0sQ0FBQ21HLFlBQVk7UUFDckMsTUFBTUgsWUFBWSxHQUFHaEYsYUFBYSxDQUFDblMsR0FBRyxDQUFDNFEsU0FBUyxDQUFDO1FBRWpELElBQUl1RyxZQUFZLEVBQUU7VUFDaEJBLFlBQVksQ0FBQy9DLE1BQU0sQ0FBQ2pELE1BQU0sQ0FBQzlMLEVBQUUsQ0FBQztVQUM5QixJQUFJOFIsWUFBWSxDQUFDNUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUMzQnBDLGFBQWEsQ0FBQ2lDLE1BQU0sQ0FBQ3hELFNBQVMsQ0FBQztVQUNqQztRQUNGOztRQUVBO1FBQ0FPLE1BQU0sQ0FBQ29FLEVBQUUsQ0FBQzNFLFNBQVMsQ0FBQyxDQUFDMkMsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1VBQUU3TixRQUFRLEVBQUV5TCxNQUFNLENBQUN6TCxRQUFRO1VBQUVzTCxRQUFRLEVBQUVHLE1BQU0sQ0FBQzlMO1FBQUcsQ0FBQyxDQUFDO01BQ2xHO01BRUEsSUFBSThMLE1BQU0sQ0FBQ21ELElBQUksRUFBRTtRQUNmbkQsTUFBTSxDQUFDOEQsS0FBSyxDQUFDOUQsTUFBTSxDQUFDbUQsSUFBSSxDQUFDOztRQUV6QjtRQUNBLE1BQU11RCxZQUFZLEdBQUcsSUFBSWhhLE9BQU8sQ0FBQztVQUMvQjZYLE1BQU0sRUFBRSxRQUFRO1VBQ2hCL0UsT0FBTyxFQUFFUSxNQUFNLENBQUNtRCxJQUFJO1VBQ3BCcUIsSUFBSSxFQUFFLEdBQUd4RSxNQUFNLENBQUN6TCxRQUFRLG9CQUFvQjtVQUM1Q21ELElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGLE1BQU1nUCxZQUFZLENBQUM1SyxJQUFJLENBQUMsQ0FBQztRQUV6QjVNLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsU0FBUyxFQUFFO1VBQ2pDbUMsTUFBTSxFQUFFbUMsWUFBWSxDQUFDbkMsTUFBTTtVQUMzQnBCLElBQUksRUFBRXVELFlBQVksQ0FBQ2xILE9BQU87VUFDMUJnRixJQUFJLEVBQUVrQyxZQUFZLENBQUNsQyxJQUFJO1VBQ3ZCOU0sSUFBSSxFQUFFZ1AsWUFBWSxDQUFDaFAsSUFBSTtVQUN2QnpLLFNBQVMsRUFBRXlaLFlBQVksQ0FBQ3paO1FBQzFCLENBQUMsQ0FBQzs7UUFFRjtRQUNBLE1BQU13WCxTQUFTLEdBQUdULEtBQUssQ0FBQ0MsSUFBSSxDQUFDdEUsV0FBVyxDQUFDbk0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUMvQzBRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNoQixJQUFJLEtBQUtuRCxNQUFNLENBQUNtRCxJQUFJLElBQUlnQixDQUFDLENBQUMzUixNQUFNLEtBQUt3TixNQUFNLENBQUN4TixNQUFNLENBQUMsQ0FDakVpQixHQUFHLENBQUMwUSxDQUFDLEtBQUs7VUFBRTVQLFFBQVEsRUFBRTRQLENBQUMsQ0FBQzVQLFFBQVE7VUFBRVMsSUFBSSxFQUFFbVAsQ0FBQyxDQUFDblA7UUFBSyxDQUFDLENBQUMsQ0FBQztRQUNyRDlGLEVBQUUsQ0FBQ2tWLEVBQUUsQ0FBQ3BFLE1BQU0sQ0FBQ21ELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsY0FBYyxFQUFFcUMsU0FBUyxDQUFDO01BQ3BEOztNQUVBO01BQ0E5RSxXQUFXLENBQUNzRCxNQUFNLENBQUNqRCxNQUFNLENBQUM5TCxFQUFFLENBQUM7O01BRTdCO01BQ0F0SCxNQUFNLENBQUN3SCxJQUFJLENBQUMsZ0RBQWdEdUwsV0FBVyxDQUFDeUQsSUFBSSxFQUFFLENBQUM7O01BRS9FO01BQ0EsSUFBSTVRLE1BQU0sRUFBRTtRQUNWLE1BQU1tVSxvQkFBb0IsR0FBRzVGLGVBQWUsQ0FBQ2xTLEdBQUcsQ0FBQzJELE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDN0QsSUFBSW1VLG9CQUFvQixLQUFLLENBQUMsRUFBRTtVQUM5QixNQUFNbGEsSUFBSSxDQUFDeVQsaUJBQWlCLENBQUMxTixNQUFNLEVBQUU7WUFDbkNqQyxNQUFNLEVBQUUsU0FBUztZQUNqQjJILFVBQVUsRUFBRSxJQUFJaEcsSUFBSSxDQUFDO1VBQ3ZCLENBQUMsQ0FBQztVQUNGL0IsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVzRQLE1BQU0sQ0FBQ3pMLFFBQVEsMENBQTBDLENBQUM7VUFDakYzSCxNQUFNLENBQUN3SCxJQUFJLENBQUMsOENBQThDLEVBQUU7WUFDMUQ1QixNQUFNLEVBQUVBLE1BQU07WUFDZCtCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMO1VBQ25CLENBQUMsQ0FBQztRQUNKLENBQUMsTUFBTTtVQUNMO1VBQ0EsTUFBTTlILElBQUksQ0FBQ3lULGlCQUFpQixDQUFDMU4sTUFBTSxFQUFFO1lBQ25DMEYsVUFBVSxFQUFFLElBQUloRyxJQUFJLENBQUM7VUFDdkIsQ0FBQyxDQUFDO1VBQ0YvQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxVQUFVNFAsTUFBTSxDQUFDekwsUUFBUSxrQkFBa0JvUyxvQkFBb0Isb0JBQW9CLENBQUM7VUFDaEcvWixNQUFNLENBQUN3SCxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDakM1QixNQUFNLEVBQUVBLE1BQU07WUFDZCtCLFFBQVEsRUFBRXlMLE1BQU0sQ0FBQ3pMLFFBQVE7WUFDekJ3TyxlQUFlLEVBQUU0RDtVQUNuQixDQUFDLENBQUM7UUFDSjtNQUNGO0lBRUYsQ0FBQyxDQUFDLE9BQU9uWSxLQUFLLEVBQUU7TUFDZDVCLE1BQU0sQ0FBQzRCLEtBQUssQ0FBQyw4QkFBOEIsRUFBRUEsS0FBSyxDQUFDO0lBQ3JEO0VBQ0gsQ0FBQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTW9ZLGdCQUFnQixHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUNuQyxJQUFJO0lBQ0Y7SUFDQSxNQUFNdGEsU0FBUyxDQUFDLENBQUM7O0lBRWpCO0lBQ0EsTUFBTXVhLGVBQWUsR0FBRyxDQUN0QjtNQUFFM1MsRUFBRSxFQUFFLFNBQVM7TUFBRXBCLElBQUksRUFBRSxTQUFTO01BQUU0RSxJQUFJLEVBQUUsTUFBTTtNQUFFVSxTQUFTLEVBQUU7SUFBUyxDQUFDLEVBQ3JFO01BQUVsRSxFQUFFLEVBQUUsWUFBWTtNQUFFcEIsSUFBSSxFQUFFLFlBQVk7TUFBRTRFLElBQUksRUFBRSxPQUFPO01BQUVVLFNBQVMsRUFBRTtJQUFTLENBQUMsQ0FDN0U7SUFFRCxLQUFLLE1BQU0wTyxXQUFXLElBQUlELGVBQWUsRUFBRTtNQUN6QyxNQUFNbGEsT0FBTyxDQUFDMlYsZ0JBQWdCLENBQzVCO1FBQUVwTyxFQUFFLEVBQUU0UyxXQUFXLENBQUM1UztNQUFHLENBQUMsRUFDdEI0UyxXQUFXLEVBQ1g7UUFBRUMsTUFBTSxFQUFFLElBQUk7UUFBRXZFLEdBQUcsRUFBRTtNQUFLLENBQzVCLENBQUM7SUFDSDtJQUVBNVYsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLDhCQUE4QixDQUFDOztJQUUzQztJQUNBLE1BQU00UyxJQUFJLEdBQUc3WSxPQUFPLENBQUNDLEdBQUcsQ0FBQzRZLElBQUksSUFBSSxJQUFJO0lBQ3JDbFosTUFBTSxDQUFDbVosTUFBTSxDQUFDRCxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU07TUFDbkNwYSxNQUFNLENBQUN3SCxJQUFJLENBQUMsMEJBQTBCNFMsSUFBSSxFQUFFLENBQUM7TUFDN0M3VyxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQkFBMEI0VyxJQUFJLEVBQUUsQ0FBQztJQUMvQyxDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT3hZLEtBQUssRUFBRTtJQUNkNUIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUM7SUFDbkRMLE9BQU8sQ0FBQytZLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDOztBQUVEO0FBQ0EvWSxPQUFPLENBQUM4QixFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVk7RUFDL0JyRCxNQUFNLENBQUN3SCxJQUFJLENBQUMsOENBQThDLENBQUM7RUFDM0QsTUFBTTdILE9BQU8sQ0FBQyxDQUFDO0VBQ2YyQyxFQUFFLENBQUNpWSxLQUFLLENBQUMsTUFBTTtJQUNidmEsTUFBTSxDQUFDd0gsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQy9CakcsT0FBTyxDQUFDK1ksSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRi9ZLE9BQU8sQ0FBQzhCLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWTtFQUNoQ3JELE1BQU0sQ0FBQ3dILElBQUksQ0FBQywrQ0FBK0MsQ0FBQztFQUM1RCxNQUFNN0gsT0FBTyxDQUFDLENBQUM7RUFDZjJDLEVBQUUsQ0FBQ2lZLEtBQUssQ0FBQyxNQUFNO0lBQ2J2YSxNQUFNLENBQUN3SCxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDL0JqRyxPQUFPLENBQUMrWSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBTixnQkFBZ0IsQ0FBQyxDQUFDLENBQUM1RCxLQUFLLENBQUM5UyxHQUFHLElBQUk7RUFDOUJ0RCxNQUFNLENBQUM0QixLQUFLLENBQUMsd0NBQXdDLEVBQUUwQixHQUFHLENBQUM7RUFDM0QvQixPQUFPLENBQUMrWSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==