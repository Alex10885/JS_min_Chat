8fa76f8f6c3d3c3fbe936bd72d85cc34
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
const {
  connectDB,
  closeDB
} = require('./db/connection');
const emailService = require('./services/emailService');

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);

// Rate limiting configuration
const authRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: process.env.NODE_ENV === 'test' || process.env.CYPRESS_API_SKIP ? 10000 : 5,
  // High limit for tests and Cypress
  message: {
    error: 'Too many authentication attempts, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false,
  skip: req => {
    // Skip rate limiting for Cypress tests (detected by user-agent or specific headers)
    return req.get('User-Agent') && req.get('User-Agent').includes('Cypress');
  }
});
const apiRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 100,
  // Limit each IP to 100 API requests per windowMs
  message: {
    error: 'Too many requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const generalRateLimiter = rateLimit({
  windowMs: 60 * 60 * 1000,
  // 1 hour
  max: 1000,
  // Limit each IP to 1000 requests per windowMs
  message: {
    error: 'Too many requests from this IP, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const passwordResetRateLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 3,
  // Limit each IP to 3 password reset requests per windowMs
  message: {
    error: 'Too many password reset requests, please try again later.'
  },
  standardHeaders: true,
  legacyHeaders: false
});
const io = socketIo(server, {
  cors: {
    origin: "*",
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"]
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling']
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('ðŸ”Œ Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '10mb'
})); // Add payload size limit

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// JWT authentication middleware
const authenticateToken = async (req, res, next) => {
  try {
    console.log('ðŸ” JWT authentication middleware called:', {
      url: req.url,
      method: req.method
    });
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

    console.log('ðŸ”‘ Token extraction result:', {
      hasAuthHeader: !!authHeader,
      hasToken: !!token
    });
    if (!token) {
      console.log('âŒ No token provided');
      return res.status(401).json({
        error: 'Access token required',
        code: 'NO_TOKEN'
      });
    }
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    console.log('âœ… JWT decoded:', {
      userId: decoded.userId,
      nickname: decoded.nickname
    });
    const user = await User.findById(decoded.userId);
    if (!user) {
      console.log('âŒ User not found in DB for JWT userId:', decoded.userId);
      return res.status(401).json({
        error: 'User not found',
        code: 'USER_NOT_FOUND'
      });
    }
    req.user = user;
    console.log('âœ… JWT authentication successful for user:', user.nickname, {
      id: user._id,
      status: user.status
    });
    next();
  } catch (error) {
    logger.warn('JWT authentication failed:', {
      error: error.message,
      ip: req.ip
    });
    if (error.name === 'JsonWebTokenError') {
      return res.status(401).json({
        error: 'Invalid token format',
        code: 'INVALID_TOKEN_FORMAT'
      });
    }
    if (error.name === 'TokenExpiredError') {
      return res.status(401).json({
        error: 'Token has expired',
        code: 'TOKEN_EXPIRED'
      });
    }
    return res.status(401).json({
      error: 'Token verification failed',
      code: 'TOKEN_VERIFICATION_FAILED'
    });
  }
};

// General rate limiting (applied to all HTTP requests)
app.use(generalRateLimiter);

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('ðŸ”„ Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('âš ï¸ Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('âŒ Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`ðŸ” Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('ðŸ”§ POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  try {
    console.log('ðŸ”‘ Incoming login request:', {
      identifier: req.body.identifier,
      hasPassword: !!req.body.password,
      ip: req.ip
    });
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      console.log('âŒ Login validation errors:', errors.array());
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      identifier,
      password
    } = req.body;
    console.log('ðŸ” Searching for user with identifier:', identifier);

    // Find user by nickname or email
    const user = await User.findOne({
      $or: [{
        nickname: identifier
      }, {
        email: identifier
      }]
    });
    if (!user) {
      console.log('âŒ User not found:', identifier);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }
    console.log('âœ… User found:', {
      nickname: user.nickname,
      email: user.email,
      status: user.status
    });

    // Compare password
    const isPasswordValid = await user.comparePassword(password);
    console.log('ðŸ”‘ Password validation result:', isPasswordValid);
    if (!isPasswordValid) {
      console.log('âŒ Invalid password for user:', user.nickname);
      return res.status(400).json({
        error: 'Invalid credentials'
      });
    }

    // Update user status to online
    user.status = 'online';
    await user.save();

    // Generate JWT token
    console.log('ðŸ” Generating JWT token for user:', user.nickname);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('âœ… JWT token generated successfully');
    logger.info(`User logged in: ${user.nickname}`);
    console.log('ðŸ“¤ Sending login response');
    res.json({
      token,
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      }
    });
  } catch (error) {
    logger.error('Login error:', error);
    res.status(500).json({
      error: 'Server error during login'
    });
  }
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      nickname,
      email,
      password
    } = req.body;

    // Check if user exists
    const existingUser = await User.findOne({
      $or: [{
        nickname
      }, {
        email
      }]
    });
    if (existingUser) {
      const conflictField = existingUser.nickname === nickname ? 'nickname' : 'email';
      const errorMessage = conflictField === 'nickname' ? 'Nickname already taken' : 'Email already registered';
      return res.status(409).json({
        error: errorMessage
      });
    }

    // Create user
    const user = new User({
      nickname,
      email,
      password,
      role: 'member',
      status: 'online'
    });
    await user.save();
    console.log('JWT_SECRET present:', !!process.env.JWT_SECRET);
    const token = jwt.sign({
      userId: user._id,
      nickname: user.nickname,
      role: user.role
    }, process.env.JWT_SECRET, {
      expiresIn: '24h'
    });
    console.log('JWT token generated successfully');
    logger.info(`User registered: ${user.nickname}`);
    res.status(201).json({
      token,
      user: {
        id: user._id,
        nickname: user.nickname,
        email: user.email,
        role: user.role
      }
    });
  } catch (error) {
    logger.error('Registration error:', error);
    res.status(500).json({
      error: 'Server error during registration'
    });
  }
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('ðŸ”§ GET /api/channels route registered at startup');
app.get('/api/channels', authenticateToken, apiRateLimiter, async (req, res) => {
  console.log('ðŸš€ GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('ðŸ“¤ Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('âŒ Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('ðŸ”§ POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authenticateToken, apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});

// 404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('âŒ Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

io.use(async (socket, next) => {
  const token = socket.handshake.auth.token;
  console.log('ðŸ”‘ Socket authentication attempt, token present:', !!token);
  if (!token) {
    console.log('âŒ Socket authentication failed: No token provided');
    return next(new Error('Authentication token required'));
  }
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    const user = await User.findById(decoded.userId);
    console.log(`âœ… Socket auth success: ${decoded.nickname}, user found: ${!!user}`);
    if (!user) {
      console.log('âŒ Socket authentication failed: User not found');
      return next(new Error('User not found'));
    }

    // Note: Removed offline status check as users should be able to connect even if marked offline
    // Status management is handled during connection tracking below

    // Handle user status update based on connection count
    try {
      const userId = decoded.userId;
      const connectionCount = userConnections.get(userId) || 0;
      const newConnectionCount = connectionCount + 1;
      userConnections.set(userId, newConnectionCount);

      // Update user status with connection count tracking
      const updateResult = await User.findOneAndUpdate({
        _id: userId
      }, {
        $set: {
          status: newConnectionCount > 0 ? 'online' : 'offline',
          lastActive: new Date()
        }
      }, {
        new: true,
        runValidators: true
      });
      if (updateResult) {
        console.log(`ðŸ”„ Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
        logger.info(`User status updated to online via socket auth`, {
          userId: userId,
          nickname: user.nickname,
          connections: newConnectionCount,
          socketId: socket.id,
          timestamp: new Date()
        });
      }

      // Override local user object with updated data
      user.status = updateResult ? updateResult.status : 'online';
      user.lastActive = updateResult ? updateResult.lastActive : new Date();
    } catch (statusUpdateError) {
      console.error(`âŒ Socket auth: Failed to update user status for ${user.nickname}:`, statusUpdateError.message);
      logger.error(`Status update failed during socket auth`, {
        userId: userId,
        nickname: user.nickname,
        error: statusUpdateError.message,
        socketId: socket.id
      });

      // Don't fail auth due to status update error - proceed with default online status
      console.log(`âš ï¸ Socket auth: Proceeding with online status despite update failure`);
      user.status = 'online';
      user.lastActive = new Date();
    }
    socket.userId = decoded.userId;
    socket.nickname = decoded.nickname;
    socket.role = decoded.role;
    console.log(`ðŸŽ‰ Socket fully authenticated: ${socket.nickname}`);
    return next();
  } catch (err) {
    console.error('âŒ Socket authentication error:', err.message);
    if (err.name === 'JsonWebTokenError') {
      return next(new Error('Invalid authentication token'));
    }
    if (err.name === 'TokenExpiredError') {
      return next(new Error('Authentication token has expired'));
    }
    return next(new Error('Authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`ðŸ§¹ Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`ðŸ”„ User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('ðŸš€ Socket connection established');
  console.log(`ðŸ‘¤ User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`ðŸ“Š Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Heartbeat mechanism
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
      console.log(`ðŸ’“ Heartbeat received from user ${socket.nickname}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      // Verify channel exists
      const channel = await Channel.findOne({
        id: room
      });
      if (!channel) {
        logger.warn('Join room failed: Channel not found', {
          userId: socket.userId,
          nickname: socket.nickname,
          room
        });
        socket.emit('error', {
          message: `Channel '${room}' not found`,
          code: 'CHANNEL_NOT_FOUND',
          room,
          timestamp: new Date().toISOString()
        });
        return;
      }

      // Leave previous room
      if (socket.room) {
        socket.leave(socket.room);
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: null
        });

        // Update online users in previous room
        const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', previousRoomUsers);
      }
      socket.room = room;
      socket.join(socket.room);

      // Update user tracking
      onlineUsers.set(socket.id, {
        ...onlineUsers.get(socket.id),
        room: socket.room
      });
      logger.info(`User ${socket.nickname} joined room ${socket.room}`);

      // Send system message about joining
      const joinMessage = new Message({
        author: 'System',
        channel: socket.room,
        text: `${socket.nickname} joined the channel.`,
        type: 'system'
      });
      await joinMessage.save();
      io.to(socket.room).emit('message', {
        author: joinMessage.author,
        channel: joinMessage.channel,
        text: joinMessage.text,
        type: joinMessage.type,
        timestamp: joinMessage.timestamp
      });

      // Send online users in current room
      const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
        nickname: u.nickname,
        role: u.role
      }));
      io.to(socket.room).emit('online_users', roomUsers);

      // Send message history
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error in join_room:', error);
      socket.emit('error', {
        message: 'Failed to join room'
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`ðŸ”„ User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`âœ… User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Start the server
initializeServer().catch(err => {
  logger.error('Unhandled error during server startup:', err);
  process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNvbm5lY3REQiIsImNsb3NlREIiLCJlbWFpbFNlcnZpY2UiLCJVc2VyIiwiTWVzc2FnZSIsIkNoYW5uZWwiLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImNvbWJpbmUiLCJ0aW1lc3RhbXAiLCJlcnJvcnMiLCJzdGFjayIsImpzb24iLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJ0cmFuc3BvcnRzIiwiRmlsZSIsImZpbGVuYW1lIiwiQ29uc29sZSIsImNvbG9yaXplIiwic2ltcGxlIiwiYXBwIiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwiYXV0aFJhdGVMaW1pdGVyIiwid2luZG93TXMiLCJtYXgiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJDWVBSRVNTX0FQSV9TS0lQIiwibWVzc2FnZSIsImVycm9yIiwic3RhbmRhcmRIZWFkZXJzIiwibGVnYWN5SGVhZGVycyIsInNraXAiLCJyZXEiLCJnZXQiLCJpbmNsdWRlcyIsImFwaVJhdGVMaW1pdGVyIiwiZ2VuZXJhbFJhdGVMaW1pdGVyIiwicGFzc3dvcmRSZXNldFJhdGVMaW1pdGVyIiwiaW8iLCJvcmlnaW4iLCJtZXRob2RzIiwiYWxsb3dlZEhlYWRlcnMiLCJlbmdpbmUiLCJvbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJjb2RlIiwiaHR0cFN0YXR1cyIsInN0YXR1cyIsImhlYWRlcnMiLCJ1c2UiLCJBTExPV0VEX09SSUdJTlMiLCJzcGxpdCIsImNyZWRlbnRpYWxzIiwibGltaXQiLCJlcnJvckhhbmRsZXIiLCJyZXMiLCJuZXh0IiwidXJsIiwibWV0aG9kIiwiaXAiLCJ1c2VyQWdlbnQiLCJuYW1lIiwiT2JqZWN0IiwidmFsdWVzIiwibWFwIiwiZSIsImZpZWxkIiwicGF0aCIsInZhbHVlIiwiZGV0YWlscyIsImtleXMiLCJrZXlWYWx1ZSIsInJlcXVlc3RJZCIsImlkIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZHVyYXRpb24iLCJpbmZvIiwic3RhdHVzQ29kZSIsInVzZXIiLCJuaWNrbmFtZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJhdXRoZW50aWNhdGVUb2tlbiIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsImhhc0F1dGhIZWFkZXIiLCJoYXNUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJKV1RfU0VDUkVUIiwidXNlcklkIiwiZmluZEJ5SWQiLCJfaWQiLCJ3YXJuIiwiY29udGVudFNlY3VyaXR5UG9saWN5IiwiZGlyZWN0aXZlcyIsImRlZmF1bHRTcmMiLCJzdHlsZVNyYyIsImZvbnRTcmMiLCJpbWdTcmMiLCJzY3JpcHRTcmMiLCJjb25uZWN0U3JjIiwiY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeSIsInN3YWdnZXJPcHRpb25zIiwiZGVmaW5pdGlvbiIsIm9wZW5hcGkiLCJ0aXRsZSIsInZlcnNpb24iLCJkZXNjcmlwdGlvbiIsImNvbnRhY3QiLCJzZXJ2ZXJzIiwiY29tcG9uZW50cyIsInNjaGVtYXMiLCJ0eXBlIiwicHJvcGVydGllcyIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImVtYWlsIiwicm9sZSIsImVudW0iLCJkZWZhdWx0IiwiY3JlYXRlZEF0IiwibGFzdEFjdGl2ZSIsInJlcXVpcmVkIiwiY3JlYXRlZEJ5IiwicG9zaXRpb24iLCJSZWdpc3RlclJlcXVlc3QiLCJwYXNzd29yZCIsIkxvZ2luUmVxdWVzdCIsImlkZW50aWZpZXIiLCJBdXRoUmVzcG9uc2UiLCIkcmVmIiwiQ2hhbm5lbFJlcXVlc3QiLCJFcnJvclJlc3BvbnNlIiwiaXRlbXMiLCJtc2ciLCJwYXJhbSIsImxvY2F0aW9uIiwic2VjdXJpdHlTY2hlbWVzIiwiYmVhcmVyQXV0aCIsInNjaGVtZSIsImJlYXJlckZvcm1hdCIsInNlY3VyaXR5IiwiYXBpcyIsInN3YWdnZXJTcGVjIiwicmVtb3ZlSGVhZGVyIiwic2VydmUiLCJzZXR1cCIsInNldEhlYWRlciIsInNlbmQiLCJwb3N0IiwiYXV0aExpbWl0ZXJTdG9yZSIsInN0b3JlIiwicmVzZXRBbGwiLCJzdWNjZXNzIiwidG9JU09TdHJpbmciLCJ1cHRpbWUiLCJpc0xlbmd0aCIsIm1pbiIsInRyaW0iLCJoYXNQYXNzd29yZCIsImlzRW1wdHkiLCJhcnJheSIsImZpbmRPbmUiLCIkb3IiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlUGFzc3dvcmQiLCJzYXZlIiwic2lnbiIsImV4cGlyZXNJbiIsImVzY2FwZSIsImlzRW1haWwiLCJub3JtYWxpemVFbWFpbCIsImV4aXN0aW5nVXNlciIsImNvbmZsaWN0RmllbGQiLCJlcnJvck1lc3NhZ2UiLCJhdXRob3JpemF0aW9uIiwiY2hhbm5lbHMiLCJmaW5kIiwic2VsZWN0Iiwic29ydCIsImNoYW5uZWxDb3VudCIsImxlbmd0aCIsImlzSW4iLCJvcHRpb25hbCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJvbmxpbmVVc2VycyIsIk1hcCIsInVzZXJDb25uZWN0aW9ucyIsInZvaWNlQ2hhbm5lbHMiLCJzb2NrZXQiLCJoYW5kc2hha2UiLCJhdXRoIiwiRXJyb3IiLCJjb25uZWN0aW9uQ291bnQiLCJuZXdDb25uZWN0aW9uQ291bnQiLCJzZXQiLCJ1cGRhdGVSZXN1bHQiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJjb25uZWN0aW9ucyIsInNvY2tldElkIiwic3RhdHVzVXBkYXRlRXJyb3IiLCJjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucyIsInRpbWVvdXQiLCJlbnRyaWVzIiwibGFzdEhlYXJ0YmVhdCIsInNvY2tldHMiLCJkaXNjb25uZWN0IiwiY29ubmVjdGlvbnNMZWZ0IiwiTWF0aCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiY2F0Y2giLCJkZWxldGUiLCJzZXRJbnRlcnZhbCIsInJvb20iLCJzaXplIiwidXBkYXRlSGVhcnRiZWF0IiwiZGF0YSIsImVtaXQiLCJsZWF2ZSIsInByZXZpb3VzUm9vbVVzZXJzIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwidSIsInRvIiwiam9pbiIsImpvaW5NZXNzYWdlIiwiYXV0aG9yIiwidGV4dCIsInJvb21Vc2VycyIsImhpc3RvcnkiLCJ0YXJnZXQiLCJtZXNzYWdlRGF0YSIsImRlYnVnIiwidHJpbW1lZFRleHQiLCJ0YXJnZXROaWNrbmFtZSIsInNlbmRlclJvb20iLCJzZW5kZXJTb2NrZXRJZCIsInRhcmdldFVzZXIiLCJ0YXJnZXRGb3VuZCIsInRhcmdldFJvb20iLCJvbmxpbmVVc2Vyc0luUm9vbSIsIm9ubGluZVVzZXJzSW5TZW5kZXJSb29tIiwiYXZhaWxhYmxlVXNlcnMiLCJ0YXJnZXRTb2NrZXRJZCIsInNlbmRlciIsIm1lc3NhZ2VJZCIsIm9ubGluZVVzZXJzQ291bnQiLCJtZXNzYWdlTGVuZ3RoIiwic3BlYWtpbmciLCJoYXMiLCJjaGFubmVsUGVlcnMiLCJwZWVyQ29ubmVjdGlvbiIsInN0cmVhbSIsInZvaWNlQ2hhbm5lbCIsIm9mZmVyIiwiZnJvbU5pY2tuYW1lIiwiYW5zd2VyIiwiY2FuZGlkYXRlIiwiY3VycmVudENvdW50IiwibmV3Q291bnQiLCJsZWF2ZU1lc3NhZ2UiLCJyZW1haW5pbmdDb25uZWN0aW9ucyIsImluaXRpYWxpemVTZXJ2ZXIiLCJkZWZhdWx0Q2hhbm5lbHMiLCJjaGFubmVsRGF0YSIsInVwc2VydCIsIlBPUlQiLCJsaXN0ZW4iLCJleGl0IiwiY2xvc2UiXSwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHNvY2tldElvID0gcmVxdWlyZSgnc29ja2V0LmlvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpO1xuY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IHJhdGVMaW1pdCA9IHJlcXVpcmUoJ2V4cHJlc3MtcmF0ZS1saW1pdCcpO1xuY29uc3QgeyBib2R5LCB2YWxpZGF0aW9uUmVzdWx0IH0gPSByZXF1aXJlKCdleHByZXNzLXZhbGlkYXRvcicpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgeyBjb25uZWN0REIsIGNsb3NlREIgfSA9IHJlcXVpcmUoJy4vZGIvY29ubmVjdGlvbicpO1xuY29uc3QgZW1haWxTZXJ2aWNlID0gcmVxdWlyZSgnLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnKTtcblxuLy8gSW1wb3J0IG1vZGVsc1xuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IE1lc3NhZ2UgPSByZXF1aXJlKCcuL21vZGVscy9NZXNzYWdlJyk7XG5jb25zdCBDaGFubmVsID0gcmVxdWlyZSgnLi9tb2RlbHMvQ2hhbm5lbCcpO1xuXG4vLyBMb2dnZXIgc2V0dXBcbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6ICdpbmZvJyxcbiAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgIHdpbnN0b24uZm9ybWF0LnRpbWVzdGFtcCgpLFxuICAgIHdpbnN0b24uZm9ybWF0LmVycm9ycyh7IHN0YWNrOiB0cnVlIH0pLFxuICAgIHdpbnN0b24uZm9ybWF0Lmpzb24oKVxuICApLFxuICBkZWZhdWx0TWV0YTogeyBzZXJ2aWNlOiAnY2hhdC1zZXJ2ZXInIH0sXG4gIHRyYW5zcG9ydHM6IFtcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3Mvc2VydmVyLmxvZycgfSksXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuY29sb3JpemUoKSxcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuc2ltcGxlKClcbiAgICAgIClcbiAgICB9KVxuICBdXG59KTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcblxuLy8gUmF0ZSBsaW1pdGluZyBjb25maWd1cmF0aW9uXG5jb25zdCBhdXRoUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnIHx8IHByb2Nlc3MuZW52LkNZUFJFU1NfQVBJX1NLSVAgPyAxMDAwMCA6IDUsIC8vIEhpZ2ggbGltaXQgZm9yIHRlc3RzIGFuZCBDeXByZXNzXG4gIG1lc3NhZ2U6IHsgZXJyb3I6ICdUb28gbWFueSBhdXRoZW50aWNhdGlvbiBhdHRlbXB0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gIHN0YW5kYXJkSGVhZGVyczogdHJ1ZSxcbiAgbGVnYWN5SGVhZGVyczogZmFsc2UsXG4gIHNraXA6IChyZXEpID0+IHtcbiAgICAvLyBTa2lwIHJhdGUgbGltaXRpbmcgZm9yIEN5cHJlc3MgdGVzdHMgKGRldGVjdGVkIGJ5IHVzZXItYWdlbnQgb3Igc3BlY2lmaWMgaGVhZGVycylcbiAgICByZXR1cm4gcmVxLmdldCgnVXNlci1BZ2VudCcpICYmIHJlcS5nZXQoJ1VzZXItQWdlbnQnKS5pbmNsdWRlcygnQ3lwcmVzcycpO1xuICB9XG59KTtcblxuY29uc3QgYXBpUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiAxMDAsIC8vIExpbWl0IGVhY2ggSVAgdG8gMTAwIEFQSSByZXF1ZXN0cyBwZXIgd2luZG93TXNcbiAgbWVzc2FnZTogeyBlcnJvcjogJ1RvbyBtYW55IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgfSxcbiAgc3RhbmRhcmRIZWFkZXJzOiB0cnVlLFxuICBsZWdhY3lIZWFkZXJzOiBmYWxzZSxcbn0pO1xuXG5jb25zdCBnZW5lcmFsUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICB3aW5kb3dNczogNjAgKiA2MCAqIDEwMDAsIC8vIDEgaG91clxuICBtYXg6IDEwMDAsIC8vIExpbWl0IGVhY2ggSVAgdG8gMTAwMCByZXF1ZXN0cyBwZXIgd2luZG93TXNcbiAgbWVzc2FnZTogeyBlcnJvcjogJ1RvbyBtYW55IHJlcXVlc3RzIGZyb20gdGhpcyBJUCwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gIHN0YW5kYXJkSGVhZGVyczogdHJ1ZSxcbiAgbGVnYWN5SGVhZGVyczogZmFsc2UsXG59KTtcblxuY29uc3QgcGFzc3dvcmRSZXNldFJhdGVMaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dGVzXG4gIG1heDogMywgLy8gTGltaXQgZWFjaCBJUCB0byAzIHBhc3N3b3JkIHJlc2V0IHJlcXVlc3RzIHBlciB3aW5kb3dNc1xuICBtZXNzYWdlOiB7IGVycm9yOiAnVG9vIG1hbnkgcGFzc3dvcmQgcmVzZXQgcmVxdWVzdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9LFxuICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsXG4gIGxlZ2FjeUhlYWRlcnM6IGZhbHNlLFxufSk7XG5jb25zdCBpbyA9IHNvY2tldElvKHNlcnZlciwge1xuICBjb3JzOiB7XG4gICAgb3JpZ2luOiBcIipcIixcbiAgICBtZXRob2RzOiBbXCJHRVRcIiwgXCJQT1NUXCJdLFxuICAgIGFsbG93ZWRIZWFkZXJzOiBbXCJhdXRob3JpemF0aW9uXCIsIFwiY29udGVudC10eXBlXCJdXG4gIH0sXG4gIC8vIEVuc3VyZSBib3RoIHRyYW5zcG9ydHMgYXJlIHN1cHBvcnRlZFxuICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ11cbn0pO1xuXG4vLyBMb2cgc29ja2V0IGNvbm5lY3Rpb24gZXJyb3JzIGZvciBkZWJ1Z2dpbmdcbmlvLmVuZ2luZS5vbignY29ubmVjdGlvbl9lcnJvcicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coJ/CflIwgU29ja2V0IGVuZ2luZSBjb25uZWN0aW9uIGVycm9yOicsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG4gIGxvZ2dlci5lcnJvcignU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6Jywge1xuICAgIGNvZGU6IGVyci5jb2RlLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIGh0dHBTdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgaGVhZGVyczogZXJyLnJlcT8uaGVhZGVyc1xuICB9KTtcbn0pO1xuXG4vLyBDT1JTIGNvbmZpZ3VyYXRpb25cbmFwcC51c2UoY29ycyh7XG4gIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IGZhbHNlXG4gICAgOiB0cnVlLFxuICBjcmVkZW50aWFsczogdHJ1ZVxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbih7IGxpbWl0OiAnMTBtYicgfSkpOyAvLyBBZGQgcGF5bG9hZCBzaXplIGxpbWl0XG5cbi8vIEVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcbmNvbnN0IGVycm9ySGFuZGxlciA9IChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIGVycm9yOicsIHtcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgIHVybDogcmVxLnVybCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICAvLyBNb25nb29zZSB2YWxpZGF0aW9uIGVycm9yc1xuICBpZiAoZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoZSA9PiAoe1xuICAgICAgZmllbGQ6IGUucGF0aCxcbiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3JzLFxuICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InXG4gICAgfSk7XG4gIH1cblxuICAvLyBNb25nb29zZSBkdXBsaWNhdGUga2V5IGVycm9yXG4gIGlmIChlcnIuY29kZSA9PT0gMTEwMDApIHtcbiAgICBjb25zdCBmaWVsZCA9IE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF07XG4gICAgY29uc3QgdmFsdWUgPSBlcnIua2V5VmFsdWVbZmllbGRdO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICBlcnJvcjogYCR7ZmllbGR9ICcke3ZhbHVlfScgYWxyZWFkeSBleGlzdHNgLFxuICAgICAgY29kZTogJ0RVUExJQ0FURV9FUlJPUidcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEpXVCBlcnJvcnNcbiAgaWYgKGVyci5uYW1lID09PSAnSnNvbldlYlRva2VuRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcbiAgICAgIGNvZGU6ICdJTlZBTElEX1RPS0VOJ1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGVyci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgY29kZTogJ1RPS0VOX0VYUElSRUQnXG4gICAgfSk7XG4gIH1cblxuICAvLyBEZWZhdWx0IHNlcnZlciBlcnJvclxuICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgcmVxdWVzdElkOiByZXEuaWQgfHwgJ3Vua25vd24nXG4gIH0pO1xufTtcblxuLy8gUmVxdWVzdCBsb2dnaW5nIG1pZGRsZXdhcmVcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcblxuICByZXMub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBsb2dnZXIuaW5mbyhgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9IC0gJHtyZXMuc3RhdHVzQ29kZX0gKCR7ZHVyYXRpb259bXMpYCwge1xuICAgICAgaXA6IHJlcS5pcCxcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpLFxuICAgICAgdXNlcjogcmVxLnVzZXI/Lm5pY2tuYW1lIHx8ICdhbm9ueW1vdXMnLFxuICAgICAgYm9keTogcmVxLm1ldGhvZCAhPT0gJ0dFVCcgPyBKU09OLnN0cmluZ2lmeShyZXEuYm9keSkgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSk7XG5cbiAgbmV4dCgpO1xufSk7XG5cbi8vIEpXVCBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlXG5jb25zdCBhdXRoZW50aWNhdGVUb2tlbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SQIEpXVCBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlIGNhbGxlZDonLCB7IHVybDogcmVxLnVybCwgbWV0aG9kOiByZXEubWV0aG9kIH0pO1xuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07IC8vIEJlYXJlciBUT0tFTlxuXG4gICAgY29uc29sZS5sb2coJ/CflJEgVG9rZW4gZXh0cmFjdGlvbiByZXN1bHQ6JywgeyBoYXNBdXRoSGVhZGVyOiAhIWF1dGhIZWFkZXIsIGhhc1Rva2VuOiAhIXRva2VuIH0pO1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBObyB0b2tlbiBwcm92aWRlZCcpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdBY2Nlc3MgdG9rZW4gcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnTk9fVE9LRU4nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gICAgY29uc29sZS5sb2coJ+KchSBKV1QgZGVjb2RlZDonLCB7IHVzZXJJZDogZGVjb2RlZC51c2VySWQsIG5pY2tuYW1lOiBkZWNvZGVkLm5pY2tuYW1lIH0pO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcklkKTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBVc2VyIG5vdCBmb3VuZCBpbiBEQiBmb3IgSldUIHVzZXJJZDonLCBkZWNvZGVkLnVzZXJJZCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyxcbiAgICAgICAgY29kZTogJ1VTRVJfTk9UX0ZPVU5EJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgIGNvbnNvbGUubG9nKCfinIUgSldUIGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSwgeyBpZDogdXNlci5faWQsIHN0YXR1czogdXNlci5zdGF0dXMgfSk7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci53YXJuKCdKV1QgYXV0aGVudGljYXRpb24gZmFpbGVkOicsIHtcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgaXA6IHJlcS5pcFxuICAgIH0pO1xuXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbiBmb3JtYXQnLFxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9UT0tFTl9GT1JNQVQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdUb2tlbiBoYXMgZXhwaXJlZCcsXG4gICAgICAgIGNvZGU6ICdUT0tFTl9FWFBJUkVEJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZCcsXG4gICAgICBjb2RlOiAnVE9LRU5fVkVSSUZJQ0FUSU9OX0ZBSUxFRCdcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gR2VuZXJhbCByYXRlIGxpbWl0aW5nIChhcHBsaWVkIHRvIGFsbCBIVFRQIHJlcXVlc3RzKVxuYXBwLnVzZShnZW5lcmFsUmF0ZUxpbWl0ZXIpO1xuXG4vLyBIZWxtZXQgc2VjdXJpdHkgaGVhZGVyc1xuYXBwLnVzZShcbiAgaGVsbWV0KHtcbiAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICAgIGRpcmVjdGl2ZXM6IHtcbiAgICAgICAgZGVmYXVsdFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgICBzdHlsZVNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCIsIFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbVwiXSxcbiAgICAgICAgZm9udFNyYzogW1wiJ3NlbGYnXCIsIFwiaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbVwiXSxcbiAgICAgICAgaW1nU3JjOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiXSxcbiAgICAgICAgc2NyaXB0U3JjOiBbXCInc2VsZidcIiwgXCIndW5zYWZlLWlubGluZSdcIl0sXG4gICAgICAgIGNvbm5lY3RTcmM6IFtcIidzZWxmJ1wiXVxuICAgICAgfVxuICAgIH0sXG4gICAgY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeTogZmFsc2VcbiAgfSlcbik7XG5cbi8vIFN3YWdnZXIgY29uZmlndXJhdGlvblxuY29uc3Qgc3dhZ2dlck9wdGlvbnMgPSB7XG4gIGRlZmluaXRpb246IHtcbiAgICBvcGVuYXBpOiAnMy4wLjAnLFxuICAgIGluZm86IHtcbiAgICAgIHRpdGxlOiAnQ2hhdC1KUyBBUEknLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUkVTVCBBUEkgZm9yIENoYXQtSlMgYXBwbGljYXRpb24gd2l0aCByZWFsLXRpbWUgbWVzc2FnaW5nIGFuZCB2b2ljZSBjaGFubmVscycsXG4gICAgICBjb250YWN0OiB7XG4gICAgICAgIG5hbWU6ICdDaGF0LUpTIFN1cHBvcnQnXG4gICAgICB9XG4gICAgfSxcbiAgICBzZXJ2ZXJzOiBbXG4gICAgICB7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGV2ZWxvcG1lbnQgc2VydmVyJ1xuICAgICAgfVxuICAgIF0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgc2NoZW1hczoge1xuICAgICAgICBVc2VyOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciB1bmlxdWUgaWRlbnRpZmllcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIG5pY2tuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9sZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydhZG1pbicsICdtZW1iZXInXSxcbiAgICAgICAgICAgICAgZGVmYXVsdDogJ21lbWJlcicsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciByb2xlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGNyZWF0aW9uIHRpbWVzdGFtcCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xhc3QgYWN0aXZpdHkgdGltZXN0YW1wJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydvbmxpbmUnLCAnb2ZmbGluZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgb25saW5lIHN0YXR1cydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3JvbGUnXVxuICAgICAgICB9LFxuICAgICAgICBDaGFubmVsOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB1bmlxdWUgaWRlbnRpZmllciAoYXV0by1nZW5lcmF0ZWQgZnJvbSBuYW1lKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGlzcGxheSBuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsndGV4dCcsICd2b2ljZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdHlwZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVkQnk6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRvciBuaWNrbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgcG9zaXRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydpZCcsICduYW1lJywgJ3R5cGUnLCAnY3JlYXRlZEJ5J11cbiAgICAgICAgfSxcbiAgICAgICAgUmVnaXN0ZXJSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmlja25hbWUnLCAnZW1haWwnLCAncGFzc3dvcmQnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSB1c2VybmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZW1haWwnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHBhc3N3b3JkJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgTG9naW5SZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnaWRlbnRpZmllcicsICdwYXNzd29yZCddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlcm5hbWUgb3IgZW1haWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBwYXNzd29yZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIEF1dGhSZXNwb25zZToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pXVCBhY2Nlc3MgdG9rZW4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIENoYW5uZWxSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmFtZScsICd0eXBlJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RleHQnLCAndm9pY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHR5cGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wdGlvbmFsIGNoYW5uZWwgZGVzY3JpcHRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBFcnJvclJlc3BvbnNlOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXJyb3IgbWVzc2FnZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBtc2c6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIHBhcmFtOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbjogeyB0eXBlOiAnc3RyaW5nJyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRpb24gZXJyb3JzIGFycmF5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlY3VyaXR5U2NoZW1lczoge1xuICAgICAgICBiZWFyZXJBdXRoOiB7XG4gICAgICAgICAgdHlwZTogJ2h0dHAnLFxuICAgICAgICAgIHNjaGVtZTogJ2JlYXJlcicsXG4gICAgICAgICAgYmVhcmVyRm9ybWF0OiAnSldUJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzZWN1cml0eTogW1xuICAgICAge1xuICAgICAgICBiZWFyZXJBdXRoOiBbXVxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgYXBpczogWycuL3NlcnZlci5qcyddIC8vIFBhdGggdG8gdGhlIEFQSSByb3V0ZXNcbn07XG5cbmNvbnN0IHN3YWdnZXJTcGVjID0gc3dhZ2dlckpzZG9jKHN3YWdnZXJPcHRpb25zKTtcblxuLy8gU3dhZ2dlciBVSSB3aXRoIENTUCBkaXNhYmxlZCBmb3IgdGhpcyByb3V0ZVxuYXBwLnVzZSgnL2FwaS1kb2NzJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIERpc2FibGUgQ1NQIGZvciBTd2FnZ2VyIFVJXG4gIHJlcy5yZW1vdmVIZWFkZXIoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5Jyk7XG4gIG5leHQoKTtcbn0sIHN3YWdnZXJVaS5zZXJ2ZSwgc3dhZ2dlclVpLnNldHVwKHN3YWdnZXJTcGVjKSk7XG5cbi8vIFN3YWdnZXIgSlNPTiBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS1kb2NzLmpzb24nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnJlbW92ZUhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knKTtcbiAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgcmVzLnNlbmQoc3dhZ2dlclNwZWMpO1xufSk7XG5cbi8vIERldmVsb3BtZW50IGFuZCB0ZXN0IGVuZHBvaW50IHRvIHJlc2V0IHJhdGUgbGltaXRpbmdcbmFwcC5wb3N0KCcvYXBpL3Jlc2V0LXJhdGVsaW1pdCcsIChyZXEsIHJlcykgPT4ge1xuICAvLyBJbiBhIHJlYWwgYXBwbGljYXRpb24sIHlvdSdkIHdhbnQgdG8gZ2V0IHRoZSBzdG9yZSBmcm9tIHRoZSBsaW1pdGVyIGluc3RhbmNlXG4gIC8vIEZvciBleHByZXNzLXJhdGUtbGltaXQgdjcrLCB5b3UgY2FuIGFjY2VzcyB0aGUgc3RvcmUgbGlrZSB0aGlzOlxuICB0cnkge1xuICAgIGNvbnN0IGF1dGhMaW1pdGVyU3RvcmUgPSBhdXRoUmF0ZUxpbWl0ZXIuc3RvcmU7XG4gICAgaWYgKGF1dGhMaW1pdGVyU3RvcmUgJiYgdHlwZW9mIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJhdGUgbGltaXRpbmcgcmVzZXQgZm9yIHRlc3RpbmcgcHVycG9zZXMnKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1JhdGUgbGltaXRpbmcgaGFzIGJlZW4gcmVzZXQnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBzdG9yZSBkb2Vzbid0IGV4cG9zZSByZXNldEFsbCwgY3JlYXRlIGEgdGVtcG9yYXJ5IHdvcmthcm91bmRcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUmF0ZSBsaW1pdGVyIHN0b3JlIGRvZXNuXFwndCBzdXBwb3J0IHJlc2V0QWxsIC0gcmF0ZSBsaW1pdGluZyB3aWxsIGV4cGlyZSBuYXR1cmFsbHknKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdDYW5ub3QgcmVzZXQgcmF0ZSBsaW1pdGluZyBhdXRvbWF0aWNhbGx5LCB3YWl0IGZvciB0aW1lb3V0JyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciByZXNldHRpbmcgcmF0ZSBsaW1pdGluZzonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byByZXNldCByYXRlIGxpbWl0aW5nJyB9KTtcbiAgfVxufSk7XG5cbi8vIEhlYWx0aCBjaGVjayBlbmRwb2ludFxuYXBwLmdldCgnL2hlYWx0aCcsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXB0aW1lOiBwcm9jZXNzLnVwdGltZSgpXG4gIH0pO1xufSk7XG5cbi8vIExvZyBtaWRkbGV3YXJlIHRvIGNoZWNrIGluY29taW5nIHJlcXVlc3RzXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuaW5mbyhg8J+UjSBJbmNvbWluZyByZXF1ZXN0OiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICBoZWFkZXJzOiByZXEuaGVhZGVyc1xuICB9KTtcbiAgbmV4dCgpO1xufSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAgICogQHN3YWdnZXJcbiAgICogL2FwaS9sb2dpbjpcbiAgICogICBwb3N0OlxuICAgKiAgICAgdGFnczpcbiAgICogICAgICAgLSBBdXRoZW50aWNhdGlvblxuICAgKiAgICAgc3VtbWFyeTogTG9naW4gZXhpc3RpbmcgdXNlclxuICAgKiAgICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0ZXMgYW5kIGxvZ3MgaW4gYW4gZXhpc3RpbmcgdXNlciB3aXRoIEpXVCB0b2tlblxuICAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAqICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgICogICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0xvZ2luUmVxdWVzdCdcbiAgICogICAgIHJlc3BvbnNlczpcbiAgICogICAgICAgMjAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMb2dpbiBzdWNjZXNzZnVsXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQXV0aFJlc3BvbnNlJ1xuICAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICAqICAgICAgICAgICAgICAgdXNlcjpcbiAgICogICAgICAgICAgICAgICAgIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICAqICAgICAgICAgICAgICAgICBlbWFpbDogXCJqb2huQGV4YW1wbGUuY29tXCJcbiAgICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAgICogICAgICAgNDAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnZhbGlkIGNyZWRlbnRpYWxzIG9yIHZhbGlkYXRpb24gZXJyb3JzXG4gICAqICAgICAgICAgY29udGVudDpcbiAgICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAgICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgICogICAgICAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCJcbiAgICogICAgICAgNTAwOlxuICAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgICovXG5jb25zb2xlLmxvZygn8J+UpyBQT1NUIC9hcGkvbG9naW4gcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAucG9zdCgnL2FwaS9sb2dpbicsIFtcbiAgYm9keSgnaWRlbnRpZmllcicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwIH0pLnRyaW0oKSxcbiAgYm9keSgncGFzc3dvcmQnKS5pc0xlbmd0aCh7IG1pbjogNiwgbWF4OiAxMDAgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SRIEluY29taW5nIGxvZ2luIHJlcXVlc3Q6JywgeyBpZGVudGlmaWVyOiByZXEuYm9keS5pZGVudGlmaWVyLCBoYXNQYXNzd29yZDogISFyZXEuYm9keS5wYXNzd29yZCwgaXA6IHJlcS5pcCB9KTtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIExvZ2luIHZhbGlkYXRpb24gZXJyb3JzOicsIGVycm9ycy5hcnJheSgpKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZGVudGlmaWVyLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gU2VhcmNoaW5nIGZvciB1c2VyIHdpdGggaWRlbnRpZmllcjonLCBpZGVudGlmaWVyKTtcblxuICAgIC8vIEZpbmQgdXNlciBieSBuaWNrbmFtZSBvciBlbWFpbFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgJG9yOiBbeyBuaWNrbmFtZTogaWRlbnRpZmllciB9LCB7IGVtYWlsOiBpZGVudGlmaWVyIH1dXG4gICAgfSk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgVXNlciBub3QgZm91bmQ6JywgaWRlbnRpZmllcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfinIUgVXNlciBmb3VuZDonLCB7IG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLCBlbWFpbDogdXNlci5lbWFpbCwgc3RhdHVzOiB1c2VyLnN0YXR1cyB9KTtcblxuICAgIC8vIENvbXBhcmUgcGFzc3dvcmRcbiAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCB1c2VyLmNvbXBhcmVQYXNzd29yZChwYXNzd29yZCk7XG4gICAgY29uc29sZS5sb2coJ/CflJEgUGFzc3dvcmQgdmFsaWRhdGlvbiByZXN1bHQ6JywgaXNQYXNzd29yZFZhbGlkKTtcblxuICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIEludmFsaWQgcGFzc3dvcmQgZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH0pO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBvbmxpbmVcbiAgICB1c2VyLnN0YXR1cyA9ICdvbmxpbmUnO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXG4gICAgY29uc29sZS5sb2coJ/CflI8gR2VuZXJhdGluZyBKV1QgdG9rZW4gZm9yIHVzZXI6JywgdXNlci5uaWNrbmFtZSk7XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgIHsgdXNlcklkOiB1c2VyLl9pZCwgbmlja25hbWU6IHVzZXIubmlja25hbWUsIHJvbGU6IHVzZXIucm9sZSB9LFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIEpXVCB0b2tlbiBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciBsb2dnZWQgaW46ICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFNlbmRpbmcgbG9naW4gcmVzcG9uc2UnKTtcbiAgICByZXMuanNvbih7XG4gICAgICB0b2tlbixcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignTG9naW4gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGxvZ2luJyB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICAgKiBAc3dhZ2dlclxuICAgKiAvYXBpL3JlZ2lzdGVyOlxuICAqICAgcG9zdDpcbiAgKiAgICAgdGFnczpcbiAgKiAgICAgICAtIEF1dGhlbnRpY2F0aW9uXG4gICogICAgIHN1bW1hcnk6IFJlZ2lzdGVyIG5ldyB1c2VyXG4gICogICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgcmV0dXJucyBKV1QgdG9rZW5cbiAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgKiAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9SZWdpc3RlclJlcXVlc3QnXG4gICogICAgICAgICAgIGV4YW1wbGU6XG4gICogICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAqICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgIHBhc3N3b3JkOiBcInNlY3VyZVBhc3MxMjNcIlxuICAqICAgICByZXNwb25zZXM6XG4gICogICAgICAgMjAxOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsXG4gICogICAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9BdXRoUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICogICAgICAgICAgICAgICB1c2VyOlxuICAqICAgICAgICAgICAgICAgICBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICogICAgICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gICogICAgICAgNDAwOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFZhbGlkYXRpb24gZXJyb3JzIG9yIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIGVycm9yOiBcIk5pY2tuYW1lIGFscmVhZHkgdGFrZW5cIlxuICAqICAgICAgIDUwMDpcbiAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgKi9cbmFwcC5wb3N0KCcvYXBpL3JlZ2lzdGVyJywgYXV0aFJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ25pY2tuYW1lJykuaXNMZW5ndGgoeyBtaW46IDMsIG1heDogNTAgfSkudHJpbSgpLmVzY2FwZSgpLFxuICBib2R5KCdlbWFpbCcpLmlzRW1haWwoKS5ub3JtYWxpemVFbWFpbCgpLFxuICBib2R5KCdwYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA2IH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAkb3I6IFt7IG5pY2tuYW1lIH0sIHsgZW1haWwgfV1cbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIGNvbnN0IGNvbmZsaWN0RmllbGQgPSBleGlzdGluZ1VzZXIubmlja25hbWUgPT09IG5pY2tuYW1lID8gJ25pY2tuYW1lJyA6ICdlbWFpbCc7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBjb25mbGljdEZpZWxkID09PSAnbmlja25hbWUnID8gJ05pY2tuYW1lIGFscmVhZHkgdGFrZW4nIDogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZCc7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB1c2VyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHsgbmlja25hbWUsIGVtYWlsLCBwYXNzd29yZCwgcm9sZTogJ21lbWJlcicsIHN0YXR1czogJ29ubGluZScgfSk7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBjb25zb2xlLmxvZygnSldUX1NFQ1JFVCBwcmVzZW50OicsICEhcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgIHsgdXNlcklkOiB1c2VyLl9pZCwgbmlja25hbWU6IHVzZXIubmlja25hbWUsIHJvbGU6IHVzZXIucm9sZSB9LFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9XG4gICAgKTtcblxuICAgIGNvbnNvbGUubG9nKCdKV1QgdG9rZW4gZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIGxvZ2dlci5pbmZvKGBVc2VyIHJlZ2lzdGVyZWQ6ICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHRva2VuLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgcm9sZTogdXNlci5yb2xlXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdSZWdpc3RyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIHJlZ2lzdHJhdGlvbicgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL2NoYW5uZWxzOlxuICogICBnZXQ6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gQ2hhbm5lbHNcbiAqICAgICBzdW1tYXJ5OiBHZXQgbGlzdCBvZiBjaGFubmVsc1xuICogICAgIGRlc2NyaXB0aW9uOiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgY2hhbm5lbHNcbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMaXN0IG9mIGNoYW5uZWxzXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWwnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICAtIGlkOiBcImdlbmVyYWxcIlxuICogICAgICAgICAgICAgICAgIG5hbWU6IFwiR2VuZXJhbFwiXG4gKiAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIlxuICogICAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogXCJzeXN0ZW1cIlxuICogICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAwXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVbmF1dGhvcml6ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGVycm9yOiBcIkFjY2VzcyB0b2tlbiByZXF1aXJlZFwiXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcbiAqL1xuY29uc29sZS5sb2coJ/CflKcgR0VUIC9hcGkvY2hhbm5lbHMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAuZ2V0KCcvYXBpL2NoYW5uZWxzJywgYXV0aGVudGljYXRlVG9rZW4sIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfmoAgR0VUIC9hcGkvY2hhbm5lbHMgZW5kcG9pbnQgY2FsbGVkJywgeyBtZXRob2Q6IHJlcS5tZXRob2QsIHVybDogcmVxLnVybCwgaGVhZGVyczogcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA/ICdhdXRoIGhlYWRlciBwcmVzZW50JyA6ICdubyBhdXRoIGhlYWRlcicgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCBDaGFubmVsLmZpbmQoe30pXG4gICAgICAuc2VsZWN0KCctX2lkIGlkIG5hbWUgdHlwZSBkZXNjcmlwdGlvbiBjcmVhdGVkQnkgcG9zaXRpb24nKVxuICAgICAgLnNvcnQoeyBwb3NpdGlvbjogMSB9KTtcblxuICAgIGxvZ2dlci5pbmZvKGBDaGFubmVscyBsaXN0IHJlcXVlc3RlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVscy5sZW5ndGhcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFJldHVybmluZyBjaGFubmVscyBkYXRhOicsIGNoYW5uZWxzLmxlbmd0aCk7XG4gICAgcmVzLmpzb24oY2hhbm5lbHMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hhbm5lbHM6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBHRVQgL2FwaS9jaGFubmVsczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGNoYW5uZWxzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbmNvbnNvbGUubG9nKCfwn5SnIFBPU1QgL2FwaS9jaGFubmVscyByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS9jaGFubmVsczpcbiAqICAgcG9zdDpcbiAqICAgICB0YWdzOlxuICogICAgICAgLSBDaGFubmVsc1xuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIG5ldyBjaGFubmVsXG4gKiAgICAgZGVzY3JpcHRpb246IENyZWF0ZXMgYSBuZXcgdGV4dCBvciB2b2ljZSBjaGFubmVsXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbFJlcXVlc3QnXG4gKiAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgIG5hbWU6IFwiTmV3Q2hhbm5lbFwiXG4gKiAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRGVzY3JpcHRpb24gb2YgdGhlIG5ldyBjaGFubmVsXCJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBDaGFubmVsIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWwnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBpZDogXCJuZXdjaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgbmFtZTogXCJOZXdDaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRGVzY3JpcHRpb24gb2YgdGhlIG5ldyBjaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBcImpvaG5fZG9lXCJcbiAqICAgICAgICAgICAgICAgcG9zaXRpb246IDEwXG4gKiAgICAgICA0MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnZhbGlkIHJlcXVlc3QgZGF0YVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICA0MDk6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBDaGFubmVsIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICovXG5hcHAucG9zdCgnL2FwaS9jaGFubmVscycsIGF1dGhlbnRpY2F0ZVRva2VuLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCduYW1lJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogMTAwIH0pLnRyaW0oKS5lc2NhcGUoKSxcbiAgYm9keSgndHlwZScpLmlzSW4oWyd0ZXh0JywgJ3ZvaWNlJ10pLnRyaW0oKSxcbiAgYm9keSgnZGVzY3JpcHRpb24nKS5vcHRpb25hbCgpLmlzTGVuZ3RoKHsgbWF4OiA1MDAgfSkudHJpbSgpXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmFtZSwgdHlwZSwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGNyZWF0ZWRCeSA9IHJlcS51c2VyLm5pY2tuYW1lO1xuXG4gICAgLy8gQ3JlYXRlIG5ldyBjaGFubmVsIChJRCB3aWxsIGJlIGF1dG8tZ2VuZXJhdGVkIGluIHByZS1zYXZlIG1pZGRsZXdhcmUpXG4gICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQnlcbiAgICB9KTtcblxuICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYENoYW5uZWwgJyR7bmFtZX0nIGNyZWF0ZWQgYnkgJHtjcmVhdGVkQnl9YCwge1xuICAgICAgY2hhbm5lbElkOiBjaGFubmVsLmlkLFxuICAgICAgdHlwZSxcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBpZDogY2hhbm5lbC5pZCxcbiAgICAgIG5hbWU6IGNoYW5uZWwubmFtZSxcbiAgICAgIHR5cGU6IGNoYW5uZWwudHlwZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBjaGFubmVsLmRlc2NyaXB0aW9uLFxuICAgICAgY3JlYXRlZEJ5OiBjaGFubmVsLmNyZWF0ZWRCeSxcbiAgICAgIHBvc2l0aW9uOiBjaGFubmVsLnBvc2l0aW9uXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNoYW5uZWw6JywgZXJyb3IpO1xuXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgY2hhbm5lbCBkYXRhJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0NoYW5uZWwgbmFtZSBhbHJlYWR5IGV4aXN0cycsXG4gICAgICAgIGNvZGU6ICdEVVBMSUNBVEVfQ0hBTk5FTCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBjaGFubmVsJyxcbiAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIDQwNCBoYW5kbGVyIChtdXN0IGJlIGJlZm9yZSBnbG9iYWwgZXJyb3IgaGFuZGxlcilcbmFwcC51c2UoKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUud2Fybign4p2MIEZpbmFsIDQwNCBoYW5kbGVyIGV4ZWN1dGVkIC0gcm91dGUgbm90IGZvdW5kIScsIHsgbWV0aG9kOiByZXEubWV0aG9kLCB1cmw6IHJlcS51cmwgfSk7XG4gIGxvZ2dlci53YXJuKGA0MDQgLSAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgZXJyb3I6ICdFbmRwb2ludCBub3QgZm91bmQnLFxuICAgIHBhdGg6IHJlcS51cmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGNvZGU6ICdOT1RfRk9VTkQnXG4gIH0pO1xufSk7XG5cbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlIChtdXN0IGJlIGxhc3QpXG5hcHAudXNlKGVycm9ySGFuZGxlcik7XG5cblxuXG5cblxuXG5cblxuXG4vLyBHbG9iYWwgdXNlcnMgbWFwIGZvciBzb2NrZXQgbWFuYWdlbWVudCB7c29ja2V0SWQ6IHt1c2VySWQsIG5pY2tuYW1lLCByb29tfX1cbmxldCBvbmxpbmVVc2VycyA9IG5ldyBNYXAoKTtcblxuLy8gVXNlciBjb25uZWN0aW9uIGNvdW50ZXIge3VzZXJJZDogY29ubmVjdGlvbkNvdW50fVxubGV0IHVzZXJDb25uZWN0aW9ucyA9IG5ldyBNYXAoKTtcblxuLy8gVm9pY2UgY2hhbm5lbHMgbWFuYWdlbWVudFxuY29uc3Qgdm9pY2VDaGFubmVscyA9IG5ldyBNYXAoKTsgLy8gY2hhbm5lbElkIC0+IHsgc29ja2V0SWQ6IHsgcGVlckNvbm5lY3Rpb24sIHN0cmVhbSB9IH1cblxuaW8udXNlKGFzeW5jIChzb2NrZXQsIG5leHQpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBzb2NrZXQuaGFuZHNoYWtlLmF1dGgudG9rZW47XG4gIGNvbnNvbGUubG9nKCfwn5SRIFNvY2tldCBhdXRoZW50aWNhdGlvbiBhdHRlbXB0LCB0b2tlbiBwcmVzZW50OicsICEhdG9rZW4pO1xuXG4gIGlmICghdG9rZW4pIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IE5vIHRva2VuIHByb3ZpZGVkJyk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdBdXRoZW50aWNhdGlvbiB0b2tlbiByZXF1aXJlZCcpKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcklkKTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgU29ja2V0IGF1dGggc3VjY2VzczogJHtkZWNvZGVkLm5pY2tuYW1lfSwgdXNlciBmb3VuZDogJHshIXVzZXJ9YCk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogVXNlciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKSk7XG4gICAgfVxuXG4gICAgLy8gTm90ZTogUmVtb3ZlZCBvZmZsaW5lIHN0YXR1cyBjaGVjayBhcyB1c2VycyBzaG91bGQgYmUgYWJsZSB0byBjb25uZWN0IGV2ZW4gaWYgbWFya2VkIG9mZmxpbmVcbiAgICAvLyBTdGF0dXMgbWFuYWdlbWVudCBpcyBoYW5kbGVkIGR1cmluZyBjb25uZWN0aW9uIHRyYWNraW5nIGJlbG93XG5cbiAgICAvLyBIYW5kbGUgdXNlciBzdGF0dXMgdXBkYXRlIGJhc2VkIG9uIGNvbm5lY3Rpb24gY291bnRcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcklkID0gZGVjb2RlZC51c2VySWQ7XG4gICAgICBjb25zdCBjb25uZWN0aW9uQ291bnQgPSB1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXJJZCkgfHwgMDtcbiAgICAgIGNvbnN0IG5ld0Nvbm5lY3Rpb25Db3VudCA9IGNvbm5lY3Rpb25Db3VudCArIDE7XG4gICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q29ubmVjdGlvbkNvdW50KTtcblxuICAgICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIHdpdGggY29ubmVjdGlvbiBjb3VudCB0cmFja2luZ1xuICAgICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IF9pZDogdXNlcklkIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ld0Nvbm5lY3Rpb25Db3VudCA+IDAgPyAnb25saW5lJyA6ICdvZmZsaW5lJyxcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgICAgcnVuVmFsaWRhdG9yczogdHJ1ZVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAodXBkYXRlUmVzdWx0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFNvY2tldCBhdXRoOiBVc2VyICR7dXNlci5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvbmxpbmUgKGNvbm5lY3Rpb25zOiAke25ld0Nvbm5lY3Rpb25Db3VudH0pYCk7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHN0YXR1cyB1cGRhdGVkIHRvIG9ubGluZSB2aWEgc29ja2V0IGF1dGhgLCB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgICAgY29ubmVjdGlvbnM6IG5ld0Nvbm5lY3Rpb25Db3VudCxcbiAgICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gT3ZlcnJpZGUgbG9jYWwgdXNlciBvYmplY3Qgd2l0aCB1cGRhdGVkIGRhdGFcbiAgICAgIHVzZXIuc3RhdHVzID0gdXBkYXRlUmVzdWx0ID8gdXBkYXRlUmVzdWx0LnN0YXR1cyA6ICdvbmxpbmUnO1xuICAgICAgdXNlci5sYXN0QWN0aXZlID0gdXBkYXRlUmVzdWx0ID8gdXBkYXRlUmVzdWx0Lmxhc3RBY3RpdmUgOiBuZXcgRGF0ZSgpO1xuXG4gICAgfSBjYXRjaCAoc3RhdHVzVXBkYXRlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBTb2NrZXQgYXV0aDogRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIHN0YXR1cyBmb3IgJHt1c2VyLm5pY2tuYW1lfTpgLCBzdGF0dXNVcGRhdGVFcnJvci5tZXNzYWdlKTtcbiAgICAgIGxvZ2dlci5lcnJvcihgU3RhdHVzIHVwZGF0ZSBmYWlsZWQgZHVyaW5nIHNvY2tldCBhdXRoYCwge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGVycm9yOiBzdGF0dXNVcGRhdGVFcnJvci5tZXNzYWdlLFxuICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkXG4gICAgICB9KTtcblxuICAgICAgLy8gRG9uJ3QgZmFpbCBhdXRoIGR1ZSB0byBzdGF0dXMgdXBkYXRlIGVycm9yIC0gcHJvY2VlZCB3aXRoIGRlZmF1bHQgb25saW5lIHN0YXR1c1xuICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBTb2NrZXQgYXV0aDogUHJvY2VlZGluZyB3aXRoIG9ubGluZSBzdGF0dXMgZGVzcGl0ZSB1cGRhdGUgZmFpbHVyZWApO1xuICAgICAgdXNlci5zdGF0dXMgPSAnb25saW5lJztcbiAgICAgIHVzZXIubGFzdEFjdGl2ZSA9IG5ldyBEYXRlKCk7XG4gICAgfVxuXG4gICAgc29ja2V0LnVzZXJJZCA9IGRlY29kZWQudXNlcklkO1xuICAgIHNvY2tldC5uaWNrbmFtZSA9IGRlY29kZWQubmlja25hbWU7XG4gICAgc29ja2V0LnJvbGUgPSBkZWNvZGVkLnJvbGU7XG4gICAgY29uc29sZS5sb2coYPCfjokgU29ja2V0IGZ1bGx5IGF1dGhlbnRpY2F0ZWQ6ICR7c29ja2V0Lm5pY2tuYW1lfWApO1xuICAgIHJldHVybiBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xuXG4gICAgaWYgKGVyci5uYW1lID09PSAnSnNvbldlYlRva2VuRXJyb3InKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ludmFsaWQgYXV0aGVudGljYXRpb24gdG9rZW4nKSk7XG4gICAgfVxuXG4gICAgaWYgKGVyci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHRva2VuIGhhcyBleHBpcmVkJykpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZmFpbGVkJykpO1xuICB9XG59KTtcblxuLyoqXG4gKiBDbGVhbnVwIGluYWN0aXZlIGNvbm5lY3Rpb25zIGJhc2VkIG9uIGhlYXJ0YmVhdFxuICovXG5mdW5jdGlvbiBjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucygpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgdGltZW91dCA9IDYwMDAwOyAvLyA2MCBzZWNvbmRzIHRpbWVvdXRcblxuICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgdXNlcl0gb2Ygb25saW5lVXNlcnMuZW50cmllcygpKSB7XG4gICAgaWYgKG5vdyAtIHVzZXIubGFzdEhlYXJ0YmVhdCA+IHRpbWVvdXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuc2luZyBkZWFkIGNvbm5lY3Rpb24gZm9yIHVzZXIgJHt1c2VyLm5pY2tuYW1lfWApO1xuXG4gICAgICAvLyBGb3JjZSBkaXNjb25uZWN0IHNvY2tldFxuICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgIHNvY2tldC5kaXNjb25uZWN0KHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdXNlciBjb25uZWN0aW9ucyBjb3VudFxuICAgICAgY29uc3QgY29ubmVjdGlvbnNMZWZ0ID0gKHVzZXJDb25uZWN0aW9ucy5nZXQodXNlci51c2VySWQpIHx8IDApIC0gMTtcbiAgICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlci51c2VySWQsIE1hdGgubWF4KDAsIGNvbm5lY3Rpb25zTGVmdCkpO1xuXG4gICAgICAvLyBTZXQgc3RhdHVzIHRvIG9mZmxpbmUgaWYgbGFzdCBjb25uZWN0aW9uXG4gICAgICBpZiAoY29ubmVjdGlvbnNMZWZ0IDw9IDApIHtcbiAgICAgICAgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VyLnVzZXJJZCwge1xuICAgICAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3RhdHVzIG9uIGNsZWFudXA6JywgZXJyKSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3VzZXIubmlja25hbWV9IHN0YXR1cyBzZXQgdG8gb2ZmbGluZSAoZGVhZCBjb25uZWN0aW9uKWApO1xuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgZHVlIHRvIGRlYWQgY29ubmVjdGlvbmAsIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIudXNlcklkLFxuICAgICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXRJZFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgb25saW5lVXNlcnMuZGVsZXRlKHNvY2tldElkKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUnVuIGNsZWFudXAgZXZlcnkgMzAgc2Vjb25kcyAtIERJU0FCTEVEIGZvciB0ZXN0IGVudmlyb25tZW50XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0Jykge1xuICBzZXRJbnRlcnZhbChjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucywgMzAwMDApO1xufVxuXG5pby5vbignY29ubmVjdGlvbicsIGFzeW5jIChzb2NrZXQpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfmoAgU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcbiAgY29uc29sZS5sb2coYPCfkaQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gY29ubmVjdGVkYCk7XG5cbiAgLy8gVHJhY2sgb25saW5lIHVzZXJcbiAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwge1xuICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgIHJvbGU6IHNvY2tldC5yb2xlLFxuICAgIHJvb206IG51bGwsXG4gICAgbGFzdEhlYXJ0YmVhdDogRGF0ZS5ub3coKVxuICB9KTtcblxuICAvLyBMb2cgY3VycmVudCBhY3RpdmUgY29ubmVjdGlvbnMgY291bnRcbiAgY29uc29sZS5sb2coYPCfk4ogQWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfSAtIGF1dGggc3VjY2VzcyBmb3IgJHtzb2NrZXQubmlja25hbWV9YCk7XG5cbiAgLy8gSGVhcnRiZWF0IG1lY2hhbmlzbVxuICBzb2NrZXQub24oJ2hlYXJ0YmVhdCcsICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gb25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHVzZXIubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+SkyBIZWFydGJlYXQgcmVjZWl2ZWQgZnJvbSB1c2VyICR7c29ja2V0Lm5pY2tuYW1lfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVXBkYXRlIGhlYXJ0YmVhdCBvbiB1c2VyIGFjdGl2aXR5XG4gIGNvbnN0IHVwZGF0ZUhlYXJ0YmVhdCA9ICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gb25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHVzZXIubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgfVxuICB9O1xuXG4gIHNvY2tldC5vbignam9pbl9yb29tJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBjb25zdCB7IHJvb20gfSA9IGRhdGE7XG4gICAgaWYgKCFyb29tKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogTm8gcm9vbSBzcGVjaWZpZWQnLCB7XG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdSb29tIG5hbWUgaXMgcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnTUlTU0lOR19ST09NJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygcm9vbSAhPT0gJ3N0cmluZycgfHwgcm9vbS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogSW52YWxpZCByb29tIGZvcm1hdCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICByb29tXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgcm9vbSBuYW1lIGZvcm1hdCcsXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX1JPT01fRk9STUFUJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZnkgY2hhbm5lbCBleGlzdHNcbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBDaGFubmVsLmZpbmRPbmUoeyBpZDogcm9vbSB9KTtcbiAgICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogQ2hhbm5lbCBub3QgZm91bmQnLCB7XG4gICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgcm9vbVxuICAgICAgICB9KTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6IGBDaGFubmVsICcke3Jvb219JyBub3QgZm91bmRgLFxuICAgICAgICAgIGNvZGU6ICdDSEFOTkVMX05PVF9GT1VORCcsXG4gICAgICAgICAgcm9vbSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBMZWF2ZSBwcmV2aW91cyByb29tXG4gICAgICBpZiAoc29ja2V0LnJvb20pIHtcbiAgICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tKTtcbiAgICAgICAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwgeyAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSwgcm9vbTogbnVsbCB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgb25saW5lIHVzZXJzIGluIHByZXZpb3VzIHJvb21cbiAgICAgICAgY29uc3QgcHJldmlvdXNSb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHByZXZpb3VzUm9vbVVzZXJzKTtcbiAgICAgIH1cblxuICAgICAgc29ja2V0LnJvb20gPSByb29tO1xuICAgICAgc29ja2V0LmpvaW4oc29ja2V0LnJvb20pO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlciB0cmFja2luZ1xuICAgICAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwge1xuICAgICAgICAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb21cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHJvb20gJHtzb2NrZXQucm9vbX1gKTtcblxuICAgICAgLy8gU2VuZCBzeXN0ZW0gbWVzc2FnZSBhYm91dCBqb2luaW5nXG4gICAgICBjb25zdCBqb2luTWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiAnU3lzdGVtJyxcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgIHRleHQ6IGAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHRoZSBjaGFubmVsLmAsXG4gICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGpvaW5NZXNzYWdlLnNhdmUoKTtcblxuICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgIGF1dGhvcjogam9pbk1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICBjaGFubmVsOiBqb2luTWVzc2FnZS5jaGFubmVsLFxuICAgICAgICB0ZXh0OiBqb2luTWVzc2FnZS50ZXh0LFxuICAgICAgICB0eXBlOiBqb2luTWVzc2FnZS50eXBlLFxuICAgICAgICB0aW1lc3RhbXA6IGpvaW5NZXNzYWdlLnRpbWVzdGFtcFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlbmQgb25saW5lIHVzZXJzIGluIGN1cnJlbnQgcm9vbVxuICAgICAgY29uc3Qgcm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCByb29tVXNlcnMpO1xuXG4gICAgICAvLyBTZW5kIG1lc3NhZ2UgaGlzdG9yeVxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAkb3I6IFtcbiAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnc3lzdGVtJyB9LFxuICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxMDApXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgYXV0aG9yOiBtc2cuYXV0aG9yLFxuICAgICAgICByb29tOiBtc2cuY2hhbm5lbCxcbiAgICAgICAgdGV4dDogbXNnLnRleHQsXG4gICAgICAgIHR5cGU6IG1zZy50eXBlLFxuICAgICAgICB0YXJnZXQ6IG1zZy50YXJnZXQsXG4gICAgICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcFxuICAgICAgfSkpKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGpvaW5fcm9vbTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiByb29tJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIExvYWQgaGlzdG9yeSAoZmFsbGJhY2ssIGlmIG5lZWRlZClcbiAgc29ja2V0Lm9uKCdnZXRfaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNvY2tldC5yb29tKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIFtdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAkb3I6IFtcbiAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnc3lzdGVtJyB9LFxuICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxMDApXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgYXV0aG9yOiBtc2cuYXV0aG9yLFxuICAgICAgICByb29tOiBtc2cuY2hhbm5lbCwgLy8gVXNpbmcgY2hhbm5lbCBpbnN0ZWFkIG9mIHJvb20gZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgIHRleHQ6IG1zZy50ZXh0LFxuICAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtc2cudGFyZ2V0LFxuICAgICAgICB0aW1lc3RhbXA6IG1zZy50aW1lc3RhbXBcbiAgICAgIH0pKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2FkIG1lc3NhZ2UgaGlzdG9yeScgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQdWJsaWMgbWVzc2FnZVxuICBzb2NrZXQub24oJ21lc3NhZ2UnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGlmICghc29ja2V0LnJvb20gfHwgIWRhdGEudGV4dD8udHJpbSgpKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiBkYXRhLnRleHQudHJpbSgpLFxuICAgICAgICB0eXBlOiAncHVibGljJ1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLCAvLyBLZWVwaW5nICdyb29tJyBmb3IgZnJvbnRlbmQgY29tcGF0aWJpbGl0eVxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHN0YXR1czogJ2RlbGl2ZXJlZCcsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZVxuICAgICAgfTtcblxuICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICBsb2dnZXIuZGVidWcoYE1lc3NhZ2Ugc2F2ZWQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gaW4gJHtzb2NrZXQucm9vbX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzYXZpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFByaXZhdGUgbWVzc2FnZVxuICBzb2NrZXQub24oJ3ByaXZhdGVfbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQucm9vbSB8fCAhZGF0YS50byB8fCAhZGF0YS50ZXh0Py50cmltKCkpIHJldHVybjtcblxuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gZGF0YS50ZXh0LnRyaW0oKTtcbiAgICBjb25zdCB0YXJnZXROaWNrbmFtZSA9IGRhdGEudG8udHJpbSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIGF0dGVtcHQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gdG8gJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBzZW5kZXJTb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0YXJnZXQgbmlja25hbWUgZm9ybWF0XG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUubGVuZ3RoID09PSAwIHx8IHRhcmdldE5pY2tuYW1lLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0YXJnZXQgdXNlciBuaWNrbmFtZScsXG4gICAgICAgICAgY29kZTogJ0lOVkFMSURfVEFSR0VUX05JQ0tOQU1FJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IHNlbGYtbWVzc2FnaW5nXG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUgPT09IHNvY2tldC5uaWNrbmFtZSkge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBzZW5kIHByaXZhdGUgbWVzc2FnZSB0byB5b3Vyc2VsZicsXG4gICAgICAgICAgY29kZTogJ1NFTEZfTUVTU0FHRV9OT1RfQUxMT1dFRCdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0YXJnZXQgdXNlciBpbiBzYW1lIHJvb20gd2l0aCBkZXRhaWxlZCBsb2dnaW5nXG4gICAgICBjb25zdCB0YXJnZXRVc2VyID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSkuZmluZChcbiAgICAgICAgdSA9PiB1Lm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZSAmJiB1LnJvb20gPT09IHNvY2tldC5yb29tXG4gICAgICApO1xuXG4gICAgICBsb2dnZXIuZGVidWcoYFByaXZhdGUgbWVzc2FnZSB0YXJnZXQgc2VhcmNoIHJlc3VsdCBmb3IgJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHRhcmdldEZvdW5kOiAhIXRhcmdldFVzZXIsXG4gICAgICAgIHRhcmdldFJvb206IHRhcmdldFVzZXI/LnJvb20sXG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBvbmxpbmVVc2Vyc0luUm9vbTogQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvb206IHUucm9vbSB9KSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXRhcmdldFVzZXIpIHtcbiAgICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgbWVzc2FnZSB3aXRoIG1vcmUgY29udGV4dFxuICAgICAgICBjb25zdCBvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbSA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+IHUubmlja25hbWUpO1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBgVXNlciAnJHt0YXJnZXROaWNrbmFtZX0nIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBjaGFubmVsLiBBdmFpbGFibGUgdXNlcnM6ICR7b25saW5lVXNlcnNJblNlbmRlclJvb20uam9pbignLCAnKSB8fCAnbm9uZSd9YCxcbiAgICAgICAgICBjb2RlOiAnVEFSR0VUX1VTRVJfTk9UX0lOX1JPT00nLFxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgICAgYXZhaWxhYmxlVXNlcnM6IG9ubGluZVVzZXJzSW5TZW5kZXJSb29tLFxuICAgICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBtZXNzYWdlIG9iamVjdFxuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiB0cmltbWVkVGV4dCxcbiAgICAgICAgdHlwZTogJ3ByaXZhdGUnLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5pY2tuYW1lXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtZXNzYWdlLnRhcmdldCxcbiAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJ1xuICAgICAgfTtcblxuICAgICAgLy8gU2VuZCB0byB0YXJnZXQgdXNlciB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICBjb25zdCB0YXJnZXRTb2NrZXRJZCA9IEFycmF5LmZyb20ob25saW5lVXNlcnMua2V5cygpKS5maW5kKFxuICAgICAgICBpZCA9PiBvbmxpbmVVc2Vycy5nZXQoaWQpLm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZVxuICAgICAgKTtcblxuICAgICAgaWYgKHRhcmdldFNvY2tldElkKSB7XG4gICAgICAgIGlvLnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCdwcml2YXRlX21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgdG8gdGFyZ2V0ICR7dGFyZ2V0Tmlja25hbWV9YCwge1xuICAgICAgICAgIHRhcmdldFNvY2tldElkOiB0YXJnZXRTb2NrZXRJZCxcbiAgICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFRhcmdldCB1c2VyICR7dGFyZ2V0Tmlja25hbWV9IGZvdW5kIGluIG9ubGluZVVzZXJzIGJ1dCBzb2NrZXQgSUQgbm90IGZvdW5kYCwge1xuICAgICAgICAgIHRhcmdldE5pY2tuYW1lLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICAgIG9ubGluZVVzZXJzQ291bnQ6IG9ubGluZVVzZXJzLnNpemUsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLl9pZFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTWVzc2FnZSBzdGlsbCBzYXZlZCB0byBkYXRhYmFzZSBmb3IgbGF0ZXIgZGVsaXZlcnkgaWYgdXNlciByZWNvbm5lY3RzXG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgY29uZmlybWF0aW9uIHRvIHNlbmRlciAod2l0aG91dCB0YXJnZXQgZm9yIHByaXZhY3kpXG4gICAgICBzb2NrZXQuZW1pdCgncHJpdmF0ZV9tZXNzYWdlJywge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLnJvb20sXG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgICB0YXJnZXQ6IG51bGwsIC8vIEhpZGUgdGFyZ2V0IGZyb20gc2VuZGVyJ3MgY29uZmlybWF0aW9uXG4gICAgICAgIHN0YXR1czogJ3NlbnQnXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFByaXZhdGUgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseWAsIHtcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkLFxuICAgICAgICBtZXNzYWdlTGVuZ3RoOiB0cmltbWVkVGV4dC5sZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2VuZGluZyBwcml2YXRlIG1lc3NhZ2U6Jywge1xuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogZGF0YS50byxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIHByaXZhdGUgbWVzc2FnZScsXG4gICAgICAgIGNvZGU6ICdQUklWQVRFX01FU1NBR0VfRkFJTEVEJ1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTcGVha2luZ1xuICBzb2NrZXQub24oJ3NwZWFraW5nJywgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBzb2NrZXQudG8oc29ja2V0LnJvb20pLmVtaXQoJ3NwZWFraW5nJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzcGVha2luZzogZGF0YS5zcGVha2luZyB9KTtcbiAgfSk7XG5cbiAgLy8gVm9pY2UgY2hhbm5lbCBldmVudHNcbiAgc29ja2V0Lm9uKCdqb2luX3ZvaWNlX2NoYW5uZWwnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGNvbnN0IHsgY2hhbm5lbElkIH0gPSBkYXRhO1xuICAgIGlmICghY2hhbm5lbElkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgLy8gVmVyaWZ5IGNoYW5uZWwgZXhpc3RzIGFuZCBpcyB2b2ljZVxuICAgICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZE9uZSh7IGlkOiBjaGFubmVsSWQsIHR5cGU6ICd2b2ljZScgfSk7XG4gICAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnVm9pY2UgY2hhbm5lbCBub3QgZm91bmQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdm9pY2UgY2hhbm5lbCBpZiBub3QgZXhpc3RzXG4gICAgICBpZiAoIXZvaWNlQ2hhbm5lbHMuaGFzKGNoYW5uZWxJZCkpIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5zZXQoY2hhbm5lbElkLCBuZXcgTWFwKCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFubmVsUGVlcnMgPSB2b2ljZUNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgICAvLyBOb3RpZnkgb3RoZXJzIGluIHRoZSBjaGFubmVsXG4gICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2pvaW5lZF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcblxuICAgICAgLy8gQWRkIHNvY2tldCB0byB2b2ljZSBjaGFubmVsIHJvb21cbiAgICAgIHNvY2tldC5qb2luKGNoYW5uZWxJZCk7XG4gICAgICBjaGFubmVsUGVlcnMuc2V0KHNvY2tldC5pZCwgeyBwZWVyQ29ubmVjdGlvbjogbnVsbCwgc3RyZWFtOiBudWxsIH0pO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlcidzIHZvaWNlIGNoYW5uZWwgc3RhdHVzXG4gICAgICBzb2NrZXQudm9pY2VDaGFubmVsID0gY2hhbm5lbElkO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHZvaWNlIGNoYW5uZWwgJHtjaGFubmVsSWR9YCk7XG4gICAgICBzb2NrZXQuZW1pdCgndm9pY2Vfam9pbmVkJywgeyBjaGFubmVsSWQgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBqb2luaW5nIHZvaWNlIGNoYW5uZWw6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGpvaW4gdm9pY2UgY2hhbm5lbCcgfSk7XG4gICAgfVxuICB9KTtcblxuICBzb2NrZXQub24oJ2xlYXZlX3ZvaWNlX2NoYW5uZWwnLCAoKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQudm9pY2VDaGFubmVsKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGFubmVsSWQgPSBzb2NrZXQudm9pY2VDaGFubmVsO1xuICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICBpZiAoY2hhbm5lbFBlZXJzKSB7XG4gICAgICBjaGFubmVsUGVlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG4gICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5kZWxldGUoY2hhbm5lbElkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb3RoZXJzXG4gICAgc29ja2V0LnRvKGNoYW5uZWxJZCkuZW1pdCgndXNlcl9sZWZ0X3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuXG4gICAgc29ja2V0LmxlYXZlKGNoYW5uZWxJZCk7XG4gICAgc29ja2V0LnZvaWNlQ2hhbm5lbCA9IG51bGw7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB2b2ljZSBjaGFubmVsICR7Y2hhbm5lbElkfWApO1xuICAgIHNvY2tldC5lbWl0KCd2b2ljZV9sZWZ0Jyk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2Vfb2ZmZXInLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgb2ZmZXIsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgndm9pY2Vfb2ZmZXInLCB7XG4gICAgICBvZmZlcixcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2VfYW5zd2VyJywgKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IGFuc3dlciwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCd2b2ljZV9hbnN3ZXInLCB7XG4gICAgICBhbnN3ZXIsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICBzb2NrZXQub24oJ2ljZV9jYW5kaWRhdGUnLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgY2FuZGlkYXRlLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ2ljZV9jYW5kaWRhdGUnLCB7XG4gICAgICBjYW5kaWRhdGUsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBEaXNjb25uZWN0XG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGFzeW5jICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gZGlzY29ubmVjdGVkYCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcklkID0gc29ja2V0LnVzZXJJZDtcblxuICAgICAgLy8gRGVjcmVhc2UgY29ubmVjdGlvbiBjb3VudCBmb3IgdGhpcyB1c2VyXG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWF4KDAsIGN1cnJlbnRDb3VudCAtIDEpO1xuICAgICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q291bnQpO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBkaXNjb25uZWN0ZWQgKHJlbWFpbmluZyBjb25uZWN0aW9uczogJHtuZXdDb3VudH0pYCwge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgICAgY29ubmVjdGlvbnNMZWZ0OiBuZXdDb3VudFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTGVhdmUgdm9pY2UgY2hhbm5lbCBpZiBpbiBvbmVcbiAgICAgIGlmIChzb2NrZXQudm9pY2VDaGFubmVsKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IHNvY2tldC52b2ljZUNoYW5uZWw7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICAgICAgaWYgKGNoYW5uZWxQZWVycykge1xuICAgICAgICAgIGNoYW5uZWxQZWVycy5kZWxldGUoc29ja2V0LmlkKTtcbiAgICAgICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHZvaWNlQ2hhbm5lbHMuZGVsZXRlKGNoYW5uZWxJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm90aWZ5IG90aGVyc1xuICAgICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2xlZnRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzb2NrZXQucm9vbSkge1xuICAgICAgICBzb2NrZXQubGVhdmUoc29ja2V0LnJvb20pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBsZWF2ZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IGxlYXZlTWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgICBhdXRob3I6ICdTeXN0ZW0nLFxuICAgICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAgIHRleHQ6IGAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB0aGUgY2hhbm5lbC5gLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBsZWF2ZU1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGF1dGhvcjogbGVhdmVNZXNzYWdlLmF1dGhvcixcbiAgICAgICAgICByb29tOiBsZWF2ZU1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBsZWF2ZU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB0eXBlOiBsZWF2ZU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IGxlYXZlTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIG9ubGluZSB1c2VycyBsaXN0XG4gICAgICAgIGNvbnN0IHJvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20gJiYgdS51c2VySWQgIT09IHNvY2tldC51c2VySWQpXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcm9vbVVzZXJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGZyb20gdHJhY2tpbmdcbiAgICAgIG9ubGluZVVzZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuXG4gICAgICAvLyBMb2cgY3VycmVudCBjb25uZWN0aW9ucyBhZnRlciBkaXNjb25uZWN0XG4gICAgICBsb2dnZXIuaW5mbyhgQWZ0ZXIgZGlzY29ubmVjdCwgYWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfWApO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgaW4gZGF0YWJhc2UgaWYgdGhpcyB3YXMgdGhlIGxhc3QgY29ubmVjdGlvblxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdDb25uZWN0aW9ucyA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBpZiAocmVtYWluaW5nQ29ubmVjdGlvbnMgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xuICAgICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCwge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVXBkYXRlIGxhc3RBY3RpdmUgYnV0IGtlZXAgc3RhdHVzIG9ubGluZVxuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBzdGlsbCBvbmxpbmUgKCR7cmVtYWluaW5nQ29ubmVjdGlvbnN9IGNvbm5lY3Rpb25zIGxlZnQpYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgcmVtYWlucyBvbmxpbmVgLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgICBjb25uZWN0aW9uc0xlZnQ6IHJlbWFpbmluZ0Nvbm5lY3Rpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGRpc2Nvbm5lY3QgaGFuZGxlcjonLCBlcnJvcik7XG4gICAgfVxuIH0pO1xufSk7XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgYW5kIHN0YXJ0IHNlcnZlciAoZHVwbGljYXRlIHJlbW92ZWQpXG5jb25zdCBpbml0aWFsaXplU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgY2hhbm5lbHMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGNvbnN0IGRlZmF1bHRDaGFubmVscyA9IFtcbiAgICAgIHsgaWQ6ICdnZW5lcmFsJywgbmFtZTogJ0dlbmVyYWwnLCB0eXBlOiAndGV4dCcsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfSxcbiAgICAgIHsgaWQ6ICd2b2ljZS1jaGF0JywgbmFtZTogJ1ZvaWNlIENoYXQnLCB0eXBlOiAndm9pY2UnLCBjcmVhdGVkQnk6ICdzeXN0ZW0nIH1cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBjaGFubmVsRGF0YSBvZiBkZWZhdWx0Q2hhbm5lbHMpIHtcbiAgICAgIGF3YWl0IENoYW5uZWwuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgeyBpZDogY2hhbm5lbERhdGEuaWQgfSxcbiAgICAgICAgY2hhbm5lbERhdGEsXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbygnRGVmYXVsdCBjaGFubmVscyBpbml0aWFsaXplZCcpO1xuXG4gICAgLy8gU3RhcnQgc2VydmVyXG4gICAgY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMTtcbiAgICBzZXJ2ZXIubGlzdGVuKFBPUlQsICcwLjAuMC4wJywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd25cbnByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlY2VpdmVkIFNJR0lOVCwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnUmVjZWl2ZWQgU0lHVEVSTSwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG4vLyBTdGFydCB0aGUgc2VydmVyXG5pbml0aWFsaXplU2VydmVyKCkuY2F0Y2goZXJyID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgZXJyb3IgZHVyaW5nIHNlcnZlciBzdGFydHVwOicsIGVycik7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUMxQixNQUFNQyxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1JLFFBQVEsR0FBR0osT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNyQyxNQUFNSyxHQUFHLEdBQUdMLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1PLE9BQU8sR0FBR1AsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNUSxZQUFZLEdBQUdSLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDN0MsTUFBTVMsU0FBUyxHQUFHVCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTVUsTUFBTSxHQUFHVixPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1XLFNBQVMsR0FBR1gsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU07RUFBRVksSUFBSTtFQUFFQztBQUFpQixDQUFDLEdBQUdiLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUMvRCxNQUFNYyxRQUFRLEdBQUdkLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFD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