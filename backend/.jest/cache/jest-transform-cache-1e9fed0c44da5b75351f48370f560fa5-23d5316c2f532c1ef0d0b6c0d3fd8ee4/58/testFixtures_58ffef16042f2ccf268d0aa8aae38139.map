{"version":3,"names":["TestFixtureHelper","DatabaseTestHelper","require","mongoose","fixtureHelper","TestFixtures","setup","cleanupCollections","loadDefaultFixtures","create","helper","userHelper","createUser","nickname","email","role","channelHelper","createChannel","name","type","description","users","i","user","push","getUser","load","getChannel","getUsers","cleanup","module","exports"],"sources":["testFixtures.js"],"sourcesContent":["// Test fixtures for optimized backend testing\n// This file provides reusable test data that reduces setup time\n\nconst { TestFixtureHelper, DatabaseTestHelper } = require('./testHelpers');\nconst mongoose = require('mongoose');\n\nlet fixtureHelper = new TestFixtureHelper();\n\nclass TestFixtures {\n\n  static async setup() {\n    await DatabaseTestHelper.cleanupCollections();\n    await this.loadDefaultFixtures();\n  }\n\n  static async loadDefaultFixtures() {\n    // Default user fixture\n    await fixtureHelper.create('defaultUser', async (helper) => {\n      return await helper.userHelper.createUser({\n        nickname: 'test_user_fixture',\n        email: 'fixture@example.com',\n        role: 'user'\n      });\n    });\n\n    // Default channel fixture\n    await fixtureHelper.create('defaultChannel', async (helper) => {\n      return await helper.channelHelper.createChannel({\n        name: 'General Fixture',\n        type: 'text',\n        description: 'Default test channel'\n      });\n    });\n\n    // Multiple users fixture for multi-user tests\n    await fixtureHelper.create('multipleUsers', async (helper) => {\n      const users = [];\n      for (let i = 1; i <= 5; i++) {\n        const user = await helper.userHelper.createUser({\n          nickname: `user_fixture_${i}`,\n          email: `fixture_user_${i}@example.com`\n        });\n        users.push(user);\n      }\n      return users;\n    });\n\n    // Admin user fixture\n    await fixtureHelper.create('adminUser', async (helper) => {\n      return await helper.userHelper.createUser({\n        nickname: 'admin_fixture',\n        email: 'admin_fixture@example.com',\n        role: 'admin'\n      });\n    });\n  }\n\n  static async getUser(name = 'defaultUser') {\n    return await fixtureHelper.load(name);\n  }\n\n  static async getChannel(name = 'defaultChannel') {\n    return await fixtureHelper.load(name);\n  }\n\n  static async getUsers(name = 'multipleUsers') {\n    return await fixtureHelper.load(name);\n  }\n\n  static async cleanup() {\n    await fixtureHelper.cleanup();\n  }\n}\n\nmodule.exports = { TestFixtures };"],"mappings":"AAAA;AACA;;AAEA,MAAM;EAAEA,iBAAiB;EAAEC;AAAmB,CAAC,GAAGC,OAAO,CAAC,eAAe,CAAC;AAC1E,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AAEpC,IAAIE,aAAa,GAAG,IAAIJ,iBAAiB,CAAC,CAAC;AAE3C,MAAMK,YAAY,CAAC;EAEjB,aAAaC,KAAKA,CAAA,EAAG;IACnB,MAAML,kBAAkB,CAACM,kBAAkB,CAAC,CAAC;IAC7C,MAAM,IAAI,CAACC,mBAAmB,CAAC,CAAC;EAClC;EAEA,aAAaA,mBAAmBA,CAAA,EAAG;IACjC;IACA,MAAMJ,aAAa,CAACK,MAAM,CAAC,aAAa,EAAE,MAAOC,MAAM,IAAK;MAC1D,OAAO,MAAMA,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;QACxCC,QAAQ,EAAE,mBAAmB;QAC7BC,KAAK,EAAE,qBAAqB;QAC5BC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAMX,aAAa,CAACK,MAAM,CAAC,gBAAgB,EAAE,MAAOC,MAAM,IAAK;MAC7D,OAAO,MAAMA,MAAM,CAACM,aAAa,CAACC,aAAa,CAAC;QAC9CC,IAAI,EAAE,iBAAiB;QACvBC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAMhB,aAAa,CAACK,MAAM,CAAC,eAAe,EAAE,MAAOC,MAAM,IAAK;MAC5D,MAAMW,KAAK,GAAG,EAAE;MAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC3B,MAAMC,IAAI,GAAG,MAAMb,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;UAC9CC,QAAQ,EAAE,gBAAgBS,CAAC,EAAE;UAC7BR,KAAK,EAAE,gBAAgBQ,CAAC;QAC1B,CAAC,CAAC;QACFD,KAAK,CAACG,IAAI,CAACD,IAAI,CAAC;MAClB;MACA,OAAOF,KAAK;IACd,CAAC,CAAC;;IAEF;IACA,MAAMjB,aAAa,CAACK,MAAM,CAAC,WAAW,EAAE,MAAOC,MAAM,IAAK;MACxD,OAAO,MAAMA,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;QACxCC,QAAQ,EAAE,eAAe;QACzBC,KAAK,EAAE,2BAA2B;QAClCC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,aAAaU,OAAOA,CAACP,IAAI,GAAG,aAAa,EAAE;IACzC,OAAO,MAAMd,aAAa,CAACsB,IAAI,CAACR,IAAI,CAAC;EACvC;EAEA,aAAaS,UAAUA,CAACT,IAAI,GAAG,gBAAgB,EAAE;IAC/C,OAAO,MAAMd,aAAa,CAACsB,IAAI,CAACR,IAAI,CAAC;EACvC;EAEA,aAAaU,QAAQA,CAACV,IAAI,GAAG,eAAe,EAAE;IAC5C,OAAO,MAAMd,aAAa,CAACsB,IAAI,CAACR,IAAI,CAAC;EACvC;EAEA,aAAaW,OAAOA,CAAA,EAAG;IACrB,MAAMzB,aAAa,CAACyB,OAAO,CAAC,CAAC;EAC/B;AACF;AAEAC,MAAM,CAACC,OAAO,GAAG;EAAE1B;AAAa,CAAC","ignoreList":[]}