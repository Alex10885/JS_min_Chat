b89496b88bcbc757708240ffa2cb906f
require('dotenv').config();
const config = {
  server: {
    port: process.env.PORT || 3001,
    nodeEnv: process.env.NODE_ENV || 'development',
    host: '0.0.0.0'
  },
  database: {
    mongoUri: process.env.MONGODB_URI || 'mongodb://localhost:27017/chatjs'
  },
  redis: {
    host: process.env.REDIS_HOST || 'localhost',
    port: process.env.REDIS_PORT || 6379,
    password: process.env.REDIS_PASSWORD,
    db: process.env.REDIS_DB || 0,
    keyPrefix: 'chatjs:',
    sessionPrefix: 'session:',
    userPrefix: 'user:',
    cachePrefix: 'cache:',
    queryPrefix: 'query:',
    // For query result caching
    connectTimeout: 10000,
    commandTimeout: 10000,
    maxRetriesPerRequest: 3,
    retryDelayOnFailover: 100,
    sessionTTL: process.env.REDIS_SESSION_TTL || 3600,
    // 1 hour
    cacheTTL: process.env.REDIS_CACHE_TTL || 1800,
    // 30 minutes
    enableCluster: process.env.REDIS_CLUSTER_ENABLED === 'true',
    cluster: process.env.REDIS_CLUSTER_ENABLED === 'true' ? {
      nodeHashing: 'crc32',
      hashSlots: 16384,
      slots: [[0, 5460], [5461, 10922], [10923, 16383]]
    } : null,
    memoryMonitoring: {
      enabled: true,
      thresholds: {
        warning: 0.8,
        // 80% memory usage
        critical: 0.9 // 90% memory usage
      },
      checkInterval: 300000 // 5 minutes
    }
  },
  security: {
    jwtSecret: process.env.JWT_SECRET,
    sessionSecret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
    corsOrigins: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"]
  },
  rateLimit: {
    windowMs: 15 * 60 * 1000,
    // 15 minutes
    maxAuth: process.env.NODE_ENV === 'test' ? 20000 : 10,
    maxAuthAuthenticated: process.env.NODE_ENV === 'test' ? 20000 : 50,
    // Higher limit for authenticated users
    maxAuthAnonymous: process.env.NODE_ENV === 'test' ? 20000 : 5,
    // Lower limit for anonymous users
    maxApi: 200,
    maxGeneral: 2000,
    maxPasswordReset: 5,
    maxGeographic: 100,
    // For geographic-based limiting
    enableProgressiveDelay: true
  },
  swagger: {
    title: 'Chat-JS API',
    version: '1.0.0'
  },
  logger: {
    level: 'info'
  }
};
module.exports = config;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwic2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibm9kZUVudiIsIk5PREVfRU5WIiwiaG9zdCIsImRhdGFiYXNlIiwibW9uZ29VcmkiLCJNT05HT0RCX1VSSSIsInJlZGlzIiwiUkVESVNfSE9TVCIsIlJFRElTX1BPUlQiLCJwYXNzd29yZCIsIlJFRElTX1BBU1NXT1JEIiwiZGIiLCJSRURJU19EQiIsImtleVByZWZpeCIsInNlc3Npb25QcmVmaXgiLCJ1c2VyUHJlZml4IiwiY2FjaGVQcmVmaXgiLCJxdWVyeVByZWZpeCIsImNvbm5lY3RUaW1lb3V0IiwiY29tbWFuZFRpbWVvdXQiLCJtYXhSZXRyaWVzUGVyUmVxdWVzdCIsInJldHJ5RGVsYXlPbkZhaWxvdmVyIiwic2Vzc2lvblRUTCIsIlJFRElTX1NFU1NJT05fVFRMIiwiY2FjaGVUVEwiLCJSRURJU19DQUNIRV9UVEwiLCJlbmFibGVDbHVzdGVyIiwiUkVESVNfQ0xVU1RFUl9FTkFCTEVEIiwiY2x1c3RlciIsIm5vZGVIYXNoaW5nIiwiaGFzaFNsb3RzIiwic2xvdHMiLCJtZW1vcnlNb25pdG9yaW5nIiwiZW5hYmxlZCIsInRocmVzaG9sZHMiLCJ3YXJuaW5nIiwiY3JpdGljYWwiLCJjaGVja0ludGVydmFsIiwic2VjdXJpdHkiLCJqd3RTZWNyZXQiLCJKV1RfU0VDUkVUIiwic2Vzc2lvblNlY3JldCIsIlNFU1NJT05fU0VDUkVUIiwiY29yc09yaWdpbnMiLCJBTExPV0VEX09SSUdJTlMiLCJzcGxpdCIsInJhdGVMaW1pdCIsIndpbmRvd01zIiwibWF4QXV0aCIsIm1heEF1dGhBdXRoZW50aWNhdGVkIiwibWF4QXV0aEFub255bW91cyIsIm1heEFwaSIsIm1heEdlbmVyYWwiLCJtYXhQYXNzd29yZFJlc2V0IiwibWF4R2VvZ3JhcGhpYyIsImVuYWJsZVByb2dyZXNzaXZlRGVsYXkiLCJzd2FnZ2VyIiwidGl0bGUiLCJ2ZXJzaW9uIiwibG9nZ2VyIiwibGV2ZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgc2VydmVyOiB7XG4gICAgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxLFxuICAgIG5vZGVFbnY6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCcsXG4gICAgaG9zdDogJzAuMC4wLjAnXG4gIH0sXG4gIGRhdGFiYXNlOiB7XG4gICAgbW9uZ29Vcmk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NoYXRqcydcbiAgfSxcbiAgcmVkaXM6IHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlJFRElTX1BPUlQgfHwgNjM3OSxcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTU1dPUkQsXG4gICAgZGI6IHByb2Nlc3MuZW52LlJFRElTX0RCIHx8IDAsXG4gICAga2V5UHJlZml4OiAnY2hhdGpzOicsXG4gICAgc2Vzc2lvblByZWZpeDogJ3Nlc3Npb246JyxcbiAgICB1c2VyUHJlZml4OiAndXNlcjonLFxuICAgIGNhY2hlUHJlZml4OiAnY2FjaGU6JyxcbiAgICBxdWVyeVByZWZpeDogJ3F1ZXJ5OicsIC8vIEZvciBxdWVyeSByZXN1bHQgY2FjaGluZ1xuICAgIGNvbm5lY3RUaW1lb3V0OiAxMDAwMCxcbiAgICBjb21tYW5kVGltZW91dDogMTAwMDAsXG4gICAgbWF4UmV0cmllc1BlclJlcXVlc3Q6IDMsXG4gICAgcmV0cnlEZWxheU9uRmFpbG92ZXI6IDEwMCxcbiAgICBzZXNzaW9uVFRMOiBwcm9jZXNzLmVudi5SRURJU19TRVNTSU9OX1RUTCB8fCAzNjAwLCAvLyAxIGhvdXJcbiAgICBjYWNoZVRUTDogcHJvY2Vzcy5lbnYuUkVESVNfQ0FDSEVfVFRMIHx8IDE4MDAsIC8vIDMwIG1pbnV0ZXNcbiAgICBlbmFibGVDbHVzdGVyOiBwcm9jZXNzLmVudi5SRURJU19DTFVTVEVSX0VOQUJMRUQgPT09ICd0cnVlJyxcbiAgICBjbHVzdGVyOiBwcm9jZXNzLmVudi5SRURJU19DTFVTVEVSX0VOQUJMRUQgPT09ICd0cnVlJyA/IHtcbiAgICAgIG5vZGVIYXNoaW5nOiAnY3JjMzInLFxuICAgICAgaGFzaFNsb3RzOiAxNjM4NCxcbiAgICAgIHNsb3RzOiBbXG4gICAgICAgIFswLCA1NDYwXSxcbiAgICAgICAgWzU0NjEsIDEwOTIyXSxcbiAgICAgICAgWzEwOTIzLCAxNjM4M11cbiAgICAgIF1cbiAgICB9IDogbnVsbCxcbiAgICBtZW1vcnlNb25pdG9yaW5nOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgdGhyZXNob2xkczoge1xuICAgICAgICB3YXJuaW5nOiAwLjgsIC8vIDgwJSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgY3JpdGljYWw6IDAuOSAgLy8gOTAlIG1lbW9yeSB1c2FnZVxuICAgICAgfSxcbiAgICAgIGNoZWNrSW50ZXJ2YWw6IDMwMDAwMCAvLyA1IG1pbnV0ZXNcbiAgICB9XG4gIH0sXG4gIHNlY3VyaXR5OiB7XG4gICAgand0U2VjcmV0OiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxuICAgIHNlc3Npb25TZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICd5b3VyLXZlcnktbG9uZy1zZWN1cmUtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbicsXG4gICAgY29yc09yaWdpbnM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbiAgICAgID8gKHByb2Nlc3MuZW52LkFMTE9XRURfT1JJR0lOUz8uc3BsaXQoJywnKSB8fCBmYWxzZSlcbiAgICAgIDogW1wiaHR0cDovL2xvY2FsaG9zdDozMDAzXCIsIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCJdXG4gIH0sXG4gIHJhdGVMaW1pdDoge1xuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xuICAgIG1heEF1dGg6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcgPyAyMDAwMCA6IDEwLFxuICAgIG1heEF1dGhBdXRoZW50aWNhdGVkOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnID8gMjAwMDAgOiA1MCwgLy8gSGlnaGVyIGxpbWl0IGZvciBhdXRoZW50aWNhdGVkIHVzZXJzXG4gICAgbWF4QXV0aEFub255bW91czogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JyA/IDIwMDAwIDogNSwgLy8gTG93ZXIgbGltaXQgZm9yIGFub255bW91cyB1c2Vyc1xuICAgIG1heEFwaTogMjAwLFxuICAgIG1heEdlbmVyYWw6IDIwMDAsXG4gICAgbWF4UGFzc3dvcmRSZXNldDogNSxcbiAgICBtYXhHZW9ncmFwaGljOiAxMDAsIC8vIEZvciBnZW9ncmFwaGljLWJhc2VkIGxpbWl0aW5nXG4gICAgZW5hYmxlUHJvZ3Jlc3NpdmVEZWxheTogdHJ1ZVxuICB9LFxuICBzd2FnZ2VyOiB7XG4gICAgdGl0bGU6ICdDaGF0LUpTIEFQSScsXG4gICAgdmVyc2lvbjogJzEuMC4wJ1xuICB9LFxuICBsb2dnZXI6IHtcbiAgICBsZXZlbDogJ2luZm8nXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29uZmlnOyJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFMUIsTUFBTUEsTUFBTSxHQUFHO0VBQ2JDLE1BQU0sRUFBRTtJQUNOQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLElBQUksSUFBSTtJQUM5QkMsT0FBTyxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csUUFBUSxJQUFJLGFBQWE7SUFDOUNDLElBQUksRUFBRTtFQUNSLENBQUM7RUFDREMsUUFBUSxFQUFFO0lBQ1JDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVcsSUFBSTtFQUN2QyxDQUFDO0VBQ0RDLEtBQUssRUFBRTtJQUNMSixJQUFJLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxVQUFVLElBQUksV0FBVztJQUMzQ1gsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ1UsVUFBVSxJQUFJLElBQUk7SUFDcENDLFFBQVEsRUFBRVosT0FBTyxDQUFDQyxHQUFHLENBQUNZLGNBQWM7SUFDcENDLEVBQUUsRUFBRWQsT0FBTyxDQUFDQyxHQUFHLENBQUNjLFFBQVEsSUFBSSxDQUFDO0lBQzdCQyxTQUFTLEVBQUUsU0FBUztJQUNwQkMsYUFBYSxFQUFFLFVBQVU7SUFDekJDLFVBQVUsRUFBRSxPQUFPO0lBQ25CQyxXQUFXLEVBQUUsUUFBUTtJQUNyQkMsV0FBVyxFQUFFLFFBQVE7SUFBRTtJQUN2QkMsY0FBYyxFQUFFLEtBQUs7SUFDckJDLGNBQWMsRUFBRSxLQUFLO0lBQ3JCQyxvQkFBb0IsRUFBRSxDQUFDO0lBQ3ZCQyxvQkFBb0IsRUFBRSxHQUFHO0lBQ3pCQyxVQUFVLEVBQUV6QixPQUFPLENBQUNDLEdBQUcsQ0FBQ3lCLGlCQUFpQixJQUFJLElBQUk7SUFBRTtJQUNuREMsUUFBUSxFQUFFM0IsT0FBTyxDQUFDQyxHQUFHLENBQUMyQixlQUFlLElBQUksSUFBSTtJQUFFO0lBQy9DQyxhQUFhLEVBQUU3QixPQUFPLENBQUNDLEdBQUcsQ0FBQzZCLHFCQUFxQixLQUFLLE1BQU07SUFDM0RDLE9BQU8sRUFBRS9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDNkIscUJBQXFCLEtBQUssTUFBTSxHQUFHO01BQ3RERSxXQUFXLEVBQUUsT0FBTztNQUNwQkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLEtBQUssRUFBRSxDQUNMLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUNULENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUNiLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztJQUVsQixDQUFDLEdBQUcsSUFBSTtJQUNSQyxnQkFBZ0IsRUFBRTtNQUNoQkMsT0FBTyxFQUFFLElBQUk7TUFDYkMsVUFBVSxFQUFFO1FBQ1ZDLE9BQU8sRUFBRSxHQUFHO1FBQUU7UUFDZEMsUUFBUSxFQUFFLEdBQUcsQ0FBRTtNQUNqQixDQUFDO01BQ0RDLGFBQWEsRUFBRSxNQUFNLENBQUM7SUFDeEI7RUFDRixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNSQyxTQUFTLEVBQUUxQyxPQUFPLENBQUNDLEdBQUcsQ0FBQzBDLFVBQVU7SUFDakNDLGFBQWEsRUFBRTVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDNEMsY0FBYyxJQUFJLHVEQUF1RDtJQUNwR0MsV0FBVyxFQUFFOUMsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFFBQVEsS0FBSyxZQUFZLEdBQzdDSixPQUFPLENBQUNDLEdBQUcsQ0FBQzhDLGVBQWUsRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssR0FDakQsQ0FBQyx1QkFBdUIsRUFBRSx1QkFBdUI7RUFDdkQsQ0FBQztFQUNEQyxTQUFTLEVBQUU7SUFDVEMsUUFBUSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSTtJQUFFO0lBQzFCQyxPQUFPLEVBQUVuRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csUUFBUSxLQUFLLE1BQU0sR0FBRyxLQUFLLEdBQUcsRUFBRTtJQUNyRGdELG9CQUFvQixFQUFFcEQsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFFBQVEsS0FBSyxNQUFNLEdBQUcsS0FBSyxHQUFHLEVBQUU7SUFBRTtJQUNwRWlELGdCQUFnQixFQUFFckQsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFFBQVEsS0FBSyxNQUFNLEdBQUcsS0FBSyxHQUFHLENBQUM7SUFBRTtJQUMvRGtELE1BQU0sRUFBRSxHQUFHO0lBQ1hDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ25CQyxhQUFhLEVBQUUsR0FBRztJQUFFO0lBQ3BCQyxzQkFBc0IsRUFBRTtFQUMxQixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNQQyxLQUFLLEVBQUUsYUFBYTtJQUNwQkMsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUNEQyxNQUFNLEVBQUU7SUFDTkMsS0FBSyxFQUFFO0VBQ1Q7QUFDRixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHcEUsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==