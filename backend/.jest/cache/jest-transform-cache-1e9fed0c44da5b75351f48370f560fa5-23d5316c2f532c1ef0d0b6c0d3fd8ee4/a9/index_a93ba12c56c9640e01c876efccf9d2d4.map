{"version":3,"names":["cov_11dcrsonjj","actualCoverage","s","require","config","server","port","b","process","env","PORT","nodeEnv","NODE_ENV","host","database","mongoUri","MONGODB_URI","redis","REDIS_HOST","REDIS_PORT","password","REDIS_PASSWORD","db","REDIS_DB","keyPrefix","sessionPrefix","userPrefix","cachePrefix","queryPrefix","connectTimeout","commandTimeout","maxRetriesPerRequest","retryDelayOnFailover","sessionTTL","REDIS_SESSION_TTL","cacheTTL","REDIS_CACHE_TTL","enableCluster","REDIS_CLUSTER_ENABLED","cluster","nodeHashing","hashSlots","slots","memoryMonitoring","enabled","thresholds","warning","critical","checkInterval","security","jwtSecret","JWT_SECRET","sessionSecret","SESSION_SECRET","corsOrigins","ALLOWED_ORIGINS","split","rateLimit","windowMs","maxAuth","maxAuthAuthenticated","maxAuthAnonymous","maxApi","maxGeneral","maxPasswordReset","maxGeographic","enableProgressiveDelay","swagger","title","version","logger","level","module","exports"],"sources":["index.js"],"sourcesContent":["require('dotenv').config();\n\nconst config = {\n  server: {\n    port: process.env.PORT || 3001,\n    nodeEnv: process.env.NODE_ENV || 'development',\n    host: '0.0.0.0'\n  },\n  database: {\n    mongoUri: process.env.MONGODB_URI || 'mongodb://localhost:27017/chatjs'\n  },\n  redis: {\n    host: process.env.REDIS_HOST || 'localhost',\n    port: process.env.REDIS_PORT || 6379,\n    password: process.env.REDIS_PASSWORD,\n    db: process.env.REDIS_DB || 0,\n    keyPrefix: 'chatjs:',\n    sessionPrefix: 'session:',\n    userPrefix: 'user:',\n    cachePrefix: 'cache:',\n    queryPrefix: 'query:', // For query result caching\n    connectTimeout: 10000,\n    commandTimeout: 10000,\n    maxRetriesPerRequest: 3,\n    retryDelayOnFailover: 100,\n    sessionTTL: process.env.REDIS_SESSION_TTL || 3600, // 1 hour\n    cacheTTL: process.env.REDIS_CACHE_TTL || 1800, // 30 minutes\n    enableCluster: process.env.REDIS_CLUSTER_ENABLED === 'true',\n    cluster: process.env.REDIS_CLUSTER_ENABLED === 'true' ? {\n      nodeHashing: 'crc32',\n      hashSlots: 16384,\n      slots: [\n        [0, 5460],\n        [5461, 10922],\n        [10923, 16383]\n      ]\n    } : null,\n    memoryMonitoring: {\n      enabled: true,\n      thresholds: {\n        warning: 0.8, // 80% memory usage\n        critical: 0.9  // 90% memory usage\n      },\n      checkInterval: 300000 // 5 minutes\n    }\n  },\n  security: {\n    jwtSecret: process.env.JWT_SECRET,\n    sessionSecret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',\n    corsOrigins: process.env.NODE_ENV === 'production'\n      ? (process.env.ALLOWED_ORIGINS?.split(',') || false)\n      : [\"http://localhost:3003\", \"http://localhost:3000\"]\n  },\n  rateLimit: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxAuth: process.env.NODE_ENV === 'test' ? 20000 : 10,\n    maxAuthAuthenticated: process.env.NODE_ENV === 'test' ? 20000 : 50, // Higher limit for authenticated users\n    maxAuthAnonymous: process.env.NODE_ENV === 'test' ? 20000 : 5, // Lower limit for anonymous users\n    maxApi: 200,\n    maxGeneral: 2000,\n    maxPasswordReset: 5,\n    maxGeographic: 100, // For geographic-based limiting\n    enableProgressiveDelay: true\n  },\n  swagger: {\n    title: 'Chat-JS API',\n    version: '1.0.0'\n  },\n  logger: {\n    level: 'info'\n  }\n};\n\nmodule.exports = config;"],"mappings":"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","ignoreList":[]}