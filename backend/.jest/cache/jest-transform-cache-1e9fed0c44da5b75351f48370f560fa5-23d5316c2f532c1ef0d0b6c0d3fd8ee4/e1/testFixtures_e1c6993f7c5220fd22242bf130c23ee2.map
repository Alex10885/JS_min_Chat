{"version":3,"names":["TestFixtureHelper","DatabaseTestHelper","require","mongoose","TestFixtures","fixtureHelper","setup","cleanupCollections","loadDefaultFixtures","create","helper","userHelper","createUser","nickname","email","role","channelHelper","createChannel","name","type","description","users","i","user","push","getUser","load","getChannel","getUsers","cleanup","module","exports"],"sources":["testFixtures.js"],"sourcesContent":["// Test fixtures for optimized backend testing\n// This file provides reusable test data that reduces setup time\n\nconst { TestFixtureHelper, DatabaseTestHelper } = require('./testHelpers');\nconst mongoose = require('mongoose');\n\nclass TestFixtures {\n  static fixtureHelper = new TestFixtureHelper();\n\n  static async setup() {\n    await DatabaseTestHelper.cleanupCollections();\n    await this.loadDefaultFixtures();\n  }\n\n  static async loadDefaultFixtures() {\n    // Default user fixture\n    await this.fixtureHelper.create('defaultUser', async (helper) => {\n      return await helper.userHelper.createUser({\n        nickname: 'test_user_fixture',\n        email: 'fixture@example.com',\n        role: 'user'\n      });\n    });\n\n    // Default channel fixture\n    await this.fixtureHelper.create('defaultChannel', async (helper) => {\n      return await helper.channelHelper.createChannel({\n        name: 'General Fixture',\n        type: 'text',\n        description: 'Default test channel'\n      });\n    });\n\n    // Multiple users fixture for multi-user tests\n    await this.fixtureHelper.create('multipleUsers', async (helper) => {\n      const users = [];\n      for (let i = 1; i <= 5; i++) {\n        const user = await helper.userHelper.createUser({\n          nickname: `user_fixture_${i}`,\n          email: `fixture_user_${i}@example.com`\n        });\n        users.push(user);\n      }\n      return users;\n    });\n\n    // Admin user fixture\n    await this.fixtureHelper.create('adminUser', async (helper) => {\n      return await helper.userHelper.createUser({\n        nickname: 'admin_fixture',\n        email: 'admin_fixture@example.com',\n        role: 'admin'\n      });\n    });\n  }\n\n  static async getUser(name = 'defaultUser') {\n    return await this.fixtureHelper.load(name);\n  }\n\n  static async getChannel(name = 'defaultChannel') {\n    return await this.fixtureHelper.load(name);\n  }\n\n  static async getUsers(name = 'multipleUsers') {\n    return await this.fixtureHelper.load(name);\n  }\n\n  static async cleanup() {\n    await this.fixtureHelper.cleanup();\n  }\n}\n\nmodule.exports = { TestFixtures };"],"mappings":"AAAA;AACA;;AAEA,MAAM;EAAEA,iBAAiB;EAAEC;AAAmB,CAAC,GAAGC,OAAO,CAAC,eAAe,CAAC;AAC1E,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAME,YAAY,CAAC;EACjB,OAAOC,aAAa,GAAG,IAAIL,iBAAiB,CAAC,CAAC;EAE9C,aAAaM,KAAKA,CAAA,EAAG;IACnB,MAAML,kBAAkB,CAACM,kBAAkB,CAAC,CAAC;IAC7C,MAAM,IAAI,CAACC,mBAAmB,CAAC,CAAC;EAClC;EAEA,aAAaA,mBAAmBA,CAAA,EAAG;IACjC;IACA,MAAM,IAAI,CAACH,aAAa,CAACI,MAAM,CAAC,aAAa,EAAE,MAAOC,MAAM,IAAK;MAC/D,OAAO,MAAMA,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;QACxCC,QAAQ,EAAE,mBAAmB;QAC7BC,KAAK,EAAE,qBAAqB;QAC5BC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAM,IAAI,CAACV,aAAa,CAACI,MAAM,CAAC,gBAAgB,EAAE,MAAOC,MAAM,IAAK;MAClE,OAAO,MAAMA,MAAM,CAACM,aAAa,CAACC,aAAa,CAAC;QAC9CC,IAAI,EAAE,iBAAiB;QACvBC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAM,IAAI,CAACf,aAAa,CAACI,MAAM,CAAC,eAAe,EAAE,MAAOC,MAAM,IAAK;MACjE,MAAMW,KAAK,GAAG,EAAE;MAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC3B,MAAMC,IAAI,GAAG,MAAMb,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;UAC9CC,QAAQ,EAAE,gBAAgBS,CAAC,EAAE;UAC7BR,KAAK,EAAE,gBAAgBQ,CAAC;QAC1B,CAAC,CAAC;QACFD,KAAK,CAACG,IAAI,CAACD,IAAI,CAAC;MAClB;MACA,OAAOF,KAAK;IACd,CAAC,CAAC;;IAEF;IACA,MAAM,IAAI,CAAChB,aAAa,CAACI,MAAM,CAAC,WAAW,EAAE,MAAOC,MAAM,IAAK;MAC7D,OAAO,MAAMA,MAAM,CAACC,UAAU,CAACC,UAAU,CAAC;QACxCC,QAAQ,EAAE,eAAe;QACzBC,KAAK,EAAE,2BAA2B;QAClCC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,aAAaU,OAAOA,CAACP,IAAI,GAAG,aAAa,EAAE;IACzC,OAAO,MAAM,IAAI,CAACb,aAAa,CAACqB,IAAI,CAACR,IAAI,CAAC;EAC5C;EAEA,aAAaS,UAAUA,CAACT,IAAI,GAAG,gBAAgB,EAAE;IAC/C,OAAO,MAAM,IAAI,CAACb,aAAa,CAACqB,IAAI,CAACR,IAAI,CAAC;EAC5C;EAEA,aAAaU,QAAQA,CAACV,IAAI,GAAG,eAAe,EAAE;IAC5C,OAAO,MAAM,IAAI,CAACb,aAAa,CAACqB,IAAI,CAACR,IAAI,CAAC;EAC5C;EAEA,aAAaW,OAAOA,CAAA,EAAG;IACrB,MAAM,IAAI,CAACxB,aAAa,CAACwB,OAAO,CAAC,CAAC;EACpC;AACF;AAEAC,MAAM,CAACC,OAAO,GAAG;EAAE3B;AAAa,CAAC","ignoreList":[]}