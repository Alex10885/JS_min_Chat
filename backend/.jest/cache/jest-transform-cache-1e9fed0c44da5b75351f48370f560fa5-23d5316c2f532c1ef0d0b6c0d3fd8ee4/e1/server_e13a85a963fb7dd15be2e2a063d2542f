5271b1901d8c2bfd8547787667934167
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
// Import crypto for generating secure tokens
const crypto = require('crypto');
const session = require('express-session');
const RedisStore = require('connect-redis');
const {
  redisManager
} = require('./src/config/redis');
const {
  connectDB,
  closeDB
} = require('./db/connection');
const emailService = require('./services/emailService');
const {
  performanceMonitor,
  apiPerformanceMiddleware,
  getHealthCheck,
  getPerformanceDashboard
} = require('./src/middleware/performanceMonitor');
const {
  externalServiceBreaker,
  circuitBreakerMiddleware,
  asyncOptimize,
  protectEmail,
  getCircuitBreakerStatuses
} = require('./src/middleware/circuitBreaker');

// Import AuthService for extracted authentication logic
const authService = require('./src/services/authService');

// Extract rate limiters from AuthService
const {
  authRateLimiter,
  apiRateLimiter,
  generalRateLimiter
} = authService;

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);

// Rate limiters are now handled by AuthService
const io = socketIo(server, {
  cors: {
    origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"],
    credentials: true
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling'],
  // Connection settings for better reliability
  connectTimeout: 20000,
  // 20 seconds
  pingTimeout: 5000,
  // 5 seconds for ping
  pingInterval: 10000,
  // 10 seconds between pings
  upgradeTimeout: 10000,
  allowUpgrades: true,
  cookieHttpOnly: true,
  cookieSameSite: 'lax'
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('🔌 Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '20mb',
  strict: false
})); // Increased limit and disabled strict parsing for better error tolerance
app.use(express.urlencoded({
  extended: true,
  limit: '20mb'
})); // Handle form data with increased limit

// Session configuration with Redis store for enhanced performance
let sessionMiddleware;
try {
  const redisClient = redisManager.getClient();
  if (redisClient && redisManager.isClientReady()) {
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      store: new RedisStore({
        client: redisClient,
        prefix: 'sess:',
        ttl: 86400,
        // 24 hours
        disableTouch: false // Allow automatic touch
      }),
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
    console.log('✅ Redis session store initialized successfully');
  } else {
    // Fallback to memory store if Redis is not available
    console.log('⚠️ Redis not available, using memory-based session store');
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
  }
} catch (error) {
  console.log('❌ Redis session store initialization failed, using memory store:', error.message);
  sessionMiddleware = session({
    secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
    resave: false,
    saveUninitialized: false,
    cookie: {
      secure: process.env.NODE_ENV === 'production',
      httpOnly: true,
      maxAge: 24 * 60 * 60 * 1000,
      sameSite: 'lax'
    },
    name: 'chatSession',
    rolling: false,
    unset: 'destroy'
  });
}
app.use(sessionMiddleware);

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// Session authentication middleware now uses AuthService

// JWT authentication middleware now uses AuthService

// Role-based access control middleware now uses AuthService

// Error handling middleware

// Use AuthService session authentication middleware
app.use(authService.authenticateSession.bind(authService));

// General rate limiting (applied to all HTTP requests) - using AuthService
app.use(authService.generalRateLimiter);

// Performance monitoring middleware
app.use(apiPerformanceMiddleware());

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Administrative endpoints - require moderator privileges
console.log('🔧 Administrative API endpoints registered at startup');

// GET /api/admin/users - List all users with moderation info
app.get('/api/admin/users', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 50;
    const skip = (page - 1) * limit;
    const users = await User.find({}).select('-password -resetPasswordToken -resetPasswordExpires -moderationToken -moderationTokenExpires').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const total = await User.countDocuments();
    logger.info(`Admin user list requested by ${req.user.nickname}`, {
      adminId: req.user._id,
      page,
      limit,
      total
    });
    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    logger.error('Error fetching users for admin:', error);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// POST /api/admin/users/:userId/ban - Ban a user
app.post('/api/admin/users/:userId/ban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
}) // Max 1 year in seconds
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent banning yourself
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot ban yourself'
      });
    }

    // Prevent non-admin from banning admin
    if (user.role === 'admin' && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Cannot ban administrator'
      });
    }
    await user.ban(reason, duration, req.user._id);
    logger.info(`User ${user.nickname} banned by ${req.user.nickname}`, {
      bannedUserId: userId,
      bannedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been banned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: true,
        banReason: reason,
        banExpires: user.banExpires
      }
    });
  } catch (error) {
    logger.error('Error banning user:', error);
    res.status(500).json({
      error: 'Failed to ban user'
    });
  }
});

// POST /api/admin/users/:userId/unban - Unban a user
app.post('/api/admin/users/:userId/unban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.banned) {
      return res.status(400).json({
        error: 'User is not banned'
      });
    }
    await user.unban();
    logger.info(`User ${user.nickname} unbanned by ${req.user.nickname}`, {
      unbannedUserId: userId,
      unbannedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unbanned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: false
      }
    });
  } catch (error) {
    logger.error('Error unbanning user:', error);
    res.status(500).json({
      error: 'Failed to unban user'
    });
  }
});

// POST /api/admin/users/:userId/warn - Issue warning to user
app.post('/api/admin/users/:userId/warn', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.warn(reason, req.user._id, duration);
    await user.save();
    logger.info(`Warning issued to user ${user.nickname} by ${req.user.nickname}`, {
      warnedUserId: userId,
      warnedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `Warning issued to user ${user.nickname}`,
      warning: {
        reason,
        issuedBy: req.user.nickname,
        issuedAt: new Date(),
        expires: duration ? new Date(Date.now() + duration) : null
      },
      user: {
        id: user._id,
        nickname: user.nickname,
        warningsCount: user.getActiveWarningsCount()
      }
    });
  } catch (error) {
    logger.error('Error warning user:', error);
    res.status(500).json({
      error: 'Failed to warn user'
    });
  }
});

// POST /api/admin/users/:userId/role - Change user role
app.post('/api/admin/users/:userId/role', authService.authenticateToken.bind(authService), authService.requireAdmin.bind(authService), apiRateLimiter, [body('role').isIn(['member', 'moderator', 'admin'])], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      role: newRole
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent modifying your own role in potentially problematic ways
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot modify your own role'
      });
    }

    // Prevent non-admin from promoting to admin or demoting admin
    if ((newRole === 'admin' || user.role === 'admin') && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Only administrators can manage admin roles'
      });
    }
    const oldRole = user.role;
    user.role = newRole;
    await user.save();
    logger.info(`User ${user.nickname} role changed from ${oldRole} to ${newRole} by ${req.user.nickname}`, {
      changedUserId: userId,
      changedById: req.user._id,
      oldRole,
      newRole
    });
    res.json({
      message: `User ${user.nickname} role changed to ${newRole}`,
      user: {
        id: user._id,
        nickname: user.nickname,
        role: newRole
      }
    });
  } catch (error) {
    logger.error('Error changing user role:', error);
    res.status(500).json({
      error: 'Failed to change user role'
    });
  }
});

// POST /api/admin/users/:userId/mute - Mute user
app.post('/api/admin/users/:userId/mute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('duration').isInt({
  min: 60,
  max: 86400
}) // 1 minute to 24 hours
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.mute(duration);
    logger.info(`User ${user.nickname} muted by ${req.user.nickname}`, {
      mutedUserId: userId,
      mutedById: req.user._id,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been muted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: user.muteExpires
      }
    });
  } catch (error) {
    logger.error('Error muting user:', error);
    res.status(500).json({
      error: 'Failed to mute user'
    });
  }
});

// POST /api/admin/users/:userId/unmute - Unmute user
app.post('/api/admin/users/:userId/unmute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.isMuted()) {
      return res.status(400).json({
        error: 'User is not muted'
      });
    }
    await user.unmute();
    logger.info(`User ${user.nickname} unmuted by ${req.user.nickname}`, {
      unmutedUserId: userId,
      unmutedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unmuted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: null
      }
    });
  } catch (error) {
    logger.error('Error unmuting user:', error);
    res.status(500).json({
      error: 'Failed to unmute user'
    });
  }
});

/**
 * @swagger
 * /api/users:
 *   get:
 *     tags:
 *       - Users
 *     summary: Get list of all registered users
 *     description: Retrieves a list of all users with their roles and online status
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of users successfully retrieved
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 type: object
 *                 properties:
 *                   id:
 *                     type: string
 *                     description: User's unique identifier
 *                   nickname:
 *                     type: string
 *                     description: User's display name
 *                   role:
 *                     type: string
 *                     enum: [admin, moderator, member]
 *                     description: User's role level
 *                   status:
 *                     type: string
 *                     enum: [online, offline]
 *                     description: User's online status
 *                   createdAt:
 *                     type: string
 *                     format: date-time
 *                     description: User registration date
 *                   lastActive:
 *                     type: string
 *                     format: date-time
 *                     description: Last activity timestamp
 *             example:
 *               - id: "507f1f77bcf86cd799439011"
 *                 nickname: "john_doe"
 *                 role: "member"
 *                 status: "online"
 *                 createdAt: "2024-09-07T10:30:00Z"
 *                 lastActive: "2024-09-07T22:15:00Z"
 *       401:
 *         description: Authentication required
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       500:
 *         description: Server error
 */
console.log('🔧 GET /api/users route registered at startup');
app.get('/api/users', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const users = await User.find({}).select('_id nickname role status createdAt lastActive').sort({
      nickname: 1
    });
    logger.info(`Users list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      totalUsers: users.length
    });
    console.log('📤 Returning users data:', users.length);
    res.json(users);
  } catch (error) {
    logger.error('Error fetching users:', error);
    console.error('❌ Error in GET /api/users:', error.message);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('🔄 Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('⚠️ Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('❌ Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Performance monitoring endpoints
app.get('/api/health/detailed', getHealthCheck);
app.get('/api/performance/dashboard', (req, res) => {
  // Check if user is admin/moderator
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  getPerformanceDashboard(req, res);
});

// Performance alerts endpoint
app.get('/api/performance/alerts', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }

  // Run alerts check
  performanceMonitor.checkAlerts();
  res.json({
    timestamp: new Date().toISOString(),
    alerts_checked: true,
    message: 'Performance alerts checked - see server logs for any alerts'
  });
});

// Circuit breaker status endpoint
app.get('/api/circuit-breaker/status', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  const status = getCircuitBreakerStatuses();
  res.json({
    timestamp: new Date().toISOString(),
    services: status
  });
});

// Resource usage optimization endpoint
app.get('/api/optimization/status', async (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  try {
    const optimization = {
      timestamp: new Date().toISOString(),
      async_processes: process._getActiveHandles().length,
      memory_usage: process.memoryUsage(),
      connection_metrics: getCachedStats ? await getCachedStats() : {},
      performance_metrics: performanceMonitor.getDetailedStats ? performanceMonitor.getDetailedStats() : {},
      circuit_breakers: getCircuitBreakerStatuses()
    };
    res.json(optimization);
  } catch (error) {
    logger.error('Error getting optimization status:', error);
    res.status(500).json({
      error: 'Failed to get optimization status',
      message: error.message
    });
  }
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`🔍 Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('🔧 POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  // Use AuthService for login handling
  await authService.handleLoginWithSession(req.body.identifier, req.body.password, req, res);
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authService.authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  // Use AuthService for registration handling
  await authService.handleRegistrationWithSession(req.body, req, res);
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('🔧 GET /api/channels route registered at startup');
app.get('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  console.log('🚀 GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('📤 Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('❌ Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/logout route registered at startup');
app.post('/api/logout', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Logout request from user:', req.user.nickname, {
      userId: req.user._id
    });

    // Disconnect all Socket.IO connections for this user
    const sockets = onlineUsers;
    let disconnectedCount = 0;
    for (const [socketId, socketData] of sockets.entries()) {
      if (socketData.userId === req.user._id.toString()) {
        const socket = io.sockets.sockets.get(socketId);
        if (socket) {
          socket.disconnect();
          disconnectedCount++;
        }
      }
    }

    // Update user status to offline
    await User.findByIdAndUpdate(req.user._id, {
      status: 'offline',
      lastActive: new Date()
    });
    console.log(`✅ User ${req.user.nickname} logged out successfully, ${disconnectedCount} connections disconnected`);
    logger.info(`User logged out: ${req.user.nickname}`, {
      userId: req.user._id,
      disconnectedSockets: disconnectedCount
    });
    res.json({
      success: true,
      message: 'Logged out successfully',
      disconnectedCount
    });
  } catch (error) {
    logger.error('Logout error:', error);
    res.status(500).json({
      error: 'Server error during logout'
    });
  }
});

/**
 * Session logout endpoint - destroys session
 * This complements JWT logout to handle session-based authentication
 */
app.post('/api/logout_session', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Session logout request, sessionId:', req.sessionId);

    // Check if there's an authenticated session or JWT user
    const hasJwtAuth = !!req.user; // From JWT middleware
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    console.log('🤔 Session logout check:', {
      hasJwtAuth,
      hasSessionAuth,
      sessionUserId,
      sessionId: req.sessionId
    });
    if (hasSessionAuth) {
      const sessionUser = sessionUserId ? await User.findById(sessionUserId) : null;
      const nickname = sessionUser ? sessionUser.nickname : 'unknown';
      console.log('✅ Session logout: Destroying session for user:', nickname);

      // Disconnect Socket.IO connections for this session user
      if (sessionUserId) {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === sessionUserId) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
      }

      // Destroy the session
      await new Promise((resolve, reject) => {
        req.session.destroy(err => {
          if (err) {
            console.error('❌ Session destroy error:', err);
            reject(err);
          } else {
            console.log('✅ Session destroyed successfully');
            resolve();
          }
        });
      });
      logger.info(`Session logged out: ${nickname}`, {
        sessionId: req.sessionId,
        ip: req.ip
      });
      res.json({
        success: true,
        message: 'Session logged out successfully',
        type: 'session_logout',
        sessionDestroyed: true
      });
    } else {
      console.log('⚠️ Session logout: No authenticated session to destroy');
      res.json({
        success: true,
        message: 'No active session to log out',
        type: 'session_logout',
        sessionDestroyed: false
      });
    }
  } catch (error) {
    logger.error('Session logout error:', error);
    res.status(500).json({
      error: 'Server error during session logout',
      code: 'SESSION_LOGOUT_ERROR'
    });
  }
});

// Hybrid logout endpoint - handles both JWT and session logout
app.post('/api/logout_complete', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Complete logout request (JWT + Session), sessionId:', req.sessionId);
    const hasJwtAuth = !!req.user;
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    let jwtLogoutResult = null;
    let sessionLogoutResult = null;

    // Handle JWT logout if JWT is provided
    if (hasJwtAuth) {
      try {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === req.user._id.toString()) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        await User.findByIdAndUpdate(req.user._id, {
          status: 'offline',
          lastActive: new Date()
        });
        jwtLogoutResult = {
          success: true,
          disconnectedCount
        };
      } catch (jwtError) {
        jwtLogoutResult = {
          success: false,
          error: jwtError.message
        };
      }
    }

    // Handle session logout if session exists
    if (hasSessionAuth) {
      try {
        if (sessionUserId) {
          const sessionUser = await User.findById(sessionUserId);
          console.log('✅ Session logout: Destroying session for user:', sessionUser ? sessionUser.nickname : 'unknown');

          // Disconnect Socket.IO connections for this session user
          const sockets = onlineUsers;
          let disconnectedCount = 0;
          for (const [socketId, socketData] of sockets.entries()) {
            if (socketData.userId === sessionUserId) {
              const socket = io.sockets.sockets.get(socketId);
              if (socket) {
                socket.disconnect();
                disconnectedCount++;
              }
            }
          }
          console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
        }

        // Destroy the session
        await new Promise((resolve, reject) => {
          req.session.destroy(err => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
        sessionLogoutResult = {
          success: true,
          sessionDestroyed: true
        };
      } catch (sessionError) {
        sessionLogoutResult = {
          success: false,
          error: sessionError.message
        };
      }
    }
    const overallSuccess = (!jwtLogoutResult || jwtLogoutResult.success) && (!sessionLogoutResult || sessionLogoutResult.success);
    res.json({
      success: overallSuccess,
      message: 'Complete logout processed',
      type: 'complete_logout',
      jwt: jwtLogoutResult,
      session: sessionLogoutResult
    });
  } catch (error) {
    logger.error('Complete logout error:', error);
    res.status(500).json({
      error: 'Server error during complete logout',
      code: 'COMPLETE_LOGOUT_ERROR'
    });
  }
});

//  404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('❌ Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

// Improved Socket.IO session middleware with proper res object handling
io.use((socket, next) => {
  // Create a more complete mock res object if missing
  if (!socket.request.res) {
    socket.request.res = {
      setHeader: () => {},
      getHeader: () => {},
      writeHead: () => {},
      end: () => {},
      headersSent: false,
      statusCode: 200
    };
  }

  // Apply session middleware with error handling
  sessionMiddleware(socket.request, socket.request.res, err => {
    if (err) {
      console.error('Session middleware error for Socket.IO:', err);
      return next(err);
    }
    next();
  });
});

// Socket.IO authentication middleware
io.use(async (socket, next) => {
  const {
    csrfToken,
    sessionId
  } = socket.handshake.auth;
  let session = socket.request.session;

  // console.log('🔑 Socket authentication attempt with session and CSRF fingerprint check');
  // console.log('🔍 Raw socket auth data:', {
  //   csrfTokenProvided: !!csrfToken,
  //   sessionIdProvided: !!sessionId,
  //   sessionIdLength: sessionId?.length,
  //   sessionIdFromAuth: sessionId
  // });

  // If sessionId is provided in auth, try to recover the session from MongoDB store
  if (sessionId && (!session || !session.authenticated)) {
    // console.log('🔄 Attempting session recovery from MongoDB store using sessionId:', sessionId);

    try {
      // Load session from MongoDB store using the sessionId from JWT auth
      const MongoStoreInstance = sessionMiddleware.store;
      if (MongoStoreInstance && typeof MongoStoreInstance.get === 'function') {
        const sessionData = await new Promise((resolve, reject) => {
          MongoStoreInstance.get(sessionId, (err, data) => {
            if (err) reject(err);else resolve(data);
          });
        });

        // console.log('🔄 MongoDB session lookup result:', {
        //   sessionFound: !!sessionData,
        //   sessionAuthenticated: sessionData?.authenticated,
        //   sessionUserId: sessionData?.userId,
        //   sessionCsrfToken: !!sessionData?.csrfToken,
        //   csrfTokenMatches: csrfToken && sessionData?.csrfToken && csrfToken === sessionData.csrfToken
        // });

        if (sessionData && sessionData.authenticated) {
          // Replace socket.request.session with loaded session
          socket.request.session = sessionData;
          session = sessionData;
          console.log('✅ Socket session recovered from MongoDB');
        } else {
          console.log('⚠️ Socket session not found in MongoDB store');
        }
      }
    } catch (error) {
      console.error('❌ Error loading SOCKET session from MongoDB:', error.message);
    }
  }
  console.log('🔓 Fingerprint verification:', {
    sid: socket.request.sessionId,
    providedCsrfToken: csrfToken?.substring(0, 8) + '...',
    sessionCsrfToken: session?.csrfToken?.substring(0, 8) + '...',
    userAgent: socket.request.session?.userAgent?.substring(0, 20) + '...',
    loginTime: session?.loginTime,
    registrationTime: session?.registrationTime
  });

  // Validate session exists and has authentication
  if (!session || !session.authenticated || !session.userId) {
    console.log('❌ Socket authentication failed: No authenticated session found');
    console.log('📋 Session details:', {
      sessionId: socket.request.sessionId,
      session: !!session,
      authenticated: session?.authenticated,
      userId: session?.userId
    });
    return next(new Error('Session authentication required'));
  }

  // Validate CSRF token for additional security (must match session's unique CSRF token)
  if (!csrfToken || !session.csrfToken || csrfToken !== session.csrfToken) {
    console.log('❌ Socket authentication failed: Invalid CSRF token fingerprint');
    console.log('🔒 Fingerprint mismatch details:', {
      provided: csrfToken?.substring(0, 8) + '...',
      expected: session.csrfToken?.substring(0, 8) + '...',
      match: csrfToken === session.csrfToken
    });
    return next(new Error('CSRF validation failed'));
  }
  console.log('✅ Socket fingerprint verification successful');
  try {
    // Verify user exists in database
    const user = await User.findById(session.userId);
    if (!user) {
      console.log('❌ Socket authentication failed: User not found in DB');
      return next(new Error('User not found in session'));
    }

    // Handle user status update based on connection count
    const userId = session.userId;
    const connectionCount = userConnections.get(userId) || 0;
    const newConnectionCount = connectionCount + 1;
    userConnections.set(userId, newConnectionCount);

    // Check if user is banned
    if (user.isBanned()) {
      console.log('❌ Socket authentication failed: User is banned', {
        userId: userId,
        nickname: user.nickname,
        banReason: user.banReason,
        banExpires: user.banExpires
      });
      socket.emit('banned', {
        reason: user.banReason || 'You have been banned from the server',
        expires: user.banExpires
      });
      return next(new Error('User is banned'));
    }

    // Check if user is muted and enforce mute in chat
    const isMuted = user.isMuted();
    console.log('🔇 User mute status checked:', {
      nickname: user.nickname,
      isMuted,
      muteExpires: user.muteExpires
    });

    // Update user status with connection count tracking
    const updateResult = await User.findOneAndUpdate({
      _id: userId
    }, {
      $set: {
        status: newConnectionCount > 0 ? 'online' : 'offline',
        lastActive: new Date()
      }
    }, {
      new: true,
      runValidators: true
    });
    if (updateResult) {
      console.log(`🔄 Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
      logger.info(`User status updated to online via socket auth`, {
        userId: userId,
        nickname: user.nickname,
        connections: newConnectionCount,
        socketId: socket.id,
        timestamp: new Date()
      });
    }

    // Override local user object with updated data
    user.status = updateResult ? updateResult.status : 'online';
    user.lastActive = updateResult ? updateResult.lastActive : new Date();

    // Set socket properties for authenticated user
    socket.userId = session.userId;
    socket.nickname = session.nickname;
    socket.role = session.role || 'member';
    console.log(`🎉 Socket authenticated via session: ${socket.nickname} (userId: ${socket.userId})`);
    console.log('Socket authentication successful');
    return next();
  } catch (error) {
    console.error('❌ Socket authentication error:', error.message);
    logger.error(`Socket auth failed: ${error.message}`, {
      socketId: socket.id,
      sessionId: session?.id,
      ip: socket.handshake.address
    });
    return next(new Error('Socket authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`🧹 Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`🔄 User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('🚀 Socket connection established');
  console.log(`👤 User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`📊 Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Enhanced heartbeat mechanism with reconnection logic
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      const now = Date.now();
      user.lastHeartbeat = now;
      console.log(`💓 Heartbeat received from user ${socket.nickname} at ${new Date(now).toISOString()}`);
    } else {
      logger.warn(`Heartbeat received from unknown socket: ${socket.id}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };

  // Send heartbeat to client periodically
  const heartbeatInterval = setInterval(() => {
    if (socket.connected) {
      socket.emit('heartbeat_request');
    }
  }, 15000); // Send heartbeat every 15 seconds

  // Clear interval on disconnect
  socket.on('disconnect', () => {
    clearInterval(heartbeatInterval);
    // ... rest of disconnect logic
  });

  // Utility function for retrying database operations
  const retryDatabaseOperation = async (operation, retries = 3) => {
    for (let i = 0; i <= retries; i++) {
      try {
        return await operation();
      } catch (error) {
        if (i === retries) throw error;
        logger.warn(`Database operation failed, retry ${i + 1}/${retries}:`, error.message);
        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1))); // Exponential backoff
      }
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      await retryDatabaseOperation(async () => {
        // Verify channel exists
        const channel = await Channel.findOne({
          id: room
        });
        if (!channel) {
          logger.warn('Join room failed: Channel not found', {
            userId: socket.userId,
            nickname: socket.nickname,
            room
          });
          socket.emit('error', {
            message: `Channel '${room}' not found`,
            code: 'CHANNEL_NOT_FOUND',
            room,
            timestamp: new Date().toISOString()
          });
          throw new Error('Channel not found');
        }

        // Leave previous room
        if (socket.room) {
          socket.leave(socket.room);
          onlineUsers.set(socket.id, {
            ...onlineUsers.get(socket.id),
            room: null
          });

          // Update online users in previous room
          const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
            nickname: u.nickname,
            role: u.role
          }));
          io.to(socket.room).emit('online_users', previousRoomUsers);
        }
        socket.room = room;
        socket.join(socket.room);

        // Update user tracking
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: socket.room
        });
        logger.info(`User ${socket.nickname} joined room ${socket.room}`);

        // Send system message about joining
        const joinMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} joined the channel.`,
          type: 'system'
        });
        await joinMessage.save();
        io.to(socket.room).emit('message', {
          author: joinMessage.author,
          channel: joinMessage.channel,
          text: joinMessage.text,
          type: joinMessage.type,
          timestamp: joinMessage.timestamp
        });

        // Send online users in current room
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);

        // Send message history
        const history = await Message.find({
          channel: socket.room,
          $or: [{
            type: 'public'
          }, {
            type: 'system'
          }, {
            author: socket.nickname
          }, {
            target: socket.nickname
          }]
        }).sort({
          timestamp: -1
        }).limit(100).sort({
          timestamp: 1
        }); // Resort for chronological order

        socket.emit('history', history.map(msg => ({
          author: msg.author,
          room: msg.channel,
          text: msg.text,
          type: msg.type,
          target: msg.target,
          timestamp: msg.timestamp
        })));
      });
    } catch (error) {
      logger.error('Error in join_room after retries:', error);
      socket.emit('error', {
        message: 'Failed to join room after multiple attempts',
        code: 'JOIN_ROOM_FAILED',
        timestamp: new Date().toISOString()
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;

    // Check if user is muted
    const currentUser = await User.findById(socket.userId);
    if (currentUser && currentUser.isMuted()) {
      socket.emit('error', {
        message: 'You are muted and cannot send messages',
        code: 'USER_MUTED',
        muteExpires: currentUser.muteExpires
      });
      return;
    }
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`🔄 User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`✅ User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Optimize critical server functions
const optimizedInitializeDatabase = asyncOptimize(initializeServer, {
  concurrency: 1,
  timeout: 60000,
  slowThreshold: 10000
});

// Start the server with async optimization
if (process.env.NODE_ENV !== 'test') {
  optimizedInitializeDatabase().catch(err => {
    logger.error('Unhandled error during server startup:', err);
    process.exit(1);
  });
}

// Memory cleanup on long-running operations
setInterval(() => {
  if (global.gc) {
    global.gc();
    logger.debug('Manual garbage collection triggered');
  }
}, 300000); // Every 5 minutes

// Handle uncaught exceptions with circuit breaker protection
process.on('uncaughtException', error => {
  logger.error('Uncaught Exception:', error);
  // Don't exit immediately, let circuit breaker handle recovery
  setTimeout(() => {
    if (externalServiceBreaker.databaseBreaker.failureCount > 10) {
      logger.error('Multiple uncaught exceptions detected, forcing graceful shutdown');
      process.exit(1);
    }
  }, 1000);
});

// Handle unhandled promise rejections
process.on('unhandledRejection', (reason, promise) => {
  logger.error('Unhandled Rejection at:', promise, 'reason:', reason);
  // Don't exit, just log and let circuit breaker handle
});

// Graceful shutdown with resource cleanup
process.on('SIGTERM', async () => {
  logger.info('SIGTERM received, starting graceful shutdown...');
  try {
    // Close external service connections
    const circuitStatus = getCircuitBreakerStatuses();
    logger.info('Circuit breaker final status:', circuitStatus);

    // Clean up any remaining resources
    await closeDB();

    // Log final metrics
    const finalMetrics = performanceMonitor.getDetailedStats();
    logger.info('Final performance metrics:', {
      uptime: finalMetrics.uptime,
      totalRequests: finalMetrics.endpointStats ? Object.values(finalMetrics.endpointStats).reduce((acc, endpoint) => acc + (endpoint.count || 0), 0) : 0,
      memoryPeak: finalMetrics.memory?.heapTotal || 0
    });
    io.close(() => {
      logger.info('Server graceful shutdown complete');
      process.exit(0);
    });
  } catch (error) {
    logger.error('Error during graceful shutdown:', error);
    process.exit(1);
  }
});

// Periodic health self-assessment
setInterval(() => {
  const healthData = performanceMonitor.getHealthData();

  // Self-monitor critical metrics
  if (healthData.requests.averageResponseTime > 5000) {
    logger.warn('🚨 Self-monitor: High average response time detected', {
      avgTime: `${healthData.requests.averageResponseTime}ms`,
      threshold: '5000ms',
      timestamp: new Date().toISOString()
    });
  }
  if (healthData.memory.usagePercent > 0.9) {
    logger.warn('🚨 Self-monitor: High memory usage detected', {
      usage: healthData.memory.percentage,
      threshold: '90%',
      timestamp: new Date().toISOString()
    });

    // Trigger proactive cleanup
    if (global.gc) {
      global.gc();
      logger.info('🧹 Proactive garbage collection triggered');
    }
  }

  // Check circuit breaker status
  const circuitStatus = getCircuitBreakerStatuses();
  if (circuitStatus.database?.state === 'open') {
    logger.warn('🚨 Self-monitor: Database circuit breaker is OPEN', circuitStatus.database);
  }
  if (circuitStatus.redis?.state === 'open') {
    logger.warn('🚨 Self-monitor: Redis circuit breaker is OPEN', circuitStatus.redis);
  }
}, 60000); // Check every minute

module.exports = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNyeXB0byIsInNlc3Npb24iLCJSZWRpc1N0b3JlIiwicmVkaXNNYW5hZ2VyIiwiY29ubmVjdERCIiwiY2xvc2VEQiIsImVtYWlsU2VydmljZSIsInBlcmZvcm1hbmNlTW9uaXRvciIsImFwaVBlcmZvcm1hbmNlTWlkZGxld2FyZSIsImdldEhlYWx0aENoZWNrIiwiZ2V0UGVyZm9ybWFuY2VEYXNoYm9hcmQiLCJleHRlcm5hbFNlcnZpY2VCcmVha2VyIiwiY2lyY3VpdEJyZWFrZXJNaWRkbGV3YXJlIiwiYXN5bmNPcHRpbWl6ZSIsInByb3RlY3RFbWFpbCIsImdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMiLCJhdXRoU2VydmljZSIsImF1dGhSYXRlTGltaXRlciIsImFwaVJhdGVMaW1pdGVyIiwiZ2VuZXJhbFJhdGVMaW1pdGVyIiwiVXNlciIsIk1lc3NhZ2UiLCJDaGFubmVsIiwibG9nZ2VyIiwiY3JlYXRlTG9nZ2VyIiwibGV2ZWwiLCJmb3JtYXQiLCJjb21iaW5lIiwidGltZXN0YW1wIiwiZXJyb3JzIiwic3RhY2siLCJqc29uIiwiZGVmYXVsdE1ldGEiLCJzZXJ2aWNlIiwidHJhbnNwb3J0cyIsIkZpbGUiLCJmaWxlbmFtZSIsIkNvbnNvbGUiLCJjb2xvcml6ZSIsInNpbXBsZSIsImFwcCIsInNlcnZlciIsImNyZWF0ZVNlcnZlciIsImlvIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiQUxMT1dFRF9PUklHSU5TIiwic3BsaXQiLCJtZXRob2RzIiwiYWxsb3dlZEhlYWRlcnMiLCJjcmVkZW50aWFscyIsImNvbm5lY3RUaW1lb3V0IiwicGluZ1RpbWVvdXQiLCJwaW5nSW50ZXJ2YWwiLCJ1cGdyYWRlVGltZW91dCIsImFsbG93VXBncmFkZXMiLCJjb29raWVIdHRwT25seSIsImNvb2tpZVNhbWVTaXRlIiwiZW5naW5lIiwib24iLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvciIsImh0dHBTdGF0dXMiLCJzdGF0dXMiLCJoZWFkZXJzIiwicmVxIiwidXNlIiwibGltaXQiLCJzdHJpY3QiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzZXNzaW9uTWlkZGxld2FyZSIsInJlZGlzQ2xpZW50IiwiZ2V0Q2xpZW50IiwiaXNDbGllbnRSZWFkeSIsInNlY3JldCIsIlNFU1NJT05fU0VDUkVUIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzdG9yZSIsImNsaWVudCIsInByZWZpeCIsInR0bCIsImRpc2FibGVUb3VjaCIsImNvb2tpZSIsInNlY3VyZSIsImh0dHBPbmx5IiwibWF4QWdlIiwic2FtZVNpdGUiLCJuYW1lIiwicm9sbGluZyIsInVuc2V0IiwiZXJyb3JIYW5kbGVyIiwicmVzIiwibmV4dCIsInVybCIsIm1ldGhvZCIsImlwIiwidXNlckFnZW50IiwiZ2V0IiwiT2JqZWN0IiwidmFsdWVzIiwibWFwIiwiZSIsImZpZWxkIiwicGF0aCIsInZhbHVlIiwiZGV0YWlscyIsImtleXMiLCJrZXlWYWx1ZSIsInJlcXVlc3RJZCIsImlkIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZHVyYXRpb24iLCJpbmZvIiwic3RhdHVzQ29kZSIsInVzZXIiLCJuaWNrbmFtZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJhdXRoZW50aWNhdGVTZXNzaW9uIiwiYmluZCIsImNvbnRlbnRTZWN1cml0eVBvbGljeSIsImRpcmVjdGl2ZXMiLCJkZWZhdWx0U3JjIiwic3R5bGVTcmMiLCJmb250U3JjIiwiaW1nU3JjIiwic2NyaXB0U3JjIiwiY29ubmVjdFNyYyIsImNyb3NzT3JpZ2luRW1iZWRkZXJQb2xpY3kiLCJzd2FnZ2VyT3B0aW9ucyIsImRlZmluaXRpb24iLCJvcGVuYXBpIiwidGl0bGUiLCJ2ZXJzaW9uIiwiZGVzY3JpcHRpb24iLCJjb250YWN0Iiwic2VydmVycyIsImNvbXBvbmVudHMiLCJzY2hlbWFzIiwidHlwZSIsInByb3BlcnRpZXMiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJlbWFpbCIsInJvbGUiLCJlbnVtIiwiZGVmYXVsdCIsImNyZWF0ZWRBdCIsImxhc3RBY3RpdmUiLCJyZXF1aXJlZCIsImNyZWF0ZWRCeSIsInBvc2l0aW9uIiwiUmVnaXN0ZXJSZXF1ZXN0IiwicGFzc3dvcmQiLCJMb2dpblJlcXVlc3QiLCJpZGVudGlmaWVyIiwiQXV0aFJlc3BvbnNlIiwidG9rZW4iLCIkcmVmIiwiQ2hhbm5lbFJlcXVlc3QiLCJFcnJvclJlc3BvbnNlIiwiaXRlbXMiLCJtc2ciLCJwYXJhbSIsImxvY2F0aW9uIiwic2VjdXJpdHlTY2hlbWVzIiwiYmVhcmVyQXV0aCIsInNjaGVtZSIsImJlYXJlckZvcm1hdCIsInNlY3VyaXR5IiwiYXBpcyIsInN3YWdnZXJTcGVjIiwicmVtb3ZlSGVhZGVyIiwic2VydmUiLCJzZXR1cCIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxdWlyZU1vZGVyYXRvciIsInBhZ2UiLCJwYXJzZUludCIsInF1ZXJ5Iiwic2tpcCIsInVzZXJzIiwiZmluZCIsInNlbGVjdCIsInNvcnQiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYWRtaW5JZCIsIl9pZCIsInBhZ2luYXRpb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwicG9zdCIsImlzTGVuZ3RoIiwibWluIiwibWF4IiwidHJpbSIsIm9wdGlvbmFsIiwiaXNJbnQiLCJpc0VtcHR5IiwiYXJyYXkiLCJ1c2VySWQiLCJwYXJhbXMiLCJyZWFzb24iLCJmaW5kQnlJZCIsInRvU3RyaW5nIiwiYmFuIiwiYmFubmVkVXNlcklkIiwiYmFubmVkQnlJZCIsImJhbm5lZCIsImJhblJlYXNvbiIsImJhbkV4cGlyZXMiLCJ1bmJhbiIsInVuYmFubmVkVXNlcklkIiwidW5iYW5uZWRCeUlkIiwid2FybiIsInNhdmUiLCJ3YXJuZWRVc2VySWQiLCJ3YXJuZWRCeUlkIiwid2FybmluZyIsImlzc3VlZEJ5IiwiaXNzdWVkQXQiLCJleHBpcmVzIiwid2FybmluZ3NDb3VudCIsImdldEFjdGl2ZVdhcm5pbmdzQ291bnQiLCJyZXF1aXJlQWRtaW4iLCJpc0luIiwibmV3Um9sZSIsIm9sZFJvbGUiLCJjaGFuZ2VkVXNlcklkIiwiY2hhbmdlZEJ5SWQiLCJtdXRlIiwibXV0ZWRVc2VySWQiLCJtdXRlZEJ5SWQiLCJtdXRlRXhwaXJlcyIsImlzTXV0ZWQiLCJ1bm11dGUiLCJ1bm11dGVkVXNlcklkIiwidW5tdXRlZEJ5SWQiLCJ0b3RhbFVzZXJzIiwibGVuZ3RoIiwic2V0SGVhZGVyIiwic2VuZCIsImF1dGhMaW1pdGVyU3RvcmUiLCJyZXNldEFsbCIsInN1Y2Nlc3MiLCJ0b0lTT1N0cmluZyIsInVwdGltZSIsImNoZWNrQWxlcnRzIiwiYWxlcnRzX2NoZWNrZWQiLCJzZXJ2aWNlcyIsIm9wdGltaXphdGlvbiIsImFzeW5jX3Byb2Nlc3NlcyIsIl9nZXRBY3RpdmVIYW5kbGVzIiwibWVtb3J5X3VzYWdlIiwibWVtb3J5VXNhZ2UiLCJjb25uZWN0aW9uX21ldHJpY3MiLCJnZXRDYWNoZWRTdGF0cyIsInBlcmZvcm1hbmNlX21ldHJpY3MiLCJnZXREZXRhaWxlZFN0YXRzIiwiY2lyY3VpdF9icmVha2VycyIsImhhbmRsZUxvZ2luV2l0aFNlc3Npb24iLCJlc2NhcGUiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJoYW5kbGVSZWdpc3RyYXRpb25XaXRoU2Vzc2lvbiIsImF1dGhvcml6YXRpb24iLCJjaGFubmVscyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJzb2NrZXRzIiwib25saW5lVXNlcnMiLCJkaXNjb25uZWN0ZWRDb3VudCIsInNvY2tldElkIiwic29ja2V0RGF0YSIsImVudHJpZXMiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJkaXNjb25uZWN0ZWRTb2NrZXRzIiwic2Vzc2lvbklkIiwiaGFzSnd0QXV0aCIsImhhc1Nlc3Npb25BdXRoIiwic2Vzc2lvblVzZXIiLCJhdXRoZW50aWNhdGVkIiwic2Vzc2lvblVzZXJJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGVzdHJveSIsInNlc3Npb25EZXN0cm95ZWQiLCJqd3RMb2dvdXRSZXN1bHQiLCJzZXNzaW9uTG9nb3V0UmVzdWx0Iiwiand0RXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJvdmVyYWxsU3VjY2VzcyIsIk1hcCIsInVzZXJDb25uZWN0aW9ucyIsInZvaWNlQ2hhbm5lbHMiLCJyZXF1ZXN0IiwiZ2V0SGVhZGVyIiwid3JpdGVIZWFkIiwiZW5kIiwiaGVhZGVyc1NlbnQiLCJjc3JmVG9rZW4iLCJoYW5kc2hha2UiLCJhdXRoIiwiTW9uZ29TdG9yZUluc3RhbmNlIiwic2Vzc2lvbkRhdGEiLCJkYXRhIiwic2lkIiwicHJvdmlkZWRDc3JmVG9rZW4iLCJzdWJzdHJpbmciLCJzZXNzaW9uQ3NyZlRva2VuIiwibG9naW5UaW1lIiwicmVnaXN0cmF0aW9uVGltZSIsIkVycm9yIiwicHJvdmlkZWQiLCJleHBlY3RlZCIsIm1hdGNoIiwiY29ubmVjdGlvbkNvdW50IiwibmV3Q29ubmVjdGlvbkNvdW50Iiwic2V0IiwiaXNCYW5uZWQiLCJlbWl0IiwidXBkYXRlUmVzdWx0IiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRzZXQiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiY29ubmVjdGlvbnMiLCJhZGRyZXNzIiwiY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMiLCJ0aW1lb3V0IiwibGFzdEhlYXJ0YmVhdCIsImNvbm5lY3Rpb25zTGVmdCIsImNhdGNoIiwiZGVsZXRlIiwic2V0SW50ZXJ2YWwiLCJyb29tIiwic2l6ZSIsInVwZGF0ZUhlYXJ0YmVhdCIsImhlYXJ0YmVhdEludGVydmFsIiwiY29ubmVjdGVkIiwiY2xlYXJJbnRlcnZhbCIsInJldHJ5RGF0YWJhc2VPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJyZXRyaWVzIiwiaSIsInNldFRpbWVvdXQiLCJmaW5kT25lIiwibGVhdmUiLCJwcmV2aW91c1Jvb21Vc2VycyIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsInUiLCJ0byIsImpvaW4iLCJqb2luTWVzc2FnZSIsImF1dGhvciIsInRleHQiLCJyb29tVXNlcnMiLCJoaXN0b3J5IiwiJG9yIiwidGFyZ2V0IiwiY3VycmVudFVzZXIiLCJtZXNzYWdlRGF0YSIsImRlYnVnIiwidHJpbW1lZFRleHQiLCJ0YXJnZXROaWNrbmFtZSIsInNlbmRlclJvb20iLCJzZW5kZXJTb2NrZXRJZCIsInRhcmdldFVzZXIiLCJ0YXJnZXRGb3VuZCIsInRhcmdldFJvb20iLCJvbmxpbmVVc2Vyc0luUm9vbSIsIm9ubGluZVVzZXJzSW5TZW5kZXJSb29tIiwiYXZhaWxhYmxlVXNlcnMiLCJ0YXJnZXRTb2NrZXRJZCIsInNlbmRlciIsIm1lc3NhZ2VJZCIsIm9ubGluZVVzZXJzQ291bnQiLCJtZXNzYWdlTGVuZ3RoIiwic3BlYWtpbmciLCJoYXMiLCJjaGFubmVsUGVlcnMiLCJwZWVyQ29ubmVjdGlvbiIsInN0cmVhbSIsInZvaWNlQ2hhbm5lbCIsIm9mZmVyIiwiZnJvbU5pY2tuYW1lIiwiYW5zd2VyIiwiY2FuZGlkYXRlIiwiY3VycmVudENvdW50IiwibmV3Q291bnQiLCJsZWF2ZU1lc3NhZ2UiLCJyZW1haW5pbmdDb25uZWN0aW9ucyIsImluaXRpYWxpemVTZXJ2ZXIiLCJkZWZhdWx0Q2hhbm5lbHMiLCJjaGFubmVsRGF0YSIsInVwc2VydCIsIlBPUlQiLCJsaXN0ZW4iLCJleGl0IiwiY2xvc2UiLCJvcHRpbWl6ZWRJbml0aWFsaXplRGF0YWJhc2UiLCJjb25jdXJyZW5jeSIsInNsb3dUaHJlc2hvbGQiLCJnbG9iYWwiLCJnYyIsImRhdGFiYXNlQnJlYWtlciIsImZhaWx1cmVDb3VudCIsInByb21pc2UiLCJjaXJjdWl0U3RhdHVzIiwiZmluYWxNZXRyaWNzIiwidG90YWxSZXF1ZXN0cyIsImVuZHBvaW50U3RhdHMiLCJyZWR1Y2UiLCJhY2MiLCJlbmRwb2ludCIsImNvdW50IiwibWVtb3J5UGVhayIsIm1lbW9yeSIsImhlYXBUb3RhbCIsImhlYWx0aERhdGEiLCJnZXRIZWFsdGhEYXRhIiwicmVxdWVzdHMiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwiYXZnVGltZSIsInRocmVzaG9sZCIsInVzYWdlUGVyY2VudCIsInVzYWdlIiwicGVyY2VudGFnZSIsImRhdGFiYXNlIiwic3RhdGUiLCJyZWRpcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHNvY2tldElvID0gcmVxdWlyZSgnc29ja2V0LmlvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpO1xuY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IHJhdGVMaW1pdCA9IHJlcXVpcmUoJ2V4cHJlc3MtcmF0ZS1saW1pdCcpO1xuY29uc3QgeyBib2R5LCB2YWxpZGF0aW9uUmVzdWx0IH0gPSByZXF1aXJlKCdleHByZXNzLXZhbGlkYXRvcicpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuLy8gSW1wb3J0IGNyeXB0byBmb3IgZ2VuZXJhdGluZyBzZWN1cmUgdG9rZW5zXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcbmNvbnN0IFJlZGlzU3RvcmUgPSByZXF1aXJlKCdjb25uZWN0LXJlZGlzJyk7XG5jb25zdCB7IHJlZGlzTWFuYWdlciB9ID0gcmVxdWlyZSgnLi9zcmMvY29uZmlnL3JlZGlzJyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xvc2VEQiB9ID0gcmVxdWlyZSgnLi9kYi9jb25uZWN0aW9uJyk7XG5jb25zdCBlbWFpbFNlcnZpY2UgPSByZXF1aXJlKCcuL3NlcnZpY2VzL2VtYWlsU2VydmljZScpO1xuY29uc3Qge1xuICBwZXJmb3JtYW5jZU1vbml0b3IsXG4gIGFwaVBlcmZvcm1hbmNlTWlkZGxld2FyZSxcbiAgZ2V0SGVhbHRoQ2hlY2ssXG4gIGdldFBlcmZvcm1hbmNlRGFzaGJvYXJkXG59ID0gcmVxdWlyZSgnLi9zcmMvbWlkZGxld2FyZS9wZXJmb3JtYW5jZU1vbml0b3InKTtcbmNvbnN0IHtcbiAgZXh0ZXJuYWxTZXJ2aWNlQnJlYWtlcixcbiAgY2lyY3VpdEJyZWFrZXJNaWRkbGV3YXJlLFxuICBhc3luY09wdGltaXplLFxuICBwcm90ZWN0RW1haWwsXG4gIGdldENpcmN1aXRCcmVha2VyU3RhdHVzZXNcbn0gPSByZXF1aXJlKCcuL3NyYy9taWRkbGV3YXJlL2NpcmN1aXRCcmVha2VyJyk7XG5cbi8vIEltcG9ydCBBdXRoU2VydmljZSBmb3IgZXh0cmFjdGVkIGF1dGhlbnRpY2F0aW9uIGxvZ2ljXG5jb25zdCBhdXRoU2VydmljZSA9IHJlcXVpcmUoJy4vc3JjL3NlcnZpY2VzL2F1dGhTZXJ2aWNlJyk7XG5cbi8vIEV4dHJhY3QgcmF0ZSBsaW1pdGVycyBmcm9tIEF1dGhTZXJ2aWNlXG5jb25zdCB7IGF1dGhSYXRlTGltaXRlciwgYXBpUmF0ZUxpbWl0ZXIsIGdlbmVyYWxSYXRlTGltaXRlciB9ID0gYXV0aFNlcnZpY2U7XG5cbi8vIEltcG9ydCBtb2RlbHNcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuL21vZGVscy9Vc2VyJyk7XG5jb25zdCBNZXNzYWdlID0gcmVxdWlyZSgnLi9tb2RlbHMvTWVzc2FnZScpO1xuY29uc3QgQ2hhbm5lbCA9IHJlcXVpcmUoJy4vbW9kZWxzL0NoYW5uZWwnKTtcblxuLy8gTG9nZ2VyIHNldHVwXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gIGxldmVsOiAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoKSxcbiAgICB3aW5zdG9uLmZvcm1hdC5lcnJvcnMoeyBzdGFjazogdHJ1ZSB9KSxcbiAgICB3aW5zdG9uLmZvcm1hdC5qc29uKClcbiAgKSxcbiAgZGVmYXVsdE1ldGE6IHsgc2VydmljZTogJ2NoYXQtc2VydmVyJyB9LFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdsb2dzL3NlcnZlci5sb2cnIH0pLFxuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICApXG4gICAgfSlcbiAgXVxufSk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG5cbi8vIFJhdGUgbGltaXRlcnMgYXJlIG5vdyBoYW5kbGVkIGJ5IEF1dGhTZXJ2aWNlXG5jb25zdCBpbyA9IHNvY2tldElvKHNlcnZlciwge1xuICBjb3JzOiB7XG4gICAgb3JpZ2luOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG4gICAgICA/IHByb2Nlc3MuZW52LkFMTE9XRURfT1JJR0lOUz8uc3BsaXQoJywnKSB8fCBmYWxzZVxuICAgICAgOiBbXCJodHRwOi8vbG9jYWxob3N0OjMwMDNcIiwgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIl0sXG4gICAgbWV0aG9kczogW1wiR0VUXCIsIFwiUE9TVFwiXSxcbiAgICBhbGxvd2VkSGVhZGVyczogW1wiYXV0aG9yaXphdGlvblwiLCBcImNvbnRlbnQtdHlwZVwiXSxcbiAgICBjcmVkZW50aWFsczogdHJ1ZVxuICB9LFxuICAvLyBFbnN1cmUgYm90aCB0cmFuc3BvcnRzIGFyZSBzdXBwb3J0ZWRcbiAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAvLyBDb25uZWN0aW9uIHNldHRpbmdzIGZvciBiZXR0ZXIgcmVsaWFiaWxpdHlcbiAgY29ubmVjdFRpbWVvdXQ6IDIwMDAwLCAvLyAyMCBzZWNvbmRzXG4gIHBpbmdUaW1lb3V0OiA1MDAwLCAvLyA1IHNlY29uZHMgZm9yIHBpbmdcbiAgcGluZ0ludGVydmFsOiAxMDAwMCwgLy8gMTAgc2Vjb25kcyBiZXR3ZWVuIHBpbmdzXG4gIHVwZ3JhZGVUaW1lb3V0OiAxMDAwMCxcbiAgYWxsb3dVcGdyYWRlczogdHJ1ZSxcbiAgY29va2llSHR0cE9ubHk6IHRydWUsXG4gIGNvb2tpZVNhbWVTaXRlOiAnbGF4J1xufSk7XG5cbi8vIExvZyBzb2NrZXQgY29ubmVjdGlvbiBlcnJvcnMgZm9yIGRlYnVnZ2luZ1xuaW8uZW5naW5lLm9uKCdjb25uZWN0aW9uX2Vycm9yJywgKGVycikgPT4ge1xuICBjb25zb2xlLmxvZygn8J+UjCBTb2NrZXQgZW5naW5lIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyLmNvZGUsIGVyci5tZXNzYWdlKTtcbiAgbG9nZ2VyLmVycm9yKCdTb2NrZXQgY29ubmVjdGlvbiBlcnJvcjonLCB7XG4gICAgY29kZTogZXJyLmNvZGUsXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgaHR0cFN0YXR1czogZXJyLnN0YXR1cyxcbiAgICBoZWFkZXJzOiBlcnIucmVxPy5oZWFkZXJzXG4gIH0pO1xufSk7XG5cbi8vIENPUlMgY29uZmlndXJhdGlvblxuYXBwLnVzZShjb3JzKHtcbiAgb3JpZ2luOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG4gICAgPyBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlM/LnNwbGl0KCcsJykgfHwgZmFsc2VcbiAgICA6IHRydWUsXG4gIGNyZWRlbnRpYWxzOiB0cnVlXG59KSk7XG5cbmFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICcyMG1iJywgc3RyaWN0OiBmYWxzZSB9KSk7IC8vIEluY3JlYXNlZCBsaW1pdCBhbmQgZGlzYWJsZWQgc3RyaWN0IHBhcnNpbmcgZm9yIGJldHRlciBlcnJvciB0b2xlcmFuY2VcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUsIGxpbWl0OiAnMjBtYicgfSkpOyAvLyBIYW5kbGUgZm9ybSBkYXRhIHdpdGggaW5jcmVhc2VkIGxpbWl0XG5cbi8vIFNlc3Npb24gY29uZmlndXJhdGlvbiB3aXRoIFJlZGlzIHN0b3JlIGZvciBlbmhhbmNlZCBwZXJmb3JtYW5jZVxubGV0IHNlc3Npb25NaWRkbGV3YXJlO1xudHJ5IHtcbiAgY29uc3QgcmVkaXNDbGllbnQgPSByZWRpc01hbmFnZXIuZ2V0Q2xpZW50KCk7XG4gIGlmIChyZWRpc0NsaWVudCAmJiByZWRpc01hbmFnZXIuaXNDbGllbnRSZWFkeSgpKSB7XG4gICAgc2Vzc2lvbk1pZGRsZXdhcmUgPSBzZXNzaW9uKHtcbiAgICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgfHwgJ3lvdXItdmVyeS1sb25nLXNlY3VyZS1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJyxcbiAgICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXG4gICAgICBzdG9yZTogbmV3IFJlZGlzU3RvcmUoe1xuICAgICAgICBjbGllbnQ6IHJlZGlzQ2xpZW50LFxuICAgICAgICBwcmVmaXg6ICdzZXNzOicsXG4gICAgICAgIHR0bDogODY0MDAsIC8vIDI0IGhvdXJzXG4gICAgICAgIGRpc2FibGVUb3VjaDogZmFsc2UgLy8gQWxsb3cgYXV0b21hdGljIHRvdWNoXG4gICAgICB9KSxcbiAgICAgIGNvb2tpZToge1xuICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgIHNhbWVTaXRlOiAnbGF4J1xuICAgICAgfSxcbiAgICAgIG5hbWU6ICdjaGF0U2Vzc2lvbicsXG4gICAgICByb2xsaW5nOiBmYWxzZSxcbiAgICAgIHVuc2V0OiAnZGVzdHJveSdcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFJlZGlzIHNlc3Npb24gc3RvcmUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2sgdG8gbWVtb3J5IHN0b3JlIGlmIFJlZGlzIGlzIG5vdCBhdmFpbGFibGVcbiAgICBjb25zb2xlLmxvZygn4pqg77iPIFJlZGlzIG5vdCBhdmFpbGFibGUsIHVzaW5nIG1lbW9yeS1iYXNlZCBzZXNzaW9uIHN0b3JlJyk7XG4gICAgc2Vzc2lvbk1pZGRsZXdhcmUgPSBzZXNzaW9uKHtcbiAgICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgfHwgJ3lvdXItdmVyeS1sb25nLXNlY3VyZS1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJyxcbiAgICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXG4gICAgICBjb29raWU6IHtcbiAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICAgICBzYW1lU2l0ZTogJ2xheCdcbiAgICAgIH0sXG4gICAgICBuYW1lOiAnY2hhdFNlc3Npb24nLFxuICAgICAgcm9sbGluZzogZmFsc2UsXG4gICAgICB1bnNldDogJ2Rlc3Ryb3knXG4gICAgfSk7XG4gIH1cbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUubG9nKCfinYwgUmVkaXMgc2Vzc2lvbiBzdG9yZSBpbml0aWFsaXphdGlvbiBmYWlsZWQsIHVzaW5nIG1lbW9yeSBzdG9yZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgc2Vzc2lvbk1pZGRsZXdhcmUgPSBzZXNzaW9uKHtcbiAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICd5b3VyLXZlcnktbG9uZy1zZWN1cmUtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbicsXG4gICAgcmVzYXZlOiBmYWxzZSxcbiAgICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXG4gICAgY29va2llOiB7XG4gICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgIHNhbWVTaXRlOiAnbGF4J1xuICAgIH0sXG4gICAgbmFtZTogJ2NoYXRTZXNzaW9uJyxcbiAgICByb2xsaW5nOiBmYWxzZSxcbiAgICB1bnNldDogJ2Rlc3Ryb3knXG4gIH0pO1xufVxuXG5hcHAudXNlKHNlc3Npb25NaWRkbGV3YXJlKTtcblxuLy8gRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxuY29uc3QgZXJyb3JIYW5kbGVyID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgZXJyb3I6Jywge1xuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgdXJsOiByZXEudXJsLFxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICBpcDogcmVxLmlwLFxuICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpXG4gIH0pO1xuXG4gIC8vIE1vbmdvb3NlIHZhbGlkYXRpb24gZXJyb3JzXG4gIGlmIChlcnIubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICBjb25zdCBlcnJvcnMgPSBPYmplY3QudmFsdWVzKGVyci5lcnJvcnMpLm1hcChlID0+ICh7XG4gICAgICBmaWVsZDogZS5wYXRoLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICBkZXRhaWxzOiBlcnJvcnMsXG4gICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUidcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1vbmdvb3NlIGR1cGxpY2F0ZSBrZXkgZXJyb3JcbiAgaWYgKGVyci5jb2RlID09PSAxMTAwMCkge1xuICAgIGNvbnN0IGZpZWxkID0gT2JqZWN0LmtleXMoZXJyLmtleVZhbHVlKVswXTtcbiAgICBjb25zdCB2YWx1ZSA9IGVyci5rZXlWYWx1ZVtmaWVsZF07XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgIGVycm9yOiBgJHtmaWVsZH0gJyR7dmFsdWV9JyBhbHJlYWR5IGV4aXN0c2AsXG4gICAgICBjb2RlOiAnRFVQTElDQVRFX0VSUk9SJ1xuICAgIH0pO1xuICB9XG5cbiAgLy8gSldUIGVycm9yc1xuICBpZiAoZXJyLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgZXJyb3I6ICdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nLFxuICAgICAgY29kZTogJ0lOVkFMSURfVE9LRU4nXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZXJyLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgZXJyb3I6ICdUb2tlbiBoYXMgZXhwaXJlZCcsXG4gICAgICBjb2RlOiAnVE9LRU5fRVhQSVJFRCdcbiAgICB9KTtcbiAgfVxuXG4gIC8vIERlZmF1bHQgc2VydmVyIGVycm9yXG4gIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgY29kZTogJ0lOVEVSTkFMX0VSUk9SJyxcbiAgICByZXF1ZXN0SWQ6IHJlcS5pZCB8fCAndW5rbm93bidcbiAgfSk7XG59O1xuXG4vLyBSZXF1ZXN0IGxvZ2dpbmcgbWlkZGxld2FyZVxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuXG4gIHJlcy5vbignZmluaXNoJywgKCkgPT4ge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgIGxvZ2dlci5pbmZvKGAke3JlcS5tZXRob2R9ICR7cmVxLnVybH0gLSAke3Jlcy5zdGF0dXNDb2RlfSAoJHtkdXJhdGlvbn1tcylgLCB7XG4gICAgICBpcDogcmVxLmlwLFxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JyksXG4gICAgICB1c2VyOiByZXEudXNlcj8ubmlja25hbWUgfHwgJ2Fub255bW91cycsXG4gICAgICBib2R5OiByZXEubWV0aG9kICE9PSAnR0VUJyA/IEpTT04uc3RyaW5naWZ5KHJlcS5ib2R5KSA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9KTtcblxuICBuZXh0KCk7XG59KTtcblxuLy8gU2Vzc2lvbiBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlIG5vdyB1c2VzIEF1dGhTZXJ2aWNlXG5cbi8vIEpXVCBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlIG5vdyB1c2VzIEF1dGhTZXJ2aWNlXG5cbi8vIFJvbGUtYmFzZWQgYWNjZXNzIGNvbnRyb2wgbWlkZGxld2FyZSBub3cgdXNlcyBBdXRoU2VydmljZVxuXG4vLyBFcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXG5cbi8vIFVzZSBBdXRoU2VydmljZSBzZXNzaW9uIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmFwcC51c2UoYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlU2Vzc2lvbi5iaW5kKGF1dGhTZXJ2aWNlKSk7XG5cbi8vIEdlbmVyYWwgcmF0ZSBsaW1pdGluZyAoYXBwbGllZCB0byBhbGwgSFRUUCByZXF1ZXN0cykgLSB1c2luZyBBdXRoU2VydmljZVxuYXBwLnVzZShhdXRoU2VydmljZS5nZW5lcmFsUmF0ZUxpbWl0ZXIpO1xuXG4vLyBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIG1pZGRsZXdhcmVcbmFwcC51c2UoYXBpUGVyZm9ybWFuY2VNaWRkbGV3YXJlKCkpO1xuXG4vLyBIZWxtZXQgc2VjdXJpdHkgaGVhZGVyc1xuYXBwLnVzZShcbiAgaGVsbWV0KHtcbiAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICAgIGRpcmVjdGl2ZXM6IHtcbiAgICAgICAgZGVmYXVsdFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgICBzdHlsZVNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCIsIFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbVwiXSxcbiAgICAgICAgZm9udFNyYzogW1wiJ3NlbGYnXCIsIFwiaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbVwiXSxcbiAgICAgICAgaW1nU3JjOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiXSxcbiAgICAgICAgc2NyaXB0U3JjOiBbXCInc2VsZidcIiwgXCIndW5zYWZlLWlubGluZSdcIl0sXG4gICAgICAgIGNvbm5lY3RTcmM6IFtcIidzZWxmJ1wiXVxuICAgICAgfVxuICAgIH0sXG4gICAgY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeTogZmFsc2VcbiAgfSlcbik7XG5cbi8vIFN3YWdnZXIgY29uZmlndXJhdGlvblxuY29uc3Qgc3dhZ2dlck9wdGlvbnMgPSB7XG4gIGRlZmluaXRpb246IHtcbiAgICBvcGVuYXBpOiAnMy4wLjAnLFxuICAgIGluZm86IHtcbiAgICAgIHRpdGxlOiAnQ2hhdC1KUyBBUEknLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUkVTVCBBUEkgZm9yIENoYXQtSlMgYXBwbGljYXRpb24gd2l0aCByZWFsLXRpbWUgbWVzc2FnaW5nIGFuZCB2b2ljZSBjaGFubmVscycsXG4gICAgICBjb250YWN0OiB7XG4gICAgICAgIG5hbWU6ICdDaGF0LUpTIFN1cHBvcnQnXG4gICAgICB9XG4gICAgfSxcbiAgICBzZXJ2ZXJzOiBbXG4gICAgICB7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGV2ZWxvcG1lbnQgc2VydmVyJ1xuICAgICAgfVxuICAgIF0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgc2NoZW1hczoge1xuICAgICAgICBVc2VyOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciB1bmlxdWUgaWRlbnRpZmllcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIG5pY2tuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9sZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydhZG1pbicsICdtZW1iZXInXSxcbiAgICAgICAgICAgICAgZGVmYXVsdDogJ21lbWJlcicsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciByb2xlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGNyZWF0aW9uIHRpbWVzdGFtcCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xhc3QgYWN0aXZpdHkgdGltZXN0YW1wJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydvbmxpbmUnLCAnb2ZmbGluZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgb25saW5lIHN0YXR1cydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3JvbGUnXVxuICAgICAgICB9LFxuICAgICAgICBDaGFubmVsOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB1bmlxdWUgaWRlbnRpZmllciAoYXV0by1nZW5lcmF0ZWQgZnJvbSBuYW1lKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgZGlzcGxheSBuYW1lJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsndGV4dCcsICd2b2ljZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdHlwZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVkQnk6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRvciBuaWNrbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgcG9zaXRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydpZCcsICduYW1lJywgJ3R5cGUnLCAnY3JlYXRlZEJ5J11cbiAgICAgICAgfSxcbiAgICAgICAgUmVnaXN0ZXJSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmlja25hbWUnLCAnZW1haWwnLCAncGFzc3dvcmQnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSB1c2VybmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZW1haWwnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkIGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIHBhc3N3b3JkJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgTG9naW5SZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnaWRlbnRpZmllcicsICdwYXNzd29yZCddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlcm5hbWUgb3IgZW1haWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBwYXNzd29yZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIEF1dGhSZXNwb25zZToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pXVCBhY2Nlc3MgdG9rZW4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIENoYW5uZWxSZXF1ZXN0OiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmFtZScsICd0eXBlJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDEwMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgbmFtZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RleHQnLCAndm9pY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHR5cGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAwLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wdGlvbmFsIGNoYW5uZWwgZGVzY3JpcHRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBFcnJvclJlc3BvbnNlOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXJyb3IgbWVzc2FnZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBtc2c6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIHBhcmFtOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbjogeyB0eXBlOiAnc3RyaW5nJyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRpb24gZXJyb3JzIGFycmF5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlY3VyaXR5U2NoZW1lczoge1xuICAgICAgICBiZWFyZXJBdXRoOiB7XG4gICAgICAgICAgdHlwZTogJ2h0dHAnLFxuICAgICAgICAgIHNjaGVtZTogJ2JlYXJlcicsXG4gICAgICAgICAgYmVhcmVyRm9ybWF0OiAnSldUJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzZWN1cml0eTogW1xuICAgICAge1xuICAgICAgICBiZWFyZXJBdXRoOiBbXVxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgYXBpczogWycuL3NlcnZlci5qcyddIC8vIFBhdGggdG8gdGhlIEFQSSByb3V0ZXNcbn07XG5cbmNvbnN0IHN3YWdnZXJTcGVjID0gc3dhZ2dlckpzZG9jKHN3YWdnZXJPcHRpb25zKTtcblxuLy8gU3dhZ2dlciBVSSB3aXRoIENTUCBkaXNhYmxlZCBmb3IgdGhpcyByb3V0ZVxuYXBwLnVzZSgnL2FwaS1kb2NzJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIERpc2FibGUgQ1NQIGZvciBTd2FnZ2VyIFVJXG4gIHJlcy5yZW1vdmVIZWFkZXIoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5Jyk7XG4gIG5leHQoKTtcbn0sIHN3YWdnZXJVaS5zZXJ2ZSwgc3dhZ2dlclVpLnNldHVwKHN3YWdnZXJTcGVjKSk7XG5cbi8vIEFkbWluaXN0cmF0aXZlIGVuZHBvaW50cyAtIHJlcXVpcmUgbW9kZXJhdG9yIHByaXZpbGVnZXNcbmNvbnNvbGUubG9nKCfwn5SnIEFkbWluaXN0cmF0aXZlIEFQSSBlbmRwb2ludHMgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5cbi8vIEdFVCAvYXBpL2FkbWluL3VzZXJzIC0gTGlzdCBhbGwgdXNlcnMgd2l0aCBtb2RlcmF0aW9uIGluZm9cbmFwcC5nZXQoJy9hcGkvYWRtaW4vdXNlcnMnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UuYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgNTA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KVxuICAgICAgLnNlbGVjdCgnLXBhc3N3b3JkIC1yZXNldFBhc3N3b3JkVG9rZW4gLXJlc2V0UGFzc3dvcmRFeHBpcmVzIC1tb2RlcmF0aW9uVG9rZW4gLW1vZGVyYXRpb25Ub2tlbkV4cGlyZXMnKVxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgICAuc2tpcChza2lwKVxuICAgICAgLmxpbWl0KGxpbWl0KTtcblxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgVXNlci5jb3VudERvY3VtZW50cygpO1xuXG4gICAgbG9nZ2VyLmluZm8oYEFkbWluIHVzZXIgbGlzdCByZXF1ZXN0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICBhZG1pbklkOiByZXEudXNlci5faWQsXG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgdXNlcnMsXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnMgZm9yIGFkbWluOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXJzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL2JhbiAtIEJhbiBhIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvYmFuJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLmFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JlYXNvbicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwMCB9KS50cmltKCksXG4gIGJvZHkoJ2R1cmF0aW9uJykub3B0aW9uYWwoKS5pc0ludCh7IG1pbjogMSwgbWF4OiAzMTUzNjAwMCB9KSAvLyBNYXggMSB5ZWFyIGluIHNlY29uZHNcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyByZWFzb24sIGR1cmF0aW9uIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGJhbm5pbmcgeW91cnNlbGZcbiAgICBpZiAodXNlci5faWQudG9TdHJpbmcoKSA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQ2Fubm90IGJhbiB5b3Vyc2VsZicgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBub24tYWRtaW4gZnJvbSBiYW5uaW5nIGFkbWluXG4gICAgaWYgKHVzZXIucm9sZSA9PT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBiYW4gYWRtaW5pc3RyYXRvcicgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci5iYW4ocmVhc29uLCBkdXJhdGlvbiwgcmVxLnVzZXIuX2lkKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gYmFubmVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgYmFubmVkVXNlcklkOiB1c2VySWQsXG4gICAgICBiYW5uZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICByZWFzb24sXG4gICAgICBkdXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiBiYW5uZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBiYW5uZWQ6IHRydWUsXG4gICAgICAgIGJhblJlYXNvbjogcmVhc29uLFxuICAgICAgICBiYW5FeHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGJhbm5pbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBiYW4gdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bmJhbiAtIFVuYmFuIGEgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bmJhbicsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGlmICghdXNlci5iYW5uZWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlciBpcyBub3QgYmFubmVkJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLnVuYmFuKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHVuYmFubmVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdW5iYW5uZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIHVuYmFubmVkQnlJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIHVuYmFubmVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgYmFubmVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdW5iYW5uaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdW5iYW4gdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC93YXJuIC0gSXNzdWUgd2FybmluZyB0byB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3dhcm4nLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgncmVhc29uJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAwIH0pLnRyaW0oKSxcbiAgYm9keSgnZHVyYXRpb24nKS5vcHRpb25hbCgpLmlzSW50KHsgbWluOiAxLCBtYXg6IDMxNTM2MDAwIH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcmVhc29uLCBkdXJhdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci53YXJuKHJlYXNvbiwgcmVxLnVzZXIuX2lkLCBkdXJhdGlvbik7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgV2FybmluZyBpc3N1ZWQgdG8gdXNlciAke3VzZXIubmlja25hbWV9IGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgd2FybmVkVXNlcklkOiB1c2VySWQsXG4gICAgICB3YXJuZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICByZWFzb24sXG4gICAgICBkdXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFdhcm5pbmcgaXNzdWVkIHRvIHVzZXIgJHt1c2VyLm5pY2tuYW1lfWAsXG4gICAgICB3YXJuaW5nOiB7XG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgaXNzdWVkQnk6IHJlcS51c2VyLm5pY2tuYW1lLFxuICAgICAgICBpc3N1ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgZXhwaXJlczogZHVyYXRpb24gPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgZHVyYXRpb24pIDogbnVsbFxuICAgICAgfSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgd2FybmluZ3NDb3VudDogdXNlci5nZXRBY3RpdmVXYXJuaW5nc0NvdW50KClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHdhcm5pbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB3YXJuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvcm9sZSAtIENoYW5nZSB1c2VyIHJvbGVcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvcm9sZScsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlQWRtaW4uYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JvbGUnKS5pc0luKFsnbWVtYmVyJywgJ21vZGVyYXRvcicsICdhZG1pbiddKVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHJvbGU6IG5ld1JvbGUgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbW9kaWZ5aW5nIHlvdXIgb3duIHJvbGUgaW4gcG90ZW50aWFsbHkgcHJvYmxlbWF0aWMgd2F5c1xuICAgIGlmICh1c2VyLl9pZC50b1N0cmluZygpID09PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgbW9kaWZ5IHlvdXIgb3duIHJvbGUnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbm9uLWFkbWluIGZyb20gcHJvbW90aW5nIHRvIGFkbWluIG9yIGRlbW90aW5nIGFkbWluXG4gICAgaWYgKChuZXdSb2xlID09PSAnYWRtaW4nIHx8IHVzZXIucm9sZSA9PT0gJ2FkbWluJykgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdPbmx5IGFkbWluaXN0cmF0b3JzIGNhbiBtYW5hZ2UgYWRtaW4gcm9sZXMnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFJvbGUgPSB1c2VyLnJvbGU7XG4gICAgdXNlci5yb2xlID0gbmV3Um9sZTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7dXNlci5uaWNrbmFtZX0gcm9sZSBjaGFuZ2VkIGZyb20gJHtvbGRSb2xlfSB0byAke25ld1JvbGV9IGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgY2hhbmdlZFVzZXJJZDogdXNlcklkLFxuICAgICAgY2hhbmdlZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIG9sZFJvbGUsXG4gICAgICBuZXdSb2xlXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IHJvbGUgY2hhbmdlZCB0byAke25ld1JvbGV9YCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgcm9sZTogbmV3Um9sZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY2hhbmdpbmcgdXNlciByb2xlOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNoYW5nZSB1c2VyIHJvbGUnIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvbXV0ZSAtIE11dGUgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9tdXRlJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ2R1cmF0aW9uJykuaXNJbnQoeyBtaW46IDYwLCBtYXg6IDg2NDAwIH0pIC8vIDEgbWludXRlIHRvIDI0IGhvdXJzXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgZHVyYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIubXV0ZShkdXJhdGlvbik7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IG11dGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgbXV0ZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIG11dGVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gbXV0ZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBtdXRlRXhwaXJlczogdXNlci5tdXRlRXhwaXJlc1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgbXV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gbXV0ZSB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VubXV0ZSAtIFVubXV0ZSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3VubXV0ZScsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGlmICghdXNlci5pc011dGVkKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlciBpcyBub3QgbXV0ZWQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIudW5tdXRlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHVubXV0ZWQgYnkgJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1bm11dGVkVXNlcklkOiB1c2VySWQsXG4gICAgICB1bm11dGVkQnlJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIHVubXV0ZWRgLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBtdXRlRXhwaXJlczogbnVsbFxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdW5tdXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1bm11dGUgdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL3VzZXJzOlxuICogICBnZXQ6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gVXNlcnNcbiAqICAgICBzdW1tYXJ5OiBHZXQgbGlzdCBvZiBhbGwgcmVnaXN0ZXJlZCB1c2Vyc1xuICogICAgIGRlc2NyaXB0aW9uOiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB3aXRoIHRoZWlyIHJvbGVzIGFuZCBvbmxpbmUgc3RhdHVzXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTGlzdCBvZiB1c2VycyBzdWNjZXNzZnVsbHkgcmV0cmlldmVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICAgIGlkOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyB1bmlxdWUgaWRlbnRpZmllclxuICogICAgICAgICAgICAgICAgICAgbmlja25hbWU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIGRpc3BsYXkgbmFtZVxuICogICAgICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGVudW06IFthZG1pbiwgbW9kZXJhdG9yLCBtZW1iZXJdXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3Mgcm9sZSBsZXZlbFxuICogICAgICAgICAgICAgICAgICAgc3RhdHVzOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZW51bTogW29ubGluZSwgb2ZmbGluZV1cbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyBvbmxpbmUgc3RhdHVzXG4gKiAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGRhdGUtdGltZVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlciByZWdpc3RyYXRpb24gZGF0ZVxuICogICAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZTpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogZGF0ZS10aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBMYXN0IGFjdGl2aXR5IHRpbWVzdGFtcFxuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgLSBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICogICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gKiAgICAgICAgICAgICAgICAgc3RhdHVzOiBcIm9ubGluZVwiXG4gKiAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBcIjIwMjQtMDktMDdUMTA6MzA6MDBaXCJcbiAqICAgICAgICAgICAgICAgICBsYXN0QWN0aXZlOiBcIjIwMjQtMDktMDdUMjI6MTU6MDBaXCJcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAqL1xuY29uc29sZS5sb2coJ/CflKcgR0VUIC9hcGkvdXNlcnMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAuZ2V0KCcvYXBpL3VzZXJzJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJ19pZCBuaWNrbmFtZSByb2xlIHN0YXR1cyBjcmVhdGVkQXQgbGFzdEFjdGl2ZScpXG4gICAgICAuc29ydCh7IG5pY2tuYW1lOiAxIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXJzIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXG4gICAgICB0b3RhbFVzZXJzOiB1c2Vycy5sZW5ndGhcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFJldHVybmluZyB1c2VycyBkYXRhOicsIHVzZXJzLmxlbmd0aCk7XG4gICAgcmVzLmpzb24odXNlcnMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBHRVQgL2FwaS91c2VyczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXJzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbi8vIFN3YWdnZXIgSlNPTiBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS1kb2NzLmpzb24nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnJlbW92ZUhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knKTtcbiAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgcmVzLnNlbmQoc3dhZ2dlclNwZWMpO1xufSk7XG5cbi8vIERldmVsb3BtZW50IGFuZCB0ZXN0IGVuZHBvaW50IHRvIHJlc2V0IHJhdGUgbGltaXRpbmdcbmFwcC5wb3N0KCcvYXBpL3Jlc2V0LXJhdGVsaW1pdCcsIChyZXEsIHJlcykgPT4ge1xuICAvLyBJbiBhIHJlYWwgYXBwbGljYXRpb24sIHlvdSdkIHdhbnQgdG8gZ2V0IHRoZSBzdG9yZSBmcm9tIHRoZSBsaW1pdGVyIGluc3RhbmNlXG4gIC8vIEZvciBleHByZXNzLXJhdGUtbGltaXQgdjcrLCB5b3UgY2FuIGFjY2VzcyB0aGUgc3RvcmUgbGlrZSB0aGlzOlxuICB0cnkge1xuICAgIGNvbnN0IGF1dGhMaW1pdGVyU3RvcmUgPSBhdXRoUmF0ZUxpbWl0ZXIuc3RvcmU7XG4gICAgaWYgKGF1dGhMaW1pdGVyU3RvcmUgJiYgdHlwZW9mIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF1dGhMaW1pdGVyU3RvcmUucmVzZXRBbGwoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJhdGUgbGltaXRpbmcgcmVzZXQgZm9yIHRlc3RpbmcgcHVycG9zZXMnKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1JhdGUgbGltaXRpbmcgaGFzIGJlZW4gcmVzZXQnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBzdG9yZSBkb2Vzbid0IGV4cG9zZSByZXNldEFsbCwgY3JlYXRlIGEgdGVtcG9yYXJ5IHdvcmthcm91bmRcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUmF0ZSBsaW1pdGVyIHN0b3JlIGRvZXNuXFwndCBzdXBwb3J0IHJlc2V0QWxsIC0gcmF0ZSBsaW1pdGluZyB3aWxsIGV4cGlyZSBuYXR1cmFsbHknKTtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdDYW5ub3QgcmVzZXQgcmF0ZSBsaW1pdGluZyBhdXRvbWF0aWNhbGx5LCB3YWl0IGZvciB0aW1lb3V0JyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciByZXNldHRpbmcgcmF0ZSBsaW1pdGluZzonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byByZXNldCByYXRlIGxpbWl0aW5nJyB9KTtcbiAgfVxufSk7XG5cbi8vIEhlYWx0aCBjaGVjayBlbmRwb2ludFxuYXBwLmdldCgnL2hlYWx0aCcsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXB0aW1lOiBwcm9jZXNzLnVwdGltZSgpXG4gIH0pO1xufSk7XG5cbi8vIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgZW5kcG9pbnRzXG5hcHAuZ2V0KCcvYXBpL2hlYWx0aC9kZXRhaWxlZCcsIGdldEhlYWx0aENoZWNrKTtcblxuYXBwLmdldCgnL2FwaS9wZXJmb3JtYW5jZS9kYXNoYm9hcmQnLCAocmVxLCByZXMpID0+IHtcbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pbi9tb2RlcmF0b3JcbiAgaWYgKCFyZXEudXNlciB8fCAocmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnbW9kZXJhdG9yJykpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcgfSk7XG4gIH1cbiAgZ2V0UGVyZm9ybWFuY2VEYXNoYm9hcmQocmVxLCByZXMpO1xufSk7XG5cbi8vIFBlcmZvcm1hbmNlIGFsZXJ0cyBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS9wZXJmb3JtYW5jZS9hbGVydHMnLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKCFyZXEudXNlciB8fCAocmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnbW9kZXJhdG9yJykpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcgfSk7XG4gIH1cblxuICAvLyBSdW4gYWxlcnRzIGNoZWNrXG4gIHBlcmZvcm1hbmNlTW9uaXRvci5jaGVja0FsZXJ0cygpO1xuXG4gIHJlcy5qc29uKHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBhbGVydHNfY2hlY2tlZDogdHJ1ZSxcbiAgICBtZXNzYWdlOiAnUGVyZm9ybWFuY2UgYWxlcnRzIGNoZWNrZWQgLSBzZWUgc2VydmVyIGxvZ3MgZm9yIGFueSBhbGVydHMnXG4gIH0pO1xufSk7XG5cbi8vIENpcmN1aXQgYnJlYWtlciBzdGF0dXMgZW5kcG9pbnRcbmFwcC5nZXQoJy9hcGkvY2lyY3VpdC1icmVha2VyL3N0YXR1cycsIChyZXEsIHJlcykgPT4ge1xuICBpZiAoIXJlcS51c2VyIHx8IChyZXEudXNlci5yb2xlICE9PSAnYWRtaW4nICYmIHJlcS51c2VyLnJvbGUgIT09ICdtb2RlcmF0b3InKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHN0YXR1cyA9IGdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMoKTtcbiAgcmVzLmpzb24oe1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNlcnZpY2VzOiBzdGF0dXNcbiAgfSk7XG59KTtcblxuLy8gUmVzb3VyY2UgdXNhZ2Ugb3B0aW1pemF0aW9uIGVuZHBvaW50XG5hcHAuZ2V0KCcvYXBpL29wdGltaXphdGlvbi9zdGF0dXMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgaWYgKCFyZXEudXNlciB8fCAocmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnbW9kZXJhdG9yJykpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbiA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgYXN5bmNfcHJvY2Vzc2VzOiBwcm9jZXNzLl9nZXRBY3RpdmVIYW5kbGVzKCkubGVuZ3RoLFxuICAgICAgbWVtb3J5X3VzYWdlOiBwcm9jZXNzLm1lbW9yeVVzYWdlKCksXG4gICAgICBjb25uZWN0aW9uX21ldHJpY3M6IGdldENhY2hlZFN0YXRzID8gYXdhaXQgZ2V0Q2FjaGVkU3RhdHMoKSA6IHt9LFxuICAgICAgcGVyZm9ybWFuY2VfbWV0cmljczogcGVyZm9ybWFuY2VNb25pdG9yLmdldERldGFpbGVkU3RhdHMgPyBwZXJmb3JtYW5jZU1vbml0b3IuZ2V0RGV0YWlsZWRTdGF0cygpIDoge30sXG4gICAgICBjaXJjdWl0X2JyZWFrZXJzOiBnZXRDaXJjdWl0QnJlYWtlclN0YXR1c2VzKClcbiAgICB9O1xuXG4gICAgcmVzLmpzb24ob3B0aW1pemF0aW9uKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdldHRpbmcgb3B0aW1pemF0aW9uIHN0YXR1czonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgb3B0aW1pemF0aW9uIHN0YXR1cycsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG4vLyBMb2cgbWlkZGxld2FyZSB0byBjaGVjayBpbmNvbWluZyByZXF1ZXN0c1xuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgbG9nZ2VyLmluZm8oYPCflI0gSW5jb21pbmcgcmVxdWVzdDogJHtyZXEubWV0aG9kfSAke3JlcS51cmx9YCwge1xuICAgIGlwOiByZXEuaXAsXG4gICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JyksXG4gICAgaGVhZGVyczogcmVxLmhlYWRlcnNcbiAgfSk7XG4gIG5leHQoKTtcbn0pO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLyoqXG4gICAqIEBzd2FnZ2VyXG4gICAqIC9hcGkvbG9naW46XG4gICAqICAgcG9zdDpcbiAgICogICAgIHRhZ3M6XG4gICAqICAgICAgIC0gQXV0aGVudGljYXRpb25cbiAgICogICAgIHN1bW1hcnk6IExvZ2luIGV4aXN0aW5nIHVzZXJcbiAgICogICAgIGRlc2NyaXB0aW9uOiBBdXRoZW50aWNhdGVzIGFuZCBsb2dzIGluIGFuIGV4aXN0aW5nIHVzZXIgd2l0aCBKV1QgdG9rZW5cbiAgICogICAgIHJlcXVlc3RCb2R5OlxuICAgKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgKiAgICAgICBjb250ZW50OlxuICAgKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICAqICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Mb2dpblJlcXVlc3QnXG4gICAqICAgICByZXNwb25zZXM6XG4gICAqICAgICAgIDIwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogTG9naW4gc3VjY2Vzc2Z1bFxuICAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhSZXNwb25zZSdcbiAgICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgICogICAgICAgICAgICAgICB0b2tlbjogXCJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuLi5cIlxuICAgKiAgICAgICAgICAgICAgIHVzZXI6XG4gICAqICAgICAgICAgICAgICAgICBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICAgKiAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAgKiAgICAgICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gICAqICAgICAgIDQwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogSW52YWxpZCBjcmVkZW50aWFscyBvciB2YWxpZGF0aW9uIGVycm9yc1xuICAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gICAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gICAqICAgICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFsc1wiXG4gICAqICAgICAgIDUwMDpcbiAgICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gICAqL1xuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2xvZ2luIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLnBvc3QoJy9hcGkvbG9naW4nLCBbXG4gIGJvZHkoJ2lkZW50aWZpZXInKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KS50cmltKCksXG4gIGJvZHkoJ3Bhc3N3b3JkJykuaXNMZW5ndGgoeyBtaW46IDYsIG1heDogMTAwIH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gVXNlIEF1dGhTZXJ2aWNlIGZvciBsb2dpbiBoYW5kbGluZ1xuICBhd2FpdCBhdXRoU2VydmljZS5oYW5kbGVMb2dpbldpdGhTZXNzaW9uKHJlcS5ib2R5LmlkZW50aWZpZXIsIHJlcS5ib2R5LnBhc3N3b3JkLCByZXEsIHJlcyk7XG59KTtcblxuLyoqXG4gICAqIEBzd2FnZ2VyXG4gICAqIC9hcGkvcmVnaXN0ZXI6XG4gICogICBwb3N0OlxuICAqICAgICB0YWdzOlxuICAqICAgICAgIC0gQXV0aGVudGljYXRpb25cbiAgKiAgICAgc3VtbWFyeTogUmVnaXN0ZXIgbmV3IHVzZXJcbiAgKiAgICAgZGVzY3JpcHRpb246IENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFuZCByZXR1cm5zIEpXVCB0b2tlblxuICAqICAgICByZXF1ZXN0Qm9keTpcbiAgKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAqICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICBzY2hlbWE6XG4gICogICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1JlZ2lzdGVyUmVxdWVzdCdcbiAgKiAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICogICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICogICAgICAgICAgICAgcGFzc3dvcmQ6IFwic2VjdXJlUGFzczEyM1wiXG4gICogICAgIHJlc3BvbnNlczpcbiAgKiAgICAgICAyMDE6XG4gICogICAgICAgICBkZXNjcmlwdGlvbjogUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWxcbiAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhSZXNwb25zZSdcbiAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAqICAgICAgICAgICAgICAgdG9rZW46IFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5Li4uXCJcbiAgKiAgICAgICAgICAgICAgIHVzZXI6XG4gICogICAgICAgICAgICAgICAgIGlkOiBcIjUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMVwiXG4gICogICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAgKiAgICAgICAgICAgICAgICAgZW1haWw6IFwiam9obkBleGFtcGxlLmNvbVwiXG4gICogICAgICAgICAgICAgICAgIHJvbGU6IFwibWVtYmVyXCJcbiAgKiAgICAgICA0MDA6XG4gICogICAgICAgICBkZXNjcmlwdGlvbjogVmFsaWRhdGlvbiBlcnJvcnMgb3IgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAqICAgICAgICAgY29udGVudDpcbiAgKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgICBzY2hlbWE6XG4gICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAqICAgICAgICAgICAgICAgZXJyb3I6IFwiTmlja25hbWUgYWxyZWFkeSB0YWtlblwiXG4gICogICAgICAgNTAwOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICAqL1xuYXBwLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBhdXRoU2VydmljZS5hdXRoUmF0ZUxpbWl0ZXIsIFtcbiAgYm9keSgnbmlja25hbWUnKS5pc0xlbmd0aCh7IG1pbjogMywgbWF4OiA1MCB9KS50cmltKCkuZXNjYXBlKCksXG4gIGJvZHkoJ2VtYWlsJykuaXNFbWFpbCgpLm5vcm1hbGl6ZUVtYWlsKCksXG4gIGJvZHkoJ3Bhc3N3b3JkJykuaXNMZW5ndGgoeyBtaW46IDYgfSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBVc2UgQXV0aFNlcnZpY2UgZm9yIHJlZ2lzdHJhdGlvbiBoYW5kbGluZ1xuICBhd2FpdCBhdXRoU2VydmljZS5oYW5kbGVSZWdpc3RyYXRpb25XaXRoU2Vzc2lvbihyZXEuYm9keSwgcmVxLCByZXMpO1xufSk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvY2hhbm5lbHM6XG4gKiAgIGdldDpcbiAqICAgICB0YWdzOlxuICogICAgICAgLSBDaGFubmVsc1xuICogICAgIHN1bW1hcnk6IEdldCBsaXN0IG9mIGNoYW5uZWxzXG4gKiAgICAgZGVzY3JpcHRpb246IFJldHJpZXZlcyBhIGxpc3Qgb2YgYWxsIGF2YWlsYWJsZSBjaGFubmVsc1xuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IExpc3Qgb2YgY2hhbm5lbHNcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBhcnJheVxuICogICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbCdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIC0gaWQ6IFwiZ2VuZXJhbFwiXG4gKiAgICAgICAgICAgICAgICAgbmFtZTogXCJHZW5lcmFsXCJcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiXG4gKiAgICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBcInN5c3RlbVwiXG4gKiAgICAgICAgICAgICAgICAgcG9zaXRpb246IDBcbiAqICAgICAgIDQwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVuYXV0aG9yaXplZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgZXJyb3I6IFwiQWNjZXNzIHRva2VuIHJlcXVpcmVkXCJcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludGVybmFsIHNlcnZlciBlcnJvclxuICovXG5jb25zb2xlLmxvZygn8J+UpyBHRVQgL2FwaS9jaGFubmVscyByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5nZXQoJy9hcGkvY2hhbm5lbHMnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZygn8J+agCBHRVQgL2FwaS9jaGFubmVscyBlbmRwb2ludCBjYWxsZWQnLCB7IG1ldGhvZDogcmVxLm1ldGhvZCwgdXJsOiByZXEudXJsLCBoZWFkZXJzOiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID8gJ2F1dGggaGVhZGVyIHByZXNlbnQnIDogJ25vIGF1dGggaGVhZGVyJyB9KTtcbiAgdHJ5IHtcbiAgICBjb25zdCBjaGFubmVscyA9IGF3YWl0IENoYW5uZWwuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJy1faWQgaWQgbmFtZSB0eXBlIGRlc2NyaXB0aW9uIGNyZWF0ZWRCeSBwb3NpdGlvbicpXG4gICAgICAuc29ydCh7IHBvc2l0aW9uOiAxIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oYENoYW5uZWxzIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXG4gICAgICBjaGFubmVsQ291bnQ6IGNoYW5uZWxzLmxlbmd0aFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfk6QgUmV0dXJuaW5nIGNoYW5uZWxzIGRhdGE6JywgY2hhbm5lbHMubGVuZ3RoKTtcbiAgICByZXMuanNvbihjaGFubmVscyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBjaGFubmVsczonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluIEdFVCAvYXBpL2NoYW5uZWxzOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggY2hhbm5lbHMnLCBjb2RlOiAnREFUQUJBU0VfRVJST1InIH0pO1xuICB9XG59KTtcblxuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2NoYW5uZWxzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL2NoYW5uZWxzOlxuICogICBwb3N0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIENoYW5uZWxzXG4gKiAgICAgc3VtbWFyeTogQ3JlYXRlIGEgbmV3IGNoYW5uZWxcbiAqICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlcyBhIG5ldyB0ZXh0IG9yIHZvaWNlIGNoYW5uZWxcbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9DaGFubmVsUmVxdWVzdCdcbiAqICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgbmFtZTogXCJOZXdDaGFubmVsXCJcbiAqICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiXG4gKiAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXNjcmlwdGlvbiBvZiB0aGUgbmV3IGNoYW5uZWxcIlxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENoYW5uZWwgY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbCdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGlkOiBcIm5ld2NoYW5uZWxcIlxuICogICAgICAgICAgICAgICBuYW1lOiBcIk5ld0NoYW5uZWxcIlxuICogICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXNjcmlwdGlvbiBvZiB0aGUgbmV3IGNoYW5uZWxcIlxuICogICAgICAgICAgICAgICBjcmVhdGVkQnk6IFwiam9obl9kb2VcIlxuICogICAgICAgICAgICAgICBwb3NpdGlvbjogMTBcbiAqICAgICAgIDQwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IEludmFsaWQgcmVxdWVzdCBkYXRhXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVbmF1dGhvcml6ZWRcbiAqICAgICAgIDQwOTpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENoYW5uZWwgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gKi9cbmFwcC5wb3N0KCcvYXBpL2NoYW5uZWxzJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ25hbWUnKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiAxMDAgfSkudHJpbSgpLmVzY2FwZSgpLFxuICBib2R5KCd0eXBlJykuaXNJbihbJ3RleHQnLCAndm9pY2UnXSkudHJpbSgpLFxuICBib2R5KCdkZXNjcmlwdGlvbicpLm9wdGlvbmFsKCkuaXNMZW5ndGgoeyBtYXg6IDUwMCB9KS50cmltKClcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBuYW1lLCB0eXBlLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgY3JlYXRlZEJ5ID0gcmVxLnVzZXIubmlja25hbWU7XG5cbiAgICAvLyBDcmVhdGUgbmV3IGNoYW5uZWwgKElEIHdpbGwgYmUgYXV0by1nZW5lcmF0ZWQgaW4gcHJlLXNhdmUgbWlkZGxld2FyZSlcbiAgICBjb25zdCBjaGFubmVsID0gbmV3IENoYW5uZWwoe1xuICAgICAgbmFtZSxcbiAgICAgIHR5cGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGNyZWF0ZWRCeVxuICAgIH0pO1xuXG4gICAgYXdhaXQgY2hhbm5lbC5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgQ2hhbm5lbCAnJHtuYW1lfScgY3JlYXRlZCBieSAke2NyZWF0ZWRCeX1gLCB7XG4gICAgICBjaGFubmVsSWQ6IGNoYW5uZWwuaWQsXG4gICAgICB0eXBlLFxuICAgICAgdXNlcklkOiByZXEudXNlci5faWRcbiAgICB9KTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGlkOiBjaGFubmVsLmlkLFxuICAgICAgbmFtZTogY2hhbm5lbC5uYW1lLFxuICAgICAgdHlwZTogY2hhbm5lbC50eXBlLFxuICAgICAgZGVzY3JpcHRpb246IGNoYW5uZWwuZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQnk6IGNoYW5uZWwuY3JlYXRlZEJ5LFxuICAgICAgcG9zaXRpb246IGNoYW5uZWwucG9zaXRpb25cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2hhbm5lbDonLCBlcnJvcik7XG5cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjaGFubmVsIGRhdGEnLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gMTEwMDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQ2hhbm5lbCBuYW1lIGFscmVhZHkgZXhpc3RzJyxcbiAgICAgICAgY29kZTogJ0RVUExJQ0FURV9DSEFOTkVMJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNoYW5uZWwnLFxuICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuY29uc29sZS5sb2coJ/CflKcgUE9TVCAvYXBpL2xvZ291dCByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5wb3N0KCcvYXBpL2xvZ291dCcsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogTG9nb3V0IHJlcXVlc3QgZnJvbSB1c2VyOicsIHJlcS51c2VyLm5pY2tuYW1lLCB7IHVzZXJJZDogcmVxLnVzZXIuX2lkIH0pO1xuXG4gICAgLy8gRGlzY29ubmVjdCBhbGwgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHVzZXJcbiAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgdG8gb2ZmbGluZVxuICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuX2lkLCB7XG4gICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgVXNlciAke3JlcS51c2VyLm5pY2tuYW1lfSBsb2dnZWQgb3V0IHN1Y2Nlc3NmdWxseSwgJHtkaXNjb25uZWN0ZWRDb3VudH0gY29ubmVjdGlvbnMgZGlzY29ubmVjdGVkYCk7XG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgbG9nZ2VkIG91dDogJHtyZXEudXNlci5uaWNrbmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGRpc2Nvbm5lY3RlZFNvY2tldHM6IGRpc2Nvbm5lY3RlZENvdW50XG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0xvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRpc2Nvbm5lY3RlZENvdW50XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdMb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGxvZ291dCcgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFNlc3Npb24gbG9nb3V0IGVuZHBvaW50IC0gZGVzdHJveXMgc2Vzc2lvblxuICogVGhpcyBjb21wbGVtZW50cyBKV1QgbG9nb3V0IHRvIGhhbmRsZSBzZXNzaW9uLWJhc2VkIGF1dGhlbnRpY2F0aW9uXG4gKi9cbmFwcC5wb3N0KCcvYXBpL2xvZ291dF9zZXNzaW9uJywgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5qqIFNlc3Npb24gbG9nb3V0IHJlcXVlc3QsIHNlc3Npb25JZDonLCByZXEuc2Vzc2lvbklkKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gYXV0aGVudGljYXRlZCBzZXNzaW9uIG9yIEpXVCB1c2VyXG4gICAgY29uc3QgaGFzSnd0QXV0aCA9ICEhcmVxLnVzZXI7IC8vIEZyb20gSldUIG1pZGRsZXdhcmVcbiAgICBjb25zdCBoYXNTZXNzaW9uQXV0aCA9IHJlcS5zZXNzaW9uVXNlciB8fCAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCk7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXJJZCA9IHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnVzZXJJZDtcblxuICAgIGNvbnNvbGUubG9nKCfwn6SUIFNlc3Npb24gbG9nb3V0IGNoZWNrOicsIHtcbiAgICAgIGhhc0p3dEF1dGgsXG4gICAgICBoYXNTZXNzaW9uQXV0aCxcbiAgICAgIHNlc3Npb25Vc2VySWQsXG4gICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWRcbiAgICB9KTtcblxuICAgIGlmIChoYXNTZXNzaW9uQXV0aCkge1xuICAgICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBzZXNzaW9uVXNlcklkID8gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uVXNlcklkKSA6IG51bGw7XG4gICAgICBjb25zdCBuaWNrbmFtZSA9IHNlc3Npb25Vc2VyID8gc2Vzc2lvblVzZXIubmlja25hbWUgOiAndW5rbm93bic7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBsb2dvdXQ6IERlc3Ryb3lpbmcgc2Vzc2lvbiBmb3IgdXNlcjonLCBuaWNrbmFtZSk7XG5cbiAgICAgIC8vIERpc2Nvbm5lY3QgU29ja2V0LklPIGNvbm5lY3Rpb25zIGZvciB0aGlzIHNlc3Npb24gdXNlclxuICAgICAgaWYgKHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgY29uc3Qgc29ja2V0cyA9IG9ubGluZVVzZXJzO1xuICAgICAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoc29ja2V0RGF0YS51c2VySWQgPT09IHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFNlc3Npb24gbG9nb3V0OiBEaXNjb25uZWN0ZWQgJHtkaXNjb25uZWN0ZWRDb3VudH0gc29ja2V0IGNvbm5lY3Rpb25zYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlc3Ryb3kgdGhlIHNlc3Npb25cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFNlc3Npb24gZGVzdHJveSBlcnJvcjonLCBlcnIpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBkZXN0cm95ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgU2Vzc2lvbiBsb2dnZWQgb3V0OiAke25pY2tuYW1lfWAsIHtcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxuICAgICAgICBpcDogcmVxLmlwXG4gICAgICB9KTtcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnU2Vzc2lvbiBsb2dnZWQgb3V0IHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIHR5cGU6ICdzZXNzaW9uX2xvZ291dCcsXG4gICAgICAgIHNlc3Npb25EZXN0cm95ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFNlc3Npb24gbG9nb3V0OiBObyBhdXRoZW50aWNhdGVkIHNlc3Npb24gdG8gZGVzdHJveScpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnTm8gYWN0aXZlIHNlc3Npb24gdG8gbG9nIG91dCcsXG4gICAgICAgIHR5cGU6ICdzZXNzaW9uX2xvZ291dCcsXG4gICAgICAgIHNlc3Npb25EZXN0cm95ZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1Nlc3Npb24gbG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NlcnZlciBlcnJvciBkdXJpbmcgc2Vzc2lvbiBsb2dvdXQnLFxuICAgICAgY29kZTogJ1NFU1NJT05fTE9HT1VUX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLy8gSHlicmlkIGxvZ291dCBlbmRwb2ludCAtIGhhbmRsZXMgYm90aCBKV1QgYW5kIHNlc3Npb24gbG9nb3V0XG5hcHAucG9zdCgnL2FwaS9sb2dvdXRfY29tcGxldGUnLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmqogQ29tcGxldGUgbG9nb3V0IHJlcXVlc3QgKEpXVCArIFNlc3Npb24pLCBzZXNzaW9uSWQ6JywgcmVxLnNlc3Npb25JZCk7XG5cbiAgICBjb25zdCBoYXNKd3RBdXRoID0gISFyZXEudXNlcjtcbiAgICBjb25zdCBoYXNTZXNzaW9uQXV0aCA9IHJlcS5zZXNzaW9uVXNlciB8fCAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24uYXV0aGVudGljYXRlZCk7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXJJZCA9IHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnVzZXJJZDtcblxuICAgIGxldCBqd3RMb2dvdXRSZXN1bHQgPSBudWxsO1xuICAgIGxldCBzZXNzaW9uTG9nb3V0UmVzdWx0ID0gbnVsbDtcblxuICAgIC8vIEhhbmRsZSBKV1QgbG9nb3V0IGlmIEpXVCBpcyBwcm92aWRlZFxuICAgIGlmIChoYXNKd3RBdXRoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgW3NvY2tldElkLCBzb2NrZXREYXRhXSBvZiBzb2NrZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuX2lkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICB9KTtcblxuICAgICAgICBqd3RMb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoand0RXJyb3IpIHtcbiAgICAgICAgand0TG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBqd3RFcnJvci5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNlc3Npb24gbG9nb3V0IGlmIHNlc3Npb24gZXhpc3RzXG4gICAgaWYgKGhhc1Nlc3Npb25BdXRoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25Vc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uVXNlcklkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gbG9nb3V0OiBEZXN0cm95aW5nIHNlc3Npb24gZm9yIHVzZXI6Jywgc2Vzc2lvblVzZXIgPyBzZXNzaW9uVXNlci5uaWNrbmFtZSA6ICd1bmtub3duJyk7XG5cbiAgICAgICAgICAvLyBEaXNjb25uZWN0IFNvY2tldC5JTyBjb25uZWN0aW9ucyBmb3IgdGhpcyBzZXNzaW9uIHVzZXJcbiAgICAgICAgICBjb25zdCBzb2NrZXRzID0gb25saW5lVXNlcnM7XG4gICAgICAgICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChzb2NrZXREYXRhLnVzZXJJZCA9PT0gc2Vzc2lvblVzZXJJZCkge1xuICAgICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyBTZXNzaW9uIGxvZ291dDogRGlzY29ubmVjdGVkICR7ZGlzY29ubmVjdGVkQ291bnR9IHNvY2tldCBjb25uZWN0aW9uc2ApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVzdHJveSB0aGUgc2Vzc2lvblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXNzaW9uTG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgc2Vzc2lvbkRlc3Ryb3llZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoc2Vzc2lvbkVycm9yKSB7XG4gICAgICAgIHNlc3Npb25Mb2dvdXRSZXN1bHQgPSB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHNlc3Npb25FcnJvci5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcmFsbFN1Y2Nlc3MgPSAoIWp3dExvZ291dFJlc3VsdCB8fCBqd3RMb2dvdXRSZXN1bHQuc3VjY2VzcykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKCFzZXNzaW9uTG9nb3V0UmVzdWx0IHx8IHNlc3Npb25Mb2dvdXRSZXN1bHQuc3VjY2Vzcyk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiBvdmVyYWxsU3VjY2VzcyxcbiAgICAgIG1lc3NhZ2U6ICdDb21wbGV0ZSBsb2dvdXQgcHJvY2Vzc2VkJyxcbiAgICAgIHR5cGU6ICdjb21wbGV0ZV9sb2dvdXQnLFxuICAgICAgand0OiBqd3RMb2dvdXRSZXN1bHQsXG4gICAgICBzZXNzaW9uOiBzZXNzaW9uTG9nb3V0UmVzdWx0XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0NvbXBsZXRlIGxvZ291dCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIGNvbXBsZXRlIGxvZ291dCcsXG4gICAgICBjb2RlOiAnQ09NUExFVEVfTE9HT1VUX0VSUk9SJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLy8gIDQwNCBoYW5kbGVyIChtdXN0IGJlIGJlZm9yZSBnbG9iYWwgZXJyb3IgaGFuZGxlcilcbmFwcC51c2UoKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUud2Fybign4p2MIEZpbmFsIDQwNCBoYW5kbGVyIGV4ZWN1dGVkIC0gcm91dGUgbm90IGZvdW5kIScsIHsgbWV0aG9kOiByZXEubWV0aG9kLCB1cmw6IHJlcS51cmwgfSk7XG4gIGxvZ2dlci53YXJuKGA0MDQgLSAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gLCB7XG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgZXJyb3I6ICdFbmRwb2ludCBub3QgZm91bmQnLFxuICAgIHBhdGg6IHJlcS51cmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGNvZGU6ICdOT1RfRk9VTkQnXG4gIH0pO1xufSk7XG5cbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlIChtdXN0IGJlIGxhc3QpXG5hcHAudXNlKGVycm9ySGFuZGxlcik7XG5cblxuXG5cblxuXG5cblxuXG4vLyBHbG9iYWwgdXNlcnMgbWFwIGZvciBzb2NrZXQgbWFuYWdlbWVudCB7c29ja2V0SWQ6IHt1c2VySWQsIG5pY2tuYW1lLCByb29tfX1cbmxldCBvbmxpbmVVc2VycyA9IG5ldyBNYXAoKTtcblxuLy8gVXNlciBjb25uZWN0aW9uIGNvdW50ZXIge3VzZXJJZDogY29ubmVjdGlvbkNvdW50fVxubGV0IHVzZXJDb25uZWN0aW9ucyA9IG5ldyBNYXAoKTtcblxuLy8gVm9pY2UgY2hhbm5lbHMgbWFuYWdlbWVudFxuY29uc3Qgdm9pY2VDaGFubmVscyA9IG5ldyBNYXAoKTsgLy8gY2hhbm5lbElkIC0+IHsgc29ja2V0SWQ6IHsgcGVlckNvbm5lY3Rpb24sIHN0cmVhbSB9IH1cblxuLy8gSW1wcm92ZWQgU29ja2V0LklPIHNlc3Npb24gbWlkZGxld2FyZSB3aXRoIHByb3BlciByZXMgb2JqZWN0IGhhbmRsaW5nXG5pby51c2UoKHNvY2tldCwgbmV4dCkgPT4ge1xuICAvLyBDcmVhdGUgYSBtb3JlIGNvbXBsZXRlIG1vY2sgcmVzIG9iamVjdCBpZiBtaXNzaW5nXG4gIGlmICghc29ja2V0LnJlcXVlc3QucmVzKSB7XG4gICAgc29ja2V0LnJlcXVlc3QucmVzID0ge1xuICAgICAgc2V0SGVhZGVyOiAoKSA9PiB7fSxcbiAgICAgIGdldEhlYWRlcjogKCkgPT4ge30sXG4gICAgICB3cml0ZUhlYWQ6ICgpID0+IHt9LFxuICAgICAgZW5kOiAoKSA9PiB7fSxcbiAgICAgIGhlYWRlcnNTZW50OiBmYWxzZSxcbiAgICAgIHN0YXR1c0NvZGU6IDIwMFxuICAgIH07XG4gIH1cblxuICAvLyBBcHBseSBzZXNzaW9uIG1pZGRsZXdhcmUgd2l0aCBlcnJvciBoYW5kbGluZ1xuICBzZXNzaW9uTWlkZGxld2FyZShzb2NrZXQucmVxdWVzdCwgc29ja2V0LnJlcXVlc3QucmVzLCAoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBtaWRkbGV3YXJlIGVycm9yIGZvciBTb2NrZXQuSU86JywgZXJyKTtcbiAgICAgIHJldHVybiBuZXh0KGVycik7XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfSk7XG59KTtcblxuLy8gU29ja2V0LklPIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmlvLnVzZShhc3luYyAoc29ja2V0LCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgY3NyZlRva2VuLCBzZXNzaW9uSWQgfSA9IHNvY2tldC5oYW5kc2hha2UuYXV0aDtcbiAgbGV0IHNlc3Npb24gPSBzb2NrZXQucmVxdWVzdC5zZXNzaW9uO1xuXG4gIC8vIGNvbnNvbGUubG9nKCfwn5SRIFNvY2tldCBhdXRoZW50aWNhdGlvbiBhdHRlbXB0IHdpdGggc2Vzc2lvbiBhbmQgQ1NSRiBmaW5nZXJwcmludCBjaGVjaycpO1xuICAvLyBjb25zb2xlLmxvZygn8J+UjSBSYXcgc29ja2V0IGF1dGggZGF0YTonLCB7XG4gIC8vICAgY3NyZlRva2VuUHJvdmlkZWQ6ICEhY3NyZlRva2VuLFxuICAvLyAgIHNlc3Npb25JZFByb3ZpZGVkOiAhIXNlc3Npb25JZCxcbiAgLy8gICBzZXNzaW9uSWRMZW5ndGg6IHNlc3Npb25JZD8ubGVuZ3RoLFxuICAvLyAgIHNlc3Npb25JZEZyb21BdXRoOiBzZXNzaW9uSWRcbiAgLy8gfSk7XG5cbiAgLy8gSWYgc2Vzc2lvbklkIGlzIHByb3ZpZGVkIGluIGF1dGgsIHRyeSB0byByZWNvdmVyIHRoZSBzZXNzaW9uIGZyb20gTW9uZ29EQiBzdG9yZVxuICBpZiAoc2Vzc2lvbklkICYmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hdXRoZW50aWNhdGVkKSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCfwn5SEIEF0dGVtcHRpbmcgc2Vzc2lvbiByZWNvdmVyeSBmcm9tIE1vbmdvREIgc3RvcmUgdXNpbmcgc2Vzc2lvbklkOicsIHNlc3Npb25JZCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCBzZXNzaW9uIGZyb20gTW9uZ29EQiBzdG9yZSB1c2luZyB0aGUgc2Vzc2lvbklkIGZyb20gSldUIGF1dGhcbiAgICAgIGNvbnN0IE1vbmdvU3RvcmVJbnN0YW5jZSA9IHNlc3Npb25NaWRkbGV3YXJlLnN0b3JlO1xuICAgICAgaWYgKE1vbmdvU3RvcmVJbnN0YW5jZSAmJiB0eXBlb2YgTW9uZ29TdG9yZUluc3RhbmNlLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBNb25nb1N0b3JlSW5zdGFuY2UuZ2V0KHNlc3Npb25JZCwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgICAgICBlbHNlIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfwn5SEIE1vbmdvREIgc2Vzc2lvbiBsb29rdXAgcmVzdWx0OicsIHtcbiAgICAgICAgLy8gICBzZXNzaW9uRm91bmQ6ICEhc2Vzc2lvbkRhdGEsXG4gICAgICAgIC8vICAgc2Vzc2lvbkF1dGhlbnRpY2F0ZWQ6IHNlc3Npb25EYXRhPy5hdXRoZW50aWNhdGVkLFxuICAgICAgICAvLyAgIHNlc3Npb25Vc2VySWQ6IHNlc3Npb25EYXRhPy51c2VySWQsXG4gICAgICAgIC8vICAgc2Vzc2lvbkNzcmZUb2tlbjogISFzZXNzaW9uRGF0YT8uY3NyZlRva2VuLFxuICAgICAgICAvLyAgIGNzcmZUb2tlbk1hdGNoZXM6IGNzcmZUb2tlbiAmJiBzZXNzaW9uRGF0YT8uY3NyZlRva2VuICYmIGNzcmZUb2tlbiA9PT0gc2Vzc2lvbkRhdGEuY3NyZlRva2VuXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGlmIChzZXNzaW9uRGF0YSAmJiBzZXNzaW9uRGF0YS5hdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSBzb2NrZXQucmVxdWVzdC5zZXNzaW9uIHdpdGggbG9hZGVkIHNlc3Npb25cbiAgICAgICAgICBzb2NrZXQucmVxdWVzdC5zZXNzaW9uID0gc2Vzc2lvbkRhdGE7XG4gICAgICAgICAgc2Vzc2lvbiA9IHNlc3Npb25EYXRhO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU29ja2V0IHNlc3Npb24gcmVjb3ZlcmVkIGZyb20gTW9uZ29EQicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gU29ja2V0IHNlc3Npb24gbm90IGZvdW5kIGluIE1vbmdvREIgc3RvcmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgbG9hZGluZyBTT0NLRVQgc2Vzc2lvbiBmcm9tIE1vbmdvREI6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ/CflJMgRmluZ2VycHJpbnQgdmVyaWZpY2F0aW9uOicsIHtcbiAgICBzaWQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb25JZCxcbiAgICBwcm92aWRlZENzcmZUb2tlbjogY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICBzZXNzaW9uQ3NyZlRva2VuOiBzZXNzaW9uPy5jc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgIHVzZXJBZ2VudDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbj8udXNlckFnZW50Py5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicsXG4gICAgbG9naW5UaW1lOiBzZXNzaW9uPy5sb2dpblRpbWUsXG4gICAgcmVnaXN0cmF0aW9uVGltZTogc2Vzc2lvbj8ucmVnaXN0cmF0aW9uVGltZVxuICB9KTtcblxuICAvLyBWYWxpZGF0ZSBzZXNzaW9uIGV4aXN0cyBhbmQgaGFzIGF1dGhlbnRpY2F0aW9uXG4gIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hdXRoZW50aWNhdGVkIHx8ICFzZXNzaW9uLnVzZXJJZCkge1xuICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogTm8gYXV0aGVudGljYXRlZCBzZXNzaW9uIGZvdW5kJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgU2Vzc2lvbiBkZXRhaWxzOicsIHtcbiAgICAgIHNlc3Npb25JZDogc29ja2V0LnJlcXVlc3Quc2Vzc2lvbklkLFxuICAgICAgc2Vzc2lvbjogISFzZXNzaW9uLFxuICAgICAgYXV0aGVudGljYXRlZDogc2Vzc2lvbj8uYXV0aGVudGljYXRlZCxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlcklkXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdTZXNzaW9uIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJykpO1xuICB9XG5cbiAgLy8gVmFsaWRhdGUgQ1NSRiB0b2tlbiBmb3IgYWRkaXRpb25hbCBzZWN1cml0eSAobXVzdCBtYXRjaCBzZXNzaW9uJ3MgdW5pcXVlIENTUkYgdG9rZW4pXG4gIGlmICghY3NyZlRva2VuIHx8ICFzZXNzaW9uLmNzcmZUb2tlbiB8fCBjc3JmVG9rZW4gIT09IHNlc3Npb24uY3NyZlRva2VuKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBJbnZhbGlkIENTUkYgdG9rZW4gZmluZ2VycHJpbnQnKTtcbiAgICBjb25zb2xlLmxvZygn8J+UkiBGaW5nZXJwcmludCBtaXNtYXRjaCBkZXRhaWxzOicsIHtcbiAgICAgIHByb3ZpZGVkOiBjc3JmVG9rZW4/LnN1YnN0cmluZygwLCA4KSArICcuLi4nLFxuICAgICAgZXhwZWN0ZWQ6IHNlc3Npb24uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICAgIG1hdGNoOiBjc3JmVG9rZW4gPT09IHNlc3Npb24uY3NyZlRva2VuXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdDU1JGIHZhbGlkYXRpb24gZmFpbGVkJykpO1xuICB9XG5cbiAgY29uc29sZS5sb2coJ+KchSBTb2NrZXQgZmluZ2VycHJpbnQgdmVyaWZpY2F0aW9uIHN1Y2Nlc3NmdWwnKTtcblxuICB0cnkge1xuICAgIC8vIFZlcmlmeSB1c2VyIGV4aXN0cyBpbiBkYXRhYmFzZVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNlc3Npb24udXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogVXNlciBub3QgZm91bmQgaW4gREInKTtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignVXNlciBub3QgZm91bmQgaW4gc2Vzc2lvbicpKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdXNlciBzdGF0dXMgdXBkYXRlIGJhc2VkIG9uIGNvbm5lY3Rpb24gY291bnRcbiAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLnVzZXJJZDtcbiAgICBjb25zdCBjb25uZWN0aW9uQ291bnQgPSB1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXJJZCkgfHwgMDtcbiAgICBjb25zdCBuZXdDb25uZWN0aW9uQ291bnQgPSBjb25uZWN0aW9uQ291bnQgKyAxO1xuICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlcklkLCBuZXdDb25uZWN0aW9uQ291bnQpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBiYW5uZWRcbiAgICBpZiAodXNlci5pc0Jhbm5lZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IFVzZXIgaXMgYmFubmVkJywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGJhblJlYXNvbjogdXNlci5iYW5SZWFzb24sXG4gICAgICAgIGJhbkV4cGlyZXM6IHVzZXIuYmFuRXhwaXJlc1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnYmFubmVkJywge1xuICAgICAgICByZWFzb246IHVzZXIuYmFuUmVhc29uIHx8ICdZb3UgaGF2ZSBiZWVuIGJhbm5lZCBmcm9tIHRoZSBzZXJ2ZXInLFxuICAgICAgICBleHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdVc2VyIGlzIGJhbm5lZCcpKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIG11dGVkIGFuZCBlbmZvcmNlIG11dGUgaW4gY2hhdFxuICAgIGNvbnN0IGlzTXV0ZWQgPSB1c2VyLmlzTXV0ZWQoKTtcbiAgICBjb25zb2xlLmxvZygn8J+UhyBVc2VyIG11dGUgc3RhdHVzIGNoZWNrZWQ6JywgeyBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSwgaXNNdXRlZCwgbXV0ZUV4cGlyZXM6IHVzZXIubXV0ZUV4cGlyZXMgfSk7XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgd2l0aCBjb25uZWN0aW9uIGNvdW50IHRyYWNraW5nXG4gICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgeyBfaWQ6IHVzZXJJZCB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgc3RhdHVzOiBuZXdDb25uZWN0aW9uQ291bnQgPiAwID8gJ29ubGluZScgOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWVcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKHVwZGF0ZVJlc3VsdCkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgU29ja2V0IGF1dGg6IFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9ubGluZSAoY29ubmVjdGlvbnM6ICR7bmV3Q29ubmVjdGlvbkNvdW50fSlgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGBVc2VyIHN0YXR1cyB1cGRhdGVkIHRvIG9ubGluZSB2aWEgc29ja2V0IGF1dGhgLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgY29ubmVjdGlvbnM6IG5ld0Nvbm5lY3Rpb25Db3VudCxcbiAgICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPdmVycmlkZSBsb2NhbCB1c2VyIG9iamVjdCB3aXRoIHVwZGF0ZWQgZGF0YVxuICAgIHVzZXIuc3RhdHVzID0gdXBkYXRlUmVzdWx0ID8gdXBkYXRlUmVzdWx0LnN0YXR1cyA6ICdvbmxpbmUnO1xuICAgIHVzZXIubGFzdEFjdGl2ZSA9IHVwZGF0ZVJlc3VsdCA/IHVwZGF0ZVJlc3VsdC5sYXN0QWN0aXZlIDogbmV3IERhdGUoKTtcblxuICAgIC8vIFNldCBzb2NrZXQgcHJvcGVydGllcyBmb3IgYXV0aGVudGljYXRlZCB1c2VyXG4gICAgc29ja2V0LnVzZXJJZCA9IHNlc3Npb24udXNlcklkO1xuICAgIHNvY2tldC5uaWNrbmFtZSA9IHNlc3Npb24ubmlja25hbWU7XG4gICAgc29ja2V0LnJvbGUgPSBzZXNzaW9uLnJvbGUgfHwgJ21lbWJlcic7XG4gICAgY29uc29sZS5sb2coYPCfjokgU29ja2V0IGF1dGhlbnRpY2F0ZWQgdmlhIHNlc3Npb246ICR7c29ja2V0Lm5pY2tuYW1lfSAodXNlcklkOiAke3NvY2tldC51c2VySWR9KWApO1xuICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCcpO1xuICAgIHJldHVybiBuZXh0KCk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIGxvZ2dlci5lcnJvcihgU29ja2V0IGF1dGggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwge1xuICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbj8uaWQsXG4gICAgICBpcDogc29ja2V0LmhhbmRzaGFrZS5hZGRyZXNzXG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkJykpO1xuICB9XG59KTtcblxuLyoqXG4gKiBDbGVhbnVwIGluYWN0aXZlIGNvbm5lY3Rpb25zIGJhc2VkIG9uIGhlYXJ0YmVhdFxuICovXG5mdW5jdGlvbiBjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucygpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgdGltZW91dCA9IDYwMDAwOyAvLyA2MCBzZWNvbmRzIHRpbWVvdXRcblxuICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgdXNlcl0gb2Ygb25saW5lVXNlcnMuZW50cmllcygpKSB7XG4gICAgaWYgKG5vdyAtIHVzZXIubGFzdEhlYXJ0YmVhdCA+IHRpbWVvdXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuc2luZyBkZWFkIGNvbm5lY3Rpb24gZm9yIHVzZXIgJHt1c2VyLm5pY2tuYW1lfWApO1xuXG4gICAgICAvLyBGb3JjZSBkaXNjb25uZWN0IHNvY2tldFxuICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgIHNvY2tldC5kaXNjb25uZWN0KHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdXNlciBjb25uZWN0aW9ucyBjb3VudFxuICAgICAgY29uc3QgY29ubmVjdGlvbnNMZWZ0ID0gKHVzZXJDb25uZWN0aW9ucy5nZXQodXNlci51c2VySWQpIHx8IDApIC0gMTtcbiAgICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlci51c2VySWQsIE1hdGgubWF4KDAsIGNvbm5lY3Rpb25zTGVmdCkpO1xuXG4gICAgICAvLyBTZXQgc3RhdHVzIHRvIG9mZmxpbmUgaWYgbGFzdCBjb25uZWN0aW9uXG4gICAgICBpZiAoY29ubmVjdGlvbnNMZWZ0IDw9IDApIHtcbiAgICAgICAgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VyLnVzZXJJZCwge1xuICAgICAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3RhdHVzIG9uIGNsZWFudXA6JywgZXJyKSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3VzZXIubmlja25hbWV9IHN0YXR1cyBzZXQgdG8gb2ZmbGluZSAoZGVhZCBjb25uZWN0aW9uKWApO1xuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgZHVlIHRvIGRlYWQgY29ubmVjdGlvbmAsIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIudXNlcklkLFxuICAgICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXRJZFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgb25saW5lVXNlcnMuZGVsZXRlKHNvY2tldElkKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUnVuIGNsZWFudXAgZXZlcnkgMzAgc2Vjb25kcyAtIERJU0FCTEVEIGZvciB0ZXN0IGVudmlyb25tZW50XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0Jykge1xuICBzZXRJbnRlcnZhbChjbGVhbnVwSW5hY3RpdmVDb25uZWN0aW9ucywgMzAwMDApO1xufVxuXG5pby5vbignY29ubmVjdGlvbicsIGFzeW5jIChzb2NrZXQpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfmoAgU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcbiAgY29uc29sZS5sb2coYPCfkaQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gY29ubmVjdGVkYCk7XG5cbiAgLy8gVHJhY2sgb25saW5lIHVzZXJcbiAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwge1xuICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgIHJvbGU6IHNvY2tldC5yb2xlLFxuICAgIHJvb206IG51bGwsXG4gICAgbGFzdEhlYXJ0YmVhdDogRGF0ZS5ub3coKVxuICB9KTtcblxuICAvLyBMb2cgY3VycmVudCBhY3RpdmUgY29ubmVjdGlvbnMgY291bnRcbiAgY29uc29sZS5sb2coYPCfk4ogQWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfSAtIGF1dGggc3VjY2VzcyBmb3IgJHtzb2NrZXQubmlja25hbWV9YCk7XG5cbiAgLy8gRW5oYW5jZWQgaGVhcnRiZWF0IG1lY2hhbmlzbSB3aXRoIHJlY29ubmVjdGlvbiBsb2dpY1xuICBzb2NrZXQub24oJ2hlYXJ0YmVhdCcsICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gb25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICB1c2VyLmxhc3RIZWFydGJlYXQgPSBub3c7XG4gICAgICBjb25zb2xlLmxvZyhg8J+SkyBIZWFydGJlYXQgcmVjZWl2ZWQgZnJvbSB1c2VyICR7c29ja2V0Lm5pY2tuYW1lfSBhdCAke25ldyBEYXRlKG5vdykudG9JU09TdHJpbmcoKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLndhcm4oYEhlYXJ0YmVhdCByZWNlaXZlZCBmcm9tIHVua25vd24gc29ja2V0OiAke3NvY2tldC5pZH1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSBoZWFydGJlYXQgb24gdXNlciBhY3Rpdml0eVxuICBjb25zdCB1cGRhdGVIZWFydGJlYXQgPSAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICB1c2VyLmxhc3RIZWFydGJlYXQgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZW5kIGhlYXJ0YmVhdCB0byBjbGllbnQgcGVyaW9kaWNhbGx5XG4gIGNvbnN0IGhlYXJ0YmVhdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmIChzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnaGVhcnRiZWF0X3JlcXVlc3QnKTtcbiAgICB9XG4gIH0sIDE1MDAwKTsgLy8gU2VuZCBoZWFydGJlYXQgZXZlcnkgMTUgc2Vjb25kc1xuXG4gIC8vIENsZWFyIGludGVydmFsIG9uIGRpc2Nvbm5lY3RcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgIGNsZWFySW50ZXJ2YWwoaGVhcnRiZWF0SW50ZXJ2YWwpO1xuICAgIC8vIC4uLiByZXN0IG9mIGRpc2Nvbm5lY3QgbG9naWNcbiAgfSk7XG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cnlpbmcgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICBjb25zdCByZXRyeURhdGFiYXNlT3BlcmF0aW9uID0gYXN5bmMgKG9wZXJhdGlvbiwgcmV0cmllcyA9IDMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSByZXRyaWVzOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChpID09PSByZXRyaWVzKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgbG9nZ2VyLndhcm4oYERhdGFiYXNlIG9wZXJhdGlvbiBmYWlsZWQsIHJldHJ5ICR7aSArIDF9LyR7cmV0cmllc306YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAgKiAoaSArIDEpKSk7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgc29ja2V0Lm9uKCdqb2luX3Jvb20nLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGNvbnN0IHsgcm9vbSB9ID0gZGF0YTtcbiAgICBpZiAoIXJvb20pIHtcbiAgICAgIGxvZ2dlci53YXJuKCdKb2luIHJvb20gZmFpbGVkOiBObyByb29tIHNwZWNpZmllZCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ1Jvb20gbmFtZSBpcyByZXF1aXJlZCcsXG4gICAgICAgIGNvZGU6ICdNSVNTSU5HX1JPT00nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByb29tICE9PSAnc3RyaW5nJyB8fCByb29tLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGxvZ2dlci53YXJuKCdKb2luIHJvb20gZmFpbGVkOiBJbnZhbGlkIHJvb20gZm9ybWF0Jywge1xuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHJvb21cbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCByb29tIG5hbWUgZm9ybWF0JyxcbiAgICAgICAgY29kZTogJ0lOVkFMSURfUk9PTV9GT1JNQVQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJldHJ5RGF0YWJhc2VPcGVyYXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBWZXJpZnkgY2hhbm5lbCBleGlzdHNcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZE9uZSh7IGlkOiByb29tIH0pO1xuICAgICAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogQ2hhbm5lbCBub3QgZm91bmQnLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICAgICAgcm9vbVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBDaGFubmVsICcke3Jvb219JyBub3QgZm91bmRgLFxuICAgICAgICAgICAgY29kZTogJ0NIQU5ORUxfTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIHJvb20sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbm5lbCBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlYXZlIHByZXZpb3VzIHJvb21cbiAgICAgICAgaWYgKHNvY2tldC5yb29tKSB7XG4gICAgICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tKTtcbiAgICAgICAgICBvbmxpbmVVc2Vycy5zZXQoc29ja2V0LmlkLCB7IC4uLm9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpLCByb29tOiBudWxsIH0pO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIG9ubGluZSB1c2VycyBpbiBwcmV2aW91cyByb29tXG4gICAgICAgICAgY29uc3QgcHJldmlvdXNSb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvbGU6IHUucm9sZSB9KSk7XG4gICAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHByZXZpb3VzUm9vbVVzZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvY2tldC5yb29tID0gcm9vbTtcbiAgICAgICAgc29ja2V0LmpvaW4oc29ja2V0LnJvb20pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB1c2VyIHRyYWNraW5nXG4gICAgICAgIG9ubGluZVVzZXJzLnNldChzb2NrZXQuaWQsIHtcbiAgICAgICAgICAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHJvb20gJHtzb2NrZXQucm9vbX1gKTtcblxuICAgICAgICAvLyBTZW5kIHN5c3RlbSBtZXNzYWdlIGFib3V0IGpvaW5pbmdcbiAgICAgICAgY29uc3Qgam9pbk1lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG4gICAgICAgICAgYXV0aG9yOiAnU3lzdGVtJyxcbiAgICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICB0ZXh0OiBgJHtzb2NrZXQubmlja25hbWV9IGpvaW5lZCB0aGUgY2hhbm5lbC5gLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBqb2luTWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgYXV0aG9yOiBqb2luTWVzc2FnZS5hdXRob3IsXG4gICAgICAgICAgY2hhbm5lbDogam9pbk1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBqb2luTWVzc2FnZS50ZXh0LFxuICAgICAgICAgIHR5cGU6IGpvaW5NZXNzYWdlLnR5cGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBqb2luTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2VuZCBvbmxpbmUgdXNlcnMgaW4gY3VycmVudCByb29tXG4gICAgICAgIGNvbnN0IHJvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcm9vbVVzZXJzKTtcblxuICAgICAgICAvLyBTZW5kIG1lc3NhZ2UgaGlzdG9yeVxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgTWVzc2FnZS5maW5kKHtcbiAgICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgIHsgdHlwZTogJ3B1YmxpYycgfSxcbiAgICAgICAgICAgIHsgdHlwZTogJ3N5c3RlbScgfSxcbiAgICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICAgIHsgdGFyZ2V0OiBzb2NrZXQubmlja25hbWUgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogLTEgfSlcbiAgICAgICAgICAubGltaXQoMTAwKVxuICAgICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIGhpc3RvcnkubWFwKG1zZyA9PiAoe1xuICAgICAgICAgIGF1dGhvcjogbXNnLmF1dGhvcixcbiAgICAgICAgICByb29tOiBtc2cuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBtc2cudGV4dCxcbiAgICAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICAgICB0YXJnZXQ6IG1zZy50YXJnZXQsXG4gICAgICAgICAgdGltZXN0YW1wOiBtc2cudGltZXN0YW1wXG4gICAgICAgIH0pKSk7XG4gICAgICB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGpvaW5fcm9vbSBhZnRlciByZXRyaWVzOicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBqb2luIHJvb20gYWZ0ZXIgbXVsdGlwbGUgYXR0ZW1wdHMnLFxuICAgICAgICBjb2RlOiAnSk9JTl9ST09NX0ZBSUxFRCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIExvYWQgaGlzdG9yeSAoZmFsbGJhY2ssIGlmIG5lZWRlZClcbiAgc29ja2V0Lm9uKCdnZXRfaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNvY2tldC5yb29tKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnaGlzdG9yeScsIFtdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAkb3I6IFtcbiAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnc3lzdGVtJyB9LFxuICAgICAgICAgIHsgYXV0aG9yOiBzb2NrZXQubmlja25hbWUgfSxcbiAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxMDApXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAxIH0pOyAvLyBSZXNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcblxuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgYXV0aG9yOiBtc2cuYXV0aG9yLFxuICAgICAgICByb29tOiBtc2cuY2hhbm5lbCwgLy8gVXNpbmcgY2hhbm5lbCBpbnN0ZWFkIG9mIHJvb20gZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgIHRleHQ6IG1zZy50ZXh0LFxuICAgICAgICB0eXBlOiBtc2cudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtc2cudGFyZ2V0LFxuICAgICAgICB0aW1lc3RhbXA6IG1zZy50aW1lc3RhbXBcbiAgICAgIH0pKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2FkIG1lc3NhZ2UgaGlzdG9yeScgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQdWJsaWMgbWVzc2FnZVxuICBzb2NrZXQub24oJ21lc3NhZ2UnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGlmICghc29ja2V0LnJvb20gfHwgIWRhdGEudGV4dD8udHJpbSgpKSByZXR1cm47XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIG11dGVkXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHNvY2tldC51c2VySWQpO1xuICAgIGlmIChjdXJyZW50VXNlciAmJiBjdXJyZW50VXNlci5pc011dGVkKCkpIHtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ1lvdSBhcmUgbXV0ZWQgYW5kIGNhbm5vdCBzZW5kIG1lc3NhZ2VzJyxcbiAgICAgICAgY29kZTogJ1VTRVJfTVVURUQnLFxuICAgICAgICBtdXRlRXhwaXJlczogY3VycmVudFVzZXIubXV0ZUV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgIHRleHQ6IGRhdGEudGV4dC50cmltKCksXG4gICAgICAgIHR5cGU6ICdwdWJsaWMnXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgbWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLmNoYW5uZWwsIC8vIEtlZXBpbmcgJ3Jvb20nIGZvciBmcm9udGVuZCBjb21wYXRpYmlsaXR5XG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJyxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlXG4gICAgICB9O1xuXG4gICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2VEYXRhKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgTWVzc2FnZSBzYXZlZCBmcm9tICR7c29ja2V0Lm5pY2tuYW1lfSBpbiAke3NvY2tldC5yb29tfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNhdmluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UnIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHJpdmF0ZSBtZXNzYWdlXG4gIHNvY2tldC5vbigncHJpdmF0ZV9tZXNzYWdlJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC5yb29tIHx8ICFkYXRhLnRvIHx8ICFkYXRhLnRleHQ/LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgdHJpbW1lZFRleHQgPSBkYXRhLnRleHQudHJpbSgpO1xuICAgIGNvbnN0IHRhcmdldE5pY2tuYW1lID0gZGF0YS50by50cmltKCk7XG5cbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBQcml2YXRlIG1lc3NhZ2UgYXR0ZW1wdCBmcm9tICR7c29ja2V0Lm5pY2tuYW1lfSB0byAke3RhcmdldE5pY2tuYW1lfWAsIHtcbiAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIHNlbmRlclNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRhcmdldCBuaWNrbmFtZSBmb3JtYXRcbiAgICAgIGlmICh0YXJnZXROaWNrbmFtZS5sZW5ndGggPT09IDAgfHwgdGFyZ2V0Tmlja25hbWUubGVuZ3RoID4gNTApIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHRhcmdldCB1c2VyIG5pY2tuYW1lJyxcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9UQVJHRVRfTklDS05BTUUnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXZlbnQgc2VsZi1tZXNzYWdpbmdcbiAgICAgIGlmICh0YXJnZXROaWNrbmFtZSA9PT0gc29ja2V0Lm5pY2tuYW1lKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnQ2Fubm90IHNlbmQgcHJpdmF0ZSBtZXNzYWdlIHRvIHlvdXJzZWxmJyxcbiAgICAgICAgICBjb2RlOiAnU0VMRl9NRVNTQUdFX05PVF9BTExPV0VEJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRhcmdldCB1c2VyIGluIHNhbWUgcm9vbSB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICAgIGNvbnN0IHRhcmdldFVzZXIgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKS5maW5kKFxuICAgICAgICB1ID0+IHUubmlja25hbWUgPT09IHRhcmdldE5pY2tuYW1lICYmIHUucm9vbSA9PT0gc29ja2V0LnJvb21cbiAgICAgICk7XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIHRhcmdldCBzZWFyY2ggcmVzdWx0IGZvciAke3RhcmdldE5pY2tuYW1lfWAsIHtcbiAgICAgICAgdGFyZ2V0Rm91bmQ6ICEhdGFyZ2V0VXNlcixcbiAgICAgICAgdGFyZ2V0Um9vbTogdGFyZ2V0VXNlcj8ucm9vbSxcbiAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIG9ubGluZVVzZXJzSW5Sb29tOiBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9vbTogdS5yb29tIH0pKVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGFyZ2V0VXNlcikge1xuICAgICAgICAvLyBFbmhhbmNlZCBlcnJvciBtZXNzYWdlIHdpdGggbW9yZSBjb250ZXh0XG4gICAgICAgIGNvbnN0IG9ubGluZVVzZXJzSW5TZW5kZXJSb29tID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gdS5uaWNrbmFtZSk7XG5cbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6IGBVc2VyICcke3RhcmdldE5pY2tuYW1lfScgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGNoYW5uZWwuIEF2YWlsYWJsZSB1c2VyczogJHtvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbS5qb2luKCcsICcpIHx8ICdub25lJ31gLFxuICAgICAgICAgIGNvZGU6ICdUQVJHRVRfVVNFUl9OT1RfSU5fUk9PTScsXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXROaWNrbmFtZSxcbiAgICAgICAgICBhdmFpbGFibGVVc2Vyczogb25saW5lVXNlcnNJblNlbmRlclJvb20sXG4gICAgICAgICAgc2VuZGVyUm9vbTogc29ja2V0LnJvb21cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIG1lc3NhZ2Ugb2JqZWN0XG4gICAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICBhdXRob3I6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgIHRleHQ6IHRyaW1tZWRUZXh0LFxuICAgICAgICB0eXBlOiAncHJpdmF0ZScsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWVcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgbWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLmNoYW5uZWwsXG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgICB0YXJnZXQ6IG1lc3NhZ2UudGFyZ2V0LFxuICAgICAgICBzdGF0dXM6ICdkZWxpdmVyZWQnXG4gICAgICB9O1xuXG4gICAgICAvLyBTZW5kIHRvIHRhcmdldCB1c2VyIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICAgIGNvbnN0IHRhcmdldFNvY2tldElkID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy5rZXlzKCkpLmZpbmQoXG4gICAgICAgIGlkID0+IG9ubGluZVVzZXJzLmdldChpZCkubmlja25hbWUgPT09IHRhcmdldE5pY2tuYW1lXG4gICAgICApO1xuXG4gICAgICBpZiAodGFyZ2V0U29ja2V0SWQpIHtcbiAgICAgICAgaW8udG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ3ByaXZhdGVfbWVzc2FnZScsIG1lc3NhZ2VEYXRhKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBQcml2YXRlIG1lc3NhZ2Ugc2VudCB0byB0YXJnZXQgJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgICAgdGFyZ2V0U29ja2V0SWQ6IHRhcmdldFNvY2tldElkLFxuICAgICAgICAgIHNlbmRlcjogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5faWRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIud2FybihgVGFyZ2V0IHVzZXIgJHt0YXJnZXROaWNrbmFtZX0gZm91bmQgaW4gb25saW5lVXNlcnMgYnV0IHNvY2tldCBJRCBub3QgZm91bmRgLCB7XG4gICAgICAgICAgdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgICAgb25saW5lVXNlcnNDb3VudDogb25saW5lVXNlcnMuc2l6ZSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBNZXNzYWdlIHN0aWxsIHNhdmVkIHRvIGRhdGFiYXNlIGZvciBsYXRlciBkZWxpdmVyeSBpZiB1c2VyIHJlY29ubmVjdHNcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCBjb25maXJtYXRpb24gdG8gc2VuZGVyICh3aXRob3V0IHRhcmdldCBmb3IgcHJpdmFjeSlcbiAgICAgIHNvY2tldC5lbWl0KCdwcml2YXRlX21lc3NhZ2UnLCB7XG4gICAgICAgIGF1dGhvcjogbWVzc2FnZS5hdXRob3IsXG4gICAgICAgIHJvb206IG1lc3NhZ2Uucm9vbSxcbiAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wLFxuICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsXG4gICAgICAgIHRhcmdldDogbnVsbCwgLy8gSGlkZSB0YXJnZXQgZnJvbSBzZW5kZXIncyBjb25maXJtYXRpb25cbiAgICAgICAgc3RhdHVzOiAnc2VudCdcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5YCwge1xuICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROaWNrbmFtZSxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5faWQsXG4gICAgICAgIG1lc3NhZ2VMZW5ndGg6IHRyaW1tZWRUZXh0Lmxlbmd0aFxuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZW5kaW5nIHByaXZhdGUgbWVzc2FnZTonLCB7XG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgdGFyZ2V0OiBkYXRhLnRvLFxuICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywge1xuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHNlbmQgcHJpdmF0ZSBtZXNzYWdlJyxcbiAgICAgICAgY29kZTogJ1BSSVZBVEVfTUVTU0FHRV9GQUlMRUQnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFNwZWFraW5nXG4gIHNvY2tldC5vbignc3BlYWtpbmcnLCAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIHNvY2tldC50byhzb2NrZXQucm9vbSkuZW1pdCgnc3BlYWtpbmcnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNwZWFraW5nOiBkYXRhLnNwZWFraW5nIH0pO1xuICB9KTtcblxuICAvLyBWb2ljZSBjaGFubmVsIGV2ZW50c1xuICBzb2NrZXQub24oJ2pvaW5fdm9pY2VfY2hhbm5lbCcsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgY29uc3QgeyBjaGFubmVsSWQgfSA9IGRhdGE7XG4gICAgaWYgKCFjaGFubmVsSWQpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZnkgY2hhbm5lbCBleGlzdHMgYW5kIGlzIHZvaWNlXG4gICAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgQ2hhbm5lbC5maW5kT25lKHsgaWQ6IGNoYW5uZWxJZCwgdHlwZTogJ3ZvaWNlJyB9KTtcbiAgICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgICBzb2NrZXQuZW1pdCgndm9pY2VfZXJyb3InLCB7IG1lc3NhZ2U6ICdWb2ljZSBjaGFubmVsIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSB2b2ljZSBjaGFubmVsIGlmIG5vdCBleGlzdHNcbiAgICAgIGlmICghdm9pY2VDaGFubmVscy5oYXMoY2hhbm5lbElkKSkge1xuICAgICAgICB2b2ljZUNoYW5uZWxzLnNldChjaGFubmVsSWQsIG5ldyBNYXAoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICAgIC8vIE5vdGlmeSBvdGhlcnMgaW4gdGhlIGNoYW5uZWxcbiAgICAgIHNvY2tldC50byhjaGFubmVsSWQpLmVtaXQoJ3VzZXJfam9pbmVkX3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuXG4gICAgICAvLyBBZGQgc29ja2V0IHRvIHZvaWNlIGNoYW5uZWwgcm9vbVxuICAgICAgc29ja2V0LmpvaW4oY2hhbm5lbElkKTtcbiAgICAgIGNoYW5uZWxQZWVycy5zZXQoc29ja2V0LmlkLCB7IHBlZXJDb25uZWN0aW9uOiBudWxsLCBzdHJlYW06IG51bGwgfSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB1c2VyJ3Mgdm9pY2UgY2hhbm5lbCBzdGF0dXNcbiAgICAgIHNvY2tldC52b2ljZUNoYW5uZWwgPSBjaGFubmVsSWQ7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBqb2luZWQgdm9pY2UgY2hhbm5lbCAke2NoYW5uZWxJZH1gKTtcbiAgICAgIHNvY2tldC5lbWl0KCd2b2ljZV9qb2luZWQnLCB7IGNoYW5uZWxJZCB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgdm9pY2UgY2hhbm5lbDonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgndm9pY2VfZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiB2b2ljZSBjaGFubmVsJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHNvY2tldC5vbignbGVhdmVfdm9pY2VfY2hhbm5lbCcsICgpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC52b2ljZUNoYW5uZWwpIHJldHVybjtcblxuICAgIGNvbnN0IGNoYW5uZWxJZCA9IHNvY2tldC52b2ljZUNoYW5uZWw7XG4gICAgY29uc3QgY2hhbm5lbFBlZXJzID0gdm9pY2VDaGFubmVscy5nZXQoY2hhbm5lbElkKTtcblxuICAgIGlmIChjaGFubmVsUGVlcnMpIHtcbiAgICAgIGNoYW5uZWxQZWVycy5kZWxldGUoc29ja2V0LmlkKTtcbiAgICAgIGlmIChjaGFubmVsUGVlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICB2b2ljZUNoYW5uZWxzLmRlbGV0ZShjaGFubmVsSWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdGlmeSBvdGhlcnNcbiAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2xlZnRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG5cbiAgICBzb2NrZXQubGVhdmUoY2hhbm5lbElkKTtcbiAgICBzb2NrZXQudm9pY2VDaGFubmVsID0gbnVsbDtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBsZWZ0IHZvaWNlIGNoYW5uZWwgJHtjaGFubmVsSWR9YCk7XG4gICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2xlZnQnKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCd2b2ljZV9vZmZlcicsIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBvZmZlciwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCd2b2ljZV9vZmZlcicsIHtcbiAgICAgIG9mZmVyLFxuICAgICAgZnJvbTogc29ja2V0LmlkLFxuICAgICAgZnJvbU5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCd2b2ljZV9hbnN3ZXInLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgYW5zd2VyLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ3ZvaWNlX2Fuc3dlcicsIHtcbiAgICAgIGFuc3dlcixcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbignaWNlX2NhbmRpZGF0ZScsIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBjYW5kaWRhdGUsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgnaWNlX2NhbmRpZGF0ZScsIHtcbiAgICAgIGNhbmRpZGF0ZSxcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIERpc2Nvbm5lY3RcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBkaXNjb25uZWN0ZWRgKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSBzb2NrZXQudXNlcklkO1xuXG4gICAgICAvLyBEZWNyZWFzZSBjb25uZWN0aW9uIGNvdW50IGZvciB0aGlzIHVzZXJcbiAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgICAgIGNvbnN0IG5ld0NvdW50ID0gTWF0aC5tYXgoMCwgY3VycmVudENvdW50IC0gMSk7XG4gICAgICAgIHVzZXJDb25uZWN0aW9ucy5zZXQodXNlcklkLCBuZXdDb3VudCk7XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGRpc2Nvbm5lY3RlZCAocmVtYWluaW5nIGNvbm5lY3Rpb25zOiAke25ld0NvdW50fSlgLCB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgc29ja2V0SWQ6IHNvY2tldC5pZCxcbiAgICAgICAgICBjb25uZWN0aW9uc0xlZnQ6IG5ld0NvdW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMZWF2ZSB2b2ljZSBjaGFubmVsIGlmIGluIG9uZVxuICAgICAgaWYgKHNvY2tldC52b2ljZUNoYW5uZWwpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbElkID0gc29ja2V0LnZvaWNlQ2hhbm5lbDtcbiAgICAgICAgY29uc3QgY2hhbm5lbFBlZXJzID0gdm9pY2VDaGFubmVscy5nZXQoY2hhbm5lbElkKTtcblxuICAgICAgICBpZiAoY2hhbm5lbFBlZXJzKSB7XG4gICAgICAgICAgY2hhbm5lbFBlZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuICAgICAgICAgIGlmIChjaGFubmVsUGVlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdm9pY2VDaGFubmVscy5kZWxldGUoY2hhbm5lbElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb3RpZnkgb3RoZXJzXG4gICAgICAgIHNvY2tldC50byhjaGFubmVsSWQpLmVtaXQoJ3VzZXJfbGVmdF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNvY2tldC5yb29tKSB7XG4gICAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGxlYXZlIG1lc3NhZ2VcbiAgICAgICAgY29uc3QgbGVhdmVNZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICAgIGF1dGhvcjogJ1N5c3RlbScsXG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgdGV4dDogYCR7c29ja2V0Lm5pY2tuYW1lfSBsZWZ0IHRoZSBjaGFubmVsLmAsXG4gICAgICAgICAgdHlwZTogJ3N5c3RlbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGxlYXZlTWVzc2FnZS5zYXZlKCk7XG5cbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgYXV0aG9yOiBsZWF2ZU1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICAgIHJvb206IGxlYXZlTWVzc2FnZS5jaGFubmVsLFxuICAgICAgICAgIHRleHQ6IGxlYXZlTWVzc2FnZS50ZXh0LFxuICAgICAgICAgIHR5cGU6IGxlYXZlTWVzc2FnZS50eXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbGVhdmVNZXNzYWdlLnRpbWVzdGFtcFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgb25saW5lIHVzZXJzIGxpc3RcbiAgICAgICAgY29uc3Qgcm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSAmJiB1LnVzZXJJZCAhPT0gc29ja2V0LnVzZXJJZClcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvbGU6IHUucm9sZSB9KSk7XG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCByb29tVXNlcnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZnJvbSB0cmFja2luZ1xuICAgICAgb25saW5lVXNlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG5cbiAgICAgIC8vIExvZyBjdXJyZW50IGNvbm5lY3Rpb25zIGFmdGVyIGRpc2Nvbm5lY3RcbiAgICAgIGxvZ2dlci5pbmZvKGBBZnRlciBkaXNjb25uZWN0LCBhY3RpdmUgc29ja2V0IGNvbm5lY3Rpb25zOiAke29ubGluZVVzZXJzLnNpemV9YCk7XG5cbiAgICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyBpbiBkYXRhYmFzZSBpZiB0aGlzIHdhcyB0aGUgbGFzdCBjb25uZWN0aW9uXG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0Nvbm5lY3Rpb25zID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgICAgIGlmIChyZW1haW5pbmdDb25uZWN0aW9ucyA9PT0gMCkge1xuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGxhc3QgY29ubmVjdGlvbilgKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGxhc3QgY29ubmVjdGlvbilgLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBVcGRhdGUgbGFzdEFjdGl2ZSBidXQga2VlcCBzdGF0dXMgb25saW5lXG4gICAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VySWQsIHtcbiAgICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFVzZXIgJHtzb2NrZXQubmlja25hbWV9IHN0aWxsIG9ubGluZSAoJHtyZW1haW5pbmdDb25uZWN0aW9uc30gY29ubmVjdGlvbnMgbGVmdClgKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbyhgVXNlciByZW1haW5zIG9ubGluZWAsIHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICAgIGNvbm5lY3Rpb25zTGVmdDogcmVtYWluaW5nQ29ubmVjdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gZGlzY29ubmVjdCBoYW5kbGVyOicsIGVycm9yKTtcbiAgICB9XG4gfSk7XG59KTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBhbmQgc3RhcnQgc2VydmVyIChkdXBsaWNhdGUgcmVtb3ZlZClcbmNvbnN0IGluaXRpYWxpemVTZXJ2ZXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byBNb25nb0RCXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBjaGFubmVscyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgY29uc3QgZGVmYXVsdENoYW5uZWxzID0gW1xuICAgICAgeyBpZDogJ2dlbmVyYWwnLCBuYW1lOiAnR2VuZXJhbCcsIHR5cGU6ICd0ZXh0JywgY3JlYXRlZEJ5OiAnc3lzdGVtJyB9LFxuICAgICAgeyBpZDogJ3ZvaWNlLWNoYXQnLCBuYW1lOiAnVm9pY2UgQ2hhdCcsIHR5cGU6ICd2b2ljZScsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfVxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGNoYW5uZWxEYXRhIG9mIGRlZmF1bHRDaGFubmVscykge1xuICAgICAgYXdhaXQgQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IGlkOiBjaGFubmVsRGF0YS5pZCB9LFxuICAgICAgICBjaGFubmVsRGF0YSxcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKCdEZWZhdWx0IGNoYW5uZWxzIGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBTdGFydCBzZXJ2ZXJcbiAgICBjb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxO1xuICAgIHNlcnZlci5saXN0ZW4oUE9SVCwgJzAuMC4wLjAnLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIHNlcnZlcjonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59O1xuXG4vLyBHcmFjZWZ1bCBzaHV0ZG93blxucHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnUmVjZWl2ZWQgU0lHSU5ULCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nKTtcbiAgYXdhaXQgY2xvc2VEQigpO1xuICBpby5jbG9zZSgoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1NlcnZlciBzaHV0IGRvd24nKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xufSk7XG5cbnByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5pbmZvKCdSZWNlaXZlZCBTSUdURVJNLCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nKTtcbiAgYXdhaXQgY2xvc2VEQigpO1xuICBpby5jbG9zZSgoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1NlcnZlciBzaHV0IGRvd24nKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xufSk7XG5cbi8vIE9wdGltaXplIGNyaXRpY2FsIHNlcnZlciBmdW5jdGlvbnNcbmNvbnN0IG9wdGltaXplZEluaXRpYWxpemVEYXRhYmFzZSA9IGFzeW5jT3B0aW1pemUoaW5pdGlhbGl6ZVNlcnZlciwge1xuICBjb25jdXJyZW5jeTogMSxcbiAgdGltZW91dDogNjAwMDAsXG4gIHNsb3dUaHJlc2hvbGQ6IDEwMDAwXG59KTtcblxuLy8gU3RhcnQgdGhlIHNlcnZlciB3aXRoIGFzeW5jIG9wdGltaXphdGlvblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcbiAgb3B0aW1pemVkSW5pdGlhbGl6ZURhdGFiYXNlKCkuY2F0Y2goZXJyID0+IHtcbiAgICBsb2dnZXIuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvciBkdXJpbmcgc2VydmVyIHN0YXJ0dXA6JywgZXJyKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH0pO1xufVxuXG4vLyBNZW1vcnkgY2xlYW51cCBvbiBsb25nLXJ1bm5pbmcgb3BlcmF0aW9uc1xuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBpZiAoZ2xvYmFsLmdjKSB7XG4gICAgZ2xvYmFsLmdjKCk7XG4gICAgbG9nZ2VyLmRlYnVnKCdNYW51YWwgZ2FyYmFnZSBjb2xsZWN0aW9uIHRyaWdnZXJlZCcpO1xuICB9XG59LCAzMDAwMDApOyAvLyBFdmVyeSA1IG1pbnV0ZXNcblxuLy8gSGFuZGxlIHVuY2F1Z2h0IGV4Y2VwdGlvbnMgd2l0aCBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvblxucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyb3IpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmNhdWdodCBFeGNlcHRpb246JywgZXJyb3IpO1xuICAvLyBEb24ndCBleGl0IGltbWVkaWF0ZWx5LCBsZXQgY2lyY3VpdCBicmVha2VyIGhhbmRsZSByZWNvdmVyeVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoZXh0ZXJuYWxTZXJ2aWNlQnJlYWtlci5kYXRhYmFzZUJyZWFrZXIuZmFpbHVyZUNvdW50ID4gMTApIHtcbiAgICAgIGxvZ2dlci5lcnJvcignTXVsdGlwbGUgdW5jYXVnaHQgZXhjZXB0aW9ucyBkZXRlY3RlZCwgZm9yY2luZyBncmFjZWZ1bCBzaHV0ZG93bicpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfSwgMTAwMCk7XG59KTtcblxuLy8gSGFuZGxlIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgUmVqZWN0aW9uIGF0OicsIHByb21pc2UsICdyZWFzb246JywgcmVhc29uKTtcbiAgLy8gRG9uJ3QgZXhpdCwganVzdCBsb2cgYW5kIGxldCBjaXJjdWl0IGJyZWFrZXIgaGFuZGxlXG59KTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd24gd2l0aCByZXNvdXJjZSBjbGVhbnVwXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnU0lHVEVSTSByZWNlaXZlZCwgc3RhcnRpbmcgZ3JhY2VmdWwgc2h1dGRvd24uLi4nKTtcblxuICB0cnkge1xuICAgIC8vIENsb3NlIGV4dGVybmFsIHNlcnZpY2UgY29ubmVjdGlvbnNcbiAgICBjb25zdCBjaXJjdWl0U3RhdHVzID0gZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlcygpO1xuICAgIGxvZ2dlci5pbmZvKCdDaXJjdWl0IGJyZWFrZXIgZmluYWwgc3RhdHVzOicsIGNpcmN1aXRTdGF0dXMpO1xuXG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyByZXNvdXJjZXNcbiAgICBhd2FpdCBjbG9zZURCKCk7XG5cbiAgICAvLyBMb2cgZmluYWwgbWV0cmljc1xuICAgIGNvbnN0IGZpbmFsTWV0cmljcyA9IHBlcmZvcm1hbmNlTW9uaXRvci5nZXREZXRhaWxlZFN0YXRzKCk7XG5cbiAgICBsb2dnZXIuaW5mbygnRmluYWwgcGVyZm9ybWFuY2UgbWV0cmljczonLCB7XG4gICAgICB1cHRpbWU6IGZpbmFsTWV0cmljcy51cHRpbWUsXG4gICAgICB0b3RhbFJlcXVlc3RzOiBmaW5hbE1ldHJpY3MuZW5kcG9pbnRTdGF0c1xuICAgICAgICA/IE9iamVjdC52YWx1ZXMoZmluYWxNZXRyaWNzLmVuZHBvaW50U3RhdHMpLnJlZHVjZSgoYWNjLCBlbmRwb2ludCkgPT5cbiAgICAgICAgICAgIGFjYyArIChlbmRwb2ludC5jb3VudCB8fCAwKSwgMClcbiAgICAgICAgOiAwLFxuICAgICAgbWVtb3J5UGVhazogZmluYWxNZXRyaWNzLm1lbW9yeT8uaGVhcFRvdGFsIHx8IDBcbiAgICB9KTtcblxuICAgIGlvLmNsb3NlKCgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgZ3JhY2VmdWwgc2h1dGRvd24gY29tcGxldGUnKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGR1cmluZyBncmFjZWZ1bCBzaHV0ZG93bjonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59KTtcblxuLy8gUGVyaW9kaWMgaGVhbHRoIHNlbGYtYXNzZXNzbWVudFxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBjb25zdCBoZWFsdGhEYXRhID0gcGVyZm9ybWFuY2VNb25pdG9yLmdldEhlYWx0aERhdGEoKTtcblxuICAvLyBTZWxmLW1vbml0b3IgY3JpdGljYWwgbWV0cmljc1xuICBpZiAoaGVhbHRoRGF0YS5yZXF1ZXN0cy5hdmVyYWdlUmVzcG9uc2VUaW1lID4gNTAwMCkge1xuICAgIGxvZ2dlci53YXJuKCfwn5qoIFNlbGYtbW9uaXRvcjogSGlnaCBhdmVyYWdlIHJlc3BvbnNlIHRpbWUgZGV0ZWN0ZWQnLCB7XG4gICAgICBhdmdUaW1lOiBgJHtoZWFsdGhEYXRhLnJlcXVlc3RzLmF2ZXJhZ2VSZXNwb25zZVRpbWV9bXNgLFxuICAgICAgdGhyZXNob2xkOiAnNTAwMG1zJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG4gIH1cblxuICBpZiAoaGVhbHRoRGF0YS5tZW1vcnkudXNhZ2VQZXJjZW50ID4gMC45KSB7XG4gICAgbG9nZ2VyLndhcm4oJ/CfmqggU2VsZi1tb25pdG9yOiBIaWdoIG1lbW9yeSB1c2FnZSBkZXRlY3RlZCcsIHtcbiAgICAgIHVzYWdlOiBoZWFsdGhEYXRhLm1lbW9yeS5wZXJjZW50YWdlLFxuICAgICAgdGhyZXNob2xkOiAnOTAlJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG5cbiAgICAvLyBUcmlnZ2VyIHByb2FjdGl2ZSBjbGVhbnVwXG4gICAgaWYgKGdsb2JhbC5nYykge1xuICAgICAgZ2xvYmFsLmdjKCk7XG4gICAgICBsb2dnZXIuaW5mbygn8J+nuSBQcm9hY3RpdmUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRyaWdnZXJlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGNpcmN1aXQgYnJlYWtlciBzdGF0dXNcbiAgY29uc3QgY2lyY3VpdFN0YXR1cyA9IGdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMoKTtcbiAgaWYgKGNpcmN1aXRTdGF0dXMuZGF0YWJhc2U/LnN0YXRlID09PSAnb3BlbicpIHtcbiAgICBsb2dnZXIud2Fybign8J+aqCBTZWxmLW1vbml0b3I6IERhdGFiYXNlIGNpcmN1aXQgYnJlYWtlciBpcyBPUEVOJywgY2lyY3VpdFN0YXR1cy5kYXRhYmFzZSk7XG4gIH1cblxuICBpZiAoY2lyY3VpdFN0YXR1cy5yZWRpcz8uc3RhdGUgPT09ICdvcGVuJykge1xuICAgIGxvZ2dlci53YXJuKCfwn5qoIFNlbGYtbW9uaXRvcjogUmVkaXMgY2lyY3VpdCBicmVha2VyIGlzIE9QRU4nLCBjaXJjdWl0U3RhdHVzLnJlZGlzKTtcbiAgfVxuXG59LCA2MDAwMCk7IC8vIENoZWNrIGV2ZXJ5IG1pbnV0ZVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDMUIsTUFBTUMsT0FBTyxHQUFHRixPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1HLElBQUksR0FBR0gsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNSSxRQUFRLEdBQUdKLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDckMsTUFBTUssR0FBRyxHQUFHTCxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1NLElBQUksR0FBR04sT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNTyxPQUFPLEdBQUdQLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTVEsWUFBWSxHQUFHUixPQUFPLENBQUMsZUFBZSxDQUFDO0FBQzdDLE1BQU1TLFNBQVMsR0FBR1QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU1VLE1BQU0sR0FBR1YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNVyxTQUFTLEdBQUdYLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMvQyxNQUFNO0VBQUVZLElBQUk7RUFBRUM7QUFBaUIsQ0FBQyxHQUFHYixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDL0QsTUFBTWMsUUFBUSxHQUFHZCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDO0FBQ0EsTUFBTWUsTUFBTSxHQUFHZixPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1nQixPQUFPLEdBQUdoQixPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDMUMsTUFBTWlCLFVBQVUsR0FBR2pCLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDM0MsTUFBTTtFQUFFa0I7QUFBYSxDQUFDLEdBQUdsQixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDdEQsTUFBTTtFQUFFbUIsU0FBUztFQUFFQztBQUFRLENBQUMsR0FBR3BCLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUN6RCxNQUFNcUIsWUFBWSxHQUFHckIsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3ZELE1BQU07RUFDSnNCLGtCQUFrQjtFQUNsQkMsd0JBQXdCO0VBQ3hCQyxjQUFjO0VBQ2RDO0FBQ0YsQ0FBQyxHQUFHekIsT0FBTyxDQUFDLHFDQUFxQyxDQUFDO0FBQ2xELE1BQU07RUFDSjBCLHNCQUFzQjtFQUN0QkMsd0JBQXdCO0VBQ3hCQyxhQUFhO0VBQ2JDLFlBQVk7RUFDWkM7QUFDRixDQUFDLEdBQUc5QixPQUFPLENBQUMsaUNBQWlDLENBQUM7O0FBRTlDO0FBQ0EsTUFBTStCLFdBQVcsR0FBRy9CLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQzs7QUFFekQ7QUFDQSxNQUFNO0VBQUVnQyxlQUFlO0VBQUVDLGNBQWM7RUFBRUM7QUFBbUIsQ0FBQyxHQUFHSCxXQUFXOztBQUUzRTtBQUNBLE1BQU1JLElBQUksR0FBR25DLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDckMsTUFBTW9DLE9BQU8sR0FBR3BDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUMzQyxNQUFNcUMsT0FBTyxHQUFHckMsT0FBTyxDQUFDLGtCQUFrQixDQUFDOztBQUUzQztBQUNBLE1BQU1zQyxNQUFNLEdBQUcvQixPQUFPLENBQUNnQyxZQUFZLENBQUM7RUFDbENDLEtBQUssRUFBRSxNQUFNO0VBQ2JDLE1BQU0sRUFBRWxDLE9BQU8sQ0FBQ2tDLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1Qm5DLE9BQU8sQ0FBQ2tDLE1BQU0sQ0FBQ0UsU0FBUyxDQUFDLENBQUMsRUFDMUJwQyxPQUFPLENBQUNrQyxNQUFNLENBQUNHLE1BQU0sQ0FBQztJQUFFQyxLQUFLLEVBQUU7RUFBSyxDQUFDLENBQUMsRUFDdEN0QyxPQUFPLENBQUNrQyxNQUFNLENBQUNLLElBQUksQ0FBQyxDQUN0QixDQUFDO0VBQ0RDLFdBQVcsRUFBRTtJQUFFQyxPQUFPLEVBQUU7RUFBYyxDQUFDO0VBQ3ZDQyxVQUFVLEVBQUUsQ0FDVixJQUFJMUMsT0FBTyxDQUFDMEMsVUFBVSxDQUFDQyxJQUFJLENBQUM7SUFBRUMsUUFBUSxFQUFFO0VBQWtCLENBQUMsQ0FBQyxFQUM1RCxJQUFJNUMsT0FBTyxDQUFDMEMsVUFBVSxDQUFDRyxPQUFPLENBQUM7SUFDN0JYLE1BQU0sRUFBRWxDLE9BQU8sQ0FBQ2tDLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1Qm5DLE9BQU8sQ0FBQ2tDLE1BQU0sQ0FBQ1ksUUFBUSxDQUFDLENBQUMsRUFDekI5QyxPQUFPLENBQUNrQyxNQUFNLENBQUNhLE1BQU0sQ0FBQyxDQUN4QjtFQUNGLENBQUMsQ0FBQztBQUVOLENBQUMsQ0FBQztBQUVGLE1BQU1DLEdBQUcsR0FBR3JELE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU1zRCxNQUFNLEdBQUdyRCxJQUFJLENBQUNzRCxZQUFZLENBQUNGLEdBQUcsQ0FBQzs7QUFFckM7QUFDQSxNQUFNRyxFQUFFLEdBQUd0RCxRQUFRLENBQUNvRCxNQUFNLEVBQUU7RUFDMUJsRCxJQUFJLEVBQUU7SUFDSnFELE1BQU0sRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEdBQ3pDRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsZUFBZSxFQUFFQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxHQUNoRCxDQUFDLHVCQUF1QixFQUFFLHVCQUF1QixDQUFDO0lBQ3REQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDO0lBQ3hCQyxjQUFjLEVBQUUsQ0FBQyxlQUFlLEVBQUUsY0FBYyxDQUFDO0lBQ2pEQyxXQUFXLEVBQUU7RUFDZixDQUFDO0VBQ0Q7RUFDQWxCLFVBQVUsRUFBRSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUM7RUFDcEM7RUFDQW1CLGNBQWMsRUFBRSxLQUFLO0VBQUU7RUFDdkJDLFdBQVcsRUFBRSxJQUFJO0VBQUU7RUFDbkJDLFlBQVksRUFBRSxLQUFLO0VBQUU7RUFDckJDLGNBQWMsRUFBRSxLQUFLO0VBQ3JCQyxhQUFhLEVBQUUsSUFBSTtFQUNuQkMsY0FBYyxFQUFFLElBQUk7RUFDcEJDLGNBQWMsRUFBRTtBQUNsQixDQUFDLENBQUM7O0FBRUY7QUFDQWhCLEVBQUUsQ0FBQ2lCLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLGtCQUFrQixFQUFHQyxHQUFHLElBQUs7RUFDeENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9DQUFvQyxFQUFFRixHQUFHLENBQUNHLElBQUksRUFBRUgsR0FBRyxDQUFDSSxPQUFPLENBQUM7RUFDeEUzQyxNQUFNLENBQUM0QyxLQUFLLENBQUMsMEJBQTBCLEVBQUU7SUFDdkNGLElBQUksRUFBRUgsR0FBRyxDQUFDRyxJQUFJO0lBQ2RDLE9BQU8sRUFBRUosR0FBRyxDQUFDSSxPQUFPO0lBQ3BCRSxVQUFVLEVBQUVOLEdBQUcsQ0FBQ08sTUFBTTtJQUN0QkMsT0FBTyxFQUFFUixHQUFHLENBQUNTLEdBQUcsRUFBRUQ7RUFDcEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0E5QixHQUFHLENBQUNnQyxHQUFHLENBQUNqRixJQUFJLENBQUM7RUFDWHFELE1BQU0sRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEdBQ3pDRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsZUFBZSxFQUFFQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxHQUNoRCxJQUFJO0VBQ1JHLFdBQVcsRUFBRTtBQUNmLENBQUMsQ0FBQyxDQUFDO0FBRUhaLEdBQUcsQ0FBQ2dDLEdBQUcsQ0FBQ3JGLE9BQU8sQ0FBQzRDLElBQUksQ0FBQztFQUFFMEMsS0FBSyxFQUFFLE1BQU07RUFBRUMsTUFBTSxFQUFFO0FBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pEbEMsR0FBRyxDQUFDZ0MsR0FBRyxDQUFDckYsT0FBTyxDQUFDd0YsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRSxJQUFJO0VBQUVILEtBQUssRUFBRTtBQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFaEU7QUFDQSxJQUFJSSxpQkFBaUI7QUFDckIsSUFBSTtFQUNGLE1BQU1DLFdBQVcsR0FBRzNFLFlBQVksQ0FBQzRFLFNBQVMsQ0FBQyxDQUFDO0VBQzVDLElBQUlELFdBQVcsSUFBSTNFLFlBQVksQ0FBQzZFLGFBQWEsQ0FBQyxDQUFDLEVBQUU7SUFDL0NILGlCQUFpQixHQUFHNUUsT0FBTyxDQUFDO01BQzFCZ0YsTUFBTSxFQUFFcEMsT0FBTyxDQUFDQyxHQUFHLENBQUNvQyxjQUFjLElBQUksdURBQXVEO01BQzdGQyxNQUFNLEVBQUUsS0FBSztNQUNiQyxpQkFBaUIsRUFBRSxLQUFLO01BQ3hCQyxLQUFLLEVBQUUsSUFBSW5GLFVBQVUsQ0FBQztRQUNwQm9GLE1BQU0sRUFBRVIsV0FBVztRQUNuQlMsTUFBTSxFQUFFLE9BQU87UUFDZkMsR0FBRyxFQUFFLEtBQUs7UUFBRTtRQUNaQyxZQUFZLEVBQUUsS0FBSyxDQUFDO01BQ3RCLENBQUMsQ0FBQztNQUNGQyxNQUFNLEVBQUU7UUFDTkMsTUFBTSxFQUFFOUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZO1FBQzdDNkMsUUFBUSxFQUFFLElBQUk7UUFDZEMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7UUFDM0JDLFFBQVEsRUFBRTtNQUNaLENBQUM7TUFDREMsSUFBSSxFQUFFLGFBQWE7TUFDbkJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEtBQUssRUFBRTtJQUNULENBQUMsQ0FBQztJQUNGbEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELENBQUM7RUFDL0QsQ0FBQyxNQUFNO0lBQ0w7SUFDQUQsT0FBTyxDQUFDQyxHQUFHLENBQUMsMERBQTBELENBQUM7SUFDdkVhLGlCQUFpQixHQUFHNUUsT0FBTyxDQUFDO01BQzFCZ0YsTUFBTSxFQUFFcEMsT0FBTyxDQUFDQyxHQUFHLENBQUNvQyxjQUFjLElBQUksdURBQXVEO01BQzdGQyxNQUFNLEVBQUUsS0FBSztNQUNiQyxpQkFBaUIsRUFBRSxLQUFLO01BQ3hCTSxNQUFNLEVBQUU7UUFDTkMsTUFBTSxFQUFFOUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZO1FBQzdDNkMsUUFBUSxFQUFFLElBQUk7UUFDZEMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7UUFDM0JDLFFBQVEsRUFBRTtNQUNaLENBQUM7TUFDREMsSUFBSSxFQUFFLGFBQWE7TUFDbkJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEtBQUssRUFBRTtJQUNULENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDLE9BQU85QixLQUFLLEVBQUU7RUFDZEosT0FBTyxDQUFDQyxHQUFHLENBQUMsa0VBQWtFLEVBQUVHLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0VBQzlGVyxpQkFBaUIsR0FBRzVFLE9BQU8sQ0FBQztJQUMxQmdGLE1BQU0sRUFBRXBDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDb0MsY0FBYyxJQUFJLHVEQUF1RDtJQUM3RkMsTUFBTSxFQUFFLEtBQUs7SUFDYkMsaUJBQWlCLEVBQUUsS0FBSztJQUN4Qk0sTUFBTSxFQUFFO01BQ05DLE1BQU0sRUFBRTlDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssWUFBWTtNQUM3QzZDLFFBQVEsRUFBRSxJQUFJO01BQ2RDLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO01BQzNCQyxRQUFRLEVBQUU7SUFDWixDQUFDO0lBQ0RDLElBQUksRUFBRSxhQUFhO0lBQ25CQyxPQUFPLEVBQUUsS0FBSztJQUNkQyxLQUFLLEVBQUU7RUFDVCxDQUFDLENBQUM7QUFDSjtBQUVBekQsR0FBRyxDQUFDZ0MsR0FBRyxDQUFDSyxpQkFBaUIsQ0FBQzs7QUFFMUI7QUFDQSxNQUFNcUIsWUFBWSxHQUFHQSxDQUFDcEMsR0FBRyxFQUFFUyxHQUFHLEVBQUU0QixHQUFHLEVBQUVDLElBQUksS0FBSztFQUM1QzdFLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRTtJQUMvQkQsT0FBTyxFQUFFSixHQUFHLENBQUNJLE9BQU87SUFDcEJwQyxLQUFLLEVBQUVnQyxHQUFHLENBQUNoQyxLQUFLO0lBQ2hCdUUsR0FBRyxFQUFFOUIsR0FBRyxDQUFDOEIsR0FBRztJQUNaQyxNQUFNLEVBQUUvQixHQUFHLENBQUMrQixNQUFNO0lBQ2xCQyxFQUFFLEVBQUVoQyxHQUFHLENBQUNnQyxFQUFFO0lBQ1ZDLFNBQVMsRUFBRWpDLEdBQUcsQ0FBQ2tDLEdBQUcsQ0FBQyxZQUFZO0VBQ2pDLENBQUMsQ0FBQzs7RUFFRjtFQUNBLElBQUkzQyxHQUFHLENBQUNpQyxJQUFJLEtBQUssaUJBQWlCLEVBQUU7SUFDbEMsTUFBTWxFLE1BQU0sR0FBRzZFLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDN0MsR0FBRyxDQUFDakMsTUFBTSxDQUFDLENBQUMrRSxHQUFHLENBQUNDLENBQUMsS0FBSztNQUNqREMsS0FBSyxFQUFFRCxDQUFDLENBQUNFLElBQUk7TUFDYjdDLE9BQU8sRUFBRTJDLENBQUMsQ0FBQzNDLE9BQU87TUFDbEI4QyxLQUFLLEVBQUVILENBQUMsQ0FBQ0c7SUFDWCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU9iLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUMxQm9DLEtBQUssRUFBRSxtQkFBbUI7TUFDMUI4QyxPQUFPLEVBQUVwRixNQUFNO01BQ2ZvQyxJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBLElBQUlILEdBQUcsQ0FBQ0csSUFBSSxLQUFLLEtBQUssRUFBRTtJQUN0QixNQUFNNkMsS0FBSyxHQUFHSixNQUFNLENBQUNRLElBQUksQ0FBQ3BELEdBQUcsQ0FBQ3FELFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxNQUFNSCxLQUFLLEdBQUdsRCxHQUFHLENBQUNxRCxRQUFRLENBQUNMLEtBQUssQ0FBQztJQUNqQyxPQUFPWCxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFDMUJvQyxLQUFLLEVBQUUsR0FBRzJDLEtBQUssS0FBS0UsS0FBSyxrQkFBa0I7TUFDM0MvQyxJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBLElBQUlILEdBQUcsQ0FBQ2lDLElBQUksS0FBSyxtQkFBbUIsRUFBRTtJQUNwQyxPQUFPSSxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFDMUJvQyxLQUFLLEVBQUUsMEJBQTBCO01BQ2pDRixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtFQUVBLElBQUlILEdBQUcsQ0FBQ2lDLElBQUksS0FBSyxtQkFBbUIsRUFBRTtJQUNwQyxPQUFPSSxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFDMUJvQyxLQUFLLEVBQUUsbUJBQW1CO01BQzFCRixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBa0MsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO0lBQ25Cb0MsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QkYsSUFBSSxFQUFFLGdCQUFnQjtJQUN0Qm1ELFNBQVMsRUFBRTdDLEdBQUcsQ0FBQzhDLEVBQUUsSUFBSTtFQUN2QixDQUFDLENBQUM7QUFDSixDQUFDOztBQUVEO0FBQ0E3RSxHQUFHLENBQUNnQyxHQUFHLENBQUMsQ0FBQ0QsR0FBRyxFQUFFNEIsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUIsTUFBTWtCLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztFQUV4QnJCLEdBQUcsQ0FBQ3RDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTTtJQUNyQixNQUFNNEQsUUFBUSxHQUFHRixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLEtBQUs7SUFDbkMvRixNQUFNLENBQUNtRyxJQUFJLENBQUMsR0FBR25ELEdBQUcsQ0FBQytCLE1BQU0sSUFBSS9CLEdBQUcsQ0FBQzhCLEdBQUcsTUFBTUYsR0FBRyxDQUFDd0IsVUFBVSxLQUFLRixRQUFRLEtBQUssRUFBRTtNQUMxRWxCLEVBQUUsRUFBRWhDLEdBQUcsQ0FBQ2dDLEVBQUU7TUFDVkMsU0FBUyxFQUFFakMsR0FBRyxDQUFDa0MsR0FBRyxDQUFDLFlBQVksQ0FBQztNQUNoQ21CLElBQUksRUFBRXJELEdBQUcsQ0FBQ3FELElBQUksRUFBRUMsUUFBUSxJQUFJLFdBQVc7TUFDdkNoSSxJQUFJLEVBQUUwRSxHQUFHLENBQUMrQixNQUFNLEtBQUssS0FBSyxHQUFHd0IsSUFBSSxDQUFDQyxTQUFTLENBQUN4RCxHQUFHLENBQUMxRSxJQUFJLENBQUMsR0FBR21JO0lBQzFELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGNUIsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLENBQUM7O0FBRUY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTVELEdBQUcsQ0FBQ2dDLEdBQUcsQ0FBQ3hELFdBQVcsQ0FBQ2lILG1CQUFtQixDQUFDQyxJQUFJLENBQUNsSCxXQUFXLENBQUMsQ0FBQzs7QUFFMUQ7QUFDQXdCLEdBQUcsQ0FBQ2dDLEdBQUcsQ0FBQ3hELFdBQVcsQ0FBQ0csa0JBQWtCLENBQUM7O0FBRXZDO0FBQ0FxQixHQUFHLENBQUNnQyxHQUFHLENBQUNoRSx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5DO0FBQ0FnQyxHQUFHLENBQUNnQyxHQUFHLENBQ0w3RSxNQUFNLENBQUM7RUFDTHdJLHFCQUFxQixFQUFFO0lBQ3JCQyxVQUFVLEVBQUU7TUFDVkMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDO01BQ3RCQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsOEJBQThCLENBQUM7TUFDdkVDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSwyQkFBMkIsQ0FBQztNQUNoREMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztNQUMzQkMsU0FBUyxFQUFFLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDO01BQ3hDQyxVQUFVLEVBQUUsQ0FBQyxRQUFRO0lBQ3ZCO0VBQ0YsQ0FBQztFQUNEQyx5QkFBeUIsRUFBRTtBQUM3QixDQUFDLENBQ0gsQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLGNBQWMsR0FBRztFQUNyQkMsVUFBVSxFQUFFO0lBQ1ZDLE9BQU8sRUFBRSxPQUFPO0lBQ2hCcEIsSUFBSSxFQUFFO01BQ0pxQixLQUFLLEVBQUUsYUFBYTtNQUNwQkMsT0FBTyxFQUFFLE9BQU87TUFDaEJDLFdBQVcsRUFBRSw4RUFBOEU7TUFDM0ZDLE9BQU8sRUFBRTtRQUNQbkQsSUFBSSxFQUFFO01BQ1I7SUFDRixDQUFDO0lBQ0RvRCxPQUFPLEVBQUUsQ0FDUDtNQUNFOUMsR0FBRyxFQUFFLHVCQUF1QjtNQUM1QjRDLFdBQVcsRUFBRTtJQUNmLENBQUMsQ0FDRjtJQUNERyxVQUFVLEVBQUU7TUFDVkMsT0FBTyxFQUFFO1FBQ1BqSSxJQUFJLEVBQUU7VUFDSmtJLElBQUksRUFBRSxRQUFRO1VBQ2RDLFVBQVUsRUFBRTtZQUNWbEMsRUFBRSxFQUFFO2NBQ0ZpQyxJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RwQixRQUFRLEVBQUU7Y0FDUnlCLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRSxlQUFlO2NBQzVCTyxTQUFTLEVBQUUsQ0FBQztjQUNaQyxTQUFTLEVBQUU7WUFDYixDQUFDO1lBQ0RDLEtBQUssRUFBRTtjQUNMSixJQUFJLEVBQUUsUUFBUTtjQUNkNUgsTUFBTSxFQUFFLE9BQU87Y0FDZnVILFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRFUsSUFBSSxFQUFFO2NBQ0pMLElBQUksRUFBRSxRQUFRO2NBQ2RNLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7Y0FDekJDLE9BQU8sRUFBRSxRQUFRO2NBQ2pCWixXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RhLFNBQVMsRUFBRTtjQUNUUixJQUFJLEVBQUUsUUFBUTtjQUNkNUgsTUFBTSxFQUFFLFdBQVc7Y0FDbkJ1SCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RjLFVBQVUsRUFBRTtjQUNWVCxJQUFJLEVBQUUsUUFBUTtjQUNkNUgsTUFBTSxFQUFFLFdBQVc7Y0FDbkJ1SCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0Q1RSxNQUFNLEVBQUU7Y0FDTmlGLElBQUksRUFBRSxRQUFRO2NBQ2RNLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUM7Y0FDM0JYLFdBQVcsRUFBRTtZQUNmO1VBQ0YsQ0FBQztVQUNEZSxRQUFRLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNO1FBQ3BELENBQUM7UUFDRDFJLE9BQU8sRUFBRTtVQUNQZ0ksSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1ZsQyxFQUFFLEVBQUU7Y0FDRmlDLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRGxELElBQUksRUFBRTtjQUNKdUQsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFLHNCQUFzQjtjQUNuQ08sU0FBUyxFQUFFLENBQUM7Y0FDWkMsU0FBUyxFQUFFO1lBQ2IsQ0FBQztZQUNESCxJQUFJLEVBQUU7Y0FDSkEsSUFBSSxFQUFFLFFBQVE7Y0FDZE0sSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztjQUN2QlgsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEQSxXQUFXLEVBQUU7Y0FDWEssSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFLHFCQUFxQjtjQUNsQ1EsU0FBUyxFQUFFO1lBQ2IsQ0FBQztZQUNEUSxTQUFTLEVBQUU7Y0FDVFgsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEaUIsUUFBUSxFQUFFO2NBQ1JaLElBQUksRUFBRSxRQUFRO2NBQ2RPLE9BQU8sRUFBRSxDQUFDO2NBQ1ZaLFdBQVcsRUFBRTtZQUNmO1VBQ0YsQ0FBQztVQUNEZSxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXO1FBQzlDLENBQUM7UUFDREcsZUFBZSxFQUFFO1VBQ2ZiLElBQUksRUFBRSxRQUFRO1VBQ2RVLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDO1VBQzNDVCxVQUFVLEVBQUU7WUFDVjFCLFFBQVEsRUFBRTtjQUNSeUIsSUFBSSxFQUFFLFFBQVE7Y0FDZEUsU0FBUyxFQUFFLENBQUM7Y0FDWkMsU0FBUyxFQUFFLEVBQUU7Y0FDYlIsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEUyxLQUFLLEVBQUU7Y0FDTEosSUFBSSxFQUFFLFFBQVE7Y0FDZDVILE1BQU0sRUFBRSxPQUFPO2NBQ2Z1SCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RtQixRQUFRLEVBQUU7Y0FDUmQsSUFBSSxFQUFFLFFBQVE7Y0FDZEUsU0FBUyxFQUFFLENBQUM7Y0FDWlAsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGLENBQUM7UUFDRG9CLFlBQVksRUFBRTtVQUNaZixJQUFJLEVBQUUsUUFBUTtVQUNkVSxRQUFRLEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDO1VBQ3BDVCxVQUFVLEVBQUU7WUFDVmUsVUFBVSxFQUFFO2NBQ1ZoQixJQUFJLEVBQUUsUUFBUTtjQUNkTCxXQUFXLEVBQUU7WUFDZixDQUFDO1lBQ0RtQixRQUFRLEVBQUU7Y0FDUmQsSUFBSSxFQUFFLFFBQVE7Y0FDZEwsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGLENBQUM7UUFDRHNCLFlBQVksRUFBRTtVQUNaakIsSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1ZpQixLQUFLLEVBQUU7Y0FDTGxCLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRHJCLElBQUksRUFBRTtjQUNKNkMsSUFBSSxFQUFFO1lBQ1I7VUFDRjtRQUNGLENBQUM7UUFDREMsY0FBYyxFQUFFO1VBQ2RwQixJQUFJLEVBQUUsUUFBUTtVQUNkVSxRQUFRLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1VBQzFCVCxVQUFVLEVBQUU7WUFDVnhELElBQUksRUFBRTtjQUNKdUQsSUFBSSxFQUFFLFFBQVE7Y0FDZEUsU0FBUyxFQUFFLENBQUM7Y0FDWkMsU0FBUyxFQUFFLEdBQUc7Y0FDZFIsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNESyxJQUFJLEVBQUU7Y0FDSkEsSUFBSSxFQUFFLFFBQVE7Y0FDZE0sSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztjQUN2QlgsV0FBVyxFQUFFO1lBQ2YsQ0FBQztZQUNEQSxXQUFXLEVBQUU7Y0FDWEssSUFBSSxFQUFFLFFBQVE7Y0FDZEcsU0FBUyxFQUFFLEdBQUc7Y0FDZFIsV0FBVyxFQUFFO1lBQ2Y7VUFDRjtRQUNGLENBQUM7UUFDRDBCLGFBQWEsRUFBRTtVQUNickIsSUFBSSxFQUFFLFFBQVE7VUFDZEMsVUFBVSxFQUFFO1lBQ1ZwRixLQUFLLEVBQUU7Y0FDTG1GLElBQUksRUFBRSxRQUFRO2NBQ2RMLFdBQVcsRUFBRTtZQUNmLENBQUM7WUFDRHBILE1BQU0sRUFBRTtjQUNOeUgsSUFBSSxFQUFFLE9BQU87Y0FDYnNCLEtBQUssRUFBRTtnQkFDTHRCLElBQUksRUFBRSxRQUFRO2dCQUNkQyxVQUFVLEVBQUU7a0JBQ1ZzQixHQUFHLEVBQUU7b0JBQUV2QixJQUFJLEVBQUU7a0JBQVMsQ0FBQztrQkFDdkJ3QixLQUFLLEVBQUU7b0JBQUV4QixJQUFJLEVBQUU7a0JBQVMsQ0FBQztrQkFDekJ5QixRQUFRLEVBQUU7b0JBQUV6QixJQUFJLEVBQUU7a0JBQVM7Z0JBQzdCO2NBQ0YsQ0FBQztjQUNETCxXQUFXLEVBQUU7WUFDZjtVQUNGO1FBQ0Y7TUFDRixDQUFDO01BQ0QrQixlQUFlLEVBQUU7UUFDZkMsVUFBVSxFQUFFO1VBQ1YzQixJQUFJLEVBQUUsTUFBTTtVQUNaNEIsTUFBTSxFQUFFLFFBQVE7VUFDaEJDLFlBQVksRUFBRTtRQUNoQjtNQUNGO0lBQ0YsQ0FBQztJQUNEQyxRQUFRLEVBQUUsQ0FDUjtNQUNFSCxVQUFVLEVBQUU7SUFDZCxDQUFDO0VBRUwsQ0FBQztFQUNESSxJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN4QixDQUFDO0FBRUQsTUFBTUMsV0FBVyxHQUFHN0wsWUFBWSxDQUFDbUosY0FBYyxDQUFDOztBQUVoRDtBQUNBcEcsR0FBRyxDQUFDZ0MsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDRCxHQUFHLEVBQUU0QixHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2QztFQUNBRCxHQUFHLENBQUNvRixZQUFZLENBQUMseUJBQXlCLENBQUM7RUFDM0NuRixJQUFJLENBQUMsQ0FBQztBQUNSLENBQUMsRUFBRTFHLFNBQVMsQ0FBQzhMLEtBQUssRUFBRTlMLFNBQVMsQ0FBQytMLEtBQUssQ0FBQ0gsV0FBVyxDQUFDLENBQUM7O0FBRWpEO0FBQ0F2SCxPQUFPLENBQUNDLEdBQUcsQ0FBQyx1REFBdUQsQ0FBQzs7QUFFcEU7QUFDQXhCLEdBQUcsQ0FBQ2lFLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRXpGLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQzJLLGdCQUFnQixDQUFDekQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQ0UsY0FBYyxFQUFFLE9BQU9xRCxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDM0ssSUFBSTtJQUNGLE1BQU15RixJQUFJLEdBQUdDLFFBQVEsQ0FBQ3RILEdBQUcsQ0FBQ3VILEtBQUssQ0FBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQztJQUMxQyxNQUFNbkgsS0FBSyxHQUFHb0gsUUFBUSxDQUFDdEgsR0FBRyxDQUFDdUgsS0FBSyxDQUFDckgsS0FBSyxDQUFDLElBQUksRUFBRTtJQUM3QyxNQUFNc0gsSUFBSSxHQUFHLENBQUNILElBQUksR0FBRyxDQUFDLElBQUluSCxLQUFLO0lBRS9CLE1BQU11SCxLQUFLLEdBQUcsTUFBTTVLLElBQUksQ0FBQzZLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUM5QkMsTUFBTSxDQUFDLDhGQUE4RixDQUFDLENBQ3RHQyxJQUFJLENBQUM7TUFBRXJDLFNBQVMsRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ3ZCaUMsSUFBSSxDQUFDQSxJQUFJLENBQUMsQ0FDVnRILEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBRWYsTUFBTTJILEtBQUssR0FBRyxNQUFNaEwsSUFBSSxDQUFDaUwsY0FBYyxDQUFDLENBQUM7SUFFekM5SyxNQUFNLENBQUNtRyxJQUFJLENBQUMsZ0NBQWdDbkQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUMvRHlFLE9BQU8sRUFBRS9ILEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUc7TUFDckJYLElBQUk7TUFDSm5ILEtBQUs7TUFDTDJIO0lBQ0YsQ0FBQyxDQUFDO0lBRUZqRyxHQUFHLENBQUNwRSxJQUFJLENBQUM7TUFDUGlLLEtBQUs7TUFDTFEsVUFBVSxFQUFFO1FBQ1ZaLElBQUk7UUFDSm5ILEtBQUs7UUFDTDJILEtBQUs7UUFDTEssS0FBSyxFQUFFQyxJQUFJLENBQUNDLElBQUksQ0FBQ1AsS0FBSyxHQUFHM0gsS0FBSztNQUNoQztJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPTixLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxpQ0FBaUMsRUFBRUEsS0FBSyxDQUFDO0lBQ3REZ0MsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUUsdUJBQXVCO01BQUVGLElBQUksRUFBRTtJQUFpQixDQUFDLENBQUM7RUFDbEY7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXpCLEdBQUcsQ0FBQ29LLElBQUksQ0FBQyw4QkFBOEIsRUFBRTVMLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQzJLLGdCQUFnQixDQUFDekQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQ0UsY0FBYyxFQUFFLENBQ3BLckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDZ04sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUNwRG5OLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQ29OLFFBQVEsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBQztFQUFFSixHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBUyxDQUFDLENBQUMsQ0FBQztBQUFBLENBQzlELEVBQUUsT0FBT3hJLEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTXRFLE1BQU0sR0FBRy9CLGdCQUFnQixDQUFDeUUsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFDLE1BQU0sQ0FBQ3NMLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBT2hILEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQ3VMLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRUM7SUFBTyxDQUFDLEdBQUc5SSxHQUFHLENBQUMrSSxNQUFNO0lBQzdCLE1BQU07TUFBRUMsTUFBTTtNQUFFOUY7SUFBUyxDQUFDLEdBQUdsRCxHQUFHLENBQUMxRSxJQUFJO0lBRXJDLE1BQU0rSCxJQUFJLEdBQUcsTUFBTXhHLElBQUksQ0FBQ29NLFFBQVEsQ0FBQ0gsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQ3pGLElBQUksRUFBRTtNQUNULE9BQU96QixHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7UUFBRW9DLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7O0lBRUE7SUFDQSxJQUFJeUQsSUFBSSxDQUFDMkUsR0FBRyxDQUFDa0IsUUFBUSxDQUFDLENBQUMsS0FBS2xKLEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUcsQ0FBQ2tCLFFBQVEsQ0FBQyxDQUFDLEVBQUU7TUFDbkQsT0FBT3RILEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFb0MsS0FBSyxFQUFFO01BQXNCLENBQUMsQ0FBQztJQUMvRDs7SUFFQTtJQUNBLElBQUl5RCxJQUFJLENBQUMrQixJQUFJLEtBQUssT0FBTyxJQUFJcEYsR0FBRyxDQUFDcUQsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUN0RCxPQUFPeEQsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVvQyxLQUFLLEVBQUU7TUFBMkIsQ0FBQyxDQUFDO0lBQ3BFO0lBRUEsTUFBTXlELElBQUksQ0FBQzhGLEdBQUcsQ0FBQ0gsTUFBTSxFQUFFOUYsUUFBUSxFQUFFbEQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkUsR0FBRyxDQUFDO0lBRTlDaEwsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLFFBQVFFLElBQUksQ0FBQ0MsUUFBUSxjQUFjdEQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNsRThGLFlBQVksRUFBRU4sTUFBTTtNQUNwQk8sVUFBVSxFQUFFckosR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkUsR0FBRztNQUN4QmdCLE1BQU07TUFDTjlGO0lBQ0YsQ0FBQyxDQUFDO0lBRUZ0QixHQUFHLENBQUNwRSxJQUFJLENBQUM7TUFDUG1DLE9BQU8sRUFBRSxRQUFRMEQsSUFBSSxDQUFDQyxRQUFRLGtCQUFrQjtNQUNoREQsSUFBSSxFQUFFO1FBQ0pQLEVBQUUsRUFBRU8sSUFBSSxDQUFDMkUsR0FBRztRQUNaMUUsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJnRyxNQUFNLEVBQUUsSUFBSTtRQUNaQyxTQUFTLEVBQUVQLE1BQU07UUFDakJRLFVBQVUsRUFBRW5HLElBQUksQ0FBQ21HO01BQ25CO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU81SixLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRUEsS0FBSyxDQUFDO0lBQzFDZ0MsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUU7SUFBcUIsQ0FBQyxDQUFDO0VBQ3ZEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0EzQixHQUFHLENBQUNvSyxJQUFJLENBQUMsZ0NBQWdDLEVBQUU1TCxXQUFXLENBQUMwSyxpQkFBaUIsQ0FBQ3hELElBQUksQ0FBQ2xILFdBQVcsQ0FBQyxFQUFFQSxXQUFXLENBQUMySyxnQkFBZ0IsQ0FBQ3pELElBQUksQ0FBQ2xILFdBQVcsQ0FBQyxFQUFFRSxjQUFjLEVBQUUsT0FBT3FELEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUM5SyxJQUFJO0lBQ0YsTUFBTTtNQUFFa0g7SUFBTyxDQUFDLEdBQUc5SSxHQUFHLENBQUMrSSxNQUFNO0lBQzdCLE1BQU0xRixJQUFJLEdBQUcsTUFBTXhHLElBQUksQ0FBQ29NLFFBQVEsQ0FBQ0gsTUFBTSxDQUFDO0lBQ3hDLElBQUksQ0FBQ3pGLElBQUksRUFBRTtNQUNULE9BQU96QixHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7UUFBRW9DLEtBQUssRUFBRTtNQUFpQixDQUFDLENBQUM7SUFDMUQ7SUFFQSxJQUFJLENBQUN5RCxJQUFJLENBQUNpRyxNQUFNLEVBQUU7TUFDaEIsT0FBTzFILEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFb0MsS0FBSyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUM5RDtJQUVBLE1BQU15RCxJQUFJLENBQUNvRyxLQUFLLENBQUMsQ0FBQztJQUVsQnpNLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsZ0JBQWdCdEQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNwRW9HLGNBQWMsRUFBRVosTUFBTTtNQUN0QmEsWUFBWSxFQUFFM0osR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkU7SUFDekIsQ0FBQyxDQUFDO0lBRUZwRyxHQUFHLENBQUNwRSxJQUFJLENBQUM7TUFDUG1DLE9BQU8sRUFBRSxRQUFRMEQsSUFBSSxDQUFDQyxRQUFRLG9CQUFvQjtNQUNsREQsSUFBSSxFQUFFO1FBQ0pQLEVBQUUsRUFBRU8sSUFBSSxDQUFDMkUsR0FBRztRQUNaMUUsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJnRyxNQUFNLEVBQUU7TUFDVjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPMUosS0FBSyxFQUFFO0lBQ2Q1QyxNQUFNLENBQUM0QyxLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM1Q2dDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFO0lBQXVCLENBQUMsQ0FBQztFQUN6RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBM0IsR0FBRyxDQUFDb0ssSUFBSSxDQUFDLCtCQUErQixFQUFFNUwsV0FBVyxDQUFDMEssaUJBQWlCLENBQUN4RCxJQUFJLENBQUNsSCxXQUFXLENBQUMsRUFBRUEsV0FBVyxDQUFDMkssZ0JBQWdCLENBQUN6RCxJQUFJLENBQUNsSCxXQUFXLENBQUMsRUFBRUUsY0FBYyxFQUFFLENBQ3pKckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDZ04sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUNwRG5OLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQ29OLFFBQVEsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBQztFQUFFSixHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBUyxDQUFDLENBQUMsQ0FDN0QsRUFBRSxPQUFPeEksR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNdEUsTUFBTSxHQUFHL0IsZ0JBQWdCLENBQUN5RSxHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDMUMsTUFBTSxDQUFDc0wsT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNyQixPQUFPaEgsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVGLE1BQU0sRUFBRUEsTUFBTSxDQUFDdUwsS0FBSyxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTTtNQUFFQztJQUFPLENBQUMsR0FBRzlJLEdBQUcsQ0FBQytJLE1BQU07SUFDN0IsTUFBTTtNQUFFQyxNQUFNO01BQUU5RjtJQUFTLENBQUMsR0FBR2xELEdBQUcsQ0FBQzFFLElBQUk7SUFFckMsTUFBTStILElBQUksR0FBRyxNQUFNeEcsSUFBSSxDQUFDb00sUUFBUSxDQUFDSCxNQUFNLENBQUM7SUFDeEMsSUFBSSxDQUFDekYsSUFBSSxFQUFFO01BQ1QsT0FBT3pCLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFb0MsS0FBSyxFQUFFO01BQWlCLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU15RCxJQUFJLENBQUN1RyxJQUFJLENBQUNaLE1BQU0sRUFBRWhKLEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUcsRUFBRTlFLFFBQVEsQ0FBQztJQUMvQyxNQUFNRyxJQUFJLENBQUN3RyxJQUFJLENBQUMsQ0FBQztJQUVqQjdNLE1BQU0sQ0FBQ21HLElBQUksQ0FBQywwQkFBMEJFLElBQUksQ0FBQ0MsUUFBUSxPQUFPdEQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUM3RXdHLFlBQVksRUFBRWhCLE1BQU07TUFDcEJpQixVQUFVLEVBQUUvSixHQUFHLENBQUNxRCxJQUFJLENBQUMyRSxHQUFHO01BQ3hCZ0IsTUFBTTtNQUNOOUY7SUFDRixDQUFDLENBQUM7SUFFRnRCLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQztNQUNQbUMsT0FBTyxFQUFFLDBCQUEwQjBELElBQUksQ0FBQ0MsUUFBUSxFQUFFO01BQ2xEMEcsT0FBTyxFQUFFO1FBQ1BoQixNQUFNO1FBQ05pQixRQUFRLEVBQUVqSyxHQUFHLENBQUNxRCxJQUFJLENBQUNDLFFBQVE7UUFDM0I0RyxRQUFRLEVBQUUsSUFBSWxILElBQUksQ0FBQyxDQUFDO1FBQ3BCbUgsT0FBTyxFQUFFakgsUUFBUSxHQUFHLElBQUlGLElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHQyxRQUFRLENBQUMsR0FBRztNQUN4RCxDQUFDO01BQ0RHLElBQUksRUFBRTtRQUNKUCxFQUFFLEVBQUVPLElBQUksQ0FBQzJFLEdBQUc7UUFDWjFFLFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO1FBQ3ZCOEcsYUFBYSxFQUFFL0csSUFBSSxDQUFDZ0gsc0JBQXNCLENBQUM7TUFDN0M7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT3pLLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7SUFDMUNnQyxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFBRW9DLEtBQUssRUFBRTtJQUFzQixDQUFDLENBQUM7RUFDeEQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTNCLEdBQUcsQ0FBQ29LLElBQUksQ0FBQywrQkFBK0IsRUFBRTVMLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQzZOLFlBQVksQ0FBQzNHLElBQUksQ0FBQ2xILFdBQVcsQ0FBQyxFQUFFRSxjQUFjLEVBQUUsQ0FDckpyQixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUNpUCxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQ3BELEVBQUUsT0FBT3ZLLEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTXRFLE1BQU0sR0FBRy9CLGdCQUFnQixDQUFDeUUsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFDLE1BQU0sQ0FBQ3NMLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBT2hILEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQ3VMLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRUM7SUFBTyxDQUFDLEdBQUc5SSxHQUFHLENBQUMrSSxNQUFNO0lBQzdCLE1BQU07TUFBRTNELElBQUksRUFBRW9GO0lBQVEsQ0FBQyxHQUFHeEssR0FBRyxDQUFDMUUsSUFBSTtJQUVsQyxNQUFNK0gsSUFBSSxHQUFHLE1BQU14RyxJQUFJLENBQUNvTSxRQUFRLENBQUNILE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUN6RixJQUFJLEVBQUU7TUFDVCxPQUFPekIsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVvQyxLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEOztJQUVBO0lBQ0EsSUFBSXlELElBQUksQ0FBQzJFLEdBQUcsQ0FBQ2tCLFFBQVEsQ0FBQyxDQUFDLEtBQUtsSixHQUFHLENBQUNxRCxJQUFJLENBQUMyRSxHQUFHLENBQUNrQixRQUFRLENBQUMsQ0FBQyxFQUFFO01BQ25ELE9BQU90SCxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7UUFBRW9DLEtBQUssRUFBRTtNQUE4QixDQUFDLENBQUM7SUFDdkU7O0lBRUE7SUFDQSxJQUFJLENBQUM0SyxPQUFPLEtBQUssT0FBTyxJQUFJbkgsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLE9BQU8sS0FBS3BGLEdBQUcsQ0FBQ3FELElBQUksQ0FBQytCLElBQUksS0FBSyxPQUFPLEVBQUU7TUFDL0UsT0FBT3hELEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFb0MsS0FBSyxFQUFFO01BQTZDLENBQUMsQ0FBQztJQUN0RjtJQUVBLE1BQU02SyxPQUFPLEdBQUdwSCxJQUFJLENBQUMrQixJQUFJO0lBQ3pCL0IsSUFBSSxDQUFDK0IsSUFBSSxHQUFHb0YsT0FBTztJQUNuQixNQUFNbkgsSUFBSSxDQUFDd0csSUFBSSxDQUFDLENBQUM7SUFFakI3TSxNQUFNLENBQUNtRyxJQUFJLENBQUMsUUFBUUUsSUFBSSxDQUFDQyxRQUFRLHNCQUFzQm1ILE9BQU8sT0FBT0QsT0FBTyxPQUFPeEssR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUN0R29ILGFBQWEsRUFBRTVCLE1BQU07TUFDckI2QixXQUFXLEVBQUUzSyxHQUFHLENBQUNxRCxJQUFJLENBQUMyRSxHQUFHO01BQ3pCeUMsT0FBTztNQUNQRDtJQUNGLENBQUMsQ0FBQztJQUVGNUksR0FBRyxDQUFDcEUsSUFBSSxDQUFDO01BQ1BtQyxPQUFPLEVBQUUsUUFBUTBELElBQUksQ0FBQ0MsUUFBUSxvQkFBb0JrSCxPQUFPLEVBQUU7TUFDM0RuSCxJQUFJLEVBQUU7UUFDSlAsRUFBRSxFQUFFTyxJQUFJLENBQUMyRSxHQUFHO1FBQ1oxRSxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QjhCLElBQUksRUFBRW9GO01BQ1I7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBTzVLLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLDJCQUEyQixFQUFFQSxLQUFLLENBQUM7SUFDaERnQyxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFBRW9DLEtBQUssRUFBRTtJQUE2QixDQUFDLENBQUM7RUFDL0Q7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTNCLEdBQUcsQ0FBQ29LLElBQUksQ0FBQywrQkFBK0IsRUFBRTVMLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVBLFdBQVcsQ0FBQzJLLGdCQUFnQixDQUFDekQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVFLGNBQWMsRUFBRSxDQUN6SnJCLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQ3FOLEtBQUssQ0FBQztFQUFFSixHQUFHLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUU7QUFBTSxDQUFDLENBQUMsQ0FBQztBQUFBLENBQ2pELEVBQUUsT0FBT3hJLEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUNyQixJQUFJO0lBQ0YsTUFBTXRFLE1BQU0sR0FBRy9CLGdCQUFnQixDQUFDeUUsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQzFDLE1BQU0sQ0FBQ3NMLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBT2hILEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztRQUFFRixNQUFNLEVBQUVBLE1BQU0sQ0FBQ3VMLEtBQUssQ0FBQztNQUFFLENBQUMsQ0FBQztJQUN6RDtJQUVBLE1BQU07TUFBRUM7SUFBTyxDQUFDLEdBQUc5SSxHQUFHLENBQUMrSSxNQUFNO0lBQzdCLE1BQU07TUFBRTdGO0lBQVMsQ0FBQyxHQUFHbEQsR0FBRyxDQUFDMUUsSUFBSTtJQUU3QixNQUFNK0gsSUFBSSxHQUFHLE1BQU14RyxJQUFJLENBQUNvTSxRQUFRLENBQUNILE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUN6RixJQUFJLEVBQUU7TUFDVCxPQUFPekIsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVvQyxLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsTUFBTXlELElBQUksQ0FBQ3VILElBQUksQ0FBQzFILFFBQVEsQ0FBQztJQUV6QmxHLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyxRQUFRRSxJQUFJLENBQUNDLFFBQVEsYUFBYXRELEdBQUcsQ0FBQ3FELElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDakV1SCxXQUFXLEVBQUUvQixNQUFNO01BQ25CZ0MsU0FBUyxFQUFFOUssR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkUsR0FBRztNQUN2QjlFO0lBQ0YsQ0FBQyxDQUFDO0lBRUZ0QixHQUFHLENBQUNwRSxJQUFJLENBQUM7TUFDUG1DLE9BQU8sRUFBRSxRQUFRMEQsSUFBSSxDQUFDQyxRQUFRLGlCQUFpQjtNQUMvQ0QsSUFBSSxFQUFFO1FBQ0pQLEVBQUUsRUFBRU8sSUFBSSxDQUFDMkUsR0FBRztRQUNaMUUsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7UUFDdkJ5SCxXQUFXLEVBQUUxSCxJQUFJLENBQUMwSDtNQUNwQjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQyxPQUFPbkwsS0FBSyxFQUFFO0lBQ2Q1QyxNQUFNLENBQUM0QyxLQUFLLENBQUMsb0JBQW9CLEVBQUVBLEtBQUssQ0FBQztJQUN6Q2dDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFO0lBQXNCLENBQUMsQ0FBQztFQUN4RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBM0IsR0FBRyxDQUFDb0ssSUFBSSxDQUFDLGlDQUFpQyxFQUFFNUwsV0FBVyxDQUFDMEssaUJBQWlCLENBQUN4RCxJQUFJLENBQUNsSCxXQUFXLENBQUMsRUFBRUEsV0FBVyxDQUFDMkssZ0JBQWdCLENBQUN6RCxJQUFJLENBQUNsSCxXQUFXLENBQUMsRUFBRUUsY0FBYyxFQUFFLE9BQU9xRCxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDL0ssSUFBSTtJQUNGLE1BQU07TUFBRWtIO0lBQU8sQ0FBQyxHQUFHOUksR0FBRyxDQUFDK0ksTUFBTTtJQUM3QixNQUFNMUYsSUFBSSxHQUFHLE1BQU14RyxJQUFJLENBQUNvTSxRQUFRLENBQUNILE1BQU0sQ0FBQztJQUN4QyxJQUFJLENBQUN6RixJQUFJLEVBQUU7TUFDVCxPQUFPekIsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVvQyxLQUFLLEVBQUU7TUFBaUIsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsSUFBSSxDQUFDeUQsSUFBSSxDQUFDMkgsT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNuQixPQUFPcEosR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQUVvQyxLQUFLLEVBQUU7TUFBb0IsQ0FBQyxDQUFDO0lBQzdEO0lBRUEsTUFBTXlELElBQUksQ0FBQzRILE1BQU0sQ0FBQyxDQUFDO0lBRW5Cak8sTUFBTSxDQUFDbUcsSUFBSSxDQUFDLFFBQVFFLElBQUksQ0FBQ0MsUUFBUSxlQUFldEQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUNuRTRILGFBQWEsRUFBRXBDLE1BQU07TUFDckJxQyxXQUFXLEVBQUVuTCxHQUFHLENBQUNxRCxJQUFJLENBQUMyRTtJQUN4QixDQUFDLENBQUM7SUFFRnBHLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQztNQUNQbUMsT0FBTyxFQUFFLFFBQVEwRCxJQUFJLENBQUNDLFFBQVEsbUJBQW1CO01BQ2pERCxJQUFJLEVBQUU7UUFDSlAsRUFBRSxFQUFFTyxJQUFJLENBQUMyRSxHQUFHO1FBQ1oxRSxRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QnlILFdBQVcsRUFBRTtNQUNmO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9uTCxLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxzQkFBc0IsRUFBRUEsS0FBSyxDQUFDO0lBQzNDZ0MsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0VBQzFEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtDQUErQyxDQUFDO0FBQzVEeEIsR0FBRyxDQUFDaUUsR0FBRyxDQUFDLFlBQVksRUFBRXpGLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVFLGNBQWMsRUFBRSxPQUFPcUQsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQ3pHLElBQUk7SUFDRixNQUFNNkYsS0FBSyxHQUFHLE1BQU01SyxJQUFJLENBQUM2SyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDOUJDLE1BQU0sQ0FBQywrQ0FBK0MsQ0FBQyxDQUN2REMsSUFBSSxDQUFDO01BQUV0RSxRQUFRLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFFeEJ0RyxNQUFNLENBQUNtRyxJQUFJLENBQUMsMkJBQTJCbkQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsRUFBRTtNQUMxRHdGLE1BQU0sRUFBRTlJLEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUc7TUFDcEJvRCxVQUFVLEVBQUUzRCxLQUFLLENBQUM0RDtJQUNwQixDQUFDLENBQUM7SUFFRjdMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQixFQUFFZ0ksS0FBSyxDQUFDNEQsTUFBTSxDQUFDO0lBQ3JEekosR0FBRyxDQUFDcEUsSUFBSSxDQUFDaUssS0FBSyxDQUFDO0VBQ2pCLENBQUMsQ0FBQyxPQUFPN0gsS0FBSyxFQUFFO0lBQ2Q1QyxNQUFNLENBQUM0QyxLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM1Q0osT0FBTyxDQUFDSSxLQUFLLENBQUMsNEJBQTRCLEVBQUVBLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQzFEaUMsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUUsdUJBQXVCO01BQUVGLElBQUksRUFBRTtJQUFpQixDQUFDLENBQUM7RUFDbEY7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXpCLEdBQUcsQ0FBQ2lFLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDbEMsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQ3RDQSxHQUFHLENBQUNvRixZQUFZLENBQUMseUJBQXlCLENBQUM7RUFDM0NwRixHQUFHLENBQUMwSixTQUFTLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDO0VBQ2pEMUosR0FBRyxDQUFDMkosSUFBSSxDQUFDeEUsV0FBVyxDQUFDO0FBQ3ZCLENBQUMsQ0FBQzs7QUFFRjtBQUNBOUksR0FBRyxDQUFDb0ssSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUNySSxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDN0M7RUFDQTtFQUNBLElBQUk7SUFDRixNQUFNNEosZ0JBQWdCLEdBQUc5TyxlQUFlLENBQUNvRSxLQUFLO0lBQzlDLElBQUkwSyxnQkFBZ0IsSUFBSSxPQUFPQSxnQkFBZ0IsQ0FBQ0MsUUFBUSxLQUFLLFVBQVUsRUFBRTtNQUN2RUQsZ0JBQWdCLENBQUNDLFFBQVEsQ0FBQyxDQUFDO01BQzNCak0sT0FBTyxDQUFDQyxHQUFHLENBQUMsNkNBQTZDLENBQUM7TUFDMURtQyxHQUFHLENBQUNwRSxJQUFJLENBQUM7UUFBRWtPLE9BQU8sRUFBRSxJQUFJO1FBQUUvTCxPQUFPLEVBQUU7TUFBK0IsQ0FBQyxDQUFDO0lBQ3RFLENBQUMsTUFBTTtNQUNMO01BQ0FILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVGQUF1RixDQUFDO01BQ3BHbUMsR0FBRyxDQUFDcEUsSUFBSSxDQUFDO1FBQUVrTyxPQUFPLEVBQUUsS0FBSztRQUFFL0wsT0FBTyxFQUFFO01BQTZELENBQUMsQ0FBQztJQUNyRztFQUNGLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEosT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLEVBQUVHLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQzlEaUMsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVrTyxPQUFPLEVBQUUsS0FBSztNQUFFOUwsS0FBSyxFQUFFO0lBQWdDLENBQUMsQ0FBQztFQUNsRjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBM0IsR0FBRyxDQUFDaUUsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDbEMsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQy9CQSxHQUFHLENBQUNwRSxJQUFJLENBQUM7SUFDUHNDLE1BQU0sRUFBRSxTQUFTO0lBQ2pCekMsU0FBUyxFQUFFLElBQUkyRixJQUFJLENBQUMsQ0FBQyxDQUFDMkksV0FBVyxDQUFDLENBQUM7SUFDbkNDLE1BQU0sRUFBRXROLE9BQU8sQ0FBQ3NOLE1BQU0sQ0FBQztFQUN6QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTNOLEdBQUcsQ0FBQ2lFLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRWhHLGNBQWMsQ0FBQztBQUUvQytCLEdBQUcsQ0FBQ2lFLEdBQUcsQ0FBQyw0QkFBNEIsRUFBRSxDQUFDbEMsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQ2xEO0VBQ0EsSUFBSSxDQUFDNUIsR0FBRyxDQUFDcUQsSUFBSSxJQUFLckQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLE9BQU8sSUFBSXBGLEdBQUcsQ0FBQ3FELElBQUksQ0FBQytCLElBQUksS0FBSyxXQUFZLEVBQUU7SUFDN0UsT0FBT3hELEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUNqRTtFQUNBekQsdUJBQXVCLENBQUM2RCxHQUFHLEVBQUU0QixHQUFHLENBQUM7QUFDbkMsQ0FBQyxDQUFDOztBQUVGO0FBQ0EzRCxHQUFHLENBQUNpRSxHQUFHLENBQUMseUJBQXlCLEVBQUUsQ0FBQ2xDLEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUMvQyxJQUFJLENBQUM1QixHQUFHLENBQUNxRCxJQUFJLElBQUtyRCxHQUFHLENBQUNxRCxJQUFJLENBQUMrQixJQUFJLEtBQUssT0FBTyxJQUFJcEYsR0FBRyxDQUFDcUQsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLFdBQVksRUFBRTtJQUM3RSxPQUFPeEQsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0VBQ2pFOztFQUVBO0VBQ0E1RCxrQkFBa0IsQ0FBQzZQLFdBQVcsQ0FBQyxDQUFDO0VBRWhDakssR0FBRyxDQUFDcEUsSUFBSSxDQUFDO0lBQ1BILFNBQVMsRUFBRSxJQUFJMkYsSUFBSSxDQUFDLENBQUMsQ0FBQzJJLFdBQVcsQ0FBQyxDQUFDO0lBQ25DRyxjQUFjLEVBQUUsSUFBSTtJQUNwQm5NLE9BQU8sRUFBRTtFQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBMUIsR0FBRyxDQUFDaUUsR0FBRyxDQUFDLDZCQUE2QixFQUFFLENBQUNsQyxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDbkQsSUFBSSxDQUFDNUIsR0FBRyxDQUFDcUQsSUFBSSxJQUFLckQsR0FBRyxDQUFDcUQsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLE9BQU8sSUFBSXBGLEdBQUcsQ0FBQ3FELElBQUksQ0FBQytCLElBQUksS0FBSyxXQUFZLEVBQUU7SUFDN0UsT0FBT3hELEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUNqRTtFQUVBLE1BQU1FLE1BQU0sR0FBR3RELHlCQUF5QixDQUFDLENBQUM7RUFDMUNvRixHQUFHLENBQUNwRSxJQUFJLENBQUM7SUFDUEgsU0FBUyxFQUFFLElBQUkyRixJQUFJLENBQUMsQ0FBQyxDQUFDMkksV0FBVyxDQUFDLENBQUM7SUFDbkNJLFFBQVEsRUFBRWpNO0VBQ1osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0E3QixHQUFHLENBQUNpRSxHQUFHLENBQUMsMEJBQTBCLEVBQUUsT0FBT2xDLEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUN0RCxJQUFJLENBQUM1QixHQUFHLENBQUNxRCxJQUFJLElBQUtyRCxHQUFHLENBQUNxRCxJQUFJLENBQUMrQixJQUFJLEtBQUssT0FBTyxJQUFJcEYsR0FBRyxDQUFDcUQsSUFBSSxDQUFDK0IsSUFBSSxLQUFLLFdBQVksRUFBRTtJQUM3RSxPQUFPeEQsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO01BQUVvQyxLQUFLLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0VBQ2pFO0VBRUEsSUFBSTtJQUNGLE1BQU1vTSxZQUFZLEdBQUc7TUFDbkIzTyxTQUFTLEVBQUUsSUFBSTJGLElBQUksQ0FBQyxDQUFDLENBQUMySSxXQUFXLENBQUMsQ0FBQztNQUNuQ00sZUFBZSxFQUFFM04sT0FBTyxDQUFDNE4saUJBQWlCLENBQUMsQ0FBQyxDQUFDYixNQUFNO01BQ25EYyxZQUFZLEVBQUU3TixPQUFPLENBQUM4TixXQUFXLENBQUMsQ0FBQztNQUNuQ0Msa0JBQWtCLEVBQUVDLGNBQWMsR0FBRyxNQUFNQSxjQUFjLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztNQUNoRUMsbUJBQW1CLEVBQUV2USxrQkFBa0IsQ0FBQ3dRLGdCQUFnQixHQUFHeFEsa0JBQWtCLENBQUN3USxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO01BQ3JHQyxnQkFBZ0IsRUFBRWpRLHlCQUF5QixDQUFDO0lBQzlDLENBQUM7SUFFRG9GLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQ3dPLFlBQVksQ0FBQztFQUN4QixDQUFDLENBQUMsT0FBT3BNLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLG9DQUFvQyxFQUFFQSxLQUFLLENBQUM7SUFDekRnQyxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFBRW9DLEtBQUssRUFBRSxtQ0FBbUM7TUFBRUQsT0FBTyxFQUFFQyxLQUFLLENBQUNEO0lBQVEsQ0FBQyxDQUFDO0VBQzlGO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0ExQixHQUFHLENBQUNnQyxHQUFHLENBQUMsQ0FBQ0QsR0FBRyxFQUFFNEIsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUI3RSxNQUFNLENBQUNtRyxJQUFJLENBQUMsd0JBQXdCbkQsR0FBRyxDQUFDK0IsTUFBTSxJQUFJL0IsR0FBRyxDQUFDOEIsR0FBRyxFQUFFLEVBQUU7SUFDM0RFLEVBQUUsRUFBRWhDLEdBQUcsQ0FBQ2dDLEVBQUU7SUFDVkMsU0FBUyxFQUFFakMsR0FBRyxDQUFDa0MsR0FBRyxDQUFDLFlBQVksQ0FBQztJQUNoQ25DLE9BQU8sRUFBRUMsR0FBRyxDQUFDRDtFQUNmLENBQUMsQ0FBQztFQUNGOEIsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLENBQUM7O0FBYUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FyQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsQ0FBQztBQUM3RHhCLEdBQUcsQ0FBQ29LLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FDckIvTSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUNnTixRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQ3ZEbk4sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDZ04sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUNoRCxFQUFFLE9BQU94SSxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDckI7RUFDQSxNQUFNbkYsV0FBVyxDQUFDaVEsc0JBQXNCLENBQUMxTSxHQUFHLENBQUMxRSxJQUFJLENBQUN5SyxVQUFVLEVBQUUvRixHQUFHLENBQUMxRSxJQUFJLENBQUN1SyxRQUFRLEVBQUU3RixHQUFHLEVBQUU0QixHQUFHLENBQUM7QUFDNUYsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EzRCxHQUFHLENBQUNvSyxJQUFJLENBQUMsZUFBZSxFQUFFNUwsV0FBVyxDQUFDQyxlQUFlLEVBQUUsQ0FDckRwQixJQUFJLENBQUMsVUFBVSxDQUFDLENBQUNnTixRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUNrRSxNQUFNLENBQUMsQ0FBQyxFQUM5RHJSLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ3NSLE9BQU8sQ0FBQyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxDQUFDLEVBQ3hDdlIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDZ04sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFFLENBQUMsQ0FBQyxDQUN0QyxFQUFFLE9BQU92SSxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDckI7RUFDQSxNQUFNbkYsV0FBVyxDQUFDcVEsNkJBQTZCLENBQUM5TSxHQUFHLENBQUMxRSxJQUFJLEVBQUUwRSxHQUFHLEVBQUU0QixHQUFHLENBQUM7QUFDckUsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FwQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrREFBa0QsQ0FBQztBQUMvRHhCLEdBQUcsQ0FBQ2lFLEdBQUcsQ0FBQyxlQUFlLEVBQUV6RixXQUFXLENBQUMwSyxpQkFBaUIsQ0FBQ3hELElBQUksQ0FBQ2xILFdBQVcsQ0FBQyxFQUFFRSxjQUFjLEVBQUUsT0FBT3FELEdBQUcsRUFBRTRCLEdBQUcsS0FBSztFQUM1R3BDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNDQUFzQyxFQUFFO0lBQUVzQyxNQUFNLEVBQUUvQixHQUFHLENBQUMrQixNQUFNO0lBQUVELEdBQUcsRUFBRTlCLEdBQUcsQ0FBQzhCLEdBQUc7SUFBRS9CLE9BQU8sRUFBRUMsR0FBRyxDQUFDRCxPQUFPLENBQUNnTixhQUFhLEdBQUcscUJBQXFCLEdBQUc7RUFBaUIsQ0FBQyxDQUFDO0VBQ3hLLElBQUk7SUFDRixNQUFNQyxRQUFRLEdBQUcsTUFBTWpRLE9BQU8sQ0FBQzJLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNwQ0MsTUFBTSxDQUFDLGtEQUFrRCxDQUFDLENBQzFEQyxJQUFJLENBQUM7TUFBRWpDLFFBQVEsRUFBRTtJQUFFLENBQUMsQ0FBQztJQUV4QjNJLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyw4QkFBOEJuRCxHQUFHLENBQUNxRCxJQUFJLENBQUNDLFFBQVEsRUFBRSxFQUFFO01BQzdEd0YsTUFBTSxFQUFFOUksR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkUsR0FBRztNQUNwQmlGLFlBQVksRUFBRUQsUUFBUSxDQUFDM0I7SUFDekIsQ0FBQyxDQUFDO0lBRUY3TCxPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRXVOLFFBQVEsQ0FBQzNCLE1BQU0sQ0FBQztJQUMzRHpKLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQ3dQLFFBQVEsQ0FBQztFQUNwQixDQUFDLENBQUMsT0FBT3BOLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLDBCQUEwQixFQUFFQSxLQUFLLENBQUM7SUFDL0NKLE9BQU8sQ0FBQ0ksS0FBSyxDQUFDLCtCQUErQixFQUFFQSxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUM3RGlDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFLDBCQUEwQjtNQUFFRixJQUFJLEVBQUU7SUFBaUIsQ0FBQyxDQUFDO0VBQ3JGO0FBQ0YsQ0FBQyxDQUFDO0FBRUZGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1EQUFtRCxDQUFDOztBQUVoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0F4QixHQUFHLENBQUNvSyxJQUFJLENBQUMsZUFBZSxFQUFFNUwsV0FBVyxDQUFDMEssaUJBQWlCLENBQUN4RCxJQUFJLENBQUNsSCxXQUFXLENBQUMsRUFBRUUsY0FBYyxFQUFFLENBQ3pGckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDZ04sUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDa0UsTUFBTSxDQUFDLENBQUMsRUFDM0RyUixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUNpUCxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzlCLElBQUksQ0FBQyxDQUFDLEVBQzNDbk4sSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDb04sUUFBUSxDQUFDLENBQUMsQ0FBQ0osUUFBUSxDQUFDO0VBQUVFLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUM3RCxFQUFFLE9BQU96SSxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDckIsSUFBSTtJQUNGLE1BQU10RSxNQUFNLEdBQUcvQixnQkFBZ0IsQ0FBQ3lFLEdBQUcsQ0FBQztJQUNwQyxJQUFJLENBQUMxQyxNQUFNLENBQUNzTCxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3JCLE9BQU9oSCxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7UUFBRUYsTUFBTSxFQUFFQSxNQUFNLENBQUN1TCxLQUFLLENBQUM7TUFBRSxDQUFDLENBQUM7SUFDekQ7SUFFQSxNQUFNO01BQUVySCxJQUFJO01BQUV1RCxJQUFJO01BQUVMO0lBQVksQ0FBQyxHQUFHMUUsR0FBRyxDQUFDMUUsSUFBSTtJQUM1QyxNQUFNb0ssU0FBUyxHQUFHMUYsR0FBRyxDQUFDcUQsSUFBSSxDQUFDQyxRQUFROztJQUVuQztJQUNBLE1BQU00SixPQUFPLEdBQUcsSUFBSW5RLE9BQU8sQ0FBQztNQUMxQnlFLElBQUk7TUFDSnVELElBQUk7TUFDSkwsV0FBVztNQUNYZ0I7SUFDRixDQUFDLENBQUM7SUFFRixNQUFNd0gsT0FBTyxDQUFDckQsSUFBSSxDQUFDLENBQUM7SUFFcEI3TSxNQUFNLENBQUNtRyxJQUFJLENBQUMsWUFBWTNCLElBQUksZ0JBQWdCa0UsU0FBUyxFQUFFLEVBQUU7TUFDdkR5SCxTQUFTLEVBQUVELE9BQU8sQ0FBQ3BLLEVBQUU7TUFDckJpQyxJQUFJO01BQ0orRCxNQUFNLEVBQUU5SSxHQUFHLENBQUNxRCxJQUFJLENBQUMyRTtJQUNuQixDQUFDLENBQUM7SUFFRnBHLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUNuQnNGLEVBQUUsRUFBRW9LLE9BQU8sQ0FBQ3BLLEVBQUU7TUFDZHRCLElBQUksRUFBRTBMLE9BQU8sQ0FBQzFMLElBQUk7TUFDbEJ1RCxJQUFJLEVBQUVtSSxPQUFPLENBQUNuSSxJQUFJO01BQ2xCTCxXQUFXLEVBQUV3SSxPQUFPLENBQUN4SSxXQUFXO01BQ2hDZ0IsU0FBUyxFQUFFd0gsT0FBTyxDQUFDeEgsU0FBUztNQUM1QkMsUUFBUSxFQUFFdUgsT0FBTyxDQUFDdkg7SUFDcEIsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU8vRixLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRUEsS0FBSyxDQUFDO0lBRTlDLElBQUlBLEtBQUssQ0FBQzRCLElBQUksS0FBSyxpQkFBaUIsRUFBRTtNQUNwQyxPQUFPSSxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7UUFDMUJvQyxLQUFLLEVBQUUsc0JBQXNCO1FBQzdCOEMsT0FBTyxFQUFFOUMsS0FBSyxDQUFDRDtNQUNqQixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUlDLEtBQUssQ0FBQ0YsSUFBSSxLQUFLLEtBQUssRUFBRTtNQUN4QixPQUFPa0MsR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO1FBQzFCb0MsS0FBSyxFQUFFLDZCQUE2QjtRQUNwQ0YsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7SUFFQWtDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUNuQm9DLEtBQUssRUFBRSwwQkFBMEI7TUFDakNGLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDO0FBRUZGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlEQUFpRCxDQUFDO0FBQzlEeEIsR0FBRyxDQUFDb0ssSUFBSSxDQUFDLGFBQWEsRUFBRTVMLFdBQVcsQ0FBQzBLLGlCQUFpQixDQUFDeEQsSUFBSSxDQUFDbEgsV0FBVyxDQUFDLEVBQUVFLGNBQWMsRUFBRSxPQUFPcUQsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQzNHLElBQUk7SUFDRnBDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhCQUE4QixFQUFFTyxHQUFHLENBQUNxRCxJQUFJLENBQUNDLFFBQVEsRUFBRTtNQUFFd0YsTUFBTSxFQUFFOUksR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkU7SUFBSSxDQUFDLENBQUM7O0lBRXhGO0lBQ0EsTUFBTW9GLE9BQU8sR0FBR0MsV0FBVztJQUMzQixJQUFJQyxpQkFBaUIsR0FBRyxDQUFDO0lBQ3pCLEtBQUssTUFBTSxDQUFDQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQyxJQUFJSixPQUFPLENBQUNLLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDdEQsSUFBSUQsVUFBVSxDQUFDMUUsTUFBTSxLQUFLOUksR0FBRyxDQUFDcUQsSUFBSSxDQUFDMkUsR0FBRyxDQUFDa0IsUUFBUSxDQUFDLENBQUMsRUFBRTtRQUNqRCxNQUFNd0UsTUFBTSxHQUFHdFAsRUFBRSxDQUFDZ1AsT0FBTyxDQUFDQSxPQUFPLENBQUNsTCxHQUFHLENBQUNxTCxRQUFRLENBQUM7UUFDL0MsSUFBSUcsTUFBTSxFQUFFO1VBQ1ZBLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLENBQUM7VUFDbkJMLGlCQUFpQixFQUFFO1FBQ3JCO01BQ0Y7SUFDRjs7SUFFQTtJQUNBLE1BQU16USxJQUFJLENBQUMrUSxpQkFBaUIsQ0FBQzVOLEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUcsRUFBRTtNQUN6Q2xJLE1BQU0sRUFBRSxTQUFTO01BQ2pCMEYsVUFBVSxFQUFFLElBQUl4QyxJQUFJLENBQUM7SUFDdkIsQ0FBQyxDQUFDO0lBRUZ4RCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxVQUFVTyxHQUFHLENBQUNxRCxJQUFJLENBQUNDLFFBQVEsNkJBQTZCZ0ssaUJBQWlCLDJCQUEyQixDQUFDO0lBQ2pIdFEsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLG9CQUFvQm5ELEdBQUcsQ0FBQ3FELElBQUksQ0FBQ0MsUUFBUSxFQUFFLEVBQUU7TUFDbkR3RixNQUFNLEVBQUU5SSxHQUFHLENBQUNxRCxJQUFJLENBQUMyRSxHQUFHO01BQ3BCNkYsbUJBQW1CLEVBQUVQO0lBQ3ZCLENBQUMsQ0FBQztJQUVGMUwsR0FBRyxDQUFDcEUsSUFBSSxDQUFDO01BQ1BrTyxPQUFPLEVBQUUsSUFBSTtNQUNiL0wsT0FBTyxFQUFFLHlCQUF5QjtNQUNsQzJOO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU8xTixLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxlQUFlLEVBQUVBLEtBQUssQ0FBQztJQUNwQ2dDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUFFb0MsS0FBSyxFQUFFO0lBQTZCLENBQUMsQ0FBQztFQUMvRDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBM0IsR0FBRyxDQUFDb0ssSUFBSSxDQUFDLHFCQUFxQixFQUFFMUwsY0FBYyxFQUFFLE9BQU9xRCxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDbEUsSUFBSTtJQUNGcEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsdUNBQXVDLEVBQUVPLEdBQUcsQ0FBQzhOLFNBQVMsQ0FBQzs7SUFFbkU7SUFDQSxNQUFNQyxVQUFVLEdBQUcsQ0FBQyxDQUFDL04sR0FBRyxDQUFDcUQsSUFBSSxDQUFDLENBQUM7SUFDL0IsTUFBTTJLLGNBQWMsR0FBR2hPLEdBQUcsQ0FBQ2lPLFdBQVcsSUFBS2pPLEdBQUcsQ0FBQ3RFLE9BQU8sSUFBSXNFLEdBQUcsQ0FBQ3RFLE9BQU8sQ0FBQ3dTLGFBQWM7SUFDcEYsTUFBTUMsYUFBYSxHQUFHbk8sR0FBRyxDQUFDdEUsT0FBTyxJQUFJc0UsR0FBRyxDQUFDdEUsT0FBTyxDQUFDb04sTUFBTTtJQUV2RHRKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQixFQUFFO01BQ3RDc08sVUFBVTtNQUNWQyxjQUFjO01BQ2RHLGFBQWE7TUFDYkwsU0FBUyxFQUFFOU4sR0FBRyxDQUFDOE47SUFDakIsQ0FBQyxDQUFDO0lBRUYsSUFBSUUsY0FBYyxFQUFFO01BQ2xCLE1BQU1DLFdBQVcsR0FBR0UsYUFBYSxHQUFHLE1BQU10UixJQUFJLENBQUNvTSxRQUFRLENBQUNrRixhQUFhLENBQUMsR0FBRyxJQUFJO01BQzdFLE1BQU03SyxRQUFRLEdBQUcySyxXQUFXLEdBQUdBLFdBQVcsQ0FBQzNLLFFBQVEsR0FBRyxTQUFTO01BRS9EOUQsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0RBQWdELEVBQUU2RCxRQUFRLENBQUM7O01BRXZFO01BQ0EsSUFBSTZLLGFBQWEsRUFBRTtRQUNqQixNQUFNZixPQUFPLEdBQUdDLFdBQVc7UUFDM0IsSUFBSUMsaUJBQWlCLEdBQUcsQ0FBQztRQUN6QixLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLENBQUMsSUFBSUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFO1VBQ3RELElBQUlELFVBQVUsQ0FBQzFFLE1BQU0sS0FBS3FGLGFBQWEsRUFBRTtZQUN2QyxNQUFNVCxNQUFNLEdBQUd0UCxFQUFFLENBQUNnUCxPQUFPLENBQUNBLE9BQU8sQ0FBQ2xMLEdBQUcsQ0FBQ3FMLFFBQVEsQ0FBQztZQUMvQyxJQUFJRyxNQUFNLEVBQUU7Y0FDVkEsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQztjQUNuQkwsaUJBQWlCLEVBQUU7WUFDckI7VUFDRjtRQUNGO1FBRUE5TixPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0M2TixpQkFBaUIscUJBQXFCLENBQUM7TUFDekY7O01BRUE7TUFDQSxNQUFNLElBQUljLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztRQUNyQ3RPLEdBQUcsQ0FBQ3RFLE9BQU8sQ0FBQzZTLE9BQU8sQ0FBRWhQLEdBQUcsSUFBSztVQUMzQixJQUFJQSxHQUFHLEVBQUU7WUFDUEMsT0FBTyxDQUFDSSxLQUFLLENBQUMsMEJBQTBCLEVBQUVMLEdBQUcsQ0FBQztZQUM5QytPLE1BQU0sQ0FBQy9PLEdBQUcsQ0FBQztVQUNiLENBQUMsTUFBTTtZQUNMQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztZQUMvQzRPLE9BQU8sQ0FBQyxDQUFDO1VBQ1g7UUFDRixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7TUFFRnJSLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyx1QkFBdUJHLFFBQVEsRUFBRSxFQUFFO1FBQzdDd0ssU0FBUyxFQUFFOU4sR0FBRyxDQUFDOE4sU0FBUztRQUN4QjlMLEVBQUUsRUFBRWhDLEdBQUcsQ0FBQ2dDO01BQ1YsQ0FBQyxDQUFDO01BRUZKLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQztRQUNQa08sT0FBTyxFQUFFLElBQUk7UUFDYi9MLE9BQU8sRUFBRSxpQ0FBaUM7UUFDMUNvRixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCeUosZ0JBQWdCLEVBQUU7TUFDcEIsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxNQUFNO01BQ0xoUCxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3REFBd0QsQ0FBQztNQUNyRW1DLEdBQUcsQ0FBQ3BFLElBQUksQ0FBQztRQUNQa08sT0FBTyxFQUFFLElBQUk7UUFDYi9MLE9BQU8sRUFBRSw4QkFBOEI7UUFDdkNvRixJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCeUosZ0JBQWdCLEVBQUU7TUFDcEIsQ0FBQyxDQUFDO0lBQ0o7RUFFRixDQUFDLENBQUMsT0FBTzVPLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDNUNnQyxHQUFHLENBQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN0QyxJQUFJLENBQUM7TUFDbkJvQyxLQUFLLEVBQUUsb0NBQW9DO01BQzNDRixJQUFJLEVBQUU7SUFDUixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBekIsR0FBRyxDQUFDb0ssSUFBSSxDQUFDLHNCQUFzQixFQUFFMUwsY0FBYyxFQUFFLE9BQU9xRCxHQUFHLEVBQUU0QixHQUFHLEtBQUs7RUFDbkUsSUFBSTtJQUNGcEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0RBQXdELEVBQUVPLEdBQUcsQ0FBQzhOLFNBQVMsQ0FBQztJQUVwRixNQUFNQyxVQUFVLEdBQUcsQ0FBQyxDQUFDL04sR0FBRyxDQUFDcUQsSUFBSTtJQUM3QixNQUFNMkssY0FBYyxHQUFHaE8sR0FBRyxDQUFDaU8sV0FBVyxJQUFLak8sR0FBRyxDQUFDdEUsT0FBTyxJQUFJc0UsR0FBRyxDQUFDdEUsT0FBTyxDQUFDd1MsYUFBYztJQUNwRixNQUFNQyxhQUFhLEdBQUduTyxHQUFHLENBQUN0RSxPQUFPLElBQUlzRSxHQUFHLENBQUN0RSxPQUFPLENBQUNvTixNQUFNO0lBRXZELElBQUkyRixlQUFlLEdBQUcsSUFBSTtJQUMxQixJQUFJQyxtQkFBbUIsR0FBRyxJQUFJOztJQUU5QjtJQUNBLElBQUlYLFVBQVUsRUFBRTtNQUNkLElBQUk7UUFDRixNQUFNWCxPQUFPLEdBQUdDLFdBQVc7UUFDM0IsSUFBSUMsaUJBQWlCLEdBQUcsQ0FBQztRQUN6QixLQUFLLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLENBQUMsSUFBSUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFO1VBQ3RELElBQUlELFVBQVUsQ0FBQzFFLE1BQU0sS0FBSzlJLEdBQUcsQ0FBQ3FELElBQUksQ0FBQzJFLEdBQUcsQ0FBQ2tCLFFBQVEsQ0FBQyxDQUFDLEVBQUU7WUFDakQsTUFBTXdFLE1BQU0sR0FBR3RQLEVBQUUsQ0FBQ2dQLE9BQU8sQ0FBQ0EsT0FBTyxDQUFDbEwsR0FBRyxDQUFDcUwsUUFBUSxDQUFDO1lBQy9DLElBQUlHLE1BQU0sRUFBRTtjQUNWQSxNQUFNLENBQUNDLFVBQVUsQ0FBQyxDQUFDO2NBQ25CTCxpQkFBaUIsRUFBRTtZQUNyQjtVQUNGO1FBQ0Y7UUFFQSxNQUFNelEsSUFBSSxDQUFDK1EsaUJBQWlCLENBQUM1TixHQUFHLENBQUNxRCxJQUFJLENBQUMyRSxHQUFHLEVBQUU7VUFDekNsSSxNQUFNLEVBQUUsU0FBUztVQUNqQjBGLFVBQVUsRUFBRSxJQUFJeEMsSUFBSSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQztRQUVGeUwsZUFBZSxHQUFHO1VBQ2hCL0MsT0FBTyxFQUFFLElBQUk7VUFDYjRCO1FBQ0YsQ0FBQztNQUNILENBQUMsQ0FBQyxPQUFPcUIsUUFBUSxFQUFFO1FBQ2pCRixlQUFlLEdBQUc7VUFDaEIvQyxPQUFPLEVBQUUsS0FBSztVQUNkOUwsS0FBSyxFQUFFK08sUUFBUSxDQUFDaFA7UUFDbEIsQ0FBQztNQUNIO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJcU8sY0FBYyxFQUFFO01BQ2xCLElBQUk7UUFDRixJQUFJRyxhQUFhLEVBQUU7VUFDakIsTUFBTUYsV0FBVyxHQUFHLE1BQU1wUixJQUFJLENBQUNvTSxRQUFRLENBQUNrRixhQUFhLENBQUM7VUFDdEQzTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsRUFBRXdPLFdBQVcsR0FBR0EsV0FBVyxDQUFDM0ssUUFBUSxHQUFHLFNBQVMsQ0FBQzs7VUFFN0c7VUFDQSxNQUFNOEosT0FBTyxHQUFHQyxXQUFXO1VBQzNCLElBQUlDLGlCQUFpQixHQUFHLENBQUM7VUFDekIsS0FBSyxNQUFNLENBQUNDLFFBQVEsRUFBRUMsVUFBVSxDQUFDLElBQUlKLE9BQU8sQ0FBQ0ssT0FBTyxDQUFDLENBQUMsRUFBRTtZQUN0RCxJQUFJRCxVQUFVLENBQUMxRSxNQUFNLEtBQUtxRixhQUFhLEVBQUU7Y0FDdkMsTUFBTVQsTUFBTSxHQUFHdFAsRUFBRSxDQUFDZ1AsT0FBTyxDQUFDQSxPQUFPLENBQUNsTCxHQUFHLENBQUNxTCxRQUFRLENBQUM7Y0FDL0MsSUFBSUcsTUFBTSxFQUFFO2dCQUNWQSxNQUFNLENBQUNDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuQkwsaUJBQWlCLEVBQUU7Y0FDckI7WUFDRjtVQUNGO1VBQ0E5TixPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0M2TixpQkFBaUIscUJBQXFCLENBQUM7UUFDekY7O1FBRUE7UUFDQSxNQUFNLElBQUljLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztVQUNyQ3RPLEdBQUcsQ0FBQ3RFLE9BQU8sQ0FBQzZTLE9BQU8sQ0FBRWhQLEdBQUcsSUFBSztZQUMzQixJQUFJQSxHQUFHLEVBQUU7Y0FDUCtPLE1BQU0sQ0FBQy9PLEdBQUcsQ0FBQztZQUNiLENBQUMsTUFBTTtjQUNMOE8sT0FBTyxDQUFDLENBQUM7WUFDWDtVQUNGLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQztRQUVGSyxtQkFBbUIsR0FBRztVQUNwQmhELE9BQU8sRUFBRSxJQUFJO1VBQ2I4QyxnQkFBZ0IsRUFBRTtRQUNwQixDQUFDO01BQ0gsQ0FBQyxDQUFDLE9BQU9JLFlBQVksRUFBRTtRQUNyQkYsbUJBQW1CLEdBQUc7VUFDcEJoRCxPQUFPLEVBQUUsS0FBSztVQUNkOUwsS0FBSyxFQUFFZ1AsWUFBWSxDQUFDalA7UUFDdEIsQ0FBQztNQUNIO0lBQ0Y7SUFFQSxNQUFNa1AsY0FBYyxHQUFHLENBQUMsQ0FBQ0osZUFBZSxJQUFJQSxlQUFlLENBQUMvQyxPQUFPLE1BQzVDLENBQUNnRCxtQkFBbUIsSUFBSUEsbUJBQW1CLENBQUNoRCxPQUFPLENBQUM7SUFFM0U5SixHQUFHLENBQUNwRSxJQUFJLENBQUM7TUFDUGtPLE9BQU8sRUFBRW1ELGNBQWM7TUFDdkJsUCxPQUFPLEVBQUUsMkJBQTJCO01BQ3BDb0YsSUFBSSxFQUFFLGlCQUFpQjtNQUN2QmhLLEdBQUcsRUFBRTBULGVBQWU7TUFDcEIvUyxPQUFPLEVBQUVnVDtJQUNYLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPOU8sS0FBSyxFQUFFO0lBQ2Q1QyxNQUFNLENBQUM0QyxLQUFLLENBQUMsd0JBQXdCLEVBQUVBLEtBQUssQ0FBQztJQUM3Q2dDLEdBQUcsQ0FBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3RDLElBQUksQ0FBQztNQUNuQm9DLEtBQUssRUFBRSxxQ0FBcUM7TUFDNUNGLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0F6QixHQUFHLENBQUNnQyxHQUFHLENBQUMsQ0FBQ0QsR0FBRyxFQUFFNEIsR0FBRyxLQUFLO0VBQ3BCcEMsT0FBTyxDQUFDb0ssSUFBSSxDQUFDLGlEQUFpRCxFQUFFO0lBQUU3SCxNQUFNLEVBQUUvQixHQUFHLENBQUMrQixNQUFNO0lBQUVELEdBQUcsRUFBRTlCLEdBQUcsQ0FBQzhCO0VBQUksQ0FBQyxDQUFDO0VBQ3JHOUUsTUFBTSxDQUFDNE0sSUFBSSxDQUFDLFNBQVM1SixHQUFHLENBQUMrQixNQUFNLElBQUkvQixHQUFHLENBQUM4QixHQUFHLEVBQUUsRUFBRTtJQUM1Q0UsRUFBRSxFQUFFaEMsR0FBRyxDQUFDZ0MsRUFBRTtJQUNWQyxTQUFTLEVBQUVqQyxHQUFHLENBQUNrQyxHQUFHLENBQUMsWUFBWTtFQUNqQyxDQUFDLENBQUM7RUFFRk4sR0FBRyxDQUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDO0lBQ25Cb0MsS0FBSyxFQUFFLG9CQUFvQjtJQUMzQjRDLElBQUksRUFBRXhDLEdBQUcsQ0FBQzhCLEdBQUc7SUFDYkMsTUFBTSxFQUFFL0IsR0FBRyxDQUFDK0IsTUFBTTtJQUNsQnJDLElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBekIsR0FBRyxDQUFDZ0MsR0FBRyxDQUFDMEIsWUFBWSxDQUFDOztBQVVyQjtBQUNBLElBQUkwTCxXQUFXLEdBQUcsSUFBSXlCLEdBQUcsQ0FBQyxDQUFDOztBQUUzQjtBQUNBLElBQUlDLGVBQWUsR0FBRyxJQUFJRCxHQUFHLENBQUMsQ0FBQzs7QUFFL0I7QUFDQSxNQUFNRSxhQUFhLEdBQUcsSUFBSUYsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVqQztBQUNBMVEsRUFBRSxDQUFDNkIsR0FBRyxDQUFDLENBQUN5TixNQUFNLEVBQUU3TCxJQUFJLEtBQUs7RUFDdkI7RUFDQSxJQUFJLENBQUM2TCxNQUFNLENBQUN1QixPQUFPLENBQUNyTixHQUFHLEVBQUU7SUFDdkI4TCxNQUFNLENBQUN1QixPQUFPLENBQUNyTixHQUFHLEdBQUc7TUFDbkIwSixTQUFTLEVBQUVBLENBQUEsS0FBTSxDQUFDLENBQUM7TUFDbkI0RCxTQUFTLEVBQUVBLENBQUEsS0FBTSxDQUFDLENBQUM7TUFDbkJDLFNBQVMsRUFBRUEsQ0FBQSxLQUFNLENBQUMsQ0FBQztNQUNuQkMsR0FBRyxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO01BQ2JDLFdBQVcsRUFBRSxLQUFLO01BQ2xCak0sVUFBVSxFQUFFO0lBQ2QsQ0FBQztFQUNIOztFQUVBO0VBQ0E5QyxpQkFBaUIsQ0FBQ29OLE1BQU0sQ0FBQ3VCLE9BQU8sRUFBRXZCLE1BQU0sQ0FBQ3VCLE9BQU8sQ0FBQ3JOLEdBQUcsRUFBR3JDLEdBQUcsSUFBSztJQUM3RCxJQUFJQSxHQUFHLEVBQUU7TUFDUEMsT0FBTyxDQUFDSSxLQUFLLENBQUMseUNBQXlDLEVBQUVMLEdBQUcsQ0FBQztNQUM3RCxPQUFPc0MsSUFBSSxDQUFDdEMsR0FBRyxDQUFDO0lBQ2xCO0lBQ0FzQyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBekQsRUFBRSxDQUFDNkIsR0FBRyxDQUFDLE9BQU95TixNQUFNLEVBQUU3TCxJQUFJLEtBQUs7RUFDN0IsTUFBTTtJQUFFeU4sU0FBUztJQUFFeEI7RUFBVSxDQUFDLEdBQUdKLE1BQU0sQ0FBQzZCLFNBQVMsQ0FBQ0MsSUFBSTtFQUN0RCxJQUFJOVQsT0FBTyxHQUFHZ1MsTUFBTSxDQUFDdUIsT0FBTyxDQUFDdlQsT0FBTzs7RUFFcEM7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0VBRUE7RUFDQSxJQUFJb1MsU0FBUyxLQUFLLENBQUNwUyxPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUFDd1MsYUFBYSxDQUFDLEVBQUU7SUFDckQ7O0lBRUEsSUFBSTtNQUNGO01BQ0EsTUFBTXVCLGtCQUFrQixHQUFHblAsaUJBQWlCLENBQUNRLEtBQUs7TUFDbEQsSUFBSTJPLGtCQUFrQixJQUFJLE9BQU9BLGtCQUFrQixDQUFDdk4sR0FBRyxLQUFLLFVBQVUsRUFBRTtRQUN0RSxNQUFNd04sV0FBVyxHQUFHLE1BQU0sSUFBSXRCLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztVQUN6RG1CLGtCQUFrQixDQUFDdk4sR0FBRyxDQUFDNEwsU0FBUyxFQUFFLENBQUN2TyxHQUFHLEVBQUVvUSxJQUFJLEtBQUs7WUFDL0MsSUFBSXBRLEdBQUcsRUFBRStPLE1BQU0sQ0FBQy9PLEdBQUcsQ0FBQyxDQUFDLEtBQ2hCOE8sT0FBTyxDQUFDc0IsSUFBSSxDQUFDO1VBQ3BCLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQzs7UUFFRjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQSxJQUFJRCxXQUFXLElBQUlBLFdBQVcsQ0FBQ3hCLGFBQWEsRUFBRTtVQUM1QztVQUNBUixNQUFNLENBQUN1QixPQUFPLENBQUN2VCxPQUFPLEdBQUdnVSxXQUFXO1VBQ3BDaFUsT0FBTyxHQUFHZ1UsV0FBVztVQUNyQmxRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHlDQUF5QyxDQUFDO1FBQ3hELENBQUMsTUFBTTtVQUNMRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4Q0FBOEMsQ0FBQztRQUM3RDtNQUNGO0lBQ0YsQ0FBQyxDQUFDLE9BQU9HLEtBQUssRUFBRTtNQUNkSixPQUFPLENBQUNJLEtBQUssQ0FBQyw4Q0FBOEMsRUFBRUEsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDOUU7RUFDRjtFQUVBSCxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRTtJQUMxQ21RLEdBQUcsRUFBRWxDLE1BQU0sQ0FBQ3VCLE9BQU8sQ0FBQ25CLFNBQVM7SUFDN0IrQixpQkFBaUIsRUFBRVAsU0FBUyxFQUFFUSxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7SUFDckRDLGdCQUFnQixFQUFFclUsT0FBTyxFQUFFNFQsU0FBUyxFQUFFUSxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7SUFDN0Q3TixTQUFTLEVBQUV5TCxNQUFNLENBQUN1QixPQUFPLENBQUN2VCxPQUFPLEVBQUV1RyxTQUFTLEVBQUU2TixTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEtBQUs7SUFDdEVFLFNBQVMsRUFBRXRVLE9BQU8sRUFBRXNVLFNBQVM7SUFDN0JDLGdCQUFnQixFQUFFdlUsT0FBTyxFQUFFdVU7RUFDN0IsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsSUFBSSxDQUFDdlUsT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQ3dTLGFBQWEsSUFBSSxDQUFDeFMsT0FBTyxDQUFDb04sTUFBTSxFQUFFO0lBQ3pEdEosT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0VBQWdFLENBQUM7SUFDN0VELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFCQUFxQixFQUFFO01BQ2pDcU8sU0FBUyxFQUFFSixNQUFNLENBQUN1QixPQUFPLENBQUNuQixTQUFTO01BQ25DcFMsT0FBTyxFQUFFLENBQUMsQ0FBQ0EsT0FBTztNQUNsQndTLGFBQWEsRUFBRXhTLE9BQU8sRUFBRXdTLGFBQWE7TUFDckNwRixNQUFNLEVBQUVwTixPQUFPLEVBQUVvTjtJQUNuQixDQUFDLENBQUM7SUFDRixPQUFPakgsSUFBSSxDQUFDLElBQUlxTyxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztFQUMzRDs7RUFFQTtFQUNBLElBQUksQ0FBQ1osU0FBUyxJQUFJLENBQUM1VCxPQUFPLENBQUM0VCxTQUFTLElBQUlBLFNBQVMsS0FBSzVULE9BQU8sQ0FBQzRULFNBQVMsRUFBRTtJQUN2RTlQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdFQUFnRSxDQUFDO0lBQzdFRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsRUFBRTtNQUM5QzBRLFFBQVEsRUFBRWIsU0FBUyxFQUFFUSxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7TUFDNUNNLFFBQVEsRUFBRTFVLE9BQU8sQ0FBQzRULFNBQVMsRUFBRVEsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLO01BQ3BETyxLQUFLLEVBQUVmLFNBQVMsS0FBSzVULE9BQU8sQ0FBQzRUO0lBQy9CLENBQUMsQ0FBQztJQUNGLE9BQU96TixJQUFJLENBQUMsSUFBSXFPLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0VBQ2xEO0VBRUExUSxPQUFPLENBQUNDLEdBQUcsQ0FBQyw4Q0FBOEMsQ0FBQztFQUUzRCxJQUFJO0lBQ0Y7SUFDQSxNQUFNNEQsSUFBSSxHQUFHLE1BQU14RyxJQUFJLENBQUNvTSxRQUFRLENBQUN2TixPQUFPLENBQUNvTixNQUFNLENBQUM7SUFDaEQsSUFBSSxDQUFDekYsSUFBSSxFQUFFO01BQ1Q3RCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzREFBc0QsQ0FBQztNQUNuRSxPQUFPb0MsSUFBSSxDQUFDLElBQUlxTyxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUNyRDs7SUFFQTtJQUNBLE1BQU1wSCxNQUFNLEdBQUdwTixPQUFPLENBQUNvTixNQUFNO0lBQzdCLE1BQU13SCxlQUFlLEdBQUd2QixlQUFlLENBQUM3TSxHQUFHLENBQUM0RyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ3hELE1BQU15SCxrQkFBa0IsR0FBR0QsZUFBZSxHQUFHLENBQUM7SUFDOUN2QixlQUFlLENBQUN5QixHQUFHLENBQUMxSCxNQUFNLEVBQUV5SCxrQkFBa0IsQ0FBQzs7SUFFL0M7SUFDQSxJQUFJbE4sSUFBSSxDQUFDb04sUUFBUSxDQUFDLENBQUMsRUFBRTtNQUNuQmpSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdEQUFnRCxFQUFFO1FBQzVEcUosTUFBTSxFQUFFQSxNQUFNO1FBQ2R4RixRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QmlHLFNBQVMsRUFBRWxHLElBQUksQ0FBQ2tHLFNBQVM7UUFDekJDLFVBQVUsRUFBRW5HLElBQUksQ0FBQ21HO01BQ25CLENBQUMsQ0FBQztNQUNGa0UsTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUNwQjFILE1BQU0sRUFBRTNGLElBQUksQ0FBQ2tHLFNBQVMsSUFBSSxzQ0FBc0M7UUFDaEVZLE9BQU8sRUFBRTlHLElBQUksQ0FBQ21HO01BQ2hCLENBQUMsQ0FBQztNQUNGLE9BQU8zSCxJQUFJLENBQUMsSUFBSXFPLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzFDOztJQUVBO0lBQ0EsTUFBTWxGLE9BQU8sR0FBRzNILElBQUksQ0FBQzJILE9BQU8sQ0FBQyxDQUFDO0lBQzlCeEwsT0FBTyxDQUFDQyxHQUFHLENBQUMsOEJBQThCLEVBQUU7TUFBRTZELFFBQVEsRUFBRUQsSUFBSSxDQUFDQyxRQUFRO01BQUUwSCxPQUFPO01BQUVELFdBQVcsRUFBRTFILElBQUksQ0FBQzBIO0lBQVksQ0FBQyxDQUFDOztJQUVoSDtJQUNBLE1BQU00RixZQUFZLEdBQUcsTUFBTTlULElBQUksQ0FBQytULGdCQUFnQixDQUM5QztNQUFFNUksR0FBRyxFQUFFYztJQUFPLENBQUMsRUFDZjtNQUNFK0gsSUFBSSxFQUFFO1FBQ0ovUSxNQUFNLEVBQUV5USxrQkFBa0IsR0FBRyxDQUFDLEdBQUcsUUFBUSxHQUFHLFNBQVM7UUFDckQvSyxVQUFVLEVBQUUsSUFBSXhDLElBQUksQ0FBQztNQUN2QjtJQUNGLENBQUMsRUFDRDtNQUNFOE4sR0FBRyxFQUFFLElBQUk7TUFDVEMsYUFBYSxFQUFFO0lBQ2pCLENBQ0YsQ0FBQztJQUVELElBQUlKLFlBQVksRUFBRTtNQUNoQm5SLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QjRELElBQUksQ0FBQ0MsUUFBUSx1Q0FBdUNpTixrQkFBa0IsR0FBRyxDQUFDO01BQzlHdlQsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLCtDQUErQyxFQUFFO1FBQzNEMkYsTUFBTSxFQUFFQSxNQUFNO1FBQ2R4RixRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtRQUN2QjBOLFdBQVcsRUFBRVQsa0JBQWtCO1FBQy9CaEQsUUFBUSxFQUFFRyxNQUFNLENBQUM1SyxFQUFFO1FBQ25CekYsU0FBUyxFQUFFLElBQUkyRixJQUFJLENBQUM7TUFDdEIsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQUssSUFBSSxDQUFDdkQsTUFBTSxHQUFHNlEsWUFBWSxHQUFHQSxZQUFZLENBQUM3USxNQUFNLEdBQUcsUUFBUTtJQUMzRHVELElBQUksQ0FBQ21DLFVBQVUsR0FBR21MLFlBQVksR0FBR0EsWUFBWSxDQUFDbkwsVUFBVSxHQUFHLElBQUl4QyxJQUFJLENBQUMsQ0FBQzs7SUFFckU7SUFDQTBLLE1BQU0sQ0FBQzVFLE1BQU0sR0FBR3BOLE9BQU8sQ0FBQ29OLE1BQU07SUFDOUI0RSxNQUFNLENBQUNwSyxRQUFRLEdBQUc1SCxPQUFPLENBQUM0SCxRQUFRO0lBQ2xDb0ssTUFBTSxDQUFDdEksSUFBSSxHQUFHMUosT0FBTyxDQUFDMEosSUFBSSxJQUFJLFFBQVE7SUFDdEM1RixPQUFPLENBQUNDLEdBQUcsQ0FBQyx3Q0FBd0NpTyxNQUFNLENBQUNwSyxRQUFRLGFBQWFvSyxNQUFNLENBQUM1RSxNQUFNLEdBQUcsQ0FBQztJQUNqR3RKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0lBQy9DLE9BQU9vQyxJQUFJLENBQUMsQ0FBQztFQUVmLENBQUMsQ0FBQyxPQUFPakMsS0FBSyxFQUFFO0lBQ2RKLE9BQU8sQ0FBQ0ksS0FBSyxDQUFDLGdDQUFnQyxFQUFFQSxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUM5RDNDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyx1QkFBdUJBLEtBQUssQ0FBQ0QsT0FBTyxFQUFFLEVBQUU7TUFDbkQ0TixRQUFRLEVBQUVHLE1BQU0sQ0FBQzVLLEVBQUU7TUFDbkJnTCxTQUFTLEVBQUVwUyxPQUFPLEVBQUVvSCxFQUFFO01BQ3RCZCxFQUFFLEVBQUUwTCxNQUFNLENBQUM2QixTQUFTLENBQUMwQjtJQUN2QixDQUFDLENBQUM7SUFDRixPQUFPcFAsSUFBSSxDQUFDLElBQUlxTyxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztFQUN4RDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxTQUFTZ0IsMEJBQTBCQSxDQUFBLEVBQUc7RUFDcEMsTUFBTWpPLEdBQUcsR0FBR0QsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztFQUN0QixNQUFNa08sT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDOztFQUV2QixLQUFLLE1BQU0sQ0FBQzVELFFBQVEsRUFBRWxLLElBQUksQ0FBQyxJQUFJZ0ssV0FBVyxDQUFDSSxPQUFPLENBQUMsQ0FBQyxFQUFFO0lBQ3BELElBQUl4SyxHQUFHLEdBQUdJLElBQUksQ0FBQytOLGFBQWEsR0FBR0QsT0FBTyxFQUFFO01BQ3RDM1IsT0FBTyxDQUFDQyxHQUFHLENBQUMseUNBQXlDNEQsSUFBSSxDQUFDQyxRQUFRLEVBQUUsQ0FBQzs7TUFFckU7TUFDQSxNQUFNb0ssTUFBTSxHQUFHdFAsRUFBRSxDQUFDZ1AsT0FBTyxDQUFDQSxPQUFPLENBQUNsTCxHQUFHLENBQUNxTCxRQUFRLENBQUM7TUFDL0MsSUFBSUcsTUFBTSxFQUFFO1FBQ1ZBLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLElBQUksQ0FBQztNQUN6Qjs7TUFFQTtNQUNBLE1BQU0wRCxlQUFlLEdBQUcsQ0FBQ3RDLGVBQWUsQ0FBQzdNLEdBQUcsQ0FBQ21CLElBQUksQ0FBQ3lGLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ25FaUcsZUFBZSxDQUFDeUIsR0FBRyxDQUFDbk4sSUFBSSxDQUFDeUYsTUFBTSxFQUFFWCxJQUFJLENBQUNLLEdBQUcsQ0FBQyxDQUFDLEVBQUU2SSxlQUFlLENBQUMsQ0FBQzs7TUFFOUQ7TUFDQSxJQUFJQSxlQUFlLElBQUksQ0FBQyxFQUFFO1FBQ3hCeFUsSUFBSSxDQUFDK1EsaUJBQWlCLENBQUN2SyxJQUFJLENBQUN5RixNQUFNLEVBQUU7VUFDbENoSixNQUFNLEVBQUUsU0FBUztVQUNqQjBGLFVBQVUsRUFBRSxJQUFJeEMsSUFBSSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDc08sS0FBSyxDQUFDL1IsR0FBRyxJQUFJdkMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLG1DQUFtQyxFQUFFTCxHQUFHLENBQUMsQ0FBQztRQUV2RUMsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVzRELElBQUksQ0FBQ0MsUUFBUSwwQ0FBMEMsQ0FBQztRQUMvRXRHLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyxtREFBbUQsRUFBRTtVQUMvRDJGLE1BQU0sRUFBRXpGLElBQUksQ0FBQ3lGLE1BQU07VUFDbkJ4RixRQUFRLEVBQUVELElBQUksQ0FBQ0MsUUFBUTtVQUN2QmlLLFFBQVEsRUFBRUE7UUFDWixDQUFDLENBQUM7TUFDSjtNQUVBRixXQUFXLENBQUNrRSxNQUFNLENBQUNoRSxRQUFRLENBQUM7SUFDOUI7RUFDRjtBQUNGOztBQUVBO0FBQ0EsSUFBSWpQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssTUFBTSxFQUFFO0VBQ25DZ1QsV0FBVyxDQUFDTiwwQkFBMEIsRUFBRSxLQUFLLENBQUM7QUFDaEQ7QUFFQTlTLEVBQUUsQ0FBQ2tCLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBT29PLE1BQU0sSUFBSztFQUNwQ2xPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0VBQy9DRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxXQUFXaU8sTUFBTSxDQUFDcEssUUFBUSxZQUFZLENBQUM7O0VBRW5EO0VBQ0ErSixXQUFXLENBQUNtRCxHQUFHLENBQUM5QyxNQUFNLENBQUM1SyxFQUFFLEVBQUU7SUFDekJnRyxNQUFNLEVBQUU0RSxNQUFNLENBQUM1RSxNQUFNO0lBQ3JCeEYsUUFBUSxFQUFFb0ssTUFBTSxDQUFDcEssUUFBUTtJQUN6QjhCLElBQUksRUFBRXNJLE1BQU0sQ0FBQ3RJLElBQUk7SUFDakJxTSxJQUFJLEVBQUUsSUFBSTtJQUNWTCxhQUFhLEVBQUVwTyxJQUFJLENBQUNDLEdBQUcsQ0FBQztFQUMxQixDQUFDLENBQUM7O0VBRUY7RUFDQXpELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlDQUFpQzROLFdBQVcsQ0FBQ3FFLElBQUksdUJBQXVCaEUsTUFBTSxDQUFDcEssUUFBUSxFQUFFLENBQUM7O0VBRXRHO0VBQ0FvSyxNQUFNLENBQUNwTyxFQUFFLENBQUMsV0FBVyxFQUFFLE1BQU07SUFDM0IsTUFBTStELElBQUksR0FBR2dLLFdBQVcsQ0FBQ25MLEdBQUcsQ0FBQ3dMLE1BQU0sQ0FBQzVLLEVBQUUsQ0FBQztJQUN2QyxJQUFJTyxJQUFJLEVBQUU7TUFDUixNQUFNSixHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7TUFDdEJJLElBQUksQ0FBQytOLGFBQWEsR0FBR25PLEdBQUc7TUFDeEJ6RCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQ0FBbUNpTyxNQUFNLENBQUNwSyxRQUFRLE9BQU8sSUFBSU4sSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQzBJLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNyRyxDQUFDLE1BQU07TUFDTDNPLE1BQU0sQ0FBQzRNLElBQUksQ0FBQywyQ0FBMkM4RCxNQUFNLENBQUM1SyxFQUFFLEVBQUUsQ0FBQztJQUNyRTtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBLE1BQU02TyxlQUFlLEdBQUdBLENBQUEsS0FBTTtJQUM1QixNQUFNdE8sSUFBSSxHQUFHZ0ssV0FBVyxDQUFDbkwsR0FBRyxDQUFDd0wsTUFBTSxDQUFDNUssRUFBRSxDQUFDO0lBQ3ZDLElBQUlPLElBQUksRUFBRTtNQUNSQSxJQUFJLENBQUMrTixhQUFhLEdBQUdwTyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDO0VBQ0YsQ0FBQzs7RUFFRDtFQUNBLE1BQU0yTyxpQkFBaUIsR0FBR0osV0FBVyxDQUFDLE1BQU07SUFDMUMsSUFBSTlELE1BQU0sQ0FBQ21FLFNBQVMsRUFBRTtNQUNwQm5FLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNsQztFQUNGLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDOztFQUVYO0VBQ0FoRCxNQUFNLENBQUNwTyxFQUFFLENBQUMsWUFBWSxFQUFFLE1BQU07SUFDNUJ3UyxhQUFhLENBQUNGLGlCQUFpQixDQUFDO0lBQ2hDO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsTUFBTUcsc0JBQXNCLEdBQUcsTUFBQUEsQ0FBT0MsU0FBUyxFQUFFQyxPQUFPLEdBQUcsQ0FBQyxLQUFLO0lBQy9ELEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxJQUFJRCxPQUFPLEVBQUVDLENBQUMsRUFBRSxFQUFFO01BQ2pDLElBQUk7UUFDRixPQUFPLE1BQU1GLFNBQVMsQ0FBQyxDQUFDO01BQzFCLENBQUMsQ0FBQyxPQUFPcFMsS0FBSyxFQUFFO1FBQ2QsSUFBSXNTLENBQUMsS0FBS0QsT0FBTyxFQUFFLE1BQU1yUyxLQUFLO1FBQzlCNUMsTUFBTSxDQUFDNE0sSUFBSSxDQUFDLG9DQUFvQ3NJLENBQUMsR0FBRyxDQUFDLElBQUlELE9BQU8sR0FBRyxFQUFFclMsS0FBSyxDQUFDRCxPQUFPLENBQUM7UUFDbkYsTUFBTSxJQUFJeU8sT0FBTyxDQUFDQyxPQUFPLElBQUk4RCxVQUFVLENBQUM5RCxPQUFPLEVBQUUsR0FBRyxJQUFJNkQsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ3BFO0lBQ0Y7RUFDRixDQUFDO0VBRUR4RSxNQUFNLENBQUNwTyxFQUFFLENBQUMsV0FBVyxFQUFFLE1BQU9xUSxJQUFJLElBQUs7SUFDckNnQyxlQUFlLENBQUMsQ0FBQztJQUNqQixNQUFNO01BQUVGO0lBQUssQ0FBQyxHQUFHOUIsSUFBSTtJQUNyQixJQUFJLENBQUM4QixJQUFJLEVBQUU7TUFDVHpVLE1BQU0sQ0FBQzRNLElBQUksQ0FBQyxxQ0FBcUMsRUFBRTtRQUNqRGQsTUFBTSxFQUFFNEUsTUFBTSxDQUFDNUUsTUFBTTtRQUNyQnhGLFFBQVEsRUFBRW9LLE1BQU0sQ0FBQ3BLO01BQ25CLENBQUMsQ0FBQztNQUNGb0ssTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQi9RLE9BQU8sRUFBRSx1QkFBdUI7UUFDaENELElBQUksRUFBRSxjQUFjO1FBQ3BCckMsU0FBUyxFQUFFLElBQUkyRixJQUFJLENBQUMsQ0FBQyxDQUFDMkksV0FBVyxDQUFDO01BQ3BDLENBQUMsQ0FBQztNQUNGO0lBQ0Y7SUFFQSxJQUFJLE9BQU84RixJQUFJLEtBQUssUUFBUSxJQUFJQSxJQUFJLENBQUNoSixJQUFJLENBQUMsQ0FBQyxDQUFDNEMsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN4RHJPLE1BQU0sQ0FBQzRNLElBQUksQ0FBQyx1Q0FBdUMsRUFBRTtRQUNuRGQsTUFBTSxFQUFFNEUsTUFBTSxDQUFDNUUsTUFBTTtRQUNyQnhGLFFBQVEsRUFBRW9LLE1BQU0sQ0FBQ3BLLFFBQVE7UUFDekJtTztNQUNGLENBQUMsQ0FBQztNQUNGL0QsTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQi9RLE9BQU8sRUFBRSwwQkFBMEI7UUFDbkNELElBQUksRUFBRSxxQkFBcUI7UUFDM0JyQyxTQUFTLEVBQUUsSUFBSTJGLElBQUksQ0FBQyxDQUFDLENBQUMySSxXQUFXLENBQUM7TUFDcEMsQ0FBQyxDQUFDO01BQ0Y7SUFDRjtJQUVBLElBQUk7TUFDRixNQUFNb0csc0JBQXNCLENBQUMsWUFBWTtRQUN2QztRQUNBLE1BQU03RSxPQUFPLEdBQUcsTUFBTW5RLE9BQU8sQ0FBQ3FWLE9BQU8sQ0FBQztVQUFFdFAsRUFBRSxFQUFFMk87UUFBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDdkUsT0FBTyxFQUFFO1VBQ1psUSxNQUFNLENBQUM0TSxJQUFJLENBQUMscUNBQXFDLEVBQUU7WUFDakRkLE1BQU0sRUFBRTRFLE1BQU0sQ0FBQzVFLE1BQU07WUFDckJ4RixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSyxRQUFRO1lBQ3pCbU87VUFDRixDQUFDLENBQUM7VUFDRi9ELE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDbkIvUSxPQUFPLEVBQUUsWUFBWThSLElBQUksYUFBYTtZQUN0Qy9SLElBQUksRUFBRSxtQkFBbUI7WUFDekIrUixJQUFJO1lBQ0pwVSxTQUFTLEVBQUUsSUFBSTJGLElBQUksQ0FBQyxDQUFDLENBQUMySSxXQUFXLENBQUM7VUFDcEMsQ0FBQyxDQUFDO1VBQ0YsTUFBTSxJQUFJdUUsS0FBSyxDQUFDLG1CQUFtQixDQUFDO1FBQ3RDOztRQUVBO1FBQ0EsSUFBSXhDLE1BQU0sQ0FBQytELElBQUksRUFBRTtVQUNmL0QsTUFBTSxDQUFDMkUsS0FBSyxDQUFDM0UsTUFBTSxDQUFDK0QsSUFBSSxDQUFDO1VBQ3pCcEUsV0FBVyxDQUFDbUQsR0FBRyxDQUFDOUMsTUFBTSxDQUFDNUssRUFBRSxFQUFFO1lBQUUsR0FBR3VLLFdBQVcsQ0FBQ25MLEdBQUcsQ0FBQ3dMLE1BQU0sQ0FBQzVLLEVBQUUsQ0FBQztZQUFFMk8sSUFBSSxFQUFFO1VBQUssQ0FBQyxDQUFDOztVQUV6RTtVQUNBLE1BQU1hLGlCQUFpQixHQUFHQyxLQUFLLENBQUNDLElBQUksQ0FBQ25GLFdBQVcsQ0FBQ2pMLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FDdkRxUSxNQUFNLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDakIsSUFBSSxLQUFLL0QsTUFBTSxDQUFDK0QsSUFBSSxDQUFDLENBQ25DcFAsR0FBRyxDQUFDcVEsQ0FBQyxLQUFLO1lBQUVwUCxRQUFRLEVBQUVvUCxDQUFDLENBQUNwUCxRQUFRO1lBQUU4QixJQUFJLEVBQUVzTixDQUFDLENBQUN0TjtVQUFLLENBQUMsQ0FBQyxDQUFDO1VBQ3JEaEgsRUFBRSxDQUFDdVUsRUFBRSxDQUFDakYsTUFBTSxDQUFDK0QsSUFBSSxDQUFDLENBQUNmLElBQUksQ0FBQyxjQUFjLEVBQUU0QixpQkFBaUIsQ0FBQztRQUM1RDtRQUVBNUUsTUFBTSxDQUFDK0QsSUFBSSxHQUFHQSxJQUFJO1FBQ2xCL0QsTUFBTSxDQUFDa0YsSUFBSSxDQUFDbEYsTUFBTSxDQUFDK0QsSUFBSSxDQUFDOztRQUV4QjtRQUNBcEUsV0FBVyxDQUFDbUQsR0FBRyxDQUFDOUMsTUFBTSxDQUFDNUssRUFBRSxFQUFFO1VBQ3pCLEdBQUd1SyxXQUFXLENBQUNuTCxHQUFHLENBQUN3TCxNQUFNLENBQUM1SyxFQUFFLENBQUM7VUFDN0IyTyxJQUFJLEVBQUUvRCxNQUFNLENBQUMrRDtRQUNmLENBQUMsQ0FBQztRQUVGelUsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLFFBQVF1SyxNQUFNLENBQUNwSyxRQUFRLGdCQUFnQm9LLE1BQU0sQ0FBQytELElBQUksRUFBRSxDQUFDOztRQUVqRTtRQUNBLE1BQU1vQixXQUFXLEdBQUcsSUFBSS9WLE9BQU8sQ0FBQztVQUM5QmdXLE1BQU0sRUFBRSxRQUFRO1VBQ2hCNUYsT0FBTyxFQUFFUSxNQUFNLENBQUMrRCxJQUFJO1VBQ3BCc0IsSUFBSSxFQUFFLEdBQUdyRixNQUFNLENBQUNwSyxRQUFRLHNCQUFzQjtVQUM5Q3lCLElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGLE1BQU04TixXQUFXLENBQUNoSixJQUFJLENBQUMsQ0FBQztRQUV4QnpMLEVBQUUsQ0FBQ3VVLEVBQUUsQ0FBQ2pGLE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsU0FBUyxFQUFFO1VBQ2pDb0MsTUFBTSxFQUFFRCxXQUFXLENBQUNDLE1BQU07VUFDMUI1RixPQUFPLEVBQUUyRixXQUFXLENBQUMzRixPQUFPO1VBQzVCNkYsSUFBSSxFQUFFRixXQUFXLENBQUNFLElBQUk7VUFDdEJoTyxJQUFJLEVBQUU4TixXQUFXLENBQUM5TixJQUFJO1VBQ3RCMUgsU0FBUyxFQUFFd1YsV0FBVyxDQUFDeFY7UUFDekIsQ0FBQyxDQUFDOztRQUVGO1FBQ0EsTUFBTTJWLFNBQVMsR0FBR1QsS0FBSyxDQUFDQyxJQUFJLENBQUNuRixXQUFXLENBQUNqTCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQy9DcVEsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2pCLElBQUksS0FBSy9ELE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUNuQ3BQLEdBQUcsQ0FBQ3FRLENBQUMsS0FBSztVQUFFcFAsUUFBUSxFQUFFb1AsQ0FBQyxDQUFDcFAsUUFBUTtVQUFFOEIsSUFBSSxFQUFFc04sQ0FBQyxDQUFDdE47UUFBSyxDQUFDLENBQUMsQ0FBQztRQUNyRGhILEVBQUUsQ0FBQ3VVLEVBQUUsQ0FBQ2pGLE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsY0FBYyxFQUFFc0MsU0FBUyxDQUFDOztRQUVsRDtRQUNBLE1BQU1DLE9BQU8sR0FBRyxNQUFNblcsT0FBTyxDQUFDNEssSUFBSSxDQUFDO1VBQ2pDd0YsT0FBTyxFQUFFUSxNQUFNLENBQUMrRCxJQUFJO1VBQ3BCeUIsR0FBRyxFQUFFLENBQ0g7WUFBRW5PLElBQUksRUFBRTtVQUFTLENBQUMsRUFDbEI7WUFBRUEsSUFBSSxFQUFFO1VBQVMsQ0FBQyxFQUNsQjtZQUFFK04sTUFBTSxFQUFFcEYsTUFBTSxDQUFDcEs7VUFBUyxDQUFDLEVBQzNCO1lBQUU2UCxNQUFNLEVBQUV6RixNQUFNLENBQUNwSztVQUFTLENBQUM7UUFFL0IsQ0FBQyxDQUFDLENBQ0NzRSxJQUFJLENBQUM7VUFBRXZLLFNBQVMsRUFBRSxDQUFDO1FBQUUsQ0FBQyxDQUFDLENBQ3ZCNkMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUNWMEgsSUFBSSxDQUFDO1VBQUV2SyxTQUFTLEVBQUU7UUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDOztRQUUzQnFRLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxTQUFTLEVBQUV1QyxPQUFPLENBQUM1USxHQUFHLENBQUNpRSxHQUFHLEtBQUs7VUFDekN3TSxNQUFNLEVBQUV4TSxHQUFHLENBQUN3TSxNQUFNO1VBQ2xCckIsSUFBSSxFQUFFbkwsR0FBRyxDQUFDNEcsT0FBTztVQUNqQjZGLElBQUksRUFBRXpNLEdBQUcsQ0FBQ3lNLElBQUk7VUFDZGhPLElBQUksRUFBRXVCLEdBQUcsQ0FBQ3ZCLElBQUk7VUFDZG9PLE1BQU0sRUFBRTdNLEdBQUcsQ0FBQzZNLE1BQU07VUFDbEI5VixTQUFTLEVBQUVpSixHQUFHLENBQUNqSjtRQUNqQixDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ04sQ0FBQyxDQUFDO0lBRUosQ0FBQyxDQUFDLE9BQU91QyxLQUFLLEVBQUU7TUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRUEsS0FBSyxDQUFDO01BQ3hEOE4sTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQi9RLE9BQU8sRUFBRSw2Q0FBNkM7UUFDdERELElBQUksRUFBRSxrQkFBa0I7UUFDeEJyQyxTQUFTLEVBQUUsSUFBSTJGLElBQUksQ0FBQyxDQUFDLENBQUMySSxXQUFXLENBQUM7TUFDcEMsQ0FBQyxDQUFDO0lBQ0o7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQStCLE1BQU0sQ0FBQ3BPLEVBQUUsQ0FBQyxhQUFhLEVBQUUsWUFBWTtJQUNuQyxJQUFJLENBQUNvTyxNQUFNLENBQUMrRCxJQUFJLEVBQUU7TUFDaEIvRCxNQUFNLENBQUNnRCxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQztNQUMxQjtJQUNGO0lBRUEsSUFBSTtNQUNGLE1BQU11QyxPQUFPLEdBQUcsTUFBTW5XLE9BQU8sQ0FBQzRLLElBQUksQ0FBQztRQUNqQ3dGLE9BQU8sRUFBRVEsTUFBTSxDQUFDK0QsSUFBSTtRQUNwQnlCLEdBQUcsRUFBRSxDQUNIO1VBQUVuTyxJQUFJLEVBQUU7UUFBUyxDQUFDLEVBQ2xCO1VBQUVBLElBQUksRUFBRTtRQUFTLENBQUMsRUFDbEI7VUFBRStOLE1BQU0sRUFBRXBGLE1BQU0sQ0FBQ3BLO1FBQVMsQ0FBQyxFQUMzQjtVQUFFNlAsTUFBTSxFQUFFekYsTUFBTSxDQUFDcEs7UUFBUyxDQUFDO01BRS9CLENBQUMsQ0FBQyxDQUNDc0UsSUFBSSxDQUFDO1FBQUV2SyxTQUFTLEVBQUUsQ0FBQztNQUFFLENBQUMsQ0FBQyxDQUN2QjZDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FDVjBILElBQUksQ0FBQztRQUFFdkssU0FBUyxFQUFFO01BQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7TUFFM0JxUSxNQUFNLENBQUNnRCxJQUFJLENBQUMsU0FBUyxFQUFFdUMsT0FBTyxDQUFDNVEsR0FBRyxDQUFDaUUsR0FBRyxLQUFLO1FBQ3pDd00sTUFBTSxFQUFFeE0sR0FBRyxDQUFDd00sTUFBTTtRQUNsQnJCLElBQUksRUFBRW5MLEdBQUcsQ0FBQzRHLE9BQU87UUFBRTtRQUNuQjZGLElBQUksRUFBRXpNLEdBQUcsQ0FBQ3lNLElBQUk7UUFDZGhPLElBQUksRUFBRXVCLEdBQUcsQ0FBQ3ZCLElBQUk7UUFDZG9PLE1BQU0sRUFBRTdNLEdBQUcsQ0FBQzZNLE1BQU07UUFDbEI5VixTQUFTLEVBQUVpSixHQUFHLENBQUNqSjtNQUNqQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDLE9BQU91QyxLQUFLLEVBQUU7TUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO01BQzdDOE4sTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUFFL1EsT0FBTyxFQUFFO01BQWlDLENBQUMsQ0FBQztJQUNyRTtFQUNGLENBQUMsQ0FBQzs7RUFFRjtFQUNBK04sTUFBTSxDQUFDcE8sRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFPcVEsSUFBSSxJQUFLO0lBQ25DZ0MsZUFBZSxDQUFDLENBQUM7SUFDakIsSUFBSSxDQUFDakUsTUFBTSxDQUFDK0QsSUFBSSxJQUFJLENBQUM5QixJQUFJLENBQUNvRCxJQUFJLEVBQUV0SyxJQUFJLENBQUMsQ0FBQyxFQUFFOztJQUV4QztJQUNBLE1BQU0ySyxXQUFXLEdBQUcsTUFBTXZXLElBQUksQ0FBQ29NLFFBQVEsQ0FBQ3lFLE1BQU0sQ0FBQzVFLE1BQU0sQ0FBQztJQUN0RCxJQUFJc0ssV0FBVyxJQUFJQSxXQUFXLENBQUNwSSxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3hDMEMsTUFBTSxDQUFDZ0QsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNuQi9RLE9BQU8sRUFBRSx3Q0FBd0M7UUFDakRELElBQUksRUFBRSxZQUFZO1FBQ2xCcUwsV0FBVyxFQUFFcUksV0FBVyxDQUFDckk7TUFDM0IsQ0FBQyxDQUFDO01BQ0Y7SUFDRjtJQUVBLElBQUk7TUFDRixNQUFNcEwsT0FBTyxHQUFHLElBQUk3QyxPQUFPLENBQUM7UUFDMUJnVyxNQUFNLEVBQUVwRixNQUFNLENBQUNwSyxRQUFRO1FBQ3ZCNEosT0FBTyxFQUFFUSxNQUFNLENBQUMrRCxJQUFJO1FBQ3BCc0IsSUFBSSxFQUFFcEQsSUFBSSxDQUFDb0QsSUFBSSxDQUFDdEssSUFBSSxDQUFDLENBQUM7UUFDdEIxRCxJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7TUFFRixNQUFNcEYsT0FBTyxDQUFDa0ssSUFBSSxDQUFDLENBQUM7TUFFcEIsTUFBTXdKLFdBQVcsR0FBRztRQUNsQlAsTUFBTSxFQUFFblQsT0FBTyxDQUFDbVQsTUFBTTtRQUN0QnJCLElBQUksRUFBRTlSLE9BQU8sQ0FBQ3VOLE9BQU87UUFBRTtRQUN2QjZGLElBQUksRUFBRXBULE9BQU8sQ0FBQ29ULElBQUk7UUFDbEIxVixTQUFTLEVBQUVzQyxPQUFPLENBQUN0QyxTQUFTO1FBQzVCeUMsTUFBTSxFQUFFLFdBQVc7UUFDbkJpRixJQUFJLEVBQUVwRixPQUFPLENBQUNvRjtNQUNoQixDQUFDO01BRUQzRyxFQUFFLENBQUN1VSxFQUFFLENBQUNqRixNQUFNLENBQUMrRCxJQUFJLENBQUMsQ0FBQ2YsSUFBSSxDQUFDLFNBQVMsRUFBRTJDLFdBQVcsQ0FBQztNQUMvQ3JXLE1BQU0sQ0FBQ3NXLEtBQUssQ0FBQyxzQkFBc0I1RixNQUFNLENBQUNwSyxRQUFRLE9BQU9vSyxNQUFNLENBQUMrRCxJQUFJLEVBQUUsQ0FBQztJQUN6RSxDQUFDLENBQUMsT0FBTzdSLEtBQUssRUFBRTtNQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7TUFDNUM4TixNQUFNLENBQUNnRCxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQUUvUSxPQUFPLEVBQUU7TUFBeUIsQ0FBQyxDQUFDO0lBQzdEO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0ErTixNQUFNLENBQUNwTyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsTUFBT3FRLElBQUksSUFBSztJQUMzQ2dDLGVBQWUsQ0FBQyxDQUFDO0lBQ2pCLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQytELElBQUksSUFBSSxDQUFDOUIsSUFBSSxDQUFDZ0QsRUFBRSxJQUFJLENBQUNoRCxJQUFJLENBQUNvRCxJQUFJLEVBQUV0SyxJQUFJLENBQUMsQ0FBQyxFQUFFO0lBRXBELE1BQU04SyxXQUFXLEdBQUc1RCxJQUFJLENBQUNvRCxJQUFJLENBQUN0SyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNK0ssY0FBYyxHQUFHN0QsSUFBSSxDQUFDZ0QsRUFBRSxDQUFDbEssSUFBSSxDQUFDLENBQUM7SUFFckMsSUFBSTtNQUNGekwsTUFBTSxDQUFDc1csS0FBSyxDQUFDLGdDQUFnQzVGLE1BQU0sQ0FBQ3BLLFFBQVEsT0FBT2tRLGNBQWMsRUFBRSxFQUFFO1FBQ25GQyxVQUFVLEVBQUUvRixNQUFNLENBQUMrRCxJQUFJO1FBQ3ZCaUMsY0FBYyxFQUFFaEcsTUFBTSxDQUFDNUssRUFBRTtRQUN6QmdHLE1BQU0sRUFBRTRFLE1BQU0sQ0FBQzVFO01BQ2pCLENBQUMsQ0FBQzs7TUFFRjtNQUNBLElBQUkwSyxjQUFjLENBQUNuSSxNQUFNLEtBQUssQ0FBQyxJQUFJbUksY0FBYyxDQUFDbkksTUFBTSxHQUFHLEVBQUUsRUFBRTtRQUM3RHFDLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxPQUFPLEVBQUU7VUFDbkIvUSxPQUFPLEVBQUUsOEJBQThCO1VBQ3ZDRCxJQUFJLEVBQUU7UUFDUixDQUFDLENBQUM7UUFDRjtNQUNGOztNQUVBO01BQ0EsSUFBSThULGNBQWMsS0FBSzlGLE1BQU0sQ0FBQ3BLLFFBQVEsRUFBRTtRQUN0Q29LLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxPQUFPLEVBQUU7VUFDbkIvUSxPQUFPLEVBQUUseUNBQXlDO1VBQ2xERCxJQUFJLEVBQUU7UUFDUixDQUFDLENBQUM7UUFDRjtNQUNGOztNQUVBO01BQ0EsTUFBTWlVLFVBQVUsR0FBR3BCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDbkYsV0FBVyxDQUFDakwsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDc0YsSUFBSSxDQUN0RGdMLENBQUMsSUFBSUEsQ0FBQyxDQUFDcFAsUUFBUSxLQUFLa1EsY0FBYyxJQUFJZCxDQUFDLENBQUNqQixJQUFJLEtBQUsvRCxNQUFNLENBQUMrRCxJQUMxRCxDQUFDO01BRUR6VSxNQUFNLENBQUNzVyxLQUFLLENBQUMsNENBQTRDRSxjQUFjLEVBQUUsRUFBRTtRQUN6RUksV0FBVyxFQUFFLENBQUMsQ0FBQ0QsVUFBVTtRQUN6QkUsVUFBVSxFQUFFRixVQUFVLEVBQUVsQyxJQUFJO1FBQzVCZ0MsVUFBVSxFQUFFL0YsTUFBTSxDQUFDK0QsSUFBSTtRQUN2QnFDLGlCQUFpQixFQUFFdkIsS0FBSyxDQUFDQyxJQUFJLENBQUNuRixXQUFXLENBQUNqTCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQ2hEcVEsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2pCLElBQUksS0FBSy9ELE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUNuQ3BQLEdBQUcsQ0FBQ3FRLENBQUMsS0FBSztVQUFFcFAsUUFBUSxFQUFFb1AsQ0FBQyxDQUFDcFAsUUFBUTtVQUFFbU8sSUFBSSxFQUFFaUIsQ0FBQyxDQUFDakI7UUFBSyxDQUFDLENBQUM7TUFDdEQsQ0FBQyxDQUFDO01BRUYsSUFBSSxDQUFDa0MsVUFBVSxFQUFFO1FBQ2Y7UUFDQSxNQUFNSSx1QkFBdUIsR0FBR3hCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDbkYsV0FBVyxDQUFDakwsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUM3RHFRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUsvRCxNQUFNLENBQUMrRCxJQUFJLENBQUMsQ0FDbkNwUCxHQUFHLENBQUNxUSxDQUFDLElBQUlBLENBQUMsQ0FBQ3BQLFFBQVEsQ0FBQztRQUV2Qm9LLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxPQUFPLEVBQUU7VUFDbkIvUSxPQUFPLEVBQUUsU0FBUzZULGNBQWMsd0RBQXdETyx1QkFBdUIsQ0FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLEVBQUU7VUFDdElsVCxJQUFJLEVBQUUseUJBQXlCO1VBQy9CeVQsTUFBTSxFQUFFSyxjQUFjO1VBQ3RCUSxjQUFjLEVBQUVELHVCQUF1QjtVQUN2Q04sVUFBVSxFQUFFL0YsTUFBTSxDQUFDK0Q7UUFDckIsQ0FBQyxDQUFDO1FBQ0Y7TUFDRjs7TUFFQTtNQUNBLE1BQU05UixPQUFPLEdBQUcsSUFBSTdDLE9BQU8sQ0FBQztRQUMxQmdXLE1BQU0sRUFBRXBGLE1BQU0sQ0FBQ3BLLFFBQVE7UUFDdkI0SixPQUFPLEVBQUVRLE1BQU0sQ0FBQytELElBQUk7UUFDcEJzQixJQUFJLEVBQUVRLFdBQVc7UUFDakJ4TyxJQUFJLEVBQUUsU0FBUztRQUNmb08sTUFBTSxFQUFFSztNQUNWLENBQUMsQ0FBQztNQUNGLE1BQU03VCxPQUFPLENBQUNrSyxJQUFJLENBQUMsQ0FBQztNQUVwQixNQUFNd0osV0FBVyxHQUFHO1FBQ2xCUCxNQUFNLEVBQUVuVCxPQUFPLENBQUNtVCxNQUFNO1FBQ3RCckIsSUFBSSxFQUFFOVIsT0FBTyxDQUFDdU4sT0FBTztRQUNyQjZGLElBQUksRUFBRXBULE9BQU8sQ0FBQ29ULElBQUk7UUFDbEIxVixTQUFTLEVBQUVzQyxPQUFPLENBQUN0QyxTQUFTO1FBQzVCMEgsSUFBSSxFQUFFcEYsT0FBTyxDQUFDb0YsSUFBSTtRQUNsQm9PLE1BQU0sRUFBRXhULE9BQU8sQ0FBQ3dULE1BQU07UUFDdEJyVCxNQUFNLEVBQUU7TUFDVixDQUFDOztNQUVEO01BQ0EsTUFBTW1VLGNBQWMsR0FBRzFCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDbkYsV0FBVyxDQUFDMUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDK0UsSUFBSSxDQUN4RDVFLEVBQUUsSUFBSXVLLFdBQVcsQ0FBQ25MLEdBQUcsQ0FBQ1ksRUFBRSxDQUFDLENBQUNRLFFBQVEsS0FBS2tRLGNBQ3pDLENBQUM7TUFFRCxJQUFJUyxjQUFjLEVBQUU7UUFDbEI3VixFQUFFLENBQUN1VSxFQUFFLENBQUNzQixjQUFjLENBQUMsQ0FBQ3ZELElBQUksQ0FBQyxpQkFBaUIsRUFBRTJDLFdBQVcsQ0FBQztRQUMxRHJXLE1BQU0sQ0FBQ3NXLEtBQUssQ0FBQyxrQ0FBa0NFLGNBQWMsRUFBRSxFQUFFO1VBQy9EUyxjQUFjLEVBQUVBLGNBQWM7VUFDOUJDLE1BQU0sRUFBRXhHLE1BQU0sQ0FBQ3BLLFFBQVE7VUFDdkJtTyxJQUFJLEVBQUUvRCxNQUFNLENBQUMrRCxJQUFJO1VBQ2pCMEMsU0FBUyxFQUFFeFUsT0FBTyxDQUFDcUk7UUFDckIsQ0FBQyxDQUFDO01BQ0osQ0FBQyxNQUFNO1FBQ0xoTCxNQUFNLENBQUM0TSxJQUFJLENBQUMsZUFBZTRKLGNBQWMsK0NBQStDLEVBQUU7VUFDeEZBLGNBQWM7VUFDZC9CLElBQUksRUFBRS9ELE1BQU0sQ0FBQytELElBQUk7VUFDakIyQyxnQkFBZ0IsRUFBRS9HLFdBQVcsQ0FBQ3FFLElBQUk7VUFDbEN5QyxTQUFTLEVBQUV4VSxPQUFPLENBQUNxSTtRQUNyQixDQUFDLENBQUM7UUFDRjtNQUNGOztNQUVBO01BQ0EwRixNQUFNLENBQUNnRCxJQUFJLENBQUMsaUJBQWlCLEVBQUU7UUFDN0JvQyxNQUFNLEVBQUVuVCxPQUFPLENBQUNtVCxNQUFNO1FBQ3RCckIsSUFBSSxFQUFFOVIsT0FBTyxDQUFDOFIsSUFBSTtRQUNsQnNCLElBQUksRUFBRXBULE9BQU8sQ0FBQ29ULElBQUk7UUFDbEIxVixTQUFTLEVBQUVzQyxPQUFPLENBQUN0QyxTQUFTO1FBQzVCMEgsSUFBSSxFQUFFcEYsT0FBTyxDQUFDb0YsSUFBSTtRQUNsQm9PLE1BQU0sRUFBRSxJQUFJO1FBQUU7UUFDZHJULE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQztNQUVGOUMsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLG1DQUFtQyxFQUFFO1FBQy9DK1EsTUFBTSxFQUFFeEcsTUFBTSxDQUFDcEssUUFBUTtRQUN2QjZQLE1BQU0sRUFBRUssY0FBYztRQUN0Qi9CLElBQUksRUFBRS9ELE1BQU0sQ0FBQytELElBQUk7UUFDakIwQyxTQUFTLEVBQUV4VSxPQUFPLENBQUNxSSxHQUFHO1FBQ3RCcU0sYUFBYSxFQUFFZCxXQUFXLENBQUNsSTtNQUM3QixDQUFDLENBQUM7SUFFSixDQUFDLENBQUMsT0FBT3pMLEtBQUssRUFBRTtNQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLGdDQUFnQyxFQUFFO1FBQzdDQSxLQUFLLEVBQUVBLEtBQUssQ0FBQ0QsT0FBTztRQUNwQnVVLE1BQU0sRUFBRXhHLE1BQU0sQ0FBQ3BLLFFBQVE7UUFDdkI2UCxNQUFNLEVBQUV4RCxJQUFJLENBQUNnRCxFQUFFO1FBQ2ZsQixJQUFJLEVBQUUvRCxNQUFNLENBQUMrRCxJQUFJO1FBQ2pCM0ksTUFBTSxFQUFFNEUsTUFBTSxDQUFDNUUsTUFBTTtRQUNyQnZMLEtBQUssRUFBRXFDLEtBQUssQ0FBQ3JDO01BQ2YsQ0FBQyxDQUFDO01BQ0ZtUSxNQUFNLENBQUNnRCxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQ25CL1EsT0FBTyxFQUFFLGdDQUFnQztRQUN6Q0QsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDO0lBQ0o7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQWdPLE1BQU0sQ0FBQ3BPLEVBQUUsQ0FBQyxVQUFVLEVBQUdxUSxJQUFJLElBQUs7SUFDOUJnQyxlQUFlLENBQUMsQ0FBQztJQUNqQmpFLE1BQU0sQ0FBQ2lGLEVBQUUsQ0FBQ2pGLE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsVUFBVSxFQUFFO01BQUVwTixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSyxRQUFRO01BQUVnUixRQUFRLEVBQUUzRSxJQUFJLENBQUMyRTtJQUFTLENBQUMsQ0FBQztFQUNqRyxDQUFDLENBQUM7O0VBRUY7RUFDQTVHLE1BQU0sQ0FBQ3BPLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxNQUFPcVEsSUFBSSxJQUFLO0lBQzlDZ0MsZUFBZSxDQUFDLENBQUM7SUFDakIsTUFBTTtNQUFFeEU7SUFBVSxDQUFDLEdBQUd3QyxJQUFJO0lBQzFCLElBQUksQ0FBQ3hDLFNBQVMsRUFBRTtJQUVoQixJQUFJO01BQ0Y7TUFDQSxNQUFNRCxPQUFPLEdBQUcsTUFBTW5RLE9BQU8sQ0FBQ3FWLE9BQU8sQ0FBQztRQUFFdFAsRUFBRSxFQUFFcUssU0FBUztRQUFFcEksSUFBSSxFQUFFO01BQVEsQ0FBQyxDQUFDO01BQ3ZFLElBQUksQ0FBQ21JLE9BQU8sRUFBRTtRQUNaUSxNQUFNLENBQUNnRCxJQUFJLENBQUMsYUFBYSxFQUFFO1VBQUUvUSxPQUFPLEVBQUU7UUFBMEIsQ0FBQyxDQUFDO1FBQ2xFO01BQ0Y7O01BRUE7TUFDQSxJQUFJLENBQUNxUCxhQUFhLENBQUN1RixHQUFHLENBQUNwSCxTQUFTLENBQUMsRUFBRTtRQUNqQzZCLGFBQWEsQ0FBQ3dCLEdBQUcsQ0FBQ3JELFNBQVMsRUFBRSxJQUFJMkIsR0FBRyxDQUFDLENBQUMsQ0FBQztNQUN6QztNQUVBLE1BQU0wRixZQUFZLEdBQUd4RixhQUFhLENBQUM5TSxHQUFHLENBQUNpTCxTQUFTLENBQUM7O01BRWpEO01BQ0FPLE1BQU0sQ0FBQ2lGLEVBQUUsQ0FBQ3hGLFNBQVMsQ0FBQyxDQUFDdUQsSUFBSSxDQUFDLG1CQUFtQixFQUFFO1FBQUVwTixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSyxRQUFRO1FBQUVpSyxRQUFRLEVBQUVHLE1BQU0sQ0FBQzVLO01BQUcsQ0FBQyxDQUFDOztNQUVsRztNQUNBNEssTUFBTSxDQUFDa0YsSUFBSSxDQUFDekYsU0FBUyxDQUFDO01BQ3RCcUgsWUFBWSxDQUFDaEUsR0FBRyxDQUFDOUMsTUFBTSxDQUFDNUssRUFBRSxFQUFFO1FBQUUyUixjQUFjLEVBQUUsSUFBSTtRQUFFQyxNQUFNLEVBQUU7TUFBSyxDQUFDLENBQUM7O01BRW5FO01BQ0FoSCxNQUFNLENBQUNpSCxZQUFZLEdBQUd4SCxTQUFTO01BRS9CblEsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLFFBQVF1SyxNQUFNLENBQUNwSyxRQUFRLHlCQUF5QjZKLFNBQVMsRUFBRSxDQUFDO01BQ3hFTyxNQUFNLENBQUNnRCxJQUFJLENBQUMsY0FBYyxFQUFFO1FBQUV2RDtNQUFVLENBQUMsQ0FBQztJQUU1QyxDQUFDLENBQUMsT0FBT3ZOLEtBQUssRUFBRTtNQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUM7TUFDbkQ4TixNQUFNLENBQUNnRCxJQUFJLENBQUMsYUFBYSxFQUFFO1FBQUUvUSxPQUFPLEVBQUU7TUFBK0IsQ0FBQyxDQUFDO0lBQ3pFO0VBQ0YsQ0FBQyxDQUFDO0VBRUYrTixNQUFNLENBQUNwTyxFQUFFLENBQUMscUJBQXFCLEVBQUUsTUFBTTtJQUNyQ3FTLGVBQWUsQ0FBQyxDQUFDO0lBQ2pCLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQ2lILFlBQVksRUFBRTtJQUUxQixNQUFNeEgsU0FBUyxHQUFHTyxNQUFNLENBQUNpSCxZQUFZO0lBQ3JDLE1BQU1ILFlBQVksR0FBR3hGLGFBQWEsQ0FBQzlNLEdBQUcsQ0FBQ2lMLFNBQVMsQ0FBQztJQUVqRCxJQUFJcUgsWUFBWSxFQUFFO01BQ2hCQSxZQUFZLENBQUNqRCxNQUFNLENBQUM3RCxNQUFNLENBQUM1SyxFQUFFLENBQUM7TUFDOUIsSUFBSTBSLFlBQVksQ0FBQzlDLElBQUksS0FBSyxDQUFDLEVBQUU7UUFDM0IxQyxhQUFhLENBQUN1QyxNQUFNLENBQUNwRSxTQUFTLENBQUM7TUFDakM7SUFDRjs7SUFFQTtJQUNBTyxNQUFNLENBQUNpRixFQUFFLENBQUN4RixTQUFTLENBQUMsQ0FBQ3VELElBQUksQ0FBQyxpQkFBaUIsRUFBRTtNQUFFcE4sUUFBUSxFQUFFb0ssTUFBTSxDQUFDcEssUUFBUTtNQUFFaUssUUFBUSxFQUFFRyxNQUFNLENBQUM1SztJQUFHLENBQUMsQ0FBQztJQUVoRzRLLE1BQU0sQ0FBQzJFLEtBQUssQ0FBQ2xGLFNBQVMsQ0FBQztJQUN2Qk8sTUFBTSxDQUFDaUgsWUFBWSxHQUFHLElBQUk7SUFFMUIzWCxNQUFNLENBQUNtRyxJQUFJLENBQUMsUUFBUXVLLE1BQU0sQ0FBQ3BLLFFBQVEsdUJBQXVCNkosU0FBUyxFQUFFLENBQUM7SUFDdEVPLE1BQU0sQ0FBQ2dELElBQUksQ0FBQyxZQUFZLENBQUM7RUFDM0IsQ0FBQyxDQUFDO0VBRUZoRCxNQUFNLENBQUNwTyxFQUFFLENBQUMsYUFBYSxFQUFHcVEsSUFBSSxJQUFLO0lBQ2pDLE1BQU07TUFBRWlGLEtBQUs7TUFBRVg7SUFBZSxDQUFDLEdBQUd0RSxJQUFJO0lBQ3RDakMsTUFBTSxDQUFDaUYsRUFBRSxDQUFDc0IsY0FBYyxDQUFDLENBQUN2RCxJQUFJLENBQUMsYUFBYSxFQUFFO01BQzVDa0UsS0FBSztNQUNMcEMsSUFBSSxFQUFFOUUsTUFBTSxDQUFDNUssRUFBRTtNQUNmK1IsWUFBWSxFQUFFbkgsTUFBTSxDQUFDcEs7SUFDdkIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZvSyxNQUFNLENBQUNwTyxFQUFFLENBQUMsY0FBYyxFQUFHcVEsSUFBSSxJQUFLO0lBQ2xDLE1BQU07TUFBRW1GLE1BQU07TUFBRWI7SUFBZSxDQUFDLEdBQUd0RSxJQUFJO0lBQ3ZDakMsTUFBTSxDQUFDaUYsRUFBRSxDQUFDc0IsY0FBYyxDQUFDLENBQUN2RCxJQUFJLENBQUMsY0FBYyxFQUFFO01BQzdDb0UsTUFBTTtNQUNOdEMsSUFBSSxFQUFFOUUsTUFBTSxDQUFDNUssRUFBRTtNQUNmK1IsWUFBWSxFQUFFbkgsTUFBTSxDQUFDcEs7SUFDdkIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZvSyxNQUFNLENBQUNwTyxFQUFFLENBQUMsZUFBZSxFQUFHcVEsSUFBSSxJQUFLO0lBQ25DLE1BQU07TUFBRW9GLFNBQVM7TUFBRWQ7SUFBZSxDQUFDLEdBQUd0RSxJQUFJO0lBQzFDakMsTUFBTSxDQUFDaUYsRUFBRSxDQUFDc0IsY0FBYyxDQUFDLENBQUN2RCxJQUFJLENBQUMsZUFBZSxFQUFFO01BQzlDcUUsU0FBUztNQUNUdkMsSUFBSSxFQUFFOUUsTUFBTSxDQUFDNUssRUFBRTtNQUNmK1IsWUFBWSxFQUFFbkgsTUFBTSxDQUFDcEs7SUFDdkIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDOztFQUVGO0VBQ0FvSyxNQUFNLENBQUNwTyxFQUFFLENBQUMsWUFBWSxFQUFFLFlBQVk7SUFDbEN0QyxNQUFNLENBQUNtRyxJQUFJLENBQUMsUUFBUXVLLE1BQU0sQ0FBQ3BLLFFBQVEsZUFBZSxDQUFDO0lBRW5ELElBQUk7TUFDRixNQUFNd0YsTUFBTSxHQUFHNEUsTUFBTSxDQUFDNUUsTUFBTTs7TUFFNUI7TUFDQSxJQUFJQSxNQUFNLEVBQUU7UUFDVixNQUFNa00sWUFBWSxHQUFHakcsZUFBZSxDQUFDN00sR0FBRyxDQUFDNEcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNyRCxNQUFNbU0sUUFBUSxHQUFHOU0sSUFBSSxDQUFDSyxHQUFHLENBQUMsQ0FBQyxFQUFFd00sWUFBWSxHQUFHLENBQUMsQ0FBQztRQUM5Q2pHLGVBQWUsQ0FBQ3lCLEdBQUcsQ0FBQzFILE1BQU0sRUFBRW1NLFFBQVEsQ0FBQztRQUVyQ2pZLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyxRQUFRdUssTUFBTSxDQUFDcEssUUFBUSx5Q0FBeUMyUixRQUFRLEdBQUcsRUFBRTtVQUN2Rm5NLE1BQU0sRUFBRUEsTUFBTTtVQUNkeUUsUUFBUSxFQUFFRyxNQUFNLENBQUM1SyxFQUFFO1VBQ25CdU8sZUFBZSxFQUFFNEQ7UUFDbkIsQ0FBQyxDQUFDO01BQ0o7O01BRUE7TUFDQSxJQUFJdkgsTUFBTSxDQUFDaUgsWUFBWSxFQUFFO1FBQ3ZCLE1BQU14SCxTQUFTLEdBQUdPLE1BQU0sQ0FBQ2lILFlBQVk7UUFDckMsTUFBTUgsWUFBWSxHQUFHeEYsYUFBYSxDQUFDOU0sR0FBRyxDQUFDaUwsU0FBUyxDQUFDO1FBRWpELElBQUlxSCxZQUFZLEVBQUU7VUFDaEJBLFlBQVksQ0FBQ2pELE1BQU0sQ0FBQzdELE1BQU0sQ0FBQzVLLEVBQUUsQ0FBQztVQUM5QixJQUFJMFIsWUFBWSxDQUFDOUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUMzQjFDLGFBQWEsQ0FBQ3VDLE1BQU0sQ0FBQ3BFLFNBQVMsQ0FBQztVQUNqQztRQUNGOztRQUVBO1FBQ0FPLE1BQU0sQ0FBQ2lGLEVBQUUsQ0FBQ3hGLFNBQVMsQ0FBQyxDQUFDdUQsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1VBQUVwTixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSyxRQUFRO1VBQUVpSyxRQUFRLEVBQUVHLE1BQU0sQ0FBQzVLO1FBQUcsQ0FBQyxDQUFDO01BQ2xHO01BRUEsSUFBSTRLLE1BQU0sQ0FBQytELElBQUksRUFBRTtRQUNmL0QsTUFBTSxDQUFDMkUsS0FBSyxDQUFDM0UsTUFBTSxDQUFDK0QsSUFBSSxDQUFDOztRQUV6QjtRQUNBLE1BQU15RCxZQUFZLEdBQUcsSUFBSXBZLE9BQU8sQ0FBQztVQUMvQmdXLE1BQU0sRUFBRSxRQUFRO1VBQ2hCNUYsT0FBTyxFQUFFUSxNQUFNLENBQUMrRCxJQUFJO1VBQ3BCc0IsSUFBSSxFQUFFLEdBQUdyRixNQUFNLENBQUNwSyxRQUFRLG9CQUFvQjtVQUM1Q3lCLElBQUksRUFBRTtRQUNSLENBQUMsQ0FBQztRQUNGLE1BQU1tUSxZQUFZLENBQUNyTCxJQUFJLENBQUMsQ0FBQztRQUV6QnpMLEVBQUUsQ0FBQ3VVLEVBQUUsQ0FBQ2pGLE1BQU0sQ0FBQytELElBQUksQ0FBQyxDQUFDZixJQUFJLENBQUMsU0FBUyxFQUFFO1VBQ2pDb0MsTUFBTSxFQUFFb0MsWUFBWSxDQUFDcEMsTUFBTTtVQUMzQnJCLElBQUksRUFBRXlELFlBQVksQ0FBQ2hJLE9BQU87VUFDMUI2RixJQUFJLEVBQUVtQyxZQUFZLENBQUNuQyxJQUFJO1VBQ3ZCaE8sSUFBSSxFQUFFbVEsWUFBWSxDQUFDblEsSUFBSTtVQUN2QjFILFNBQVMsRUFBRTZYLFlBQVksQ0FBQzdYO1FBQzFCLENBQUMsQ0FBQzs7UUFFRjtRQUNBLE1BQU0yVixTQUFTLEdBQUdULEtBQUssQ0FBQ0MsSUFBSSxDQUFDbkYsV0FBVyxDQUFDakwsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUMvQ3FRLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNqQixJQUFJLEtBQUsvRCxNQUFNLENBQUMrRCxJQUFJLElBQUlpQixDQUFDLENBQUM1SixNQUFNLEtBQUs0RSxNQUFNLENBQUM1RSxNQUFNLENBQUMsQ0FDakV6RyxHQUFHLENBQUNxUSxDQUFDLEtBQUs7VUFBRXBQLFFBQVEsRUFBRW9QLENBQUMsQ0FBQ3BQLFFBQVE7VUFBRThCLElBQUksRUFBRXNOLENBQUMsQ0FBQ3ROO1FBQUssQ0FBQyxDQUFDLENBQUM7UUFDckRoSCxFQUFFLENBQUN1VSxFQUFFLENBQUNqRixNQUFNLENBQUMrRCxJQUFJLENBQUMsQ0FBQ2YsSUFBSSxDQUFDLGNBQWMsRUFBRXNDLFNBQVMsQ0FBQztNQUNwRDs7TUFFQTtNQUNBM0YsV0FBVyxDQUFDa0UsTUFBTSxDQUFDN0QsTUFBTSxDQUFDNUssRUFBRSxDQUFDOztNQUU3QjtNQUNBOUYsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLGdEQUFnRGtLLFdBQVcsQ0FBQ3FFLElBQUksRUFBRSxDQUFDOztNQUUvRTtNQUNBLElBQUk1SSxNQUFNLEVBQUU7UUFDVixNQUFNcU0sb0JBQW9CLEdBQUdwRyxlQUFlLENBQUM3TSxHQUFHLENBQUM0RyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQzdELElBQUlxTSxvQkFBb0IsS0FBSyxDQUFDLEVBQUU7VUFDOUIsTUFBTXRZLElBQUksQ0FBQytRLGlCQUFpQixDQUFDOUUsTUFBTSxFQUFFO1lBQ25DaEosTUFBTSxFQUFFLFNBQVM7WUFDakIwRixVQUFVLEVBQUUsSUFBSXhDLElBQUksQ0FBQztVQUN2QixDQUFDLENBQUM7VUFDRnhELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFdBQVdpTyxNQUFNLENBQUNwSyxRQUFRLDBDQUEwQyxDQUFDO1VBQ2pGdEcsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLDhDQUE4QyxFQUFFO1lBQzFEMkYsTUFBTSxFQUFFQSxNQUFNO1lBQ2R4RixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSztVQUNuQixDQUFDLENBQUM7UUFDSixDQUFDLE1BQU07VUFDTDtVQUNBLE1BQU16RyxJQUFJLENBQUMrUSxpQkFBaUIsQ0FBQzlFLE1BQU0sRUFBRTtZQUNuQ3RELFVBQVUsRUFBRSxJQUFJeEMsSUFBSSxDQUFDO1VBQ3ZCLENBQUMsQ0FBQztVQUNGeEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsVUFBVWlPLE1BQU0sQ0FBQ3BLLFFBQVEsa0JBQWtCNlIsb0JBQW9CLG9CQUFvQixDQUFDO1VBQ2hHblksTUFBTSxDQUFDbUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFO1lBQ2pDMkYsTUFBTSxFQUFFQSxNQUFNO1lBQ2R4RixRQUFRLEVBQUVvSyxNQUFNLENBQUNwSyxRQUFRO1lBQ3pCK04sZUFBZSxFQUFFOEQ7VUFDbkIsQ0FBQyxDQUFDO1FBQ0o7TUFDRjtJQUVGLENBQUMsQ0FBQyxPQUFPdlYsS0FBSyxFQUFFO01BQ2Q1QyxNQUFNLENBQUM0QyxLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztJQUNyRDtFQUNILENBQUMsQ0FBQztBQUNILENBQUMsQ0FBQzs7QUFFRjtBQUNBLE1BQU13VixnQkFBZ0IsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDbkMsSUFBSTtJQUNGO0lBQ0EsTUFBTXZaLFNBQVMsQ0FBQyxDQUFDOztJQUVqQjtJQUNBLE1BQU13WixlQUFlLEdBQUcsQ0FDdEI7TUFBRXZTLEVBQUUsRUFBRSxTQUFTO01BQUV0QixJQUFJLEVBQUUsU0FBUztNQUFFdUQsSUFBSSxFQUFFLE1BQU07TUFBRVcsU0FBUyxFQUFFO0lBQVMsQ0FBQyxFQUNyRTtNQUFFNUMsRUFBRSxFQUFFLFlBQVk7TUFBRXRCLElBQUksRUFBRSxZQUFZO01BQUV1RCxJQUFJLEVBQUUsT0FBTztNQUFFVyxTQUFTLEVBQUU7SUFBUyxDQUFDLENBQzdFO0lBRUQsS0FBSyxNQUFNNFAsV0FBVyxJQUFJRCxlQUFlLEVBQUU7TUFDekMsTUFBTXRZLE9BQU8sQ0FBQzZULGdCQUFnQixDQUM1QjtRQUFFOU4sRUFBRSxFQUFFd1MsV0FBVyxDQUFDeFM7TUFBRyxDQUFDLEVBQ3RCd1MsV0FBVyxFQUNYO1FBQUVDLE1BQU0sRUFBRSxJQUFJO1FBQUV6RSxHQUFHLEVBQUU7TUFBSyxDQUM1QixDQUFDO0lBQ0g7SUFFQTlULE1BQU0sQ0FBQ21HLElBQUksQ0FBQyw4QkFBOEIsQ0FBQzs7SUFFM0M7SUFDQSxNQUFNcVMsSUFBSSxHQUFHbFgsT0FBTyxDQUFDQyxHQUFHLENBQUNpWCxJQUFJLElBQUksSUFBSTtJQUNyQ3RYLE1BQU0sQ0FBQ3VYLE1BQU0sQ0FBQ0QsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNO01BQ25DeFksTUFBTSxDQUFDbUcsSUFBSSxDQUFDLDBCQUEwQnFTLElBQUksRUFBRSxDQUFDO01BQzdDaFcsT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCK1YsSUFBSSxFQUFFLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU81VixLQUFLLEVBQUU7SUFDZDVDLE1BQU0sQ0FBQzRDLEtBQUssQ0FBQyw4QkFBOEIsRUFBRUEsS0FBSyxDQUFDO0lBQ25EdEIsT0FBTyxDQUFDb1gsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQjtBQUNGLENBQUM7O0FBRUQ7QUFDQXBYLE9BQU8sQ0FBQ2dCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtFQUMvQnRDLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyw4Q0FBOEMsQ0FBQztFQUMzRCxNQUFNckgsT0FBTyxDQUFDLENBQUM7RUFDZnNDLEVBQUUsQ0FBQ3VYLEtBQUssQ0FBQyxNQUFNO0lBQ2IzWSxNQUFNLENBQUNtRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDL0I3RSxPQUFPLENBQUNvWCxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGcFgsT0FBTyxDQUFDZ0IsRUFBRSxDQUFDLFNBQVMsRUFBRSxZQUFZO0VBQ2hDdEMsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLCtDQUErQyxDQUFDO0VBQzVELE1BQU1ySCxPQUFPLENBQUMsQ0FBQztFQUNmc0MsRUFBRSxDQUFDdVgsS0FBSyxDQUFDLE1BQU07SUFDYjNZLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUMvQjdFLE9BQU8sQ0FBQ29YLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTUUsMkJBQTJCLEdBQUd0WixhQUFhLENBQUM4WSxnQkFBZ0IsRUFBRTtFQUNsRVMsV0FBVyxFQUFFLENBQUM7RUFDZDFFLE9BQU8sRUFBRSxLQUFLO0VBQ2QyRSxhQUFhLEVBQUU7QUFDakIsQ0FBQyxDQUFDOztBQUVGO0FBQ0EsSUFBSXhYLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssTUFBTSxFQUFFO0VBQ25Db1gsMkJBQTJCLENBQUMsQ0FBQyxDQUFDdEUsS0FBSyxDQUFDL1IsR0FBRyxJQUFJO0lBQ3pDdkMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHdDQUF3QyxFQUFFTCxHQUFHLENBQUM7SUFDM0RqQixPQUFPLENBQUNvWCxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCLENBQUMsQ0FBQztBQUNKOztBQUVBO0FBQ0FsRSxXQUFXLENBQUMsTUFBTTtFQUNoQixJQUFJdUUsTUFBTSxDQUFDQyxFQUFFLEVBQUU7SUFDYkQsTUFBTSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNYaFosTUFBTSxDQUFDc1csS0FBSyxDQUFDLHFDQUFxQyxDQUFDO0VBQ3JEO0FBQ0YsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7O0FBRVo7QUFDQWhWLE9BQU8sQ0FBQ2dCLEVBQUUsQ0FBQyxtQkFBbUIsRUFBR00sS0FBSyxJQUFLO0VBQ3pDNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7RUFDMUM7RUFDQXVTLFVBQVUsQ0FBQyxNQUFNO0lBQ2YsSUFBSS9WLHNCQUFzQixDQUFDNlosZUFBZSxDQUFDQyxZQUFZLEdBQUcsRUFBRSxFQUFFO01BQzVEbFosTUFBTSxDQUFDNEMsS0FBSyxDQUFDLGtFQUFrRSxDQUFDO01BQ2hGdEIsT0FBTyxDQUFDb1gsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNqQjtFQUNGLENBQUMsRUFBRSxJQUFJLENBQUM7QUFDVixDQUFDLENBQUM7O0FBRUY7QUFDQXBYLE9BQU8sQ0FBQ2dCLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDMEosTUFBTSxFQUFFbU4sT0FBTyxLQUFLO0VBQ3BEblosTUFBTSxDQUFDNEMsS0FBSyxDQUFDLHlCQUF5QixFQUFFdVcsT0FBTyxFQUFFLFNBQVMsRUFBRW5OLE1BQU0sQ0FBQztFQUNuRTtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBMUssT0FBTyxDQUFDZ0IsRUFBRSxDQUFDLFNBQVMsRUFBRSxZQUFZO0VBQ2hDdEMsTUFBTSxDQUFDbUcsSUFBSSxDQUFDLGlEQUFpRCxDQUFDO0VBRTlELElBQUk7SUFDRjtJQUNBLE1BQU1pVCxhQUFhLEdBQUc1Wix5QkFBeUIsQ0FBQyxDQUFDO0lBQ2pEUSxNQUFNLENBQUNtRyxJQUFJLENBQUMsK0JBQStCLEVBQUVpVCxhQUFhLENBQUM7O0lBRTNEO0lBQ0EsTUFBTXRhLE9BQU8sQ0FBQyxDQUFDOztJQUVmO0lBQ0EsTUFBTXVhLFlBQVksR0FBR3JhLGtCQUFrQixDQUFDd1EsZ0JBQWdCLENBQUMsQ0FBQztJQUUxRHhQLE1BQU0sQ0FBQ21HLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtNQUN4Q3lJLE1BQU0sRUFBRXlLLFlBQVksQ0FBQ3pLLE1BQU07TUFDM0IwSyxhQUFhLEVBQUVELFlBQVksQ0FBQ0UsYUFBYSxHQUNyQ3BVLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDaVUsWUFBWSxDQUFDRSxhQUFhLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRUMsUUFBUSxLQUM3REQsR0FBRyxJQUFJQyxRQUFRLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FDakMsQ0FBQztNQUNMQyxVQUFVLEVBQUVQLFlBQVksQ0FBQ1EsTUFBTSxFQUFFQyxTQUFTLElBQUk7SUFDaEQsQ0FBQyxDQUFDO0lBRUYxWSxFQUFFLENBQUN1WCxLQUFLLENBQUMsTUFBTTtNQUNiM1ksTUFBTSxDQUFDbUcsSUFBSSxDQUFDLG1DQUFtQyxDQUFDO01BQ2hEN0UsT0FBTyxDQUFDb1gsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNqQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBTzlWLEtBQUssRUFBRTtJQUNkNUMsTUFBTSxDQUFDNEMsS0FBSyxDQUFDLGlDQUFpQyxFQUFFQSxLQUFLLENBQUM7SUFDdER0QixPQUFPLENBQUNvWCxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FsRSxXQUFXLENBQUMsTUFBTTtFQUNoQixNQUFNdUYsVUFBVSxHQUFHL2Esa0JBQWtCLENBQUNnYixhQUFhLENBQUMsQ0FBQzs7RUFFckQ7RUFDQSxJQUFJRCxVQUFVLENBQUNFLFFBQVEsQ0FBQ0MsbUJBQW1CLEdBQUcsSUFBSSxFQUFFO0lBQ2xEbGEsTUFBTSxDQUFDNE0sSUFBSSxDQUFDLHNEQUFzRCxFQUFFO01BQ2xFdU4sT0FBTyxFQUFFLEdBQUdKLFVBQVUsQ0FBQ0UsUUFBUSxDQUFDQyxtQkFBbUIsSUFBSTtNQUN2REUsU0FBUyxFQUFFLFFBQVE7TUFDbkIvWixTQUFTLEVBQUUsSUFBSTJGLElBQUksQ0FBQyxDQUFDLENBQUMySSxXQUFXLENBQUM7SUFDcEMsQ0FBQyxDQUFDO0VBQ0o7RUFFQSxJQUFJb0wsVUFBVSxDQUFDRixNQUFNLENBQUNRLFlBQVksR0FBRyxHQUFHLEVBQUU7SUFDeENyYSxNQUFNLENBQUM0TSxJQUFJLENBQUMsNkNBQTZDLEVBQUU7TUFDekQwTixLQUFLLEVBQUVQLFVBQVUsQ0FBQ0YsTUFBTSxDQUFDVSxVQUFVO01BQ25DSCxTQUFTLEVBQUUsS0FBSztNQUNoQi9aLFNBQVMsRUFBRSxJQUFJMkYsSUFBSSxDQUFDLENBQUMsQ0FBQzJJLFdBQVcsQ0FBQztJQUNwQyxDQUFDLENBQUM7O0lBRUY7SUFDQSxJQUFJb0ssTUFBTSxDQUFDQyxFQUFFLEVBQUU7TUFDYkQsTUFBTSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNYaFosTUFBTSxDQUFDbUcsSUFBSSxDQUFDLDJDQUEyQyxDQUFDO0lBQzFEO0VBQ0Y7O0VBRUE7RUFDQSxNQUFNaVQsYUFBYSxHQUFHNVoseUJBQXlCLENBQUMsQ0FBQztFQUNqRCxJQUFJNFosYUFBYSxDQUFDb0IsUUFBUSxFQUFFQyxLQUFLLEtBQUssTUFBTSxFQUFFO0lBQzVDemEsTUFBTSxDQUFDNE0sSUFBSSxDQUFDLG1EQUFtRCxFQUFFd00sYUFBYSxDQUFDb0IsUUFBUSxDQUFDO0VBQzFGO0VBRUEsSUFBSXBCLGFBQWEsQ0FBQ3NCLEtBQUssRUFBRUQsS0FBSyxLQUFLLE1BQU0sRUFBRTtJQUN6Q3phLE1BQU0sQ0FBQzRNLElBQUksQ0FBQyxnREFBZ0QsRUFBRXdNLGFBQWEsQ0FBQ3NCLEtBQUssQ0FBQztFQUNwRjtBQUVGLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDOztBQUVYQyxNQUFNLENBQUNDLE9BQU8sR0FBRzNaLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=