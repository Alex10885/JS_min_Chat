ddb6f548c873f17ab4eec6e55ba6d4d2
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIo = require('socket.io');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const winston = require('winston');
const swaggerJsdoc = require('swagger-jsdoc');
const swaggerUi = require('swagger-ui-express');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const {
  body,
  validationResult
} = require('express-validator');
const mongoose = require('mongoose');
// Import crypto for generating secure tokens
const crypto = require('crypto');
const session = require('express-session');
const RedisStore = require('connect-redis');
const {
  redisManager
} = require('./src/config/redis');
const {
  connectDB,
  closeDB,
  connectionMonitor
} = require('./db/connection');
const emailService = require('./services/emailService');
const {
  performanceMonitor,
  apiPerformanceMiddleware,
  getHealthCheck,
  getPerformanceDashboard
} = require('./src/middleware/performanceMonitor');
const {
  externalServiceBreaker,
  circuitBreakerMiddleware,
  asyncOptimize,
  protectEmail,
  getCircuitBreakerStatuses
} = require('./src/middleware/circuitBreaker');

// Import AuthService for extracted authentication logic
const authService = require('./src/services/authService');

// Define getCachedStats function for connection metrics
const getCachedStats = async () => {
  return connectionMonitor.getMetrics();
};

// Extract rate limiters from AuthService
const {
  authRateLimiter,
  apiRateLimiter,
  generalRateLimiter
} = authService;

// Import models
const User = require('./models/User');
const Message = require('./models/Message');
const Channel = require('./models/Channel');

// Logger setup
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'chat-server'
  },
  transports: [new winston.transports.File({
    filename: 'logs/server.log'
  }), new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  })]
});
const app = express();
const server = http.createServer(app);

// Rate limiters are now handled by AuthService
const io = socketIo(server, {
  cors: {
    origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : ["http://localhost:3003", "http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["authorization", "content-type"],
    credentials: true
  },
  // Ensure both transports are supported
  transports: ['websocket', 'polling'],
  // Connection settings for better reliability
  connectTimeout: 20000,
  // 20 seconds
  pingTimeout: 5000,
  // 5 seconds for ping
  pingInterval: 10000,
  // 10 seconds between pings
  upgradeTimeout: 10000,
  allowUpgrades: true,
  cookieHttpOnly: true,
  cookieSameSite: 'lax'
});

// Log socket connection errors for debugging
io.engine.on('connection_error', err => {
  console.log('🔌 Socket engine connection error:', err.code, err.message);
  logger.error('Socket connection error:', {
    code: err.code,
    message: err.message,
    httpStatus: err.status,
    headers: err.req?.headers
  });
});

// CORS configuration
app.use(cors({
  origin: process.env.NODE_ENV === 'production' ? process.env.ALLOWED_ORIGINS?.split(',') || false : true,
  credentials: true
}));
app.use(express.json({
  limit: '20mb',
  strict: false
})); // Increased limit and disabled strict parsing for better error tolerance
app.use(express.urlencoded({
  extended: true,
  limit: '20mb'
})); // Handle form data with increased limit

// Session configuration with Redis store for enhanced performance
let sessionMiddleware;
try {
  const redisClient = redisManager.getClient();
  if (redisClient && redisManager.isClientReady()) {
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      store: new RedisStore({
        client: redisClient,
        prefix: 'sess:',
        ttl: 86400,
        // 24 hours
        disableTouch: false // Allow automatic touch
      }),
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
    console.log('✅ Redis session store initialized successfully');
  } else {
    // Fallback to memory store if Redis is not available
    console.log('⚠️ Redis not available, using memory-based session store');
    sessionMiddleware = session({
      secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
      resave: false,
      saveUninitialized: false,
      cookie: {
        secure: process.env.NODE_ENV === 'production',
        httpOnly: true,
        maxAge: 24 * 60 * 60 * 1000,
        sameSite: 'lax'
      },
      name: 'chatSession',
      rolling: false,
      unset: 'destroy'
    });
  }
} catch (error) {
  console.log('❌ Redis session store initialization failed, using memory store:', error.message);
  sessionMiddleware = session({
    secret: process.env.SESSION_SECRET || 'your-very-long-secure-secret-key-change-in-production',
    resave: false,
    saveUninitialized: false,
    cookie: {
      secure: process.env.NODE_ENV === 'production',
      httpOnly: true,
      maxAge: 24 * 60 * 60 * 1000,
      sameSite: 'lax'
    },
    name: 'chatSession',
    rolling: false,
    unset: 'destroy'
  });
}
app.use(sessionMiddleware);

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  logger.error('Unhandled error:', {
    message: err.message,
    stack: err.stack,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  // Mongoose validation errors
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => ({
      field: e.path,
      message: e.message,
      value: e.value
    }));
    return res.status(422).json({
      error: 'Validation failed',
      details: errors,
      code: 'VALIDATION_ERROR'
    });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    const value = err.keyValue[field];
    return res.status(409).json({
      error: `${field} '${value}' already exists`,
      code: 'DUPLICATE_ERROR'
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid or expired token',
      code: 'INVALID_TOKEN'
    });
  }
  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token has expired',
      code: 'TOKEN_EXPIRED'
    });
  }

  // Default server error
  res.status(500).json({
    error: 'Internal server error',
    code: 'INTERNAL_ERROR',
    requestId: req.id || 'unknown'
  });
};

// Request logging middleware
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    logger.info(`${req.method} ${req.url} - ${res.statusCode} (${duration}ms)`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      user: req.user?.nickname || 'anonymous',
      body: req.method !== 'GET' ? JSON.stringify(req.body) : undefined
    });
  });
  next();
});

// Session authentication middleware now uses AuthService

// JWT authentication middleware now uses AuthService

// Role-based access control middleware now uses AuthService

// Error handling middleware

// Use AuthService session authentication middleware
app.use(authService.authenticateSession.bind(authService));

// General rate limiting (applied to all HTTP requests) - using AuthService
app.use(authService.generalRateLimiter);

// Performance monitoring middleware
app.use(apiPerformanceMiddleware());

// Helmet security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
      imgSrc: ["'self'", "data:"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      connectSrc: ["'self'"]
    }
  },
  crossOriginEmbedderPolicy: false
}));

// Swagger configuration
const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Chat-JS API',
      version: '1.0.0',
      description: 'REST API for Chat-JS application with real-time messaging and voice channels',
      contact: {
        name: 'Chat-JS Support'
      }
    },
    servers: [{
      url: 'http://localhost:3001',
      description: 'Development server'
    }],
    components: {
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'User unique identifier'
            },
            nickname: {
              type: 'string',
              description: 'User nickname',
              minLength: 3,
              maxLength: 50
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'User email address'
            },
            role: {
              type: 'string',
              enum: ['admin', 'member'],
              default: 'member',
              description: 'User role'
            },
            createdAt: {
              type: 'string',
              format: 'date-time',
              description: 'User creation timestamp'
            },
            lastActive: {
              type: 'string',
              format: 'date-time',
              description: 'Last activity timestamp'
            },
            status: {
              type: 'string',
              enum: ['online', 'offline'],
              description: 'User online status'
            }
          },
          required: ['nickname', 'email', 'password', 'role']
        },
        Channel: {
          type: 'object',
          properties: {
            id: {
              type: 'string',
              description: 'Channel unique identifier (auto-generated from name)'
            },
            name: {
              type: 'string',
              description: 'Channel display name',
              minLength: 1,
              maxLength: 100
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              description: 'Channel description',
              maxLength: 500
            },
            createdBy: {
              type: 'string',
              description: 'Creator nickname'
            },
            position: {
              type: 'number',
              default: 0,
              description: 'Channel display position'
            }
          },
          required: ['id', 'name', 'type', 'createdBy']
        },
        RegisterRequest: {
          type: 'object',
          required: ['nickname', 'email', 'password'],
          properties: {
            nickname: {
              type: 'string',
              minLength: 3,
              maxLength: 50,
              description: 'Unique username'
            },
            email: {
              type: 'string',
              format: 'email',
              description: 'Valid email address'
            },
            password: {
              type: 'string',
              minLength: 6,
              description: 'User password'
            }
          }
        },
        LoginRequest: {
          type: 'object',
          required: ['identifier', 'password'],
          properties: {
            identifier: {
              type: 'string',
              description: 'Username or email'
            },
            password: {
              type: 'string',
              description: 'User password'
            }
          }
        },
        AuthResponse: {
          type: 'object',
          properties: {
            token: {
              type: 'string',
              description: 'JWT access token'
            },
            user: {
              $ref: '#/components/schemas/User'
            }
          }
        },
        ChannelRequest: {
          type: 'object',
          required: ['name', 'type'],
          properties: {
            name: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              description: 'Channel display name'
            },
            type: {
              type: 'string',
              enum: ['text', 'voice'],
              description: 'Channel type'
            },
            description: {
              type: 'string',
              maxLength: 500,
              description: 'Optional channel description'
            }
          }
        },
        ErrorResponse: {
          type: 'object',
          properties: {
            error: {
              type: 'string',
              description: 'Error message'
            },
            errors: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  msg: {
                    type: 'string'
                  },
                  param: {
                    type: 'string'
                  },
                  location: {
                    type: 'string'
                  }
                }
              },
              description: 'Validation errors array'
            }
          }
        }
      },
      securitySchemes: {
        bearerAuth: {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT'
        }
      }
    },
    security: [{
      bearerAuth: []
    }]
  },
  apis: ['./server.js'] // Path to the API routes
};
const swaggerSpec = swaggerJsdoc(swaggerOptions);

// Swagger UI with CSP disabled for this route
app.use('/api-docs', (req, res, next) => {
  // Disable CSP for Swagger UI
  res.removeHeader('Content-Security-Policy');
  next();
}, swaggerUi.serve, swaggerUi.setup(swaggerSpec));

// Administrative endpoints - require moderator privileges
console.log('🔧 Administrative API endpoints registered at startup');

// GET /api/admin/users - List all users with moderation info
app.get('/api/admin/users', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 50;
    const skip = (page - 1) * limit;
    const users = await User.find({}).select('-password -resetPasswordToken -resetPasswordExpires -moderationToken -moderationTokenExpires').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const total = await User.countDocuments();
    logger.info(`Admin user list requested by ${req.user.nickname}`, {
      adminId: req.user._id,
      page,
      limit,
      total
    });
    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    logger.error('Error fetching users for admin:', error);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// POST /api/admin/users/:userId/ban - Ban a user
app.post('/api/admin/users/:userId/ban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), authService.apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
}) // Max 1 year in seconds
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent banning yourself
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot ban yourself'
      });
    }

    // Prevent non-admin from banning admin
    if (user.role === 'admin' && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Cannot ban administrator'
      });
    }
    await user.ban(reason, duration, req.user._id);
    logger.info(`User ${user.nickname} banned by ${req.user.nickname}`, {
      bannedUserId: userId,
      bannedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been banned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: true,
        banReason: reason,
        banExpires: user.banExpires
      }
    });
  } catch (error) {
    logger.error('Error banning user:', error);
    res.status(500).json({
      error: 'Failed to ban user'
    });
  }
});

// POST /api/admin/users/:userId/unban - Unban a user
app.post('/api/admin/users/:userId/unban', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.banned) {
      return res.status(400).json({
        error: 'User is not banned'
      });
    }
    await user.unban();
    logger.info(`User ${user.nickname} unbanned by ${req.user.nickname}`, {
      unbannedUserId: userId,
      unbannedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unbanned`,
      user: {
        id: user._id,
        nickname: user.nickname,
        banned: false
      }
    });
  } catch (error) {
    logger.error('Error unbanning user:', error);
    res.status(500).json({
      error: 'Failed to unban user'
    });
  }
});

// POST /api/admin/users/:userId/warn - Issue warning to user
app.post('/api/admin/users/:userId/warn', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('reason').isLength({
  min: 1,
  max: 500
}).trim(), body('duration').optional().isInt({
  min: 1,
  max: 31536000
})], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      reason,
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.warn(reason, req.user._id, duration);
    await user.save();
    logger.info(`Warning issued to user ${user.nickname} by ${req.user.nickname}`, {
      warnedUserId: userId,
      warnedById: req.user._id,
      reason,
      duration
    });
    res.json({
      message: `Warning issued to user ${user.nickname}`,
      warning: {
        reason,
        issuedBy: req.user.nickname,
        issuedAt: new Date(),
        expires: duration ? new Date(Date.now() + duration) : null
      },
      user: {
        id: user._id,
        nickname: user.nickname,
        warningsCount: user.getActiveWarningsCount()
      }
    });
  } catch (error) {
    logger.error('Error warning user:', error);
    res.status(500).json({
      error: 'Failed to warn user'
    });
  }
});

// POST /api/admin/users/:userId/role - Change user role
app.post('/api/admin/users/:userId/role', authService.authenticateToken.bind(authService), authService.requireAdmin.bind(authService), apiRateLimiter, [body('role').isIn(['member', 'moderator', 'admin'])], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      role: newRole
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }

    // Prevent modifying your own role in potentially problematic ways
    if (user._id.toString() === req.user._id.toString()) {
      return res.status(400).json({
        error: 'Cannot modify your own role'
      });
    }

    // Prevent non-admin from promoting to admin or demoting admin
    if ((newRole === 'admin' || user.role === 'admin') && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Only administrators can manage admin roles'
      });
    }
    const oldRole = user.role;
    user.role = newRole;
    await user.save();
    logger.info(`User ${user.nickname} role changed from ${oldRole} to ${newRole} by ${req.user.nickname}`, {
      changedUserId: userId,
      changedById: req.user._id,
      oldRole,
      newRole
    });
    res.json({
      message: `User ${user.nickname} role changed to ${newRole}`,
      user: {
        id: user._id,
        nickname: user.nickname,
        role: newRole
      }
    });
  } catch (error) {
    logger.error('Error changing user role:', error);
    res.status(500).json({
      error: 'Failed to change user role'
    });
  }
});

// POST /api/admin/users/:userId/mute - Mute user
app.post('/api/admin/users/:userId/mute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, [body('duration').isInt({
  min: 60,
  max: 86400
}) // 1 minute to 24 hours
], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      userId
    } = req.params;
    const {
      duration
    } = req.body;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    await user.mute(duration);
    logger.info(`User ${user.nickname} muted by ${req.user.nickname}`, {
      mutedUserId: userId,
      mutedById: req.user._id,
      duration
    });
    res.json({
      message: `User ${user.nickname} has been muted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: user.muteExpires
      }
    });
  } catch (error) {
    logger.error('Error muting user:', error);
    res.status(500).json({
      error: 'Failed to mute user'
    });
  }
});

// POST /api/admin/users/:userId/unmute - Unmute user
app.post('/api/admin/users/:userId/unmute', authService.authenticateToken.bind(authService), authService.requireModerator.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const {
      userId
    } = req.params;
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({
        error: 'User not found'
      });
    }
    if (!user.isMuted()) {
      return res.status(400).json({
        error: 'User is not muted'
      });
    }
    await user.unmute();
    logger.info(`User ${user.nickname} unmuted by ${req.user.nickname}`, {
      unmutedUserId: userId,
      unmutedById: req.user._id
    });
    res.json({
      message: `User ${user.nickname} has been unmuted`,
      user: {
        id: user._id,
        nickname: user.nickname,
        muteExpires: null
      }
    });
  } catch (error) {
    logger.error('Error unmuting user:', error);
    res.status(500).json({
      error: 'Failed to unmute user'
    });
  }
});

/**
 * @swagger
 * /api/users:
 *   get:
 *     tags:
 *       - Users
 *     summary: Get list of all registered users
 *     description: Retrieves a list of all users with their roles and online status
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of users successfully retrieved
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 type: object
 *                 properties:
 *                   id:
 *                     type: string
 *                     description: User's unique identifier
 *                   nickname:
 *                     type: string
 *                     description: User's display name
 *                   role:
 *                     type: string
 *                     enum: [admin, moderator, member]
 *                     description: User's role level
 *                   status:
 *                     type: string
 *                     enum: [online, offline]
 *                     description: User's online status
 *                   createdAt:
 *                     type: string
 *                     format: date-time
 *                     description: User registration date
 *                   lastActive:
 *                     type: string
 *                     format: date-time
 *                     description: Last activity timestamp
 *             example:
 *               - id: "507f1f77bcf86cd799439011"
 *                 nickname: "john_doe"
 *                 role: "member"
 *                 status: "online"
 *                 createdAt: "2024-09-07T10:30:00Z"
 *                 lastActive: "2024-09-07T22:15:00Z"
 *       401:
 *         description: Authentication required
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       500:
 *         description: Server error
 */
console.log('🔧 GET /api/users route registered at startup');
app.get('/api/users', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    const users = await User.find({}).select('_id nickname role status createdAt lastActive').sort({
      nickname: 1
    });
    logger.info(`Users list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      totalUsers: users.length
    });
    console.log('📤 Returning users data:', users.length);
    res.json(users);
  } catch (error) {
    logger.error('Error fetching users:', error);
    console.error('❌ Error in GET /api/users:', error.message);
    res.status(500).json({
      error: 'Failed to fetch users',
      code: 'DATABASE_ERROR'
    });
  }
});

// Swagger JSON endpoint
app.get('/api-docs.json', (req, res) => {
  res.removeHeader('Content-Security-Policy');
  res.setHeader('Content-Type', 'application/json');
  res.send(swaggerSpec);
});

// Development and test endpoint to reset rate limiting
app.post('/api/reset-ratelimit', (req, res) => {
  // In a real application, you'd want to get the store from the limiter instance
  // For express-rate-limit v7+, you can access the store like this:
  try {
    const authLimiterStore = authRateLimiter.store;
    if (authLimiterStore && typeof authLimiterStore.resetAll === 'function') {
      authLimiterStore.resetAll();
      console.log('🔄 Rate limiting reset for testing purposes');
      res.json({
        success: true,
        message: 'Rate limiting has been reset'
      });
    } else {
      // If store doesn't expose resetAll, create a temporary workaround
      console.log('⚠️ Rate limiter store doesn\'t support resetAll - rate limiting will expire naturally');
      res.json({
        success: false,
        message: 'Cannot reset rate limiting automatically, wait for timeout'
      });
    }
  } catch (error) {
    console.log('❌ Error resetting rate limiting:', error.message);
    res.status(500).json({
      success: false,
      error: 'Failed to reset rate limiting'
    });
  }
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Performance monitoring endpoints
app.get('/api/health/detailed', getHealthCheck);
app.get('/api/performance/dashboard', (req, res) => {
  // Check if user is admin/moderator
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  getPerformanceDashboard(req, res);
});

// Performance alerts endpoint
app.get('/api/performance/alerts', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }

  // Run alerts check
  performanceMonitor.checkAlerts();
  res.json({
    timestamp: new Date().toISOString(),
    alerts_checked: true,
    message: 'Performance alerts checked - see server logs for any alerts'
  });
});

// Circuit breaker status endpoint
app.get('/api/circuit-breaker/status', (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  const status = getCircuitBreakerStatuses();
  res.json({
    timestamp: new Date().toISOString(),
    services: status
  });
});

// Resource usage optimization endpoint
app.get('/api/optimization/status', async (req, res) => {
  if (!req.user || req.user.role !== 'admin' && req.user.role !== 'moderator') {
    return res.status(403).json({
      error: 'Admin access required'
    });
  }
  try {
    const optimization = {
      timestamp: new Date().toISOString(),
      async_processes: process._getActiveHandles().length,
      memory_usage: process.memoryUsage(),
      connection_metrics: getCachedStats ? await getCachedStats() : {},
      performance_metrics: performanceMonitor.getDetailedStats ? performanceMonitor.getDetailedStats() : {},
      circuit_breakers: getCircuitBreakerStatuses()
    };
    res.json(optimization);
  } catch (error) {
    logger.error('Error getting optimization status:', error);
    res.status(500).json({
      error: 'Failed to get optimization status',
      message: error.message
    });
  }
});

// Log middleware to check incoming requests
app.use((req, res, next) => {
  logger.info(`🔍 Incoming request: ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: req.headers
  });
  next();
});

/**
   * @swagger
   * /api/login:
   *   post:
   *     tags:
   *       - Authentication
   *     summary: Login existing user
   *     description: Authenticates and logs in an existing user with JWT token
   *     requestBody:
   *       required: true
   *       content:
   *         application/json:
   *           schema:
   *             $ref: '#/components/schemas/LoginRequest'
   *     responses:
   *       200:
   *         description: Login successful
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/AuthResponse'
   *             example:
   *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   *               user:
   *                 id: "507f1f77bcf86cd799439011"
   *                 nickname: "john_doe"
   *                 email: "john@example.com"
   *                 role: "member"
   *       400:
   *         description: Invalid credentials or validation errors
   *         content:
   *           application/json:
   *             schema:
   *               $ref: '#/components/schemas/ErrorResponse'
   *             example:
   *               error: "Invalid credentials"
   *       500:
   *         description: Server error
   */
console.log('🔧 POST /api/login route registered at startup');
app.post('/api/login', [body('identifier').isLength({
  min: 1,
  max: 50
}).trim(), body('password').isLength({
  min: 6,
  max: 100
})], async (req, res) => {
  // Use AuthService for login handling
  await authService.handleLoginWithSession(req.body.identifier, req.body.password, req, res);
});

/**
   * @swagger
   * /api/register:
  *   post:
  *     tags:
  *       - Authentication
  *     summary: Register new user
  *     description: Creates a new user account and returns JWT token
  *     requestBody:
  *       required: true
  *       content:
  *         application/json:
  *           schema:
  *             $ref: '#/components/schemas/RegisterRequest'
  *           example:
  *             nickname: "john_doe"
  *             email: "john@example.com"
  *             password: "securePass123"
  *     responses:
  *       201:
  *         description: Registration successful
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/AuthResponse'
  *             example:
  *               token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  *               user:
  *                 id: "507f1f77bcf86cd799439011"
  *                 nickname: "john_doe"
  *                 email: "john@example.com"
  *                 role: "member"
  *       400:
  *         description: Validation errors or user already exists
  *         content:
  *           application/json:
  *             schema:
  *               $ref: '#/components/schemas/ErrorResponse'
  *             example:
  *               error: "Nickname already taken"
  *       500:
  *         description: Server error
  */
app.post('/api/register', authService.authRateLimiter, [body('nickname').isLength({
  min: 3,
  max: 50
}).trim().escape(), body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
})], async (req, res) => {
  // Use AuthService for registration handling
  await authService.handleRegistrationWithSession(req.body, req, res);
});

/**
 * @swagger
 * /api/channels:
 *   get:
 *     tags:
 *       - Channels
 *     summary: Get list of channels
 *     description: Retrieves a list of all available channels
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: List of channels
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/Channel'
 *             example:
 *               - id: "general"
 *                 name: "General"
 *                 type: "text"
 *                 description: ""
 *                 createdBy: "system"
 *                 position: 0
 *       401:
 *         description: Unauthorized
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *             example:
 *               error: "Access token required"
 *       500:
 *         description: Internal server error
 */
console.log('🔧 GET /api/channels route registered at startup');
app.get('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  console.log('🚀 GET /api/channels endpoint called', {
    method: req.method,
    url: req.url,
    headers: req.headers.authorization ? 'auth header present' : 'no auth header'
  });
  try {
    const channels = await Channel.find({}).select('-_id id name type description createdBy position').sort({
      position: 1
    });
    logger.info(`Channels list requested by ${req.user.nickname}`, {
      userId: req.user._id,
      channelCount: channels.length
    });
    console.log('📤 Returning channels data:', channels.length);
    res.json(channels);
  } catch (error) {
    logger.error('Error fetching channels:', error);
    console.error('❌ Error in GET /api/channels:', error.message);
    res.status(500).json({
      error: 'Failed to fetch channels',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/channels route registered at startup');

/**
 * @swagger
 * /api/channels:
 *   post:
 *     tags:
 *       - Channels
 *     summary: Create a new channel
 *     description: Creates a new text or voice channel
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/ChannelRequest'
 *           example:
 *             name: "NewChannel"
 *             type: "text"
 *             description: "Description of the new channel"
 *     responses:
 *       201:
 *         description: Channel created successfully
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/Channel'
 *             example:
 *               id: "newchannel"
 *               name: "NewChannel"
 *               type: "text"
 *               description: "Description of the new channel"
 *               createdBy: "john_doe"
 *               position: 10
 *       400:
 *         description: Invalid request data
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 *       401:
 *         description: Unauthorized
 *       409:
 *         description: Channel name already exists
 *       500:
 *         description: Server error
 */
app.post('/api/channels', authService.authenticateToken.bind(authService), apiRateLimiter, [body('name').isLength({
  min: 1,
  max: 100
}).trim().escape(), body('type').isIn(['text', 'voice']).trim(), body('description').optional().isLength({
  max: 500
}).trim()], async (req, res) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        errors: errors.array()
      });
    }
    const {
      name,
      type,
      description
    } = req.body;
    const createdBy = req.user.nickname;

    // Create new channel (ID will be auto-generated in pre-save middleware)
    const channel = new Channel({
      name,
      type,
      description,
      createdBy
    });
    await channel.save();
    logger.info(`Channel '${name}' created by ${createdBy}`, {
      channelId: channel.id,
      type,
      userId: req.user._id
    });
    res.status(201).json({
      id: channel.id,
      name: channel.name,
      type: channel.type,
      description: channel.description,
      createdBy: channel.createdBy,
      position: channel.position
    });
  } catch (error) {
    logger.error('Error creating channel:', error);
    if (error.name === 'ValidationError') {
      return res.status(400).json({
        error: 'Invalid channel data',
        details: error.message
      });
    }
    if (error.code === 11000) {
      return res.status(409).json({
        error: 'Channel name already exists',
        code: 'DUPLICATE_CHANNEL'
      });
    }
    res.status(500).json({
      error: 'Failed to create channel',
      code: 'DATABASE_ERROR'
    });
  }
});
console.log('🔧 POST /api/logout route registered at startup');
app.post('/api/logout', authService.authenticateToken.bind(authService), apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Logout request from user:', req.user.nickname, {
      userId: req.user._id
    });

    // Disconnect all Socket.IO connections for this user
    const sockets = onlineUsers;
    let disconnectedCount = 0;
    for (const [socketId, socketData] of sockets.entries()) {
      if (socketData.userId === req.user._id.toString()) {
        const socket = io.sockets.sockets.get(socketId);
        if (socket) {
          socket.disconnect();
          disconnectedCount++;
        }
      }
    }

    // Update user status to offline
    await User.findByIdAndUpdate(req.user._id, {
      status: 'offline',
      lastActive: new Date()
    });
    console.log(`✅ User ${req.user.nickname} logged out successfully, ${disconnectedCount} connections disconnected`);
    logger.info(`User logged out: ${req.user.nickname}`, {
      userId: req.user._id,
      disconnectedSockets: disconnectedCount
    });
    res.json({
      success: true,
      message: 'Logged out successfully',
      disconnectedCount
    });
  } catch (error) {
    logger.error('Logout error:', error);
    res.status(500).json({
      error: 'Server error during logout'
    });
  }
});

/**
 * Session logout endpoint - destroys session
 * This complements JWT logout to handle session-based authentication
 */
app.post('/api/logout_session', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Session logout request, sessionId:', req.sessionId);

    // Check if there's an authenticated session or JWT user
    const hasJwtAuth = !!req.user; // From JWT middleware
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    console.log('🤔 Session logout check:', {
      hasJwtAuth,
      hasSessionAuth,
      sessionUserId,
      sessionId: req.sessionId
    });
    if (hasSessionAuth) {
      const sessionUser = sessionUserId ? await User.findById(sessionUserId) : null;
      const nickname = sessionUser ? sessionUser.nickname : 'unknown';
      console.log('✅ Session logout: Destroying session for user:', nickname);

      // Disconnect Socket.IO connections for this session user
      if (sessionUserId) {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === sessionUserId) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
      }

      // Destroy the session
      await new Promise((resolve, reject) => {
        req.session.destroy(err => {
          if (err) {
            console.error('❌ Session destroy error:', err);
            reject(err);
          } else {
            console.log('✅ Session destroyed successfully');
            resolve();
          }
        });
      });
      logger.info(`Session logged out: ${nickname}`, {
        sessionId: req.sessionId,
        ip: req.ip
      });
      res.json({
        success: true,
        message: 'Session logged out successfully',
        type: 'session_logout',
        sessionDestroyed: true
      });
    } else {
      console.log('⚠️ Session logout: No authenticated session to destroy');
      res.json({
        success: true,
        message: 'No active session to log out',
        type: 'session_logout',
        sessionDestroyed: false
      });
    }
  } catch (error) {
    logger.error('Session logout error:', error);
    res.status(500).json({
      error: 'Server error during session logout',
      code: 'SESSION_LOGOUT_ERROR'
    });
  }
});

// Hybrid logout endpoint - handles both JWT and session logout
app.post('/api/logout_complete', apiRateLimiter, async (req, res) => {
  try {
    console.log('🚪 Complete logout request (JWT + Session), sessionId:', req.sessionId);
    const hasJwtAuth = !!req.user;
    const hasSessionAuth = req.sessionUser || req.session && req.session.authenticated;
    const sessionUserId = req.session && req.session.userId;
    let jwtLogoutResult = null;
    let sessionLogoutResult = null;

    // Handle JWT logout if JWT is provided
    if (hasJwtAuth) {
      try {
        const sockets = onlineUsers;
        let disconnectedCount = 0;
        for (const [socketId, socketData] of sockets.entries()) {
          if (socketData.userId === req.user._id.toString()) {
            const socket = io.sockets.sockets.get(socketId);
            if (socket) {
              socket.disconnect();
              disconnectedCount++;
            }
          }
        }
        await User.findByIdAndUpdate(req.user._id, {
          status: 'offline',
          lastActive: new Date()
        });
        jwtLogoutResult = {
          success: true,
          disconnectedCount
        };
      } catch (jwtError) {
        jwtLogoutResult = {
          success: false,
          error: jwtError.message
        };
      }
    }

    // Handle session logout if session exists
    if (hasSessionAuth) {
      try {
        if (sessionUserId) {
          const sessionUser = await User.findById(sessionUserId);
          console.log('✅ Session logout: Destroying session for user:', sessionUser ? sessionUser.nickname : 'unknown');

          // Disconnect Socket.IO connections for this session user
          const sockets = onlineUsers;
          let disconnectedCount = 0;
          for (const [socketId, socketData] of sockets.entries()) {
            if (socketData.userId === sessionUserId) {
              const socket = io.sockets.sockets.get(socketId);
              if (socket) {
                socket.disconnect();
                disconnectedCount++;
              }
            }
          }
          console.log(`🗑️ Session logout: Disconnected ${disconnectedCount} socket connections`);
        }

        // Destroy the session
        await new Promise((resolve, reject) => {
          req.session.destroy(err => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
        sessionLogoutResult = {
          success: true,
          sessionDestroyed: true
        };
      } catch (sessionError) {
        sessionLogoutResult = {
          success: false,
          error: sessionError.message
        };
      }
    }
    const overallSuccess = (!jwtLogoutResult || jwtLogoutResult.success) && (!sessionLogoutResult || sessionLogoutResult.success);
    res.json({
      success: overallSuccess,
      message: 'Complete logout processed',
      type: 'complete_logout',
      jwt: jwtLogoutResult,
      session: sessionLogoutResult
    });
  } catch (error) {
    logger.error('Complete logout error:', error);
    res.status(500).json({
      error: 'Server error during complete logout',
      code: 'COMPLETE_LOGOUT_ERROR'
    });
  }
});

//  404 handler (must be before global error handler)
app.use((req, res) => {
  console.warn('❌ Final 404 handler executed - route not found!', {
    method: req.method,
    url: req.url
  });
  logger.warn(`404 - ${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });
  res.status(404).json({
    error: 'Endpoint not found',
    path: req.url,
    method: req.method,
    code: 'NOT_FOUND'
  });
});

// Global error handling middleware (must be last)
app.use(errorHandler);

// Global users map for socket management {socketId: {userId, nickname, room}}
let onlineUsers = new Map();

// User connection counter {userId: connectionCount}
let userConnections = new Map();

// Voice channels management
const voiceChannels = new Map(); // channelId -> { socketId: { peerConnection, stream } }

// Improved Socket.IO session middleware with proper res object handling
io.use((socket, next) => {
  // Create a more complete mock res object if missing
  if (!socket.request.res) {
    socket.request.res = {
      setHeader: () => {},
      getHeader: () => {},
      writeHead: () => {},
      end: () => {},
      headersSent: false,
      statusCode: 200
    };
  }

  // Apply session middleware with error handling
  sessionMiddleware(socket.request, socket.request.res, err => {
    if (err) {
      console.error('Session middleware error for Socket.IO:', err);
      return next(err);
    }
    next();
  });
});

// Socket.IO authentication middleware
io.use(async (socket, next) => {
  const {
    csrfToken,
    sessionId
  } = socket.handshake.auth;
  let session = socket.request.session;

  // console.log('🔑 Socket authentication attempt with session and CSRF fingerprint check');
  // console.log('🔍 Raw socket auth data:', {
  //   csrfTokenProvided: !!csrfToken,
  //   sessionIdProvided: !!sessionId,
  //   sessionIdLength: sessionId?.length,
  //   sessionIdFromAuth: sessionId
  // });

  // If sessionId is provided in auth, try to recover the session from MongoDB store
  if (sessionId && (!session || !session.authenticated)) {
    // console.log('🔄 Attempting session recovery from MongoDB store using sessionId:', sessionId);

    try {
      // Load session from MongoDB store using the sessionId from JWT auth
      const MongoStoreInstance = sessionMiddleware.store;
      if (MongoStoreInstance && typeof MongoStoreInstance.get === 'function') {
        const sessionData = await new Promise((resolve, reject) => {
          MongoStoreInstance.get(sessionId, (err, data) => {
            if (err) reject(err);else resolve(data);
          });
        });

        // console.log('🔄 MongoDB session lookup result:', {
        //   sessionFound: !!sessionData,
        //   sessionAuthenticated: sessionData?.authenticated,
        //   sessionUserId: sessionData?.userId,
        //   sessionCsrfToken: !!sessionData?.csrfToken,
        //   csrfTokenMatches: csrfToken && sessionData?.csrfToken && csrfToken === sessionData.csrfToken
        // });

        if (sessionData && sessionData.authenticated) {
          // Replace socket.request.session with loaded session
          socket.request.session = sessionData;
          session = sessionData;
          console.log('✅ Socket session recovered from MongoDB');
        } else {
          console.log('⚠️ Socket session not found in MongoDB store');
        }
      }
    } catch (error) {
      console.error('❌ Error loading SOCKET session from MongoDB:', error.message);
    }
  }
  console.log('🔓 Fingerprint verification:', {
    sid: socket.request.sessionId,
    providedCsrfToken: csrfToken?.substring(0, 8) + '...',
    sessionCsrfToken: session?.csrfToken?.substring(0, 8) + '...',
    userAgent: socket.request.session?.userAgent?.substring(0, 20) + '...',
    loginTime: session?.loginTime,
    registrationTime: session?.registrationTime
  });

  // Validate session exists and has authentication
  if (!session || !session.authenticated || !session.userId) {
    console.log('❌ Socket authentication failed: No authenticated session found');
    console.log('📋 Session details:', {
      sessionId: socket.request.sessionId,
      session: !!session,
      authenticated: session?.authenticated,
      userId: session?.userId
    });
    return next(new Error('Session authentication required'));
  }

  // Validate CSRF token for additional security (must match session's unique CSRF token)
  if (!csrfToken || !session.csrfToken || csrfToken !== session.csrfToken) {
    console.log('❌ Socket authentication failed: Invalid CSRF token fingerprint');
    console.log('🔒 Fingerprint mismatch details:', {
      provided: csrfToken?.substring(0, 8) + '...',
      expected: session.csrfToken?.substring(0, 8) + '...',
      match: csrfToken === session.csrfToken
    });
    return next(new Error('CSRF validation failed'));
  }
  console.log('✅ Socket fingerprint verification successful');
  try {
    // Verify user exists in database
    const user = await User.findById(session.userId);
    if (!user) {
      console.log('❌ Socket authentication failed: User not found in DB');
      return next(new Error('User not found in session'));
    }

    // Handle user status update based on connection count
    const userId = session.userId;
    const connectionCount = userConnections.get(userId) || 0;
    const newConnectionCount = connectionCount + 1;
    userConnections.set(userId, newConnectionCount);

    // Check if user is banned
    if (user.isBanned()) {
      console.log('❌ Socket authentication failed: User is banned', {
        userId: userId,
        nickname: user.nickname,
        banReason: user.banReason,
        banExpires: user.banExpires
      });
      socket.emit('banned', {
        reason: user.banReason || 'You have been banned from the server',
        expires: user.banExpires
      });
      return next(new Error('User is banned'));
    }

    // Check if user is muted and enforce mute in chat
    const isMuted = user.isMuted();
    console.log('🔇 User mute status checked:', {
      nickname: user.nickname,
      isMuted,
      muteExpires: user.muteExpires
    });

    // Update user status with connection count tracking
    const updateResult = await User.findOneAndUpdate({
      _id: userId
    }, {
      $set: {
        status: newConnectionCount > 0 ? 'online' : 'offline',
        lastActive: new Date()
      }
    }, {
      new: true,
      runValidators: true
    });
    if (updateResult) {
      console.log(`🔄 Socket auth: User ${user.nickname} status set to online (connections: ${newConnectionCount})`);
      logger.info(`User status updated to online via socket auth`, {
        userId: userId,
        nickname: user.nickname,
        connections: newConnectionCount,
        socketId: socket.id,
        timestamp: new Date()
      });
    }

    // Override local user object with updated data
    user.status = updateResult ? updateResult.status : 'online';
    user.lastActive = updateResult ? updateResult.lastActive : new Date();

    // Set socket properties for authenticated user
    socket.userId = session.userId;
    socket.nickname = session.nickname;
    socket.role = session.role || 'member';
    console.log(`🎉 Socket authenticated via session: ${socket.nickname} (userId: ${socket.userId})`);
    console.log('Socket authentication successful');
    return next();
  } catch (error) {
    console.error('❌ Socket authentication error:', error.message);
    logger.error(`Socket auth failed: ${error.message}`, {
      socketId: socket.id,
      sessionId: session?.id,
      ip: socket.handshake.address
    });
    return next(new Error('Socket authentication failed'));
  }
});

/**
 * Cleanup inactive connections based on heartbeat
 */
function cleanupInactiveConnections() {
  const now = Date.now();
  const timeout = 60000; // 60 seconds timeout

  for (const [socketId, user] of onlineUsers.entries()) {
    if (now - user.lastHeartbeat > timeout) {
      console.log(`🧹 Cleansing dead connection for user ${user.nickname}`);

      // Force disconnect socket
      const socket = io.sockets.sockets.get(socketId);
      if (socket) {
        socket.disconnect(true);
      }

      // Update user connections count
      const connectionsLeft = (userConnections.get(user.userId) || 0) - 1;
      userConnections.set(user.userId, Math.max(0, connectionsLeft));

      // Set status to offline if last connection
      if (connectionsLeft <= 0) {
        User.findByIdAndUpdate(user.userId, {
          status: 'offline',
          lastActive: new Date()
        }).catch(err => logger.error('Error updating status on cleanup:', err));
        console.log(`🔄 User ${user.nickname} status set to offline (dead connection)`);
        logger.info(`User status set to offline due to dead connection`, {
          userId: user.userId,
          nickname: user.nickname,
          socketId: socketId
        });
      }
      onlineUsers.delete(socketId);
    }
  }
}

// Run cleanup every 30 seconds - DISABLED for test environment
if (process.env.NODE_ENV !== 'test') {
  setInterval(cleanupInactiveConnections, 30000);
}
io.on('connection', async socket => {
  console.log('🚀 Socket connection established');
  console.log(`👤 User ${socket.nickname} connected`);

  // Track online user
  onlineUsers.set(socket.id, {
    userId: socket.userId,
    nickname: socket.nickname,
    role: socket.role,
    room: null,
    lastHeartbeat: Date.now()
  });

  // Log current active connections count
  console.log(`📊 Active socket connections: ${onlineUsers.size} - auth success for ${socket.nickname}`);

  // Enhanced heartbeat mechanism with reconnection logic
  socket.on('heartbeat', () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      const now = Date.now();
      user.lastHeartbeat = now;
      console.log(`💓 Heartbeat received from user ${socket.nickname} at ${new Date(now).toISOString()}`);
    } else {
      logger.warn(`Heartbeat received from unknown socket: ${socket.id}`);
    }
  });

  // Update heartbeat on user activity
  const updateHeartbeat = () => {
    const user = onlineUsers.get(socket.id);
    if (user) {
      user.lastHeartbeat = Date.now();
    }
  };

  // Send heartbeat to client periodically
  const heartbeatInterval = setInterval(() => {
    if (socket.connected) {
      socket.emit('heartbeat_request');
    }
  }, 15000); // Send heartbeat every 15 seconds

  // Clear interval on disconnect
  socket.on('disconnect', () => {
    clearInterval(heartbeatInterval);
    // ... rest of disconnect logic
  });

  // Utility function for retrying database operations
  const retryDatabaseOperation = async (operation, retries = 3) => {
    for (let i = 0; i <= retries; i++) {
      try {
        return await operation();
      } catch (error) {
        if (i === retries) throw error;
        logger.warn(`Database operation failed, retry ${i + 1}/${retries}:`, error.message);
        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1))); // Exponential backoff
      }
    }
  };
  socket.on('join_room', async data => {
    updateHeartbeat();
    const {
      room
    } = data;
    if (!room) {
      logger.warn('Join room failed: No room specified', {
        userId: socket.userId,
        nickname: socket.nickname
      });
      socket.emit('error', {
        message: 'Room name is required',
        code: 'MISSING_ROOM',
        timestamp: new Date().toISOString()
      });
      return;
    }
    if (typeof room !== 'string' || room.trim().length === 0) {
      logger.warn('Join room failed: Invalid room format', {
        userId: socket.userId,
        nickname: socket.nickname,
        room
      });
      socket.emit('error', {
        message: 'Invalid room name format',
        code: 'INVALID_ROOM_FORMAT',
        timestamp: new Date().toISOString()
      });
      return;
    }
    try {
      await retryDatabaseOperation(async () => {
        // Verify channel exists
        const channel = await Channel.findOne({
          id: room
        });
        if (!channel) {
          logger.warn('Join room failed: Channel not found', {
            userId: socket.userId,
            nickname: socket.nickname,
            room
          });
          socket.emit('error', {
            message: `Channel '${room}' not found`,
            code: 'CHANNEL_NOT_FOUND',
            room,
            timestamp: new Date().toISOString()
          });
          throw new Error('Channel not found');
        }

        // Leave previous room
        if (socket.room) {
          socket.leave(socket.room);
          onlineUsers.set(socket.id, {
            ...onlineUsers.get(socket.id),
            room: null
          });

          // Update online users in previous room
          const previousRoomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
            nickname: u.nickname,
            role: u.role
          }));
          io.to(socket.room).emit('online_users', previousRoomUsers);
        }
        socket.room = room;
        socket.join(socket.room);

        // Update user tracking
        onlineUsers.set(socket.id, {
          ...onlineUsers.get(socket.id),
          room: socket.room
        });
        logger.info(`User ${socket.nickname} joined room ${socket.room}`);

        // Send system message about joining
        const joinMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} joined the channel.`,
          type: 'system'
        });
        await joinMessage.save();
        io.to(socket.room).emit('message', {
          author: joinMessage.author,
          channel: joinMessage.channel,
          text: joinMessage.text,
          type: joinMessage.type,
          timestamp: joinMessage.timestamp
        });

        // Send online users in current room
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);

        // Send message history
        const history = await Message.find({
          channel: socket.room,
          $or: [{
            type: 'public'
          }, {
            type: 'system'
          }, {
            author: socket.nickname
          }, {
            target: socket.nickname
          }]
        }).sort({
          timestamp: -1
        }).limit(100).sort({
          timestamp: 1
        }); // Resort for chronological order

        socket.emit('history', history.map(msg => ({
          author: msg.author,
          room: msg.channel,
          text: msg.text,
          type: msg.type,
          target: msg.target,
          timestamp: msg.timestamp
        })));
      });
    } catch (error) {
      logger.error('Error in join_room after retries:', error);
      socket.emit('error', {
        message: 'Failed to join room after multiple attempts',
        code: 'JOIN_ROOM_FAILED',
        timestamp: new Date().toISOString()
      });
    }
  });

  // Load history (fallback, if needed)
  socket.on('get_history', async () => {
    if (!socket.room) {
      socket.emit('history', []);
      return;
    }
    try {
      const history = await Message.find({
        channel: socket.room,
        $or: [{
          type: 'public'
        }, {
          type: 'system'
        }, {
          author: socket.nickname
        }, {
          target: socket.nickname
        }]
      }).sort({
        timestamp: -1
      }).limit(100).sort({
        timestamp: 1
      }); // Resort for chronological order

      socket.emit('history', history.map(msg => ({
        author: msg.author,
        room: msg.channel,
        // Using channel instead of room for consistency
        text: msg.text,
        type: msg.type,
        target: msg.target,
        timestamp: msg.timestamp
      })));
    } catch (error) {
      logger.error('Error getting history:', error);
      socket.emit('error', {
        message: 'Failed to load message history'
      });
    }
  });

  // Public message
  socket.on('message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.text?.trim()) return;

    // Check if user is muted
    const currentUser = await User.findById(socket.userId);
    if (currentUser && currentUser.isMuted()) {
      socket.emit('error', {
        message: 'You are muted and cannot send messages',
        code: 'USER_MUTED',
        muteExpires: currentUser.muteExpires
      });
      return;
    }
    try {
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: data.text.trim(),
        type: 'public'
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        // Keeping 'room' for frontend compatibility
        text: message.text,
        timestamp: message.timestamp,
        status: 'delivered',
        type: message.type
      };
      io.to(socket.room).emit('message', messageData);
      logger.debug(`Message saved from ${socket.nickname} in ${socket.room}`);
    } catch (error) {
      logger.error('Error saving message:', error);
      socket.emit('error', {
        message: 'Failed to send message'
      });
    }
  });

  // Private message
  socket.on('private_message', async data => {
    updateHeartbeat();
    if (!socket.room || !data.to || !data.text?.trim()) return;
    const trimmedText = data.text.trim();
    const targetNickname = data.to.trim();
    try {
      logger.debug(`Private message attempt from ${socket.nickname} to ${targetNickname}`, {
        senderRoom: socket.room,
        senderSocketId: socket.id,
        userId: socket.userId
      });

      // Validate target nickname format
      if (targetNickname.length === 0 || targetNickname.length > 50) {
        socket.emit('error', {
          message: 'Invalid target user nickname',
          code: 'INVALID_TARGET_NICKNAME'
        });
        return;
      }

      // Prevent self-messaging
      if (targetNickname === socket.nickname) {
        socket.emit('error', {
          message: 'Cannot send private message to yourself',
          code: 'SELF_MESSAGE_NOT_ALLOWED'
        });
        return;
      }

      // Find target user in same room with detailed logging
      const targetUser = Array.from(onlineUsers.values()).find(u => u.nickname === targetNickname && u.room === socket.room);
      logger.debug(`Private message target search result for ${targetNickname}`, {
        targetFound: !!targetUser,
        targetRoom: targetUser?.room,
        senderRoom: socket.room,
        onlineUsersInRoom: Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => ({
          nickname: u.nickname,
          room: u.room
        }))
      });
      if (!targetUser) {
        // Enhanced error message with more context
        const onlineUsersInSenderRoom = Array.from(onlineUsers.values()).filter(u => u.room === socket.room).map(u => u.nickname);
        socket.emit('error', {
          message: `User '${targetNickname}' is not available in this channel. Available users: ${onlineUsersInSenderRoom.join(', ') || 'none'}`,
          code: 'TARGET_USER_NOT_IN_ROOM',
          target: targetNickname,
          availableUsers: onlineUsersInSenderRoom,
          senderRoom: socket.room
        });
        return;
      }

      // Create message object
      const message = new Message({
        author: socket.nickname,
        channel: socket.room,
        text: trimmedText,
        type: 'private',
        target: targetNickname
      });
      await message.save();
      const messageData = {
        author: message.author,
        room: message.channel,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: message.target,
        status: 'delivered'
      };

      // Send to target user with error handling
      const targetSocketId = Array.from(onlineUsers.keys()).find(id => onlineUsers.get(id).nickname === targetNickname);
      if (targetSocketId) {
        io.to(targetSocketId).emit('private_message', messageData);
        logger.debug(`Private message sent to target ${targetNickname}`, {
          targetSocketId: targetSocketId,
          sender: socket.nickname,
          room: socket.room,
          messageId: message._id
        });
      } else {
        logger.warn(`Target user ${targetNickname} found in onlineUsers but socket ID not found`, {
          targetNickname,
          room: socket.room,
          onlineUsersCount: onlineUsers.size,
          messageId: message._id
        });
        // Message still saved to database for later delivery if user reconnects
      }

      // Send confirmation to sender (without target for privacy)
      socket.emit('private_message', {
        author: message.author,
        room: message.room,
        text: message.text,
        timestamp: message.timestamp,
        type: message.type,
        target: null,
        // Hide target from sender's confirmation
        status: 'sent'
      });
      logger.info(`Private message sent successfully`, {
        sender: socket.nickname,
        target: targetNickname,
        room: socket.room,
        messageId: message._id,
        messageLength: trimmedText.length
      });
    } catch (error) {
      logger.error('Error sending private message:', {
        error: error.message,
        sender: socket.nickname,
        target: data.to,
        room: socket.room,
        userId: socket.userId,
        stack: error.stack
      });
      socket.emit('error', {
        message: 'Failed to send private message',
        code: 'PRIVATE_MESSAGE_FAILED'
      });
    }
  });

  // Speaking
  socket.on('speaking', data => {
    updateHeartbeat();
    socket.to(socket.room).emit('speaking', {
      nickname: socket.nickname,
      speaking: data.speaking
    });
  });

  // Voice channel events
  socket.on('join_voice_channel', async data => {
    updateHeartbeat();
    const {
      channelId
    } = data;
    if (!channelId) return;
    try {
      // Verify channel exists and is voice
      const channel = await Channel.findOne({
        id: channelId,
        type: 'voice'
      });
      if (!channel) {
        socket.emit('voice_error', {
          message: 'Voice channel not found'
        });
        return;
      }

      // Initialize voice channel if not exists
      if (!voiceChannels.has(channelId)) {
        voiceChannels.set(channelId, new Map());
      }
      const channelPeers = voiceChannels.get(channelId);

      // Notify others in the channel
      socket.to(channelId).emit('user_joined_voice', {
        nickname: socket.nickname,
        socketId: socket.id
      });

      // Add socket to voice channel room
      socket.join(channelId);
      channelPeers.set(socket.id, {
        peerConnection: null,
        stream: null
      });

      // Update user's voice channel status
      socket.voiceChannel = channelId;
      logger.info(`User ${socket.nickname} joined voice channel ${channelId}`);
      socket.emit('voice_joined', {
        channelId
      });
    } catch (error) {
      logger.error('Error joining voice channel:', error);
      socket.emit('voice_error', {
        message: 'Failed to join voice channel'
      });
    }
  });
  socket.on('leave_voice_channel', () => {
    updateHeartbeat();
    if (!socket.voiceChannel) return;
    const channelId = socket.voiceChannel;
    const channelPeers = voiceChannels.get(channelId);
    if (channelPeers) {
      channelPeers.delete(socket.id);
      if (channelPeers.size === 0) {
        voiceChannels.delete(channelId);
      }
    }

    // Notify others
    socket.to(channelId).emit('user_left_voice', {
      nickname: socket.nickname,
      socketId: socket.id
    });
    socket.leave(channelId);
    socket.voiceChannel = null;
    logger.info(`User ${socket.nickname} left voice channel ${channelId}`);
    socket.emit('voice_left');
  });
  socket.on('voice_offer', data => {
    const {
      offer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_offer', {
      offer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('voice_answer', data => {
    const {
      answer,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('voice_answer', {
      answer,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });
  socket.on('ice_candidate', data => {
    const {
      candidate,
      targetSocketId
    } = data;
    socket.to(targetSocketId).emit('ice_candidate', {
      candidate,
      from: socket.id,
      fromNickname: socket.nickname
    });
  });

  // Disconnect
  socket.on('disconnect', async () => {
    logger.info(`User ${socket.nickname} disconnected`);
    try {
      const userId = socket.userId;

      // Decrease connection count for this user
      if (userId) {
        const currentCount = userConnections.get(userId) || 0;
        const newCount = Math.max(0, currentCount - 1);
        userConnections.set(userId, newCount);
        logger.info(`User ${socket.nickname} disconnected (remaining connections: ${newCount})`, {
          userId: userId,
          socketId: socket.id,
          connectionsLeft: newCount
        });
      }

      // Leave voice channel if in one
      if (socket.voiceChannel) {
        const channelId = socket.voiceChannel;
        const channelPeers = voiceChannels.get(channelId);
        if (channelPeers) {
          channelPeers.delete(socket.id);
          if (channelPeers.size === 0) {
            voiceChannels.delete(channelId);
          }
        }

        // Notify others
        socket.to(channelId).emit('user_left_voice', {
          nickname: socket.nickname,
          socketId: socket.id
        });
      }
      if (socket.room) {
        socket.leave(socket.room);

        // Create leave message
        const leaveMessage = new Message({
          author: 'System',
          channel: socket.room,
          text: `${socket.nickname} left the channel.`,
          type: 'system'
        });
        await leaveMessage.save();
        io.to(socket.room).emit('message', {
          author: leaveMessage.author,
          room: leaveMessage.channel,
          text: leaveMessage.text,
          type: leaveMessage.type,
          timestamp: leaveMessage.timestamp
        });

        // Update online users list
        const roomUsers = Array.from(onlineUsers.values()).filter(u => u.room === socket.room && u.userId !== socket.userId).map(u => ({
          nickname: u.nickname,
          role: u.role
        }));
        io.to(socket.room).emit('online_users', roomUsers);
      }

      // Remove from tracking
      onlineUsers.delete(socket.id);

      // Log current connections after disconnect
      logger.info(`After disconnect, active socket connections: ${onlineUsers.size}`);

      // Update user status in database if this was the last connection
      if (userId) {
        const remainingConnections = userConnections.get(userId) || 0;
        if (remainingConnections === 0) {
          await User.findByIdAndUpdate(userId, {
            status: 'offline',
            lastActive: new Date()
          });
          console.log(`🔄 User ${socket.nickname} status set to offline (last connection)`);
          logger.info(`User status set to offline (last connection)`, {
            userId: userId,
            nickname: socket.nickname
          });
        } else {
          // Update lastActive but keep status online
          await User.findByIdAndUpdate(userId, {
            lastActive: new Date()
          });
          console.log(`✅ User ${socket.nickname} still online (${remainingConnections} connections left)`);
          logger.info(`User remains online`, {
            userId: userId,
            nickname: socket.nickname,
            connectionsLeft: remainingConnections
          });
        }
      }
    } catch (error) {
      logger.error('Error in disconnect handler:', error);
    }
  });
});

// Initialize database and start server (duplicate removed)
const initializeServer = async () => {
  try {
    // Connect to MongoDB
    await connectDB();

    // Create default channels if they don't exist
    const defaultChannels = [{
      id: 'general',
      name: 'General',
      type: 'text',
      createdBy: 'system'
    }, {
      id: 'voice-chat',
      name: 'Voice Chat',
      type: 'voice',
      createdBy: 'system'
    }];
    for (const channelData of defaultChannels) {
      await Channel.findOneAndUpdate({
        id: channelData.id
      }, channelData, {
        upsert: true,
        new: true
      });
    }
    logger.info('Default channels initialized');

    // Start server
    const PORT = process.env.PORT || 3001;
    server.listen(PORT, '0.0.0.0', () => {
      logger.info(`Server running on port ${PORT}`);
      console.log(`Server running on port ${PORT}`);
    });
  } catch (error) {
    logger.error('Failed to initialize server:', error);
    process.exit(1);
  }
};

// Graceful shutdown
process.on('SIGINT', async () => {
  logger.info('Received SIGINT, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});
process.on('SIGTERM', async () => {
  logger.info('Received SIGTERM, shutting down gracefully...');
  await closeDB();
  io.close(() => {
    logger.info('Server shut down');
    process.exit(0);
  });
});

// Optimize critical server functions
const optimizedInitializeDatabase = asyncOptimize(initializeServer, {
  concurrency: 1,
  timeout: 60000,
  slowThreshold: 10000
});

// Start the server with async optimization
if (process.env.NODE_ENV !== 'test') {
  optimizedInitializeDatabase().catch(err => {
    logger.error('Unhandled error during server startup:', err);
    process.exit(1);
  });
}

// Memory cleanup on long-running operations
setInterval(() => {
  if (global.gc) {
    global.gc();
    logger.debug('Manual garbage collection triggered');
  }
}, 300000); // Every 5 minutes

// Handle uncaught exceptions with circuit breaker protection
process.on('uncaughtException', error => {
  logger.error('Uncaught Exception:', error);
  // Don't exit immediately, let circuit breaker handle recovery
  setTimeout(() => {
    if (externalServiceBreaker.databaseBreaker.failureCount > 10) {
      logger.error('Multiple uncaught exceptions detected, forcing graceful shutdown');
      process.exit(1);
    }
  }, 1000);
});

// Handle unhandled promise rejections
process.on('unhandledRejection', (reason, promise) => {
  logger.error('Unhandled Rejection at:', promise, 'reason:', reason);
  // Don't exit, just log and let circuit breaker handle
});

// Graceful shutdown with resource cleanup
process.on('SIGTERM', async () => {
  logger.info('SIGTERM received, starting graceful shutdown...');
  try {
    // Close external service connections
    const circuitStatus = getCircuitBreakerStatuses();
    logger.info('Circuit breaker final status:', circuitStatus);

    // Clean up any remaining resources
    await closeDB();

    // Log final metrics
    const finalMetrics = performanceMonitor.getDetailedStats();
    logger.info('Final performance metrics:', {
      uptime: finalMetrics.uptime,
      totalRequests: finalMetrics.endpointStats ? Object.values(finalMetrics.endpointStats).reduce((acc, endpoint) => acc + (endpoint.count || 0), 0) : 0,
      memoryPeak: finalMetrics.memory?.heapTotal || 0
    });
    io.close(() => {
      logger.info('Server graceful shutdown complete');
      process.exit(0);
    });
  } catch (error) {
    logger.error('Error during graceful shutdown:', error);
    process.exit(1);
  }
});

// Periodic health self-assessment
setInterval(() => {
  const healthData = performanceMonitor.getHealthData();

  // Self-monitor critical metrics
  if (healthData.requests.averageResponseTime > 5000) {
    logger.warn('🚨 Self-monitor: High average response time detected', {
      avgTime: `${healthData.requests.averageResponseTime}ms`,
      threshold: '5000ms',
      timestamp: new Date().toISOString()
    });
  }
  if (healthData.memory.usagePercent > 0.9) {
    logger.warn('🚨 Self-monitor: High memory usage detected', {
      usage: healthData.memory.percentage,
      threshold: '90%',
      timestamp: new Date().toISOString()
    });

    // Trigger proactive cleanup
    if (global.gc) {
      global.gc();
      logger.info('🧹 Proactive garbage collection triggered');
    }
  }

  // Check circuit breaker status
  const circuitStatus = getCircuitBreakerStatuses();
  if (circuitStatus.database?.state === 'open') {
    logger.warn('🚨 Self-monitor: Database circuit breaker is OPEN', circuitStatus.database);
  }
  if (circuitStatus.redis?.state === 'open') {
    logger.warn('🚨 Self-monitor: Redis circuit breaker is OPEN', circuitStatus.redis);
  }
}, 60000); // Check every minute

module.exports = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJzb2NrZXRJbyIsImp3dCIsImNvcnMiLCJ3aW5zdG9uIiwic3dhZ2dlckpzZG9jIiwic3dhZ2dlclVpIiwiaGVsbWV0IiwicmF0ZUxpbWl0IiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJtb25nb29zZSIsImNyeXB0byIsInNlc3Npb24iLCJSZWRpc1N0b3JlIiwicmVkaXNNYW5hZ2VyIiwiY29ubmVjdERCIiwiY2xvc2VEQiIsImNvbm5lY3Rpb25Nb25pdG9yIiwiZW1haWxTZXJ2aWNlIiwicGVyZm9ybWFuY2VNb25pdG9yIiwiYXBpUGVyZm9ybWFuY2VNaWRkbGV3YXJlIiwiZ2V0SGVhbHRoQ2hlY2siLCJnZXRQZXJmb3JtYW5jZURhc2hib2FyZCIsImV4dGVybmFsU2VydmljZUJyZWFrZXIiLCJjaXJjdWl0QnJlYWtlck1pZGRsZXdhcmUiLCJhc3luY09wdGltaXplIiwicHJvdGVjdEVtYWlsIiwiZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlcyIsImF1dGhTZXJ2aWNlIiwiZ2V0Q2FjaGVkU3RhdHMiLCJnZXRNZXRyaWNzIiwiYXV0aFJhdGVMaW1pdGVyIiwiYXBpUmF0ZUxpbWl0ZXIiLCJnZW5lcmFsUmF0ZUxpbWl0ZXIiLCJVc2VyIiwiTWVzc2FnZSIsIkNoYW5uZWwiLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImNvbWJpbmUiLCJ0aW1lc3RhbXAiLCJlcnJvcnMiLCJzdGFjayIsImpzb24iLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJ0cmFuc3BvcnRzIiwiRmlsZSIsImZpbGVuYW1lIiwiQ29uc29sZSIsImNvbG9yaXplIiwic2ltcGxlIiwiYXBwIiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwiaW8iLCJvcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJBTExPV0VEX09SSUdJTlMiLCJzcGxpdCIsIm1ldGhvZHMiLCJhbGxvd2VkSGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY29ubmVjdFRpbWVvdXQiLCJwaW5nVGltZW91dCIsInBpbmdJbnRlcnZhbCIsInVwZ3JhZGVUaW1lb3V0IiwiYWxsb3dVcGdyYWRlcyIsImNvb2tpZUh0dHBPbmx5IiwiY29va2llU2FtZVNpdGUiLCJlbmdpbmUiLCJvbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJjb2RlIiwibWVzc2FnZSIsImVycm9yIiwiaHR0cFN0YXR1cyIsInN0YXR1cyIsImhlYWRlcnMiLCJyZXEiLCJ1c2UiLCJsaW1pdCIsInN0cmljdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInNlc3Npb25NaWRkbGV3YXJlIiwicmVkaXNDbGllbnQiLCJnZXRDbGllbnQiLCJpc0NsaWVudFJlYWR5Iiwic2VjcmV0IiwiU0VTU0lPTl9TRUNSRVQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInN0b3JlIiwiY2xpZW50IiwicHJlZml4IiwidHRsIiwiZGlzYWJsZVRvdWNoIiwiY29va2llIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJtYXhBZ2UiLCJzYW1lU2l0ZSIsIm5hbWUiLCJyb2xsaW5nIiwidW5zZXQiLCJlcnJvckhhbmRsZXIiLCJyZXMiLCJuZXh0IiwidXJsIiwibWV0aG9kIiwiaXAiLCJ1c2VyQWdlbnQiLCJnZXQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiZmllbGQiLCJwYXRoIiwidmFsdWUiLCJkZXRhaWxzIiwia2V5cyIsImtleVZhbHVlIiwicmVxdWVzdElkIiwiaWQiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJkdXJhdGlvbiIsImluZm8iLCJzdGF0dXNDb2RlIiwidXNlciIsIm5pY2tuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsImF1dGhlbnRpY2F0ZVNlc3Npb24iLCJiaW5kIiwiY29udGVudFNlY3VyaXR5UG9saWN5IiwiZGlyZWN0aXZlcyIsImRlZmF1bHRTcmMiLCJzdHlsZVNyYyIsImZvbnRTcmMiLCJpbWdTcmMiLCJzY3JpcHRTcmMiLCJjb25uZWN0U3JjIiwiY3Jvc3NPcmlnaW5FbWJlZGRlclBvbGljeSIsInN3YWdnZXJPcHRpb25zIiwiZGVmaW5pdGlvbiIsIm9wZW5hcGkiLCJ0aXRsZSIsInZlcnNpb24iLCJkZXNjcmlwdGlvbiIsImNvbnRhY3QiLCJzZXJ2ZXJzIiwiY29tcG9uZW50cyIsInNjaGVtYXMiLCJ0eXBlIiwicHJvcGVydGllcyIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImVtYWlsIiwicm9sZSIsImVudW0iLCJkZWZhdWx0IiwiY3JlYXRlZEF0IiwibGFzdEFjdGl2ZSIsInJlcXVpcmVkIiwiY3JlYXRlZEJ5IiwicG9zaXRpb24iLCJSZWdpc3RlclJlcXVlc3QiLCJwYXNzd29yZCIsIkxvZ2luUmVxdWVzdCIsImlkZW50aWZpZXIiLCJBdXRoUmVzcG9uc2UiLCJ0b2tlbiIsIiRyZWYiLCJDaGFubmVsUmVxdWVzdCIsIkVycm9yUmVzcG9uc2UiLCJpdGVtcyIsIm1zZyIsInBhcmFtIiwibG9jYXRpb24iLCJzZWN1cml0eVNjaGVtZXMiLCJiZWFyZXJBdXRoIiwic2NoZW1lIiwiYmVhcmVyRm9ybWF0Iiwic2VjdXJpdHkiLCJhcGlzIiwic3dhZ2dlclNwZWMiLCJyZW1vdmVIZWFkZXIiLCJzZXJ2ZSIsInNldHVwIiwiYXV0aGVudGljYXRlVG9rZW4iLCJyZXF1aXJlTW9kZXJhdG9yIiwicGFnZSIsInBhcnNlSW50IiwicXVlcnkiLCJza2lwIiwidXNlcnMiLCJmaW5kIiwic2VsZWN0Iiwic29ydCIsInRvdGFsIiwiY291bnREb2N1bWVudHMiLCJhZG1pbklkIiwiX2lkIiwicGFnaW5hdGlvbiIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJwb3N0IiwiaXNMZW5ndGgiLCJtaW4iLCJtYXgiLCJ0cmltIiwib3B0aW9uYWwiLCJpc0ludCIsImlzRW1wdHkiLCJhcnJheSIsInVzZXJJZCIsInBhcmFtcyIsInJlYXNvbiIsImZpbmRCeUlkIiwidG9TdHJpbmciLCJiYW4iLCJiYW5uZWRVc2VySWQiLCJiYW5uZWRCeUlkIiwiYmFubmVkIiwiYmFuUmVhc29uIiwiYmFuRXhwaXJlcyIsInVuYmFuIiwidW5iYW5uZWRVc2VySWQiLCJ1bmJhbm5lZEJ5SWQiLCJ3YXJuIiwic2F2ZSIsIndhcm5lZFVzZXJJZCIsIndhcm5lZEJ5SWQiLCJ3YXJuaW5nIiwiaXNzdWVkQnkiLCJpc3N1ZWRBdCIsImV4cGlyZXMiLCJ3YXJuaW5nc0NvdW50IiwiZ2V0QWN0aXZlV2FybmluZ3NDb3VudCIsInJlcXVpcmVBZG1pbiIsImlzSW4iLCJuZXdSb2xlIiwib2xkUm9sZSIsImNoYW5nZWRVc2VySWQiLCJjaGFuZ2VkQnlJZCIsIm11dGUiLCJtdXRlZFVzZXJJZCIsIm11dGVkQnlJZCIsIm11dGVFeHBpcmVzIiwiaXNNdXRlZCIsInVubXV0ZSIsInVubXV0ZWRVc2VySWQiLCJ1bm11dGVkQnlJZCIsInRvdGFsVXNlcnMiLCJsZW5ndGgiLCJzZXRIZWFkZXIiLCJzZW5kIiwiYXV0aExpbWl0ZXJTdG9yZSIsInJlc2V0QWxsIiwic3VjY2VzcyIsInRvSVNPU3RyaW5nIiwidXB0aW1lIiwiY2hlY2tBbGVydHMiLCJhbGVydHNfY2hlY2tlZCIsInNlcnZpY2VzIiwib3B0aW1pemF0aW9uIiwiYXN5bmNfcHJvY2Vzc2VzIiwiX2dldEFjdGl2ZUhhbmRsZXMiLCJtZW1vcnlfdXNhZ2UiLCJtZW1vcnlVc2FnZSIsImNvbm5lY3Rpb25fbWV0cmljcyIsInBlcmZvcm1hbmNlX21ldHJpY3MiLCJnZXREZXRhaWxlZFN0YXRzIiwiY2lyY3VpdF9icmVha2VycyIsImhhbmRsZUxvZ2luV2l0aFNlc3Npb24iLCJlc2NhcGUiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJoYW5kbGVSZWdpc3RyYXRpb25XaXRoU2Vzc2lvbiIsImF1dGhvcml6YXRpb24iLCJjaGFubmVscyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWwiLCJjaGFubmVsSWQiLCJzb2NrZXRzIiwib25saW5lVXNlcnMiLCJkaXNjb25uZWN0ZWRDb3VudCIsInNvY2tldElkIiwic29ja2V0RGF0YSIsImVudHJpZXMiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJkaXNjb25uZWN0ZWRTb2NrZXRzIiwic2Vzc2lvbklkIiwiaGFzSnd0QXV0aCIsImhhc1Nlc3Npb25BdXRoIiwic2Vzc2lvblVzZXIiLCJhdXRoZW50aWNhdGVkIiwic2Vzc2lvblVzZXJJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGVzdHJveSIsInNlc3Npb25EZXN0cm95ZWQiLCJqd3RMb2dvdXRSZXN1bHQiLCJzZXNzaW9uTG9nb3V0UmVzdWx0Iiwiand0RXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJvdmVyYWxsU3VjY2VzcyIsIk1hcCIsInVzZXJDb25uZWN0aW9ucyIsInZvaWNlQ2hhbm5lbHMiLCJyZXF1ZXN0IiwiZ2V0SGVhZGVyIiwid3JpdGVIZWFkIiwiZW5kIiwiaGVhZGVyc1NlbnQiLCJjc3JmVG9rZW4iLCJoYW5kc2hha2UiLCJhdXRoIiwiTW9uZ29TdG9yZUluc3RhbmNlIiwic2Vzc2lvbkRhdGEiLCJkYXRhIiwic2lkIiwicHJvdmlkZWRDc3JmVG9rZW4iLCJzdWJzdHJpbmciLCJzZXNzaW9uQ3NyZlRva2VuIiwibG9naW5UaW1lIiwicmVnaXN0cmF0aW9uVGltZSIsIkVycm9yIiwicHJvdmlkZWQiLCJleHBlY3RlZCIsIm1hdGNoIiwiY29ubmVjdGlvbkNvdW50IiwibmV3Q29ubmVjdGlvbkNvdW50Iiwic2V0IiwiaXNCYW5uZWQiLCJlbWl0IiwidXBkYXRlUmVzdWx0IiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRzZXQiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiY29ubmVjdGlvbnMiLCJhZGRyZXNzIiwiY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMiLCJ0aW1lb3V0IiwibGFzdEhlYXJ0YmVhdCIsImNvbm5lY3Rpb25zTGVmdCIsImNhdGNoIiwiZGVsZXRlIiwic2V0SW50ZXJ2YWwiLCJyb29tIiwic2l6ZSIsInVwZGF0ZUhlYXJ0YmVhdCIsImhlYXJ0YmVhdEludGVydmFsIiwiY29ubmVjdGVkIiwiY2xlYXJJbnRlcnZhbCIsInJldHJ5RGF0YWJhc2VPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJyZXRyaWVzIiwiaSIsInNldFRpbWVvdXQiLCJmaW5kT25lIiwibGVhdmUiLCJwcmV2aW91c1Jvb21Vc2VycyIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsInUiLCJ0byIsImpvaW4iLCJqb2luTWVzc2FnZSIsImF1dGhvciIsInRleHQiLCJyb29tVXNlcnMiLCJoaXN0b3J5IiwiJG9yIiwidGFyZ2V0IiwiY3VycmVudFVzZXIiLCJtZXNzYWdlRGF0YSIsImRlYnVnIiwidHJpbW1lZFRleHQiLCJ0YXJnZXROaWNrbmFtZSIsInNlbmRlclJvb20iLCJzZW5kZXJTb2NrZXRJZCIsInRhcmdldFVzZXIiLCJ0YXJnZXRGb3VuZCIsInRhcmdldFJvb20iLCJvbmxpbmVVc2Vyc0luUm9vbSIsIm9ubGluZVVzZXJzSW5TZW5kZXJSb29tIiwiYXZhaWxhYmxlVXNlcnMiLCJ0YXJnZXRTb2NrZXRJZCIsInNlbmRlciIsIm1lc3NhZ2VJZCIsIm9ubGluZVVzZXJzQ291bnQiLCJtZXNzYWdlTGVuZ3RoIiwic3BlYWtpbmciLCJoYXMiLCJjaGFubmVsUGVlcnMiLCJwZWVyQ29ubmVjdGlvbiIsInN0cmVhbSIsInZvaWNlQ2hhbm5lbCIsIm9mZmVyIiwiZnJvbU5pY2tuYW1lIiwiYW5zd2VyIiwiY2FuZGlkYXRlIiwiY3VycmVudENvdW50IiwibmV3Q291bnQiLCJsZWF2ZU1lc3NhZ2UiLCJyZW1haW5pbmdDb25uZWN0aW9ucyIsImluaXRpYWxpemVTZXJ2ZXIiLCJkZWZhdWx0Q2hhbm5lbHMiLCJjaGFubmVsRGF0YSIsInVwc2VydCIsIlBPUlQiLCJsaXN0ZW4iLCJleGl0IiwiY2xvc2UiLCJvcHRpbWl6ZWRJbml0aWFsaXplRGF0YWJhc2UiLCJjb25jdXJyZW5jeSIsInNsb3dUaHJlc2hvbGQiLCJnbG9iYWwiLCJnYyIsImRhdGFiYXNlQnJlYWtlciIsImZhaWx1cmVDb3VudCIsInByb21pc2UiLCJjaXJjdWl0U3RhdHVzIiwiZmluYWxNZXRyaWNzIiwidG90YWxSZXF1ZXN0cyIsImVuZHBvaW50U3RhdHMiLCJyZWR1Y2UiLCJhY2MiLCJlbmRwb2ludCIsImNvdW50IiwibWVtb3J5UGVhayIsIm1lbW9yeSIsImhlYXBUb3RhbCIsImhlYWx0aERhdGEiLCJnZXRIZWFsdGhEYXRhIiwicmVxdWVzdHMiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwiYXZnVGltZSIsInRocmVzaG9sZCIsInVzYWdlUGVyY2VudCIsInVzYWdlIiwicGVyY2VudGFnZSIsImRhdGFiYXNlIiwic3RhdGUiLCJyZWRpcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHNvY2tldElvID0gcmVxdWlyZSgnc29ja2V0LmlvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpO1xuY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IHJhdGVMaW1pdCA9IHJlcXVpcmUoJ2V4cHJlc3MtcmF0ZS1saW1pdCcpO1xuY29uc3QgeyBib2R5LCB2YWxpZGF0aW9uUmVzdWx0IH0gPSByZXF1aXJlKCdleHByZXNzLXZhbGlkYXRvcicpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuLy8gSW1wb3J0IGNyeXB0byBmb3IgZ2VuZXJhdGluZyBzZWN1cmUgdG9rZW5zXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcbmNvbnN0IFJlZGlzU3RvcmUgPSByZXF1aXJlKCdjb25uZWN0LXJlZGlzJyk7XG5jb25zdCB7IHJlZGlzTWFuYWdlciB9ID0gcmVxdWlyZSgnLi9zcmMvY29uZmlnL3JlZGlzJyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xvc2VEQiwgY29ubmVjdGlvbk1vbml0b3IgfSA9IHJlcXVpcmUoJy4vZGIvY29ubmVjdGlvbicpO1xuY29uc3QgZW1haWxTZXJ2aWNlID0gcmVxdWlyZSgnLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnKTtcbmNvbnN0IHtcbiAgcGVyZm9ybWFuY2VNb25pdG9yLFxuICBhcGlQZXJmb3JtYW5jZU1pZGRsZXdhcmUsXG4gIGdldEhlYWx0aENoZWNrLFxuICBnZXRQZXJmb3JtYW5jZURhc2hib2FyZFxufSA9IHJlcXVpcmUoJy4vc3JjL21pZGRsZXdhcmUvcGVyZm9ybWFuY2VNb25pdG9yJyk7XG5jb25zdCB7XG4gIGV4dGVybmFsU2VydmljZUJyZWFrZXIsXG4gIGNpcmN1aXRCcmVha2VyTWlkZGxld2FyZSxcbiAgYXN5bmNPcHRpbWl6ZSxcbiAgcHJvdGVjdEVtYWlsLFxuICBnZXRDaXJjdWl0QnJlYWtlclN0YXR1c2VzXG59ID0gcmVxdWlyZSgnLi9zcmMvbWlkZGxld2FyZS9jaXJjdWl0QnJlYWtlcicpO1xuXG4vLyBJbXBvcnQgQXV0aFNlcnZpY2UgZm9yIGV4dHJhY3RlZCBhdXRoZW50aWNhdGlvbiBsb2dpY1xuY29uc3QgYXV0aFNlcnZpY2UgPSByZXF1aXJlKCcuL3NyYy9zZXJ2aWNlcy9hdXRoU2VydmljZScpO1xuXG4vLyBEZWZpbmUgZ2V0Q2FjaGVkU3RhdHMgZnVuY3Rpb24gZm9yIGNvbm5lY3Rpb24gbWV0cmljc1xuY29uc3QgZ2V0Q2FjaGVkU3RhdHMgPSBhc3luYyAoKSA9PiB7XG4gIHJldHVybiBjb25uZWN0aW9uTW9uaXRvci5nZXRNZXRyaWNzKCk7XG59O1xuXG4vLyBFeHRyYWN0IHJhdGUgbGltaXRlcnMgZnJvbSBBdXRoU2VydmljZVxuY29uc3QgeyBhdXRoUmF0ZUxpbWl0ZXIsIGFwaVJhdGVMaW1pdGVyLCBnZW5lcmFsUmF0ZUxpbWl0ZXIgfSA9IGF1dGhTZXJ2aWNlO1xuXG4vLyBJbXBvcnQgbW9kZWxzXG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi9tb2RlbHMvVXNlcicpO1xuY29uc3QgTWVzc2FnZSA9IHJlcXVpcmUoJy4vbW9kZWxzL01lc3NhZ2UnKTtcbmNvbnN0IENoYW5uZWwgPSByZXF1aXJlKCcuL21vZGVscy9DaGFubmVsJyk7XG5cbi8vIExvZ2dlciBzZXR1cFxuY29uc3QgbG9nZ2VyID0gd2luc3Rvbi5jcmVhdGVMb2dnZXIoe1xuICBsZXZlbDogJ2luZm8nLFxuICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgd2luc3Rvbi5mb3JtYXQudGltZXN0YW1wKCksXG4gICAgd2luc3Rvbi5mb3JtYXQuZXJyb3JzKHsgc3RhY2s6IHRydWUgfSksXG4gICAgd2luc3Rvbi5mb3JtYXQuanNvbigpXG4gICksXG4gIGRlZmF1bHRNZXRhOiB7IHNlcnZpY2U6ICdjaGF0LXNlcnZlcicgfSxcbiAgdHJhbnNwb3J0czogW1xuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnbG9ncy9zZXJ2ZXIubG9nJyB9KSxcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5jb2xvcml6ZSgpLFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5zaW1wbGUoKVxuICAgICAgKVxuICAgIH0pXG4gIF1cbn0pO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuXG4vLyBSYXRlIGxpbWl0ZXJzIGFyZSBub3cgaGFuZGxlZCBieSBBdXRoU2VydmljZVxuY29uc3QgaW8gPSBzb2NrZXRJbyhzZXJ2ZXIsIHtcbiAgY29yczoge1xuICAgIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgICAgPyBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlM/LnNwbGl0KCcsJykgfHwgZmFsc2VcbiAgICAgIDogW1wiaHR0cDovL2xvY2FsaG9zdDozMDAzXCIsIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCJdLFxuICAgIG1ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIl0sXG4gICAgYWxsb3dlZEhlYWRlcnM6IFtcImF1dGhvcml6YXRpb25cIiwgXCJjb250ZW50LXR5cGVcIl0sXG4gICAgY3JlZGVudGlhbHM6IHRydWVcbiAgfSxcbiAgLy8gRW5zdXJlIGJvdGggdHJhbnNwb3J0cyBhcmUgc3VwcG9ydGVkXG4gIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSxcbiAgLy8gQ29ubmVjdGlvbiBzZXR0aW5ncyBmb3IgYmV0dGVyIHJlbGlhYmlsaXR5XG4gIGNvbm5lY3RUaW1lb3V0OiAyMDAwMCwgLy8gMjAgc2Vjb25kc1xuICBwaW5nVGltZW91dDogNTAwMCwgLy8gNSBzZWNvbmRzIGZvciBwaW5nXG4gIHBpbmdJbnRlcnZhbDogMTAwMDAsIC8vIDEwIHNlY29uZHMgYmV0d2VlbiBwaW5nc1xuICB1cGdyYWRlVGltZW91dDogMTAwMDAsXG4gIGFsbG93VXBncmFkZXM6IHRydWUsXG4gIGNvb2tpZUh0dHBPbmx5OiB0cnVlLFxuICBjb29raWVTYW1lU2l0ZTogJ2xheCdcbn0pO1xuXG4vLyBMb2cgc29ja2V0IGNvbm5lY3Rpb24gZXJyb3JzIGZvciBkZWJ1Z2dpbmdcbmlvLmVuZ2luZS5vbignY29ubmVjdGlvbl9lcnJvcicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coJ/CflIwgU29ja2V0IGVuZ2luZSBjb25uZWN0aW9uIGVycm9yOicsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG4gIGxvZ2dlci5lcnJvcignU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6Jywge1xuICAgIGNvZGU6IGVyci5jb2RlLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIGh0dHBTdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgaGVhZGVyczogZXJyLnJlcT8uaGVhZGVyc1xuICB9KTtcbn0pO1xuXG4vLyBDT1JTIGNvbmZpZ3VyYXRpb25cbmFwcC51c2UoY29ycyh7XG4gIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IGZhbHNlXG4gICAgOiB0cnVlLFxuICBjcmVkZW50aWFsczogdHJ1ZVxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbih7IGxpbWl0OiAnMjBtYicsIHN0cmljdDogZmFsc2UgfSkpOyAvLyBJbmNyZWFzZWQgbGltaXQgYW5kIGRpc2FibGVkIHN0cmljdCBwYXJzaW5nIGZvciBiZXR0ZXIgZXJyb3IgdG9sZXJhbmNlXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlLCBsaW1pdDogJzIwbWInIH0pKTsgLy8gSGFuZGxlIGZvcm0gZGF0YSB3aXRoIGluY3JlYXNlZCBsaW1pdFxuXG4vLyBTZXNzaW9uIGNvbmZpZ3VyYXRpb24gd2l0aCBSZWRpcyBzdG9yZSBmb3IgZW5oYW5jZWQgcGVyZm9ybWFuY2VcbmxldCBzZXNzaW9uTWlkZGxld2FyZTtcbnRyeSB7XG4gIGNvbnN0IHJlZGlzQ2xpZW50ID0gcmVkaXNNYW5hZ2VyLmdldENsaWVudCgpO1xuICBpZiAocmVkaXNDbGllbnQgJiYgcmVkaXNNYW5hZ2VyLmlzQ2xpZW50UmVhZHkoKSkge1xuICAgIHNlc3Npb25NaWRkbGV3YXJlID0gc2Vzc2lvbih7XG4gICAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICd5b3VyLXZlcnktbG9uZy1zZWN1cmUtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbicsXG4gICAgICByZXNhdmU6IGZhbHNlLFxuICAgICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgc3RvcmU6IG5ldyBSZWRpc1N0b3JlKHtcbiAgICAgICAgY2xpZW50OiByZWRpc0NsaWVudCxcbiAgICAgICAgcHJlZml4OiAnc2VzczonLFxuICAgICAgICB0dGw6IDg2NDAwLCAvLyAyNCBob3Vyc1xuICAgICAgICBkaXNhYmxlVG91Y2g6IGZhbHNlIC8vIEFsbG93IGF1dG9tYXRpYyB0b3VjaFxuICAgICAgfSksXG4gICAgICBjb29raWU6IHtcbiAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICAgICBzYW1lU2l0ZTogJ2xheCdcbiAgICAgIH0sXG4gICAgICBuYW1lOiAnY2hhdFNlc3Npb24nLFxuICAgICAgcm9sbGluZzogZmFsc2UsXG4gICAgICB1bnNldDogJ2Rlc3Ryb3knXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ+KchSBSZWRpcyBzZXNzaW9uIHN0b3JlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrIHRvIG1lbW9yeSBzdG9yZSBpZiBSZWRpcyBpcyBub3QgYXZhaWxhYmxlXG4gICAgY29uc29sZS5sb2coJ+KaoO+4jyBSZWRpcyBub3QgYXZhaWxhYmxlLCB1c2luZyBtZW1vcnktYmFzZWQgc2Vzc2lvbiBzdG9yZScpO1xuICAgIHNlc3Npb25NaWRkbGV3YXJlID0gc2Vzc2lvbih7XG4gICAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICd5b3VyLXZlcnktbG9uZy1zZWN1cmUtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbicsXG4gICAgICByZXNhdmU6IGZhbHNlLFxuICAgICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgY29va2llOiB7XG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgc2FtZVNpdGU6ICdsYXgnXG4gICAgICB9LFxuICAgICAgbmFtZTogJ2NoYXRTZXNzaW9uJyxcbiAgICAgIHJvbGxpbmc6IGZhbHNlLFxuICAgICAgdW5zZXQ6ICdkZXN0cm95J1xuICAgIH0pO1xuICB9XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmxvZygn4p2MIFJlZGlzIHNlc3Npb24gc3RvcmUgaW5pdGlhbGl6YXRpb24gZmFpbGVkLCB1c2luZyBtZW1vcnkgc3RvcmU6JywgZXJyb3IubWVzc2FnZSk7XG4gIHNlc3Npb25NaWRkbGV3YXJlID0gc2Vzc2lvbih7XG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCAneW91ci12ZXJ5LWxvbmctc2VjdXJlLXNlY3JldC1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24nLFxuICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIGNvb2tpZToge1xuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICBzYW1lU2l0ZTogJ2xheCdcbiAgICB9LFxuICAgIG5hbWU6ICdjaGF0U2Vzc2lvbicsXG4gICAgcm9sbGluZzogZmFsc2UsXG4gICAgdW5zZXQ6ICdkZXN0cm95J1xuICB9KTtcbn1cblxuYXBwLnVzZShzZXNzaW9uTWlkZGxld2FyZSk7XG5cbi8vIEVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcbmNvbnN0IGVycm9ySGFuZGxlciA9IChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIGVycm9yOicsIHtcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgIHVybDogcmVxLnVybCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgaXA6IHJlcS5pcCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICB9KTtcblxuICAvLyBNb25nb29zZSB2YWxpZGF0aW9uIGVycm9yc1xuICBpZiAoZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoZSA9PiAoe1xuICAgICAgZmllbGQ6IGUucGF0aCxcbiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3JzLFxuICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InXG4gICAgfSk7XG4gIH1cblxuICAvLyBNb25nb29zZSBkdXBsaWNhdGUga2V5IGVycm9yXG4gIGlmIChlcnIuY29kZSA9PT0gMTEwMDApIHtcbiAgICBjb25zdCBmaWVsZCA9IE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF07XG4gICAgY29uc3QgdmFsdWUgPSBlcnIua2V5VmFsdWVbZmllbGRdO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICBlcnJvcjogYCR7ZmllbGR9ICcke3ZhbHVlfScgYWxyZWFkeSBleGlzdHNgLFxuICAgICAgY29kZTogJ0RVUExJQ0FURV9FUlJPUidcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEpXVCBlcnJvcnNcbiAgaWYgKGVyci5uYW1lID09PSAnSnNvbldlYlRva2VuRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcbiAgICAgIGNvZGU6ICdJTlZBTElEX1RPS0VOJ1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGVyci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgY29kZTogJ1RPS0VOX0VYUElSRUQnXG4gICAgfSk7XG4gIH1cblxuICAvLyBEZWZhdWx0IHNlcnZlciBlcnJvclxuICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgcmVxdWVzdElkOiByZXEuaWQgfHwgJ3Vua25vd24nXG4gIH0pO1xufTtcblxuLy8gUmVxdWVzdCBsb2dnaW5nIG1pZGRsZXdhcmVcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcblxuICByZXMub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBsb2dnZXIuaW5mbyhgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9IC0gJHtyZXMuc3RhdHVzQ29kZX0gKCR7ZHVyYXRpb259bXMpYCwge1xuICAgICAgaXA6IHJlcS5pcCxcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpLFxuICAgICAgdXNlcjogcmVxLnVzZXI/Lm5pY2tuYW1lIHx8ICdhbm9ueW1vdXMnLFxuICAgICAgYm9keTogcmVxLm1ldGhvZCAhPT0gJ0dFVCcgPyBKU09OLnN0cmluZ2lmeShyZXEuYm9keSkgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSk7XG5cbiAgbmV4dCgpO1xufSk7XG5cbi8vIFNlc3Npb24gYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSBub3cgdXNlcyBBdXRoU2VydmljZVxuXG4vLyBKV1QgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSBub3cgdXNlcyBBdXRoU2VydmljZVxuXG4vLyBSb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sIG1pZGRsZXdhcmUgbm93IHVzZXMgQXV0aFNlcnZpY2VcblxuLy8gRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxuXG4vLyBVc2UgQXV0aFNlcnZpY2Ugc2Vzc2lvbiBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlXG5hcHAudXNlKGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVNlc3Npb24uYmluZChhdXRoU2VydmljZSkpO1xuXG4vLyBHZW5lcmFsIHJhdGUgbGltaXRpbmcgKGFwcGxpZWQgdG8gYWxsIEhUVFAgcmVxdWVzdHMpIC0gdXNpbmcgQXV0aFNlcnZpY2VcbmFwcC51c2UoYXV0aFNlcnZpY2UuZ2VuZXJhbFJhdGVMaW1pdGVyKTtcblxuLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBtaWRkbGV3YXJlXG5hcHAudXNlKGFwaVBlcmZvcm1hbmNlTWlkZGxld2FyZSgpKTtcblxuLy8gSGVsbWV0IHNlY3VyaXR5IGhlYWRlcnNcbmFwcC51c2UoXG4gIGhlbG1ldCh7XG4gICAgY29udGVudFNlY3VyaXR5UG9saWN5OiB7XG4gICAgICBkaXJlY3RpdmVzOiB7XG4gICAgICAgIGRlZmF1bHRTcmM6IFtcIidzZWxmJ1wiXSxcbiAgICAgICAgc3R5bGVTcmM6IFtcIidzZWxmJ1wiLCBcIid1bnNhZmUtaW5saW5lJ1wiLCBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb21cIl0sXG4gICAgICAgIGZvbnRTcmM6IFtcIidzZWxmJ1wiLCBcImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIl0sXG4gICAgICAgIGltZ1NyYzogW1wiJ3NlbGYnXCIsIFwiZGF0YTpcIl0sXG4gICAgICAgIHNjcmlwdFNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCJdLFxuICAgICAgICBjb25uZWN0U3JjOiBbXCInc2VsZidcIl1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNyb3NzT3JpZ2luRW1iZWRkZXJQb2xpY3k6IGZhbHNlXG4gIH0pXG4pO1xuXG4vLyBTd2FnZ2VyIGNvbmZpZ3VyYXRpb25cbmNvbnN0IHN3YWdnZXJPcHRpb25zID0ge1xuICBkZWZpbml0aW9uOiB7XG4gICAgb3BlbmFwaTogJzMuMC4wJyxcbiAgICBpbmZvOiB7XG4gICAgICB0aXRsZTogJ0NoYXQtSlMgQVBJJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JFU1QgQVBJIGZvciBDaGF0LUpTIGFwcGxpY2F0aW9uIHdpdGggcmVhbC10aW1lIG1lc3NhZ2luZyBhbmQgdm9pY2UgY2hhbm5lbHMnLFxuICAgICAgY29udGFjdDoge1xuICAgICAgICBuYW1lOiAnQ2hhdC1KUyBTdXBwb3J0J1xuICAgICAgfVxuICAgIH0sXG4gICAgc2VydmVyczogW1xuICAgICAge1xuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0RldmVsb3BtZW50IHNlcnZlcidcbiAgICAgIH1cbiAgICBdLFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgIHNjaGVtYXM6IHtcbiAgICAgICAgVXNlcjoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgdW5pcXVlIGlkZW50aWZpZXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmlja25hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBuaWNrbmFtZScsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdlbWFpbCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBlbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJvbGU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsnYWRtaW4nLCAnbWVtYmVyJ10sXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICdtZW1iZXInLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgcm9sZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBjcmVhdGlvbiB0aW1lc3RhbXAnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFzdEFjdGl2ZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMYXN0IGFjdGl2aXR5IHRpbWVzdGFtcCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsnb25saW5lJywgJ29mZmxpbmUnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIG9ubGluZSBzdGF0dXMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWyduaWNrbmFtZScsICdlbWFpbCcsICdwYXNzd29yZCcsICdyb2xlJ11cbiAgICAgICAgfSxcbiAgICAgICAgQ2hhbm5lbDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoYW5uZWwgdW5pcXVlIGlkZW50aWZpZXIgKGF1dG8tZ2VuZXJhdGVkIGZyb20gbmFtZSknXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIGRpc3BsYXkgbmFtZScsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RleHQnLCAndm9pY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDaGFubmVsIHR5cGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgIG1heExlbmd0aDogNTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0b3Igbmlja25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkaXNwbGF5IHBvc2l0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnaWQnLCAnbmFtZScsICd0eXBlJywgJ2NyZWF0ZWRCeSddXG4gICAgICAgIH0sXG4gICAgICAgIFJlZ2lzdGVyUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJ10sXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbmlja25hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMyxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdVbmlxdWUgdXNlcm5hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWYWxpZCBlbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtaW5MZW5ndGg6IDYsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBwYXNzd29yZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIExvZ2luUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2lkZW50aWZpZXInLCAncGFzc3dvcmQnXSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXJuYW1lIG9yIGVtYWlsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgcGFzc3dvcmQnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBBdXRoUmVzcG9uc2U6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdKV1QgYWNjZXNzIHRva2VuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBDaGFubmVsUmVxdWVzdDoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ25hbWUnLCAndHlwZSddLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMDAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCBkaXNwbGF5IG5hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWyd0ZXh0JywgJ3ZvaWNlJ10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbm5lbCB0eXBlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBtYXhMZW5ndGg6IDUwMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdPcHRpb25hbCBjaGFubmVsIGRlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgRXJyb3JSZXNwb25zZToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yIG1lc3NhZ2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgbXNnOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBwYXJhbTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHsgdHlwZTogJ3N0cmluZycgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWYWxpZGF0aW9uIGVycm9ycyBhcnJheSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZWN1cml0eVNjaGVtZXM6IHtcbiAgICAgICAgYmVhcmVyQXV0aDoge1xuICAgICAgICAgIHR5cGU6ICdodHRwJyxcbiAgICAgICAgICBzY2hlbWU6ICdiZWFyZXInLFxuICAgICAgICAgIGJlYXJlckZvcm1hdDogJ0pXVCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2VjdXJpdHk6IFtcbiAgICAgIHtcbiAgICAgICAgYmVhcmVyQXV0aDogW11cbiAgICAgIH1cbiAgICBdXG4gIH0sXG4gIGFwaXM6IFsnLi9zZXJ2ZXIuanMnXSAvLyBQYXRoIHRvIHRoZSBBUEkgcm91dGVzXG59O1xuXG5jb25zdCBzd2FnZ2VyU3BlYyA9IHN3YWdnZXJKc2RvYyhzd2FnZ2VyT3B0aW9ucyk7XG5cbi8vIFN3YWdnZXIgVUkgd2l0aCBDU1AgZGlzYWJsZWQgZm9yIHRoaXMgcm91dGVcbmFwcC51c2UoJy9hcGktZG9jcycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAvLyBEaXNhYmxlIENTUCBmb3IgU3dhZ2dlciBVSVxuICByZXMucmVtb3ZlSGVhZGVyKCdDb250ZW50LVNlY3VyaXR5LVBvbGljeScpO1xuICBuZXh0KCk7XG59LCBzd2FnZ2VyVWkuc2VydmUsIHN3YWdnZXJVaS5zZXR1cChzd2FnZ2VyU3BlYykpO1xuXG4vLyBBZG1pbmlzdHJhdGl2ZSBlbmRwb2ludHMgLSByZXF1aXJlIG1vZGVyYXRvciBwcml2aWxlZ2VzXG5jb25zb2xlLmxvZygn8J+UpyBBZG1pbmlzdHJhdGl2ZSBBUEkgZW5kcG9pbnRzIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuXG4vLyBHRVQgL2FwaS9hZG1pbi91c2VycyAtIExpc3QgYWxsIHVzZXJzIHdpdGggbW9kZXJhdGlvbiBpbmZvXG5hcHAuZ2V0KCcvYXBpL2FkbWluL3VzZXJzJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLmFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UpIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDUwO1xuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZCh7fSlcbiAgICAgIC5zZWxlY3QoJy1wYXNzd29yZCAtcmVzZXRQYXNzd29yZFRva2VuIC1yZXNldFBhc3N3b3JkRXhwaXJlcyAtbW9kZXJhdGlvblRva2VuIC1tb2RlcmF0aW9uVG9rZW5FeHBpcmVzJylcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgICAgLnNraXAoc2tpcClcbiAgICAgIC5saW1pdChsaW1pdCk7XG5cbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoKTtcblxuICAgIGxvZ2dlci5pbmZvKGBBZG1pbiB1c2VyIGxpc3QgcmVxdWVzdGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgYWRtaW5JZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcGFnZSxcbiAgICAgIGxpbWl0LFxuICAgICAgdG90YWxcbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHVzZXJzLFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBwYWdlLFxuICAgICAgICBsaW1pdCxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzIGZvciBhZG1pbjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB1c2VycycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC9iYW4gLSBCYW4gYSB1c2VyXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL2JhbicsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5hcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdyZWFzb24nKS5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MDAgfSkudHJpbSgpLFxuICBib2R5KCdkdXJhdGlvbicpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDEsIG1heDogMzE1MzYwMDAgfSkgLy8gTWF4IDEgeWVhciBpbiBzZWNvbmRzXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcmVhc29uLCBkdXJhdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBiYW5uaW5nIHlvdXJzZWxmXG4gICAgaWYgKHVzZXIuX2lkLnRvU3RyaW5nKCkgPT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBiYW4geW91cnNlbGYnIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbm9uLWFkbWluIGZyb20gYmFubmluZyBhZG1pblxuICAgIGlmICh1c2VyLnJvbGUgPT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdDYW5ub3QgYmFuIGFkbWluaXN0cmF0b3InIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIuYmFuKHJlYXNvbiwgZHVyYXRpb24sIHJlcS51c2VyLl9pZCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IGJhbm5lZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIGJhbm5lZFVzZXJJZDogdXNlcklkLFxuICAgICAgYmFubmVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcmVhc29uLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBVc2VyICR7dXNlci5uaWNrbmFtZX0gaGFzIGJlZW4gYmFubmVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgYmFubmVkOiB0cnVlLFxuICAgICAgICBiYW5SZWFzb246IHJlYXNvbixcbiAgICAgICAgYmFuRXhwaXJlczogdXNlci5iYW5FeHBpcmVzXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBiYW5uaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gYmFuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5iYW4gLSBVbmJhbiBhIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvdW5iYW4nLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXIuYmFubmVkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXIgaXMgbm90IGJhbm5lZCcgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdXNlci51bmJhbigpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSB1bmJhbm5lZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVuYmFubmVkVXNlcklkOiB1c2VySWQsXG4gICAgICB1bmJhbm5lZEJ5SWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiB1bmJhbm5lZGAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGJhbm5lZDogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVuYmFubmluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVuYmFuIHVzZXInIH0pO1xuICB9XG59KTtcblxuLy8gUE9TVCAvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvd2FybiAtIElzc3VlIHdhcm5pbmcgdG8gdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC93YXJuJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGF1dGhTZXJ2aWNlLnJlcXVpcmVNb2RlcmF0b3IuYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ3JlYXNvbicpLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwMCB9KS50cmltKCksXG4gIGJvZHkoJ2R1cmF0aW9uJykub3B0aW9uYWwoKS5pc0ludCh7IG1pbjogMSwgbWF4OiAzMTUzNjAwMCB9KVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHJlYXNvbiwgZHVyYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHVzZXIud2FybihyZWFzb24sIHJlcS51c2VyLl9pZCwgZHVyYXRpb24pO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFdhcm5pbmcgaXNzdWVkIHRvIHVzZXIgJHt1c2VyLm5pY2tuYW1lfSBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHdhcm5lZFVzZXJJZDogdXNlcklkLFxuICAgICAgd2FybmVkQnlJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgcmVhc29uLFxuICAgICAgZHVyYXRpb25cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGBXYXJuaW5nIGlzc3VlZCB0byB1c2VyICR7dXNlci5uaWNrbmFtZX1gLFxuICAgICAgd2FybmluZzoge1xuICAgICAgICByZWFzb24sXG4gICAgICAgIGlzc3VlZEJ5OiByZXEudXNlci5uaWNrbmFtZSxcbiAgICAgICAgaXNzdWVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGV4cGlyZXM6IGR1cmF0aW9uID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIGR1cmF0aW9uKSA6IG51bGxcbiAgICAgIH0sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIHdhcm5pbmdzQ291bnQ6IHVzZXIuZ2V0QWN0aXZlV2FybmluZ3NDb3VudCgpXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciB3YXJuaW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gd2FybiB1c2VyJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3JvbGUgLSBDaGFuZ2UgdXNlciByb2xlXG5hcHAucG9zdCgnL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL3JvbGUnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZUFkbWluLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdyb2xlJykuaXNJbihbJ21lbWJlcicsICdtb2RlcmF0b3InLCAnYWRtaW4nXSlcbl0sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyByb2xlOiBuZXdSb2xlIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG1vZGlmeWluZyB5b3VyIG93biByb2xlIGluIHBvdGVudGlhbGx5IHByb2JsZW1hdGljIHdheXNcbiAgICBpZiAodXNlci5faWQudG9TdHJpbmcoKSA9PT0gcmVxLnVzZXIuX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQ2Fubm90IG1vZGlmeSB5b3VyIG93biByb2xlJyB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IG5vbi1hZG1pbiBmcm9tIHByb21vdGluZyB0byBhZG1pbiBvciBkZW1vdGluZyBhZG1pblxuICAgIGlmICgobmV3Um9sZSA9PT0gJ2FkbWluJyB8fCB1c2VyLnJvbGUgPT09ICdhZG1pbicpICYmIHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnT25seSBhZG1pbmlzdHJhdG9ycyBjYW4gbWFuYWdlIGFkbWluIHJvbGVzJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRSb2xlID0gdXNlci5yb2xlO1xuICAgIHVzZXIucm9sZSA9IG5ld1JvbGU7XG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3VzZXIubmlja25hbWV9IHJvbGUgY2hhbmdlZCBmcm9tICR7b2xkUm9sZX0gdG8gJHtuZXdSb2xlfSBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIGNoYW5nZWRVc2VySWQ6IHVzZXJJZCxcbiAgICAgIGNoYW5nZWRCeUlkOiByZXEudXNlci5faWQsXG4gICAgICBvbGRSb2xlLFxuICAgICAgbmV3Um9sZVxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSByb2xlIGNoYW5nZWQgdG8gJHtuZXdSb2xlfWAsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIHJvbGU6IG5ld1JvbGVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNoYW5naW5nIHVzZXIgcm9sZTonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjaGFuZ2UgdXNlciByb2xlJyB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1QgL2FwaS9hZG1pbi91c2Vycy86dXNlcklkL211dGUgLSBNdXRlIHVzZXJcbmFwcC5wb3N0KCcvYXBpL2FkbWluL3VzZXJzLzp1c2VySWQvbXV0ZScsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhdXRoU2VydmljZS5yZXF1aXJlTW9kZXJhdG9yLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCdkdXJhdGlvbicpLmlzSW50KHsgbWluOiA2MCwgbWF4OiA4NjQwMCB9KSAvLyAxIG1pbnV0ZSB0byAyNCBob3Vyc1xuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IGR1cmF0aW9uIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLm11dGUoZHVyYXRpb24pO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBtdXRlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIG11dGVkVXNlcklkOiB1c2VySWQsXG4gICAgICBtdXRlZEJ5SWQ6IHJlcS51c2VyLl9pZCxcbiAgICAgIGR1cmF0aW9uXG4gICAgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBgVXNlciAke3VzZXIubmlja25hbWV9IGhhcyBiZWVuIG11dGVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IHVzZXIubXV0ZUV4cGlyZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIG11dGluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIG11dGUgdXNlcicgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIC9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bm11dGUgLSBVbm11dGUgdXNlclxuYXBwLnBvc3QoJy9hcGkvYWRtaW4vdXNlcnMvOnVzZXJJZC91bm11dGUnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXV0aFNlcnZpY2UucmVxdWlyZU1vZGVyYXRvci5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXIuaXNNdXRlZCgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXIgaXMgbm90IG11dGVkJyB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCB1c2VyLnVubXV0ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSB1bm11dGVkIGJ5ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdW5tdXRlZFVzZXJJZDogdXNlcklkLFxuICAgICAgdW5tdXRlZEJ5SWQ6IHJlcS51c2VyLl9pZFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogYFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBoYXMgYmVlbiB1bm11dGVkYCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IG51bGxcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVubXV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdW5tdXRlIHVzZXInIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS91c2VyczpcbiAqICAgZ2V0OlxuICogICAgIHRhZ3M6XG4gKiAgICAgICAtIFVzZXJzXG4gKiAgICAgc3VtbWFyeTogR2V0IGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogUmV0cmlldmVzIGEgbGlzdCBvZiBhbGwgdXNlcnMgd2l0aCB0aGVpciByb2xlcyBhbmQgb25saW5lIHN0YXR1c1xuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IExpc3Qgb2YgdXNlcnMgc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgICAgICBpZDpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3MgdW5pcXVlIGlkZW50aWZpZXJcbiAqICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIncyBkaXNwbGF5IG5hbWVcbiAqICAgICAgICAgICAgICAgICAgIHJvbGU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBlbnVtOiBbYWRtaW4sIG1vZGVyYXRvciwgbWVtYmVyXVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogVXNlcidzIHJvbGUgbGV2ZWxcbiAqICAgICAgICAgICAgICAgICAgIHN0YXR1czpcbiAqICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgIGVudW06IFtvbmxpbmUsIG9mZmxpbmVdXG4gKiAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyJ3Mgb25saW5lIHN0YXR1c1xuICogICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OlxuICogICAgICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBkYXRlLXRpbWVcbiAqICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcmVnaXN0cmF0aW9uIGRhdGVcbiAqICAgICAgICAgICAgICAgICAgIGxhc3RBY3RpdmU6XG4gKiAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGRhdGUtdGltZVxuICogICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogTGFzdCBhY3Rpdml0eSB0aW1lc3RhbXBcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIC0gaWQ6IFwiNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDExXCJcbiAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gKiAgICAgICAgICAgICAgICAgcm9sZTogXCJtZW1iZXJcIlxuICogICAgICAgICAgICAgICAgIHN0YXR1czogXCJvbmxpbmVcIlxuICogICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogXCIyMDI0LTA5LTA3VDEwOjMwOjAwWlwiXG4gKiAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZTogXCIyMDI0LTA5LTA3VDIyOjE1OjAwWlwiXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBBdXRoZW50aWNhdGlvbiByZXF1aXJlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgNTAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yXG4gKi9cbmNvbnNvbGUubG9nKCfwn5SnIEdFVCAvYXBpL3VzZXJzIHJvdXRlIHJlZ2lzdGVyZWQgYXQgc3RhcnR1cCcpO1xuYXBwLmdldCgnL2FwaS91c2VycycsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoe30pXG4gICAgICAuc2VsZWN0KCdfaWQgbmlja25hbWUgcm9sZSBzdGF0dXMgY3JlYXRlZEF0IGxhc3RBY3RpdmUnKVxuICAgICAgLnNvcnQoeyBuaWNrbmFtZTogMSB9KTtcblxuICAgIGxvZ2dlci5pbmZvKGBVc2VycyBsaXN0IHJlcXVlc3RlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgdG90YWxVc2VyczogdXNlcnMubGVuZ3RoXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBSZXR1cm5pbmcgdXNlcnMgZGF0YTonLCB1c2Vycy5sZW5ndGgpO1xuICAgIHJlcy5qc29uKHVzZXJzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gR0VUIC9hcGkvdXNlcnM6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB1c2VycycsIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicgfSk7XG4gIH1cbn0pO1xuXG4vLyBTd2FnZ2VyIEpTT04gZW5kcG9pbnRcbmFwcC5nZXQoJy9hcGktZG9jcy5qc29uJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5yZW1vdmVIZWFkZXIoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5Jyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gIHJlcy5zZW5kKHN3YWdnZXJTcGVjKTtcbn0pO1xuXG4vLyBEZXZlbG9wbWVudCBhbmQgdGVzdCBlbmRwb2ludCB0byByZXNldCByYXRlIGxpbWl0aW5nXG5hcHAucG9zdCgnL2FwaS9yZXNldC1yYXRlbGltaXQnLCAocmVxLCByZXMpID0+IHtcbiAgLy8gSW4gYSByZWFsIGFwcGxpY2F0aW9uLCB5b3UnZCB3YW50IHRvIGdldCB0aGUgc3RvcmUgZnJvbSB0aGUgbGltaXRlciBpbnN0YW5jZVxuICAvLyBGb3IgZXhwcmVzcy1yYXRlLWxpbWl0IHY3KywgeW91IGNhbiBhY2Nlc3MgdGhlIHN0b3JlIGxpa2UgdGhpczpcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoTGltaXRlclN0b3JlID0gYXV0aFJhdGVMaW1pdGVyLnN0b3JlO1xuICAgIGlmIChhdXRoTGltaXRlclN0b3JlICYmIHR5cGVvZiBhdXRoTGltaXRlclN0b3JlLnJlc2V0QWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhdXRoTGltaXRlclN0b3JlLnJlc2V0QWxsKCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBSYXRlIGxpbWl0aW5nIHJlc2V0IGZvciB0ZXN0aW5nIHB1cnBvc2VzJyk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdSYXRlIGxpbWl0aW5nIGhhcyBiZWVuIHJlc2V0JyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgc3RvcmUgZG9lc24ndCBleHBvc2UgcmVzZXRBbGwsIGNyZWF0ZSBhIHRlbXBvcmFyeSB3b3JrYXJvdW5kXG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFJhdGUgbGltaXRlciBzdG9yZSBkb2VzblxcJ3Qgc3VwcG9ydCByZXNldEFsbCAtIHJhdGUgbGltaXRpbmcgd2lsbCBleHBpcmUgbmF0dXJhbGx5Jyk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ2Fubm90IHJlc2V0IHJhdGUgbGltaXRpbmcgYXV0b21hdGljYWxseSwgd2FpdCBmb3IgdGltZW91dCcgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgRXJyb3IgcmVzZXR0aW5nIHJhdGUgbGltaXRpbmc6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gcmVzZXQgcmF0ZSBsaW1pdGluZycgfSk7XG4gIH1cbn0pO1xuXG4vLyBIZWFsdGggY2hlY2sgZW5kcG9pbnRcbmFwcC5nZXQoJy9oZWFsdGgnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwdGltZTogcHJvY2Vzcy51cHRpbWUoKVxuICB9KTtcbn0pO1xuXG4vLyBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIGVuZHBvaW50c1xuYXBwLmdldCgnL2FwaS9oZWFsdGgvZGV0YWlsZWQnLCBnZXRIZWFsdGhDaGVjayk7XG5cbmFwcC5nZXQoJy9hcGkvcGVyZm9ybWFuY2UvZGFzaGJvYXJkJywgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIENoZWNrIGlmIHVzZXIgaXMgYWRtaW4vbW9kZXJhdG9yXG4gIGlmICghcmVxLnVzZXIgfHwgKHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ21vZGVyYXRvcicpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pO1xuICB9XG4gIGdldFBlcmZvcm1hbmNlRGFzaGJvYXJkKHJlcSwgcmVzKTtcbn0pO1xuXG4vLyBQZXJmb3JtYW5jZSBhbGVydHMgZW5kcG9pbnRcbmFwcC5nZXQoJy9hcGkvcGVyZm9ybWFuY2UvYWxlcnRzJywgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLnVzZXIgfHwgKHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ21vZGVyYXRvcicpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pO1xuICB9XG5cbiAgLy8gUnVuIGFsZXJ0cyBjaGVja1xuICBwZXJmb3JtYW5jZU1vbml0b3IuY2hlY2tBbGVydHMoKTtcblxuICByZXMuanNvbih7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgYWxlcnRzX2NoZWNrZWQ6IHRydWUsXG4gICAgbWVzc2FnZTogJ1BlcmZvcm1hbmNlIGFsZXJ0cyBjaGVja2VkIC0gc2VlIHNlcnZlciBsb2dzIGZvciBhbnkgYWxlcnRzJ1xuICB9KTtcbn0pO1xuXG4vLyBDaXJjdWl0IGJyZWFrZXIgc3RhdHVzIGVuZHBvaW50XG5hcHAuZ2V0KCcvYXBpL2NpcmN1aXQtYnJlYWtlci9zdGF0dXMnLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKCFyZXEudXNlciB8fCAocmVxLnVzZXIucm9sZSAhPT0gJ2FkbWluJyAmJiByZXEudXNlci5yb2xlICE9PSAnbW9kZXJhdG9yJykpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcgfSk7XG4gIH1cblxuICBjb25zdCBzdGF0dXMgPSBnZXRDaXJjdWl0QnJlYWtlclN0YXR1c2VzKCk7XG4gIHJlcy5qc29uKHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBzZXJ2aWNlczogc3RhdHVzXG4gIH0pO1xufSk7XG5cbi8vIFJlc291cmNlIHVzYWdlIG9wdGltaXphdGlvbiBlbmRwb2ludFxuYXBwLmdldCgnL2FwaS9vcHRpbWl6YXRpb24vc3RhdHVzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLnVzZXIgfHwgKHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicgJiYgcmVxLnVzZXIucm9sZSAhPT0gJ21vZGVyYXRvcicpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpbWl6YXRpb24gPSB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGFzeW5jX3Byb2Nlc3NlczogcHJvY2Vzcy5fZ2V0QWN0aXZlSGFuZGxlcygpLmxlbmd0aCxcbiAgICAgIG1lbW9yeV91c2FnZTogcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLFxuICAgICAgY29ubmVjdGlvbl9tZXRyaWNzOiBnZXRDYWNoZWRTdGF0cyA/IGF3YWl0IGdldENhY2hlZFN0YXRzKCkgOiB7fSxcbiAgICAgIHBlcmZvcm1hbmNlX21ldHJpY3M6IHBlcmZvcm1hbmNlTW9uaXRvci5nZXREZXRhaWxlZFN0YXRzID8gcGVyZm9ybWFuY2VNb25pdG9yLmdldERldGFpbGVkU3RhdHMoKSA6IHt9LFxuICAgICAgY2lyY3VpdF9icmVha2VyczogZ2V0Q2lyY3VpdEJyZWFrZXJTdGF0dXNlcygpXG4gICAgfTtcblxuICAgIHJlcy5qc29uKG9wdGltaXphdGlvbik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIG9wdGltaXphdGlvbiBzdGF0dXM6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IG9wdGltaXphdGlvbiBzdGF0dXMnLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59KTtcblxuLy8gTG9nIG1pZGRsZXdhcmUgdG8gY2hlY2sgaW5jb21pbmcgcmVxdWVzdHNcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxvZ2dlci5pbmZvKGDwn5SNIEluY29taW5nIHJlcXVlc3Q6ICR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfWAsIHtcbiAgICBpcDogcmVxLmlwLFxuICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpLFxuICAgIGhlYWRlcnM6IHJlcS5oZWFkZXJzXG4gIH0pO1xuICBuZXh0KCk7XG59KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8qKlxuICAgKiBAc3dhZ2dlclxuICAgKiAvYXBpL2xvZ2luOlxuICAgKiAgIHBvc3Q6XG4gICAqICAgICB0YWdzOlxuICAgKiAgICAgICAtIEF1dGhlbnRpY2F0aW9uXG4gICAqICAgICBzdW1tYXJ5OiBMb2dpbiBleGlzdGluZyB1c2VyXG4gICAqICAgICBkZXNjcmlwdGlvbjogQXV0aGVudGljYXRlcyBhbmQgbG9ncyBpbiBhbiBleGlzdGluZyB1c2VyIHdpdGggSldUIHRva2VuXG4gICAqICAgICByZXF1ZXN0Qm9keTpcbiAgICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICogICAgICAgY29udGVudDpcbiAgICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAgKiAgICAgICAgICAgc2NoZW1hOlxuICAgKiAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvTG9naW5SZXF1ZXN0J1xuICAgKiAgICAgcmVzcG9uc2VzOlxuICAgKiAgICAgICAyMDA6XG4gICAqICAgICAgICAgZGVzY3JpcHRpb246IExvZ2luIHN1Y2Nlc3NmdWxcbiAgICogICAgICAgICBjb250ZW50OlxuICAgKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgICogICAgICAgICAgICAgc2NoZW1hOlxuICAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9BdXRoUmVzcG9uc2UnXG4gICAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gICAqICAgICAgICAgICAgICAgdG9rZW46IFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5Li4uXCJcbiAgICogICAgICAgICAgICAgICB1c2VyOlxuICAgKiAgICAgICAgICAgICAgICAgaWQ6IFwiNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDExXCJcbiAgICogICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImpvaG5fZG9lXCJcbiAgICogICAgICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAgKiAgICAgICAgICAgICAgICAgcm9sZTogXCJtZW1iZXJcIlxuICAgKiAgICAgICA0MDA6XG4gICAqICAgICAgICAgZGVzY3JpcHRpb246IEludmFsaWQgY3JlZGVudGlhbHMgb3IgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICogICAgICAgICBjb250ZW50OlxuICAgKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgICogICAgICAgICAgICAgc2NoZW1hOlxuICAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICAgKiAgICAgICAgICAgICBleGFtcGxlOlxuICAgKiAgICAgICAgICAgICAgIGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHNcIlxuICAgKiAgICAgICA1MDA6XG4gICAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICAgKi9cbmNvbnNvbGUubG9nKCfwn5SnIFBPU1QgL2FwaS9sb2dpbiByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcbmFwcC5wb3N0KCcvYXBpL2xvZ2luJywgW1xuICBib2R5KCdpZGVudGlmaWVyJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAgfSkudHJpbSgpLFxuICBib2R5KCdwYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA2LCBtYXg6IDEwMCB9KVxuXSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIFVzZSBBdXRoU2VydmljZSBmb3IgbG9naW4gaGFuZGxpbmdcbiAgYXdhaXQgYXV0aFNlcnZpY2UuaGFuZGxlTG9naW5XaXRoU2Vzc2lvbihyZXEuYm9keS5pZGVudGlmaWVyLCByZXEuYm9keS5wYXNzd29yZCwgcmVxLCByZXMpO1xufSk7XG5cbi8qKlxuICAgKiBAc3dhZ2dlclxuICAgKiAvYXBpL3JlZ2lzdGVyOlxuICAqICAgcG9zdDpcbiAgKiAgICAgdGFnczpcbiAgKiAgICAgICAtIEF1dGhlbnRpY2F0aW9uXG4gICogICAgIHN1bW1hcnk6IFJlZ2lzdGVyIG5ldyB1c2VyXG4gICogICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgcmV0dXJucyBKV1QgdG9rZW5cbiAgKiAgICAgcmVxdWVzdEJvZHk6XG4gICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgKiAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAgKiAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9SZWdpc3RlclJlcXVlc3QnXG4gICogICAgICAgICAgIGV4YW1wbGU6XG4gICogICAgICAgICAgICAgbmlja25hbWU6IFwiam9obl9kb2VcIlxuICAqICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgIHBhc3N3b3JkOiBcInNlY3VyZVBhc3MxMjNcIlxuICAqICAgICByZXNwb25zZXM6XG4gICogICAgICAgMjAxOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsXG4gICogICAgICAgICBjb250ZW50OlxuICAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICAqICAgICAgICAgICAgIHNjaGVtYTpcbiAgKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9BdXRoUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIHRva2VuOiBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS4uLlwiXG4gICogICAgICAgICAgICAgICB1c2VyOlxuICAqICAgICAgICAgICAgICAgICBpZDogXCI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTFcIlxuICAqICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqb2huX2RvZVwiXG4gICogICAgICAgICAgICAgICAgIGVtYWlsOiBcImpvaG5AZXhhbXBsZS5jb21cIlxuICAqICAgICAgICAgICAgICAgICByb2xlOiBcIm1lbWJlclwiXG4gICogICAgICAgNDAwOlxuICAqICAgICAgICAgZGVzY3JpcHRpb246IFZhbGlkYXRpb24gZXJyb3JzIG9yIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgKiAgICAgICAgIGNvbnRlbnQ6XG4gICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gICogICAgICAgICAgICAgc2NoZW1hOlxuICAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yUmVzcG9uc2UnXG4gICogICAgICAgICAgICAgZXhhbXBsZTpcbiAgKiAgICAgICAgICAgICAgIGVycm9yOiBcIk5pY2tuYW1lIGFscmVhZHkgdGFrZW5cIlxuICAqICAgICAgIDUwMDpcbiAgKiAgICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3JcbiAgKi9cbmFwcC5wb3N0KCcvYXBpL3JlZ2lzdGVyJywgYXV0aFNlcnZpY2UuYXV0aFJhdGVMaW1pdGVyLCBbXG4gIGJvZHkoJ25pY2tuYW1lJykuaXNMZW5ndGgoeyBtaW46IDMsIG1heDogNTAgfSkudHJpbSgpLmVzY2FwZSgpLFxuICBib2R5KCdlbWFpbCcpLmlzRW1haWwoKS5ub3JtYWxpemVFbWFpbCgpLFxuICBib2R5KCdwYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA2IH0pXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gVXNlIEF1dGhTZXJ2aWNlIGZvciByZWdpc3RyYXRpb24gaGFuZGxpbmdcbiAgYXdhaXQgYXV0aFNlcnZpY2UuaGFuZGxlUmVnaXN0cmF0aW9uV2l0aFNlc3Npb24ocmVxLmJvZHksIHJlcSwgcmVzKTtcbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL2NoYW5uZWxzOlxuICogICBnZXQ6XG4gKiAgICAgdGFnczpcbiAqICAgICAgIC0gQ2hhbm5lbHNcbiAqICAgICBzdW1tYXJ5OiBHZXQgbGlzdCBvZiBjaGFubmVsc1xuICogICAgIGRlc2NyaXB0aW9uOiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgY2hhbm5lbHNcbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMaXN0IG9mIGNoYW5uZWxzXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWwnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICAtIGlkOiBcImdlbmVyYWxcIlxuICogICAgICAgICAgICAgICAgIG5hbWU6IFwiR2VuZXJhbFwiXG4gKiAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIlxuICogICAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogXCJzeXN0ZW1cIlxuICogICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAwXG4gKiAgICAgICA0MDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVbmF1dGhvcml6ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3JSZXNwb25zZSdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGVycm9yOiBcIkFjY2VzcyB0b2tlbiByZXF1aXJlZFwiXG4gKiAgICAgICA1MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcbiAqL1xuY29uc29sZS5sb2coJ/CflKcgR0VUIC9hcGkvY2hhbm5lbHMgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAuZ2V0KCcvYXBpL2NoYW5uZWxzJywgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVG9rZW4uYmluZChhdXRoU2VydmljZSksIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coJ/CfmoAgR0VUIC9hcGkvY2hhbm5lbHMgZW5kcG9pbnQgY2FsbGVkJywgeyBtZXRob2Q6IHJlcS5tZXRob2QsIHVybDogcmVxLnVybCwgaGVhZGVyczogcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA/ICdhdXRoIGhlYWRlciBwcmVzZW50JyA6ICdubyBhdXRoIGhlYWRlcicgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCBDaGFubmVsLmZpbmQoe30pXG4gICAgICAuc2VsZWN0KCctX2lkIGlkIG5hbWUgdHlwZSBkZXNjcmlwdGlvbiBjcmVhdGVkQnkgcG9zaXRpb24nKVxuICAgICAgLnNvcnQoeyBwb3NpdGlvbjogMSB9KTtcblxuICAgIGxvZ2dlci5pbmZvKGBDaGFubmVscyBsaXN0IHJlcXVlc3RlZCBieSAke3JlcS51c2VyLm5pY2tuYW1lfWAsIHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxuICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVscy5sZW5ndGhcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFJldHVybmluZyBjaGFubmVscyBkYXRhOicsIGNoYW5uZWxzLmxlbmd0aCk7XG4gICAgcmVzLmpzb24oY2hhbm5lbHMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hhbm5lbHM6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBHRVQgL2FwaS9jaGFubmVsczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGNoYW5uZWxzJywgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyB9KTtcbiAgfVxufSk7XG5cbmNvbnNvbGUubG9nKCfwn5SnIFBPU1QgL2FwaS9jaGFubmVscyByb3V0ZSByZWdpc3RlcmVkIGF0IHN0YXJ0dXAnKTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS9jaGFubmVsczpcbiAqICAgcG9zdDpcbiAqICAgICB0YWdzOlxuICogICAgICAgLSBDaGFubmVsc1xuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIG5ldyBjaGFubmVsXG4gKiAgICAgZGVzY3JpcHRpb246IENyZWF0ZXMgYSBuZXcgdGV4dCBvciB2b2ljZSBjaGFubmVsXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvQ2hhbm5lbFJlcXVlc3QnXG4gKiAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgIG5hbWU6IFwiTmV3Q2hhbm5lbFwiXG4gKiAgICAgICAgICAgICB0eXBlOiBcInRleHRcIlxuICogICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRGVzY3JpcHRpb24gb2YgdGhlIG5ldyBjaGFubmVsXCJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICAyMDE6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBDaGFubmVsIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0NoYW5uZWwnXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBpZDogXCJuZXdjaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgbmFtZTogXCJOZXdDaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCJcbiAqICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRGVzY3JpcHRpb24gb2YgdGhlIG5ldyBjaGFubmVsXCJcbiAqICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBcImpvaG5fZG9lXCJcbiAqICAgICAgICAgICAgICAgcG9zaXRpb246IDEwXG4gKiAgICAgICA0MDA6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBJbnZhbGlkIHJlcXVlc3QgZGF0YVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvclJlc3BvbnNlJ1xuICogICAgICAgNDAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogVW5hdXRob3JpemVkXG4gKiAgICAgICA0MDk6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBDaGFubmVsIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAqICAgICAgIDUwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFNlcnZlciBlcnJvclxuICovXG5hcHAucG9zdCgnL2FwaS9jaGFubmVscycsIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuLmJpbmQoYXV0aFNlcnZpY2UpLCBhcGlSYXRlTGltaXRlciwgW1xuICBib2R5KCduYW1lJykuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogMTAwIH0pLnRyaW0oKS5lc2NhcGUoKSxcbiAgYm9keSgndHlwZScpLmlzSW4oWyd0ZXh0JywgJ3ZvaWNlJ10pLnRyaW0oKSxcbiAgYm9keSgnZGVzY3JpcHRpb24nKS5vcHRpb25hbCgpLmlzTGVuZ3RoKHsgbWF4OiA1MDAgfSkudHJpbSgpXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmFtZSwgdHlwZSwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGNyZWF0ZWRCeSA9IHJlcS51c2VyLm5pY2tuYW1lO1xuXG4gICAgLy8gQ3JlYXRlIG5ldyBjaGFubmVsIChJRCB3aWxsIGJlIGF1dG8tZ2VuZXJhdGVkIGluIHByZS1zYXZlIG1pZGRsZXdhcmUpXG4gICAgY29uc3QgY2hhbm5lbCA9IG5ldyBDaGFubmVsKHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQnlcbiAgICB9KTtcblxuICAgIGF3YWl0IGNoYW5uZWwuc2F2ZSgpO1xuXG4gICAgbG9nZ2VyLmluZm8oYENoYW5uZWwgJyR7bmFtZX0nIGNyZWF0ZWQgYnkgJHtjcmVhdGVkQnl9YCwge1xuICAgICAgY2hhbm5lbElkOiBjaGFubmVsLmlkLFxuICAgICAgdHlwZSxcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkXG4gICAgfSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBpZDogY2hhbm5lbC5pZCxcbiAgICAgIG5hbWU6IGNoYW5uZWwubmFtZSxcbiAgICAgIHR5cGU6IGNoYW5uZWwudHlwZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBjaGFubmVsLmRlc2NyaXB0aW9uLFxuICAgICAgY3JlYXRlZEJ5OiBjaGFubmVsLmNyZWF0ZWRCeSxcbiAgICAgIHBvc2l0aW9uOiBjaGFubmVsLnBvc2l0aW9uXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNoYW5uZWw6JywgZXJyb3IpO1xuXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgY2hhbm5lbCBkYXRhJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0NoYW5uZWwgbmFtZSBhbHJlYWR5IGV4aXN0cycsXG4gICAgICAgIGNvZGU6ICdEVVBMSUNBVEVfQ0hBTk5FTCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBjaGFubmVsJyxcbiAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUidcbiAgICB9KTtcbiAgfVxufSk7XG5cbmNvbnNvbGUubG9nKCfwn5SnIFBPU1QgL2FwaS9sb2dvdXQgcm91dGUgcmVnaXN0ZXJlZCBhdCBzdGFydHVwJyk7XG5hcHAucG9zdCgnL2FwaS9sb2dvdXQnLCBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVUb2tlbi5iaW5kKGF1dGhTZXJ2aWNlKSwgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5qqIExvZ291dCByZXF1ZXN0IGZyb20gdXNlcjonLCByZXEudXNlci5uaWNrbmFtZSwgeyB1c2VySWQ6IHJlcS51c2VyLl9pZCB9KTtcblxuICAgIC8vIERpc2Nvbm5lY3QgYWxsIFNvY2tldC5JTyBjb25uZWN0aW9ucyBmb3IgdGhpcyB1c2VyXG4gICAgY29uc3Qgc29ja2V0cyA9IG9ubGluZVVzZXJzO1xuICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBbc29ja2V0SWQsIHNvY2tldERhdGFdIG9mIHNvY2tldHMuZW50cmllcygpKSB7XG4gICAgICBpZiAoc29ja2V0RGF0YS51c2VySWQgPT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICBkaXNjb25uZWN0ZWRDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIHRvIG9mZmxpbmVcbiAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS51c2VyLl9pZCwge1xuICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIFVzZXIgJHtyZXEudXNlci5uaWNrbmFtZX0gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHksICR7ZGlzY29ubmVjdGVkQ291bnR9IGNvbm5lY3Rpb25zIGRpc2Nvbm5lY3RlZGApO1xuICAgIGxvZ2dlci5pbmZvKGBVc2VyIGxvZ2dlZCBvdXQ6ICR7cmVxLnVzZXIubmlja25hbWV9YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXG4gICAgICBkaXNjb25uZWN0ZWRTb2NrZXRzOiBkaXNjb25uZWN0ZWRDb3VudFxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdMb2dnZWQgb3V0IHN1Y2Nlc3NmdWxseScsXG4gICAgICBkaXNjb25uZWN0ZWRDb3VudFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignTG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBsb2dvdXQnIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBTZXNzaW9uIGxvZ291dCBlbmRwb2ludCAtIGRlc3Ryb3lzIHNlc3Npb25cbiAqIFRoaXMgY29tcGxlbWVudHMgSldUIGxvZ291dCB0byBoYW5kbGUgc2Vzc2lvbi1iYXNlZCBhdXRoZW50aWNhdGlvblxuICovXG5hcHAucG9zdCgnL2FwaS9sb2dvdXRfc2Vzc2lvbicsIGFwaVJhdGVMaW1pdGVyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+aqiBTZXNzaW9uIGxvZ291dCByZXF1ZXN0LCBzZXNzaW9uSWQ6JywgcmVxLnNlc3Npb25JZCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFuIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiBvciBKV1QgdXNlclxuICAgIGNvbnN0IGhhc0p3dEF1dGggPSAhIXJlcS51c2VyOyAvLyBGcm9tIEpXVCBtaWRkbGV3YXJlXG4gICAgY29uc3QgaGFzU2Vzc2lvbkF1dGggPSByZXEuc2Vzc2lvblVzZXIgfHwgKHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQpO1xuICAgIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi51c2VySWQ7XG5cbiAgICBjb25zb2xlLmxvZygn8J+klCBTZXNzaW9uIGxvZ291dCBjaGVjazonLCB7XG4gICAgICBoYXNKd3RBdXRoLFxuICAgICAgaGFzU2Vzc2lvbkF1dGgsXG4gICAgICBzZXNzaW9uVXNlcklkLFxuICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkXG4gICAgfSk7XG5cbiAgICBpZiAoaGFzU2Vzc2lvbkF1dGgpIHtcbiAgICAgIGNvbnN0IHNlc3Npb25Vc2VyID0gc2Vzc2lvblVzZXJJZCA/IGF3YWl0IFVzZXIuZmluZEJ5SWQoc2Vzc2lvblVzZXJJZCkgOiBudWxsO1xuICAgICAgY29uc3Qgbmlja25hbWUgPSBzZXNzaW9uVXNlciA/IHNlc3Npb25Vc2VyLm5pY2tuYW1lIDogJ3Vua25vd24nO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gbG9nb3V0OiBEZXN0cm95aW5nIHNlc3Npb24gZm9yIHVzZXI6Jywgbmlja25hbWUpO1xuXG4gICAgICAvLyBEaXNjb25uZWN0IFNvY2tldC5JTyBjb25uZWN0aW9ucyBmb3IgdGhpcyBzZXNzaW9uIHVzZXJcbiAgICAgIGlmIChzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgIGNvbnN0IHNvY2tldHMgPSBvbmxpbmVVc2VycztcbiAgICAgICAgbGV0IGRpc2Nvbm5lY3RlZENvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBbc29ja2V0SWQsIHNvY2tldERhdGFdIG9mIHNvY2tldHMuZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKHNvY2tldERhdGEudXNlcklkID09PSBzZXNzaW9uVXNlcklkKSB7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyBTZXNzaW9uIGxvZ291dDogRGlzY29ubmVjdGVkICR7ZGlzY29ubmVjdGVkQ291bnR9IHNvY2tldCBjb25uZWN0aW9uc2ApO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXN0cm95IHRoZSBzZXNzaW9uXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlcS5zZXNzaW9uLmRlc3Ryb3koKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTZXNzaW9uIGRlc3Ryb3kgZXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gZGVzdHJveWVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFNlc3Npb24gbG9nZ2VkIG91dDogJHtuaWNrbmFtZX1gLCB7XG4gICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JZCxcbiAgICAgICAgaXA6IHJlcS5pcFxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB0eXBlOiAnc2Vzc2lvbl9sb2dvdXQnLFxuICAgICAgICBzZXNzaW9uRGVzdHJveWVkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBTZXNzaW9uIGxvZ291dDogTm8gYXV0aGVudGljYXRlZCBzZXNzaW9uIHRvIGRlc3Ryb3knKTtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ05vIGFjdGl2ZSBzZXNzaW9uIHRvIGxvZyBvdXQnLFxuICAgICAgICB0eXBlOiAnc2Vzc2lvbl9sb2dvdXQnLFxuICAgICAgICBzZXNzaW9uRGVzdHJveWVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdTZXNzaW9uIGxvZ291dCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3IgZHVyaW5nIHNlc3Npb24gbG9nb3V0JyxcbiAgICAgIGNvZGU6ICdTRVNTSU9OX0xPR09VVF9FUlJPUidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIEh5YnJpZCBsb2dvdXQgZW5kcG9pbnQgLSBoYW5kbGVzIGJvdGggSldUIGFuZCBzZXNzaW9uIGxvZ291dFxuYXBwLnBvc3QoJy9hcGkvbG9nb3V0X2NvbXBsZXRlJywgYXBpUmF0ZUxpbWl0ZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5qqIENvbXBsZXRlIGxvZ291dCByZXF1ZXN0IChKV1QgKyBTZXNzaW9uKSwgc2Vzc2lvbklkOicsIHJlcS5zZXNzaW9uSWQpO1xuXG4gICAgY29uc3QgaGFzSnd0QXV0aCA9ICEhcmVxLnVzZXI7XG4gICAgY29uc3QgaGFzU2Vzc2lvbkF1dGggPSByZXEuc2Vzc2lvblVzZXIgfHwgKHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLmF1dGhlbnRpY2F0ZWQpO1xuICAgIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi51c2VySWQ7XG5cbiAgICBsZXQgand0TG9nb3V0UmVzdWx0ID0gbnVsbDtcbiAgICBsZXQgc2Vzc2lvbkxvZ291dFJlc3VsdCA9IG51bGw7XG5cbiAgICAvLyBIYW5kbGUgSldUIGxvZ291dCBpZiBKV1QgaXMgcHJvdmlkZWRcbiAgICBpZiAoaGFzSnd0QXV0aCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc29ja2V0cyA9IG9ubGluZVVzZXJzO1xuICAgICAgICBsZXQgZGlzY29ubmVjdGVkQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IFtzb2NrZXRJZCwgc29ja2V0RGF0YV0gb2Ygc29ja2V0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoc29ja2V0RGF0YS51c2VySWQgPT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBpby5zb2NrZXRzLnNvY2tldHMuZ2V0KHNvY2tldElkKTtcbiAgICAgICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgZGlzY29ubmVjdGVkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS51c2VyLl9pZCwge1xuICAgICAgICAgIHN0YXR1czogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgand0TG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGlzY29ubmVjdGVkQ291bnRcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGp3dEVycm9yKSB7XG4gICAgICAgIGp3dExvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogand0RXJyb3IubWVzc2FnZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzZXNzaW9uIGxvZ291dCBpZiBzZXNzaW9uIGV4aXN0c1xuICAgIGlmIChoYXNTZXNzaW9uQXV0aCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgICBjb25zdCBzZXNzaW9uVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoc2Vzc2lvblVzZXJJZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGxvZ291dDogRGVzdHJveWluZyBzZXNzaW9uIGZvciB1c2VyOicsIHNlc3Npb25Vc2VyID8gc2Vzc2lvblVzZXIubmlja25hbWUgOiAndW5rbm93bicpO1xuXG4gICAgICAgICAgLy8gRGlzY29ubmVjdCBTb2NrZXQuSU8gY29ubmVjdGlvbnMgZm9yIHRoaXMgc2Vzc2lvbiB1c2VyXG4gICAgICAgICAgY29uc3Qgc29ja2V0cyA9IG9ubGluZVVzZXJzO1xuICAgICAgICAgIGxldCBkaXNjb25uZWN0ZWRDb3VudCA9IDA7XG4gICAgICAgICAgZm9yIChjb25zdCBbc29ja2V0SWQsIHNvY2tldERhdGFdIG9mIHNvY2tldHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoc29ja2V0RGF0YS51c2VySWQgPT09IHNlc3Npb25Vc2VySWQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gaW8uc29ja2V0cy5zb2NrZXRzLmdldChzb2NrZXRJZCk7XG4gICAgICAgICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZENvdW50Kys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfl5HvuI8gU2Vzc2lvbiBsb2dvdXQ6IERpc2Nvbm5lY3RlZCAke2Rpc2Nvbm5lY3RlZENvdW50fSBzb2NrZXQgY29ubmVjdGlvbnNgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlc3Ryb3kgdGhlIHNlc3Npb25cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIHJlcS5zZXNzaW9uLmRlc3Ryb3koKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2Vzc2lvbkxvZ291dFJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHNlc3Npb25EZXN0cm95ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKHNlc3Npb25FcnJvcikge1xuICAgICAgICBzZXNzaW9uTG9nb3V0UmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBzZXNzaW9uRXJyb3IubWVzc2FnZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG92ZXJhbGxTdWNjZXNzID0gKCFqd3RMb2dvdXRSZXN1bHQgfHwgand0TG9nb3V0UmVzdWx0LnN1Y2Nlc3MpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICghc2Vzc2lvbkxvZ291dFJlc3VsdCB8fCBzZXNzaW9uTG9nb3V0UmVzdWx0LnN1Y2Nlc3MpO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2Vzczogb3ZlcmFsbFN1Y2Nlc3MsXG4gICAgICBtZXNzYWdlOiAnQ29tcGxldGUgbG9nb3V0IHByb2Nlc3NlZCcsXG4gICAgICB0eXBlOiAnY29tcGxldGVfbG9nb3V0JyxcbiAgICAgIGp3dDogand0TG9nb3V0UmVzdWx0LFxuICAgICAgc2Vzc2lvbjogc2Vzc2lvbkxvZ291dFJlc3VsdFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdDb21wbGV0ZSBsb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yIGR1cmluZyBjb21wbGV0ZSBsb2dvdXQnLFxuICAgICAgY29kZTogJ0NPTVBMRVRFX0xPR09VVF9FUlJPUidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vICA0MDQgaGFuZGxlciAobXVzdCBiZSBiZWZvcmUgZ2xvYmFsIGVycm9yIGhhbmRsZXIpXG5hcHAudXNlKChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLndhcm4oJ+KdjCBGaW5hbCA0MDQgaGFuZGxlciBleGVjdXRlZCAtIHJvdXRlIG5vdCBmb3VuZCEnLCB7IG1ldGhvZDogcmVxLm1ldGhvZCwgdXJsOiByZXEudXJsIH0pO1xuICBsb2dnZXIud2FybihgNDA0IC0gJHtyZXEubWV0aG9kfSAke3JlcS51cmx9YCwge1xuICAgIGlwOiByZXEuaXAsXG4gICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JylcbiAgfSk7XG5cbiAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgIGVycm9yOiAnRW5kcG9pbnQgbm90IGZvdW5kJyxcbiAgICBwYXRoOiByZXEudXJsLFxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICBjb2RlOiAnTk9UX0ZPVU5EJ1xuICB9KTtcbn0pO1xuXG4vLyBHbG9iYWwgZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZSAobXVzdCBiZSBsYXN0KVxuYXBwLnVzZShlcnJvckhhbmRsZXIpO1xuXG5cblxuXG5cblxuXG5cblxuLy8gR2xvYmFsIHVzZXJzIG1hcCBmb3Igc29ja2V0IG1hbmFnZW1lbnQge3NvY2tldElkOiB7dXNlcklkLCBuaWNrbmFtZSwgcm9vbX19XG5sZXQgb25saW5lVXNlcnMgPSBuZXcgTWFwKCk7XG5cbi8vIFVzZXIgY29ubmVjdGlvbiBjb3VudGVyIHt1c2VySWQ6IGNvbm5lY3Rpb25Db3VudH1cbmxldCB1c2VyQ29ubmVjdGlvbnMgPSBuZXcgTWFwKCk7XG5cbi8vIFZvaWNlIGNoYW5uZWxzIG1hbmFnZW1lbnRcbmNvbnN0IHZvaWNlQ2hhbm5lbHMgPSBuZXcgTWFwKCk7IC8vIGNoYW5uZWxJZCAtPiB7IHNvY2tldElkOiB7IHBlZXJDb25uZWN0aW9uLCBzdHJlYW0gfSB9XG5cbi8vIEltcHJvdmVkIFNvY2tldC5JTyBzZXNzaW9uIG1pZGRsZXdhcmUgd2l0aCBwcm9wZXIgcmVzIG9iamVjdCBoYW5kbGluZ1xuaW8udXNlKChzb2NrZXQsIG5leHQpID0+IHtcbiAgLy8gQ3JlYXRlIGEgbW9yZSBjb21wbGV0ZSBtb2NrIHJlcyBvYmplY3QgaWYgbWlzc2luZ1xuICBpZiAoIXNvY2tldC5yZXF1ZXN0LnJlcykge1xuICAgIHNvY2tldC5yZXF1ZXN0LnJlcyA9IHtcbiAgICAgIHNldEhlYWRlcjogKCkgPT4ge30sXG4gICAgICBnZXRIZWFkZXI6ICgpID0+IHt9LFxuICAgICAgd3JpdGVIZWFkOiAoKSA9PiB7fSxcbiAgICAgIGVuZDogKCkgPT4ge30sXG4gICAgICBoZWFkZXJzU2VudDogZmFsc2UsXG4gICAgICBzdGF0dXNDb2RlOiAyMDBcbiAgICB9O1xuICB9XG5cbiAgLy8gQXBwbHkgc2Vzc2lvbiBtaWRkbGV3YXJlIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgc2Vzc2lvbk1pZGRsZXdhcmUoc29ja2V0LnJlcXVlc3QsIHNvY2tldC5yZXF1ZXN0LnJlcywgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Nlc3Npb24gbWlkZGxld2FyZSBlcnJvciBmb3IgU29ja2V0LklPOicsIGVycik7XG4gICAgICByZXR1cm4gbmV4dChlcnIpO1xuICAgIH1cbiAgICBuZXh0KCk7XG4gIH0pO1xufSk7XG5cbi8vIFNvY2tldC5JTyBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlXG5pby51c2UoYXN5bmMgKHNvY2tldCwgbmV4dCkgPT4ge1xuICBjb25zdCB7IGNzcmZUb2tlbiwgc2Vzc2lvbklkIH0gPSBzb2NrZXQuaGFuZHNoYWtlLmF1dGg7XG4gIGxldCBzZXNzaW9uID0gc29ja2V0LnJlcXVlc3Quc2Vzc2lvbjtcblxuICAvLyBjb25zb2xlLmxvZygn8J+UkSBTb2NrZXQgYXV0aGVudGljYXRpb24gYXR0ZW1wdCB3aXRoIHNlc3Npb24gYW5kIENTUkYgZmluZ2VycHJpbnQgY2hlY2snKTtcbiAgLy8gY29uc29sZS5sb2coJ/CflI0gUmF3IHNvY2tldCBhdXRoIGRhdGE6Jywge1xuICAvLyAgIGNzcmZUb2tlblByb3ZpZGVkOiAhIWNzcmZUb2tlbixcbiAgLy8gICBzZXNzaW9uSWRQcm92aWRlZDogISFzZXNzaW9uSWQsXG4gIC8vICAgc2Vzc2lvbklkTGVuZ3RoOiBzZXNzaW9uSWQ/Lmxlbmd0aCxcbiAgLy8gICBzZXNzaW9uSWRGcm9tQXV0aDogc2Vzc2lvbklkXG4gIC8vIH0pO1xuXG4gIC8vIElmIHNlc3Npb25JZCBpcyBwcm92aWRlZCBpbiBhdXRoLCB0cnkgdG8gcmVjb3ZlciB0aGUgc2Vzc2lvbiBmcm9tIE1vbmdvREIgc3RvcmVcbiAgaWYgKHNlc3Npb25JZCAmJiAoIXNlc3Npb24gfHwgIXNlc3Npb24uYXV0aGVudGljYXRlZCkpIHtcbiAgICAvLyBjb25zb2xlLmxvZygn8J+UhCBBdHRlbXB0aW5nIHNlc3Npb24gcmVjb3ZlcnkgZnJvbSBNb25nb0RCIHN0b3JlIHVzaW5nIHNlc3Npb25JZDonLCBzZXNzaW9uSWQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIExvYWQgc2Vzc2lvbiBmcm9tIE1vbmdvREIgc3RvcmUgdXNpbmcgdGhlIHNlc3Npb25JZCBmcm9tIEpXVCBhdXRoXG4gICAgICBjb25zdCBNb25nb1N0b3JlSW5zdGFuY2UgPSBzZXNzaW9uTWlkZGxld2FyZS5zdG9yZTtcbiAgICAgIGlmIChNb25nb1N0b3JlSW5zdGFuY2UgJiYgdHlwZW9mIE1vbmdvU3RvcmVJbnN0YW5jZS5nZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgTW9uZ29TdG9yZUluc3RhbmNlLmdldChzZXNzaW9uSWQsIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgZWxzZSByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygn8J+UhCBNb25nb0RCIHNlc3Npb24gbG9va3VwIHJlc3VsdDonLCB7XG4gICAgICAgIC8vICAgc2Vzc2lvbkZvdW5kOiAhIXNlc3Npb25EYXRhLFxuICAgICAgICAvLyAgIHNlc3Npb25BdXRoZW50aWNhdGVkOiBzZXNzaW9uRGF0YT8uYXV0aGVudGljYXRlZCxcbiAgICAgICAgLy8gICBzZXNzaW9uVXNlcklkOiBzZXNzaW9uRGF0YT8udXNlcklkLFxuICAgICAgICAvLyAgIHNlc3Npb25Dc3JmVG9rZW46ICEhc2Vzc2lvbkRhdGE/LmNzcmZUb2tlbixcbiAgICAgICAgLy8gICBjc3JmVG9rZW5NYXRjaGVzOiBjc3JmVG9rZW4gJiYgc2Vzc2lvbkRhdGE/LmNzcmZUb2tlbiAmJiBjc3JmVG9rZW4gPT09IHNlc3Npb25EYXRhLmNzcmZUb2tlblxuICAgICAgICAvLyB9KTtcblxuICAgICAgICBpZiAoc2Vzc2lvbkRhdGEgJiYgc2Vzc2lvbkRhdGEuYXV0aGVudGljYXRlZCkge1xuICAgICAgICAgIC8vIFJlcGxhY2Ugc29ja2V0LnJlcXVlc3Quc2Vzc2lvbiB3aXRoIGxvYWRlZCBzZXNzaW9uXG4gICAgICAgICAgc29ja2V0LnJlcXVlc3Quc2Vzc2lvbiA9IHNlc3Npb25EYXRhO1xuICAgICAgICAgIHNlc3Npb24gPSBzZXNzaW9uRGF0YTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNvY2tldCBzZXNzaW9uIHJlY292ZXJlZCBmcm9tIE1vbmdvREInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFNvY2tldCBzZXNzaW9uIG5vdCBmb3VuZCBpbiBNb25nb0RCIHN0b3JlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGxvYWRpbmcgU09DS0VUIHNlc3Npb24gZnJvbSBNb25nb0RCOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnNvbGUubG9nKCfwn5STIEZpbmdlcnByaW50IHZlcmlmaWNhdGlvbjonLCB7XG4gICAgc2lkOiBzb2NrZXQucmVxdWVzdC5zZXNzaW9uSWQsXG4gICAgcHJvdmlkZWRDc3JmVG9rZW46IGNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgc2Vzc2lvbkNzcmZUb2tlbjogc2Vzc2lvbj8uY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICB1c2VyQWdlbnQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb24/LnVzZXJBZ2VudD8uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nLFxuICAgIGxvZ2luVGltZTogc2Vzc2lvbj8ubG9naW5UaW1lLFxuICAgIHJlZ2lzdHJhdGlvblRpbWU6IHNlc3Npb24/LnJlZ2lzdHJhdGlvblRpbWVcbiAgfSk7XG5cbiAgLy8gVmFsaWRhdGUgc2Vzc2lvbiBleGlzdHMgYW5kIGhhcyBhdXRoZW50aWNhdGlvblxuICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24uYXV0aGVudGljYXRlZCB8fCAhc2Vzc2lvbi51c2VySWQpIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IE5vIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiBmb3VuZCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIFNlc3Npb24gZGV0YWlsczonLCB7XG4gICAgICBzZXNzaW9uSWQ6IHNvY2tldC5yZXF1ZXN0LnNlc3Npb25JZCxcbiAgICAgIHNlc3Npb246ICEhc2Vzc2lvbixcbiAgICAgIGF1dGhlbnRpY2F0ZWQ6IHNlc3Npb24/LmF1dGhlbnRpY2F0ZWQsXG4gICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXJJZFxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignU2Vzc2lvbiBhdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpKTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIENTUkYgdG9rZW4gZm9yIGFkZGl0aW9uYWwgc2VjdXJpdHkgKG11c3QgbWF0Y2ggc2Vzc2lvbidzIHVuaXF1ZSBDU1JGIHRva2VuKVxuICBpZiAoIWNzcmZUb2tlbiB8fCAhc2Vzc2lvbi5jc3JmVG9rZW4gfHwgY3NyZlRva2VuICE9PSBzZXNzaW9uLmNzcmZUb2tlbikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogSW52YWxpZCBDU1JGIHRva2VuIGZpbmdlcnByaW50Jyk7XG4gICAgY29uc29sZS5sb2coJ/CflJIgRmluZ2VycHJpbnQgbWlzbWF0Y2ggZGV0YWlsczonLCB7XG4gICAgICBwcm92aWRlZDogY3NyZlRva2VuPy5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyxcbiAgICAgIGV4cGVjdGVkOiBzZXNzaW9uLmNzcmZUb2tlbj8uc3Vic3RyaW5nKDAsIDgpICsgJy4uLicsXG4gICAgICBtYXRjaDogY3NyZlRva2VuID09PSBzZXNzaW9uLmNzcmZUb2tlblxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignQ1NSRiB2YWxpZGF0aW9uIGZhaWxlZCcpKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCfinIUgU29ja2V0IGZpbmdlcnByaW50IHZlcmlmaWNhdGlvbiBzdWNjZXNzZnVsJyk7XG5cbiAgdHJ5IHtcbiAgICAvLyBWZXJpZnkgdXNlciBleGlzdHMgaW4gZGF0YWJhc2VcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzZXNzaW9uLnVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IFVzZXIgbm90IGZvdW5kIGluIERCJyk7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kIGluIHNlc3Npb24nKSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHVzZXIgc3RhdHVzIHVwZGF0ZSBiYXNlZCBvbiBjb25uZWN0aW9uIGNvdW50XG4gICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VySWQ7XG4gICAgY29uc3QgY29ubmVjdGlvbkNvdW50ID0gdXNlckNvbm5lY3Rpb25zLmdldCh1c2VySWQpIHx8IDA7XG4gICAgY29uc3QgbmV3Q29ubmVjdGlvbkNvdW50ID0gY29ubmVjdGlvbkNvdW50ICsgMTtcbiAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q29ubmVjdGlvbkNvdW50KTtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYmFubmVkXG4gICAgaWYgKHVzZXIuaXNCYW5uZWQoKSkge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgYXV0aGVudGljYXRpb24gZmFpbGVkOiBVc2VyIGlzIGJhbm5lZCcsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAgICAgICBiYW5SZWFzb246IHVzZXIuYmFuUmVhc29uLFxuICAgICAgICBiYW5FeHBpcmVzOiB1c2VyLmJhbkV4cGlyZXNcbiAgICAgIH0pO1xuICAgICAgc29ja2V0LmVtaXQoJ2Jhbm5lZCcsIHtcbiAgICAgICAgcmVhc29uOiB1c2VyLmJhblJlYXNvbiB8fCAnWW91IGhhdmUgYmVlbiBiYW5uZWQgZnJvbSB0aGUgc2VydmVyJyxcbiAgICAgICAgZXhwaXJlczogdXNlci5iYW5FeHBpcmVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignVXNlciBpcyBiYW5uZWQnKSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBtdXRlZCBhbmQgZW5mb3JjZSBtdXRlIGluIGNoYXRcbiAgICBjb25zdCBpc011dGVkID0gdXNlci5pc011dGVkKCk7XG4gICAgY29uc29sZS5sb2coJ/CflIcgVXNlciBtdXRlIHN0YXR1cyBjaGVja2VkOicsIHsgbmlja25hbWU6IHVzZXIubmlja25hbWUsIGlzTXV0ZWQsIG11dGVFeHBpcmVzOiB1c2VyLm11dGVFeHBpcmVzIH0pO1xuXG4gICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIHdpdGggY29ubmVjdGlvbiBjb3VudCB0cmFja2luZ1xuICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgIHsgX2lkOiB1c2VySWQgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIHN0YXR1czogbmV3Q29ubmVjdGlvbkNvdW50ID4gMCA/ICdvbmxpbmUnIDogJ29mZmxpbmUnLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBydW5WYWxpZGF0b3JzOiB0cnVlXG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICh1cGRhdGVSZXN1bHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFNvY2tldCBhdXRoOiBVc2VyICR7dXNlci5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvbmxpbmUgKGNvbm5lY3Rpb25zOiAke25ld0Nvbm5lY3Rpb25Db3VudH0pYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciBzdGF0dXMgdXBkYXRlZCB0byBvbmxpbmUgdmlhIHNvY2tldCBhdXRoYCwge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgIGNvbm5lY3Rpb25zOiBuZXdDb25uZWN0aW9uQ291bnQsXG4gICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGUgbG9jYWwgdXNlciBvYmplY3Qgd2l0aCB1cGRhdGVkIGRhdGFcbiAgICB1c2VyLnN0YXR1cyA9IHVwZGF0ZVJlc3VsdCA/IHVwZGF0ZVJlc3VsdC5zdGF0dXMgOiAnb25saW5lJztcbiAgICB1c2VyLmxhc3RBY3RpdmUgPSB1cGRhdGVSZXN1bHQgPyB1cGRhdGVSZXN1bHQubGFzdEFjdGl2ZSA6IG5ldyBEYXRlKCk7XG5cbiAgICAvLyBTZXQgc29ja2V0IHByb3BlcnRpZXMgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgIHNvY2tldC51c2VySWQgPSBzZXNzaW9uLnVzZXJJZDtcbiAgICBzb2NrZXQubmlja25hbWUgPSBzZXNzaW9uLm5pY2tuYW1lO1xuICAgIHNvY2tldC5yb2xlID0gc2Vzc2lvbi5yb2xlIHx8ICdtZW1iZXInO1xuICAgIGNvbnNvbGUubG9nKGDwn46JIFNvY2tldCBhdXRoZW50aWNhdGVkIHZpYSBzZXNzaW9uOiAke3NvY2tldC5uaWNrbmFtZX0gKHVzZXJJZDogJHtzb2NrZXQudXNlcklkfSlgKTtcbiAgICBjb25zb2xlLmxvZygnU29ja2V0IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwnKTtcbiAgICByZXR1cm4gbmV4dCgpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFNvY2tldCBhdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICBsb2dnZXIuZXJyb3IoYFNvY2tldCBhdXRoIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIHtcbiAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb24/LmlkLFxuICAgICAgaXA6IHNvY2tldC5oYW5kc2hha2UuYWRkcmVzc1xuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignU29ja2V0IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ2xlYW51cCBpbmFjdGl2ZSBjb25uZWN0aW9ucyBiYXNlZCBvbiBoZWFydGJlYXRcbiAqL1xuZnVuY3Rpb24gY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMoKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IHRpbWVvdXQgPSA2MDAwMDsgLy8gNjAgc2Vjb25kcyB0aW1lb3V0XG5cbiAgZm9yIChjb25zdCBbc29ja2V0SWQsIHVzZXJdIG9mIG9ubGluZVVzZXJzLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgLSB1c2VyLmxhc3RIZWFydGJlYXQgPiB0aW1lb3V0KSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+nuSBDbGVhbnNpbmcgZGVhZCBjb25uZWN0aW9uIGZvciB1c2VyICR7dXNlci5uaWNrbmFtZX1gKTtcblxuICAgICAgLy8gRm9yY2UgZGlzY29ubmVjdCBzb2NrZXRcbiAgICAgIGNvbnN0IHNvY2tldCA9IGlvLnNvY2tldHMuc29ja2V0cy5nZXQoc29ja2V0SWQpO1xuICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHVzZXIgY29ubmVjdGlvbnMgY291bnRcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25zTGVmdCA9ICh1c2VyQ29ubmVjdGlvbnMuZ2V0KHVzZXIudXNlcklkKSB8fCAwKSAtIDE7XG4gICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXIudXNlcklkLCBNYXRoLm1heCgwLCBjb25uZWN0aW9uc0xlZnQpKTtcblxuICAgICAgLy8gU2V0IHN0YXR1cyB0byBvZmZsaW5lIGlmIGxhc3QgY29ubmVjdGlvblxuICAgICAgaWYgKGNvbm5lY3Rpb25zTGVmdCA8PSAwKSB7XG4gICAgICAgIFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlci51c2VySWQsIHtcbiAgICAgICAgICBzdGF0dXM6ICdvZmZsaW5lJyxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHN0YXR1cyBvbiBjbGVhbnVwOicsIGVycikpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFVzZXIgJHt1c2VyLm5pY2tuYW1lfSBzdGF0dXMgc2V0IHRvIG9mZmxpbmUgKGRlYWQgY29ubmVjdGlvbilgKTtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHNldCB0byBvZmZsaW5lIGR1ZSB0byBkZWFkIGNvbm5lY3Rpb25gLCB7XG4gICAgICAgICAgdXNlcklkOiB1c2VyLnVzZXJJZCxcbiAgICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgICBzb2NrZXRJZDogc29ja2V0SWRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9ubGluZVVzZXJzLmRlbGV0ZShzb2NrZXRJZCk7XG4gICAgfVxuICB9XG59XG5cbi8vIFJ1biBjbGVhbnVwIGV2ZXJ5IDMwIHNlY29uZHMgLSBESVNBQkxFRCBmb3IgdGVzdCBlbnZpcm9ubWVudFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcbiAgc2V0SW50ZXJ2YWwoY2xlYW51cEluYWN0aXZlQ29ubmVjdGlvbnMsIDMwMDAwKTtcbn1cblxuaW8ub24oJ2Nvbm5lY3Rpb24nLCBhc3luYyAoc29ja2V0KSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5qAIFNvY2tldCBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XG4gIGNvbnNvbGUubG9nKGDwn5GkIFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGNvbm5lY3RlZGApO1xuXG4gIC8vIFRyYWNrIG9ubGluZSB1c2VyXG4gIG9ubGluZVVzZXJzLnNldChzb2NrZXQuaWQsIHtcbiAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICByb2xlOiBzb2NrZXQucm9sZSxcbiAgICByb29tOiBudWxsLFxuICAgIGxhc3RIZWFydGJlYXQ6IERhdGUubm93KClcbiAgfSk7XG5cbiAgLy8gTG9nIGN1cnJlbnQgYWN0aXZlIGNvbm5lY3Rpb25zIGNvdW50XG4gIGNvbnNvbGUubG9nKGDwn5OKIEFjdGl2ZSBzb2NrZXQgY29ubmVjdGlvbnM6ICR7b25saW5lVXNlcnMuc2l6ZX0gLSBhdXRoIHN1Y2Nlc3MgZm9yICR7c29ja2V0Lm5pY2tuYW1lfWApO1xuXG4gIC8vIEVuaGFuY2VkIGhlYXJ0YmVhdCBtZWNoYW5pc20gd2l0aCByZWNvbm5lY3Rpb24gbG9naWNcbiAgc29ja2V0Lm9uKCdoZWFydGJlYXQnLCAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG9ubGluZVVzZXJzLmdldChzb2NrZXQuaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgdXNlci5sYXN0SGVhcnRiZWF0ID0gbm93O1xuICAgICAgY29uc29sZS5sb2coYPCfkpMgSGVhcnRiZWF0IHJlY2VpdmVkIGZyb20gdXNlciAke3NvY2tldC5uaWNrbmFtZX0gYXQgJHtuZXcgRGF0ZShub3cpLnRvSVNPU3RyaW5nKCl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci53YXJuKGBIZWFydGJlYXQgcmVjZWl2ZWQgZnJvbSB1bmtub3duIHNvY2tldDogJHtzb2NrZXQuaWR9YCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgaGVhcnRiZWF0IG9uIHVzZXIgYWN0aXZpdHlcbiAgY29uc3QgdXBkYXRlSGVhcnRiZWF0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBvbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgdXNlci5sYXN0SGVhcnRiZWF0ID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2VuZCBoZWFydGJlYXQgdG8gY2xpZW50IHBlcmlvZGljYWxseVxuICBjb25zdCBoZWFydGJlYXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAoc29ja2V0LmNvbm5lY3RlZCkge1xuICAgICAgc29ja2V0LmVtaXQoJ2hlYXJ0YmVhdF9yZXF1ZXN0Jyk7XG4gICAgfVxuICB9LCAxNTAwMCk7IC8vIFNlbmQgaGVhcnRiZWF0IGV2ZXJ5IDE1IHNlY29uZHNcblxuICAvLyBDbGVhciBpbnRlcnZhbCBvbiBkaXNjb25uZWN0XG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGhlYXJ0YmVhdEludGVydmFsKTtcbiAgICAvLyAuLi4gcmVzdCBvZiBkaXNjb25uZWN0IGxvZ2ljXG4gIH0pO1xuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJ5aW5nIGRhdGFiYXNlIG9wZXJhdGlvbnNcbiAgY29uc3QgcmV0cnlEYXRhYmFzZU9wZXJhdGlvbiA9IGFzeW5jIChvcGVyYXRpb24sIHJldHJpZXMgPSAzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcmV0cmllczsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaSA9PT0gcmV0cmllcykgdGhyb3cgZXJyb3I7XG4gICAgICAgIGxvZ2dlci53YXJuKGBEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkLCByZXRyeSAke2kgKyAxfS8ke3JldHJpZXN9OmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwICogKGkgKyAxKSkpOyAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHNvY2tldC5vbignam9pbl9yb29tJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBjb25zdCB7IHJvb20gfSA9IGRhdGE7XG4gICAgaWYgKCFyb29tKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogTm8gcm9vbSBzcGVjaWZpZWQnLCB7XG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgICAgfSk7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdSb29tIG5hbWUgaXMgcmVxdWlyZWQnLFxuICAgICAgICBjb2RlOiAnTUlTU0lOR19ST09NJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygcm9vbSAhPT0gJ3N0cmluZycgfHwgcm9vbS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBsb2dnZXIud2FybignSm9pbiByb29tIGZhaWxlZDogSW52YWxpZCByb29tIGZvcm1hdCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLFxuICAgICAgICByb29tXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgcm9vbSBuYW1lIGZvcm1hdCcsXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX1JPT01fRk9STUFUJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZXRyeURhdGFiYXNlT3BlcmF0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gVmVyaWZ5IGNoYW5uZWwgZXhpc3RzXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBDaGFubmVsLmZpbmRPbmUoeyBpZDogcm9vbSB9KTtcbiAgICAgICAgaWYgKCFjaGFubmVsKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oJ0pvaW4gcm9vbSBmYWlsZWQ6IENoYW5uZWwgbm90IGZvdW5kJywge1xuICAgICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICAgICAgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICAgIHJvb21cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2hhbm5lbCAnJHtyb29tfScgbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdDSEFOTkVMX05PVF9GT1VORCcsXG4gICAgICAgICAgICByb29tLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYW5uZWwgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMZWF2ZSBwcmV2aW91cyByb29tXG4gICAgICAgIGlmIChzb2NrZXQucm9vbSkge1xuICAgICAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbSk7XG4gICAgICAgICAgb25saW5lVXNlcnMuc2V0KHNvY2tldC5pZCwgeyAuLi5vbmxpbmVVc2Vycy5nZXQoc29ja2V0LmlkKSwgcm9vbTogbnVsbCB9KTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSBvbmxpbmUgdXNlcnMgaW4gcHJldmlvdXMgcm9vbVxuICAgICAgICAgIGNvbnN0IHByZXZpb3VzUm9vbVVzZXJzID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdvbmxpbmVfdXNlcnMnLCBwcmV2aW91c1Jvb21Vc2Vycyk7XG4gICAgICAgIH1cblxuICAgICAgICBzb2NrZXQucm9vbSA9IHJvb207XG4gICAgICAgIHNvY2tldC5qb2luKHNvY2tldC5yb29tKTtcblxuICAgICAgICAvLyBVcGRhdGUgdXNlciB0cmFja2luZ1xuICAgICAgICBvbmxpbmVVc2Vycy5zZXQoc29ja2V0LmlkLCB7XG4gICAgICAgICAgLi4ub25saW5lVXNlcnMuZ2V0KHNvY2tldC5pZCksXG4gICAgICAgICAgcm9vbTogc29ja2V0LnJvb21cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgJHtzb2NrZXQubmlja25hbWV9IGpvaW5lZCByb29tICR7c29ja2V0LnJvb219YCk7XG5cbiAgICAgICAgLy8gU2VuZCBzeXN0ZW0gbWVzc2FnZSBhYm91dCBqb2luaW5nXG4gICAgICAgIGNvbnN0IGpvaW5NZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICAgIGF1dGhvcjogJ1N5c3RlbScsXG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgdGV4dDogYCR7c29ja2V0Lm5pY2tuYW1lfSBqb2luZWQgdGhlIGNoYW5uZWwuYCxcbiAgICAgICAgICB0eXBlOiAnc3lzdGVtJ1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgam9pbk1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGF1dGhvcjogam9pbk1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICAgIGNoYW5uZWw6IGpvaW5NZXNzYWdlLmNoYW5uZWwsXG4gICAgICAgICAgdGV4dDogam9pbk1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB0eXBlOiBqb2luTWVzc2FnZS50eXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogam9pbk1lc3NhZ2UudGltZXN0YW1wXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNlbmQgb25saW5lIHVzZXJzIGluIGN1cnJlbnQgcm9vbVxuICAgICAgICBjb25zdCByb29tVXNlcnMgPSBBcnJheS5mcm9tKG9ubGluZVVzZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIodSA9PiB1LnJvb20gPT09IHNvY2tldC5yb29tKVxuICAgICAgICAgIC5tYXAodSA9PiAoeyBuaWNrbmFtZTogdS5uaWNrbmFtZSwgcm9sZTogdS5yb2xlIH0pKTtcbiAgICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ29ubGluZV91c2VycycsIHJvb21Vc2Vycyk7XG5cbiAgICAgICAgLy8gU2VuZCBtZXNzYWdlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgICAgY2hhbm5lbDogc29ja2V0LnJvb20sXG4gICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICB7IHR5cGU6ICdwdWJsaWMnIH0sXG4gICAgICAgICAgICB7IHR5cGU6ICdzeXN0ZW0nIH0sXG4gICAgICAgICAgICB7IGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lIH0sXG4gICAgICAgICAgICB7IHRhcmdldDogc29ja2V0Lm5pY2tuYW1lIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgICAgLmxpbWl0KDEwMClcbiAgICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogMSB9KTsgLy8gUmVzb3J0IGZvciBjaHJvbm9sb2dpY2FsIG9yZGVyXG5cbiAgICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBoaXN0b3J5Lm1hcChtc2cgPT4gKHtcbiAgICAgICAgICBhdXRob3I6IG1zZy5hdXRob3IsXG4gICAgICAgICAgcm9vbTogbXNnLmNoYW5uZWwsXG4gICAgICAgICAgdGV4dDogbXNnLnRleHQsXG4gICAgICAgICAgdHlwZTogbXNnLnR5cGUsXG4gICAgICAgICAgdGFyZ2V0OiBtc2cudGFyZ2V0LFxuICAgICAgICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcFxuICAgICAgICB9KSkpO1xuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBqb2luX3Jvb20gYWZ0ZXIgcmV0cmllczonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiByb29tIGFmdGVyIG11bHRpcGxlIGF0dGVtcHRzJyxcbiAgICAgICAgY29kZTogJ0pPSU5fUk9PTV9GQUlMRUQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBMb2FkIGhpc3RvcnkgKGZhbGxiYWNrLCBpZiBuZWVkZWQpXG4gIHNvY2tldC5vbignZ2V0X2hpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFzb2NrZXQucm9vbSkge1xuICAgICAgc29ja2V0LmVtaXQoJ2hpc3RvcnknLCBbXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBNZXNzYWdlLmZpbmQoe1xuICAgICAgICBjaGFubmVsOiBzb2NrZXQucm9vbSxcbiAgICAgICAgJG9yOiBbXG4gICAgICAgICAgeyB0eXBlOiAncHVibGljJyB9LFxuICAgICAgICAgIHsgdHlwZTogJ3N5c3RlbScgfSxcbiAgICAgICAgICB7IGF1dGhvcjogc29ja2V0Lm5pY2tuYW1lIH0sXG4gICAgICAgICAgeyB0YXJnZXQ6IHNvY2tldC5uaWNrbmFtZSB9XG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAtMSB9KVxuICAgICAgICAubGltaXQoMTAwKVxuICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogMSB9KTsgLy8gUmVzb3J0IGZvciBjaHJvbm9sb2dpY2FsIG9yZGVyXG5cbiAgICAgIHNvY2tldC5lbWl0KCdoaXN0b3J5JywgaGlzdG9yeS5tYXAobXNnID0+ICh7XG4gICAgICAgIGF1dGhvcjogbXNnLmF1dGhvcixcbiAgICAgICAgcm9vbTogbXNnLmNoYW5uZWwsIC8vIFVzaW5nIGNoYW5uZWwgaW5zdGVhZCBvZiByb29tIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICB0ZXh0OiBtc2cudGV4dCxcbiAgICAgICAgdHlwZTogbXNnLnR5cGUsXG4gICAgICAgIHRhcmdldDogbXNnLnRhcmdldCxcbiAgICAgICAgdGltZXN0YW1wOiBtc2cudGltZXN0YW1wXG4gICAgICB9KSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gbG9hZCBtZXNzYWdlIGhpc3RvcnknIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHVibGljIG1lc3NhZ2VcbiAgc29ja2V0Lm9uKCdtZXNzYWdlJywgYXN5bmMgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBpZiAoIXNvY2tldC5yb29tIHx8ICFkYXRhLnRleHQ/LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBtdXRlZFxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChzb2NrZXQudXNlcklkKTtcbiAgICBpZiAoY3VycmVudFVzZXIgJiYgY3VycmVudFVzZXIuaXNNdXRlZCgpKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgYXJlIG11dGVkIGFuZCBjYW5ub3Qgc2VuZCBtZXNzYWdlcycsXG4gICAgICAgIGNvZGU6ICdVU0VSX01VVEVEJyxcbiAgICAgICAgbXV0ZUV4cGlyZXM6IGN1cnJlbnRVc2VyLm11dGVFeHBpcmVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiBkYXRhLnRleHQudHJpbSgpLFxuICAgICAgICB0eXBlOiAncHVibGljJ1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLCAvLyBLZWVwaW5nICdyb29tJyBmb3IgZnJvbnRlbmQgY29tcGF0aWJpbGl0eVxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHN0YXR1czogJ2RlbGl2ZXJlZCcsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZVxuICAgICAgfTtcblxuICAgICAgaW8udG8oc29ja2V0LnJvb20pLmVtaXQoJ21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICBsb2dnZXIuZGVidWcoYE1lc3NhZ2Ugc2F2ZWQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gaW4gJHtzb2NrZXQucm9vbX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzYXZpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlJyB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFByaXZhdGUgbWVzc2FnZVxuICBzb2NrZXQub24oJ3ByaXZhdGVfbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQucm9vbSB8fCAhZGF0YS50byB8fCAhZGF0YS50ZXh0Py50cmltKCkpIHJldHVybjtcblxuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gZGF0YS50ZXh0LnRyaW0oKTtcbiAgICBjb25zdCB0YXJnZXROaWNrbmFtZSA9IGRhdGEudG8udHJpbSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIGF0dGVtcHQgZnJvbSAke3NvY2tldC5uaWNrbmFtZX0gdG8gJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBzZW5kZXJTb2NrZXRJZDogc29ja2V0LmlkLFxuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0YXJnZXQgbmlja25hbWUgZm9ybWF0XG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUubGVuZ3RoID09PSAwIHx8IHRhcmdldE5pY2tuYW1lLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCB0YXJnZXQgdXNlciBuaWNrbmFtZScsXG4gICAgICAgICAgY29kZTogJ0lOVkFMSURfVEFSR0VUX05JQ0tOQU1FJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IHNlbGYtbWVzc2FnaW5nXG4gICAgICBpZiAodGFyZ2V0Tmlja25hbWUgPT09IHNvY2tldC5uaWNrbmFtZSkge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBzZW5kIHByaXZhdGUgbWVzc2FnZSB0byB5b3Vyc2VsZicsXG4gICAgICAgICAgY29kZTogJ1NFTEZfTUVTU0FHRV9OT1RfQUxMT1dFRCdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0YXJnZXQgdXNlciBpbiBzYW1lIHJvb20gd2l0aCBkZXRhaWxlZCBsb2dnaW5nXG4gICAgICBjb25zdCB0YXJnZXRVc2VyID0gQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSkuZmluZChcbiAgICAgICAgdSA9PiB1Lm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZSAmJiB1LnJvb20gPT09IHNvY2tldC5yb29tXG4gICAgICApO1xuXG4gICAgICBsb2dnZXIuZGVidWcoYFByaXZhdGUgbWVzc2FnZSB0YXJnZXQgc2VhcmNoIHJlc3VsdCBmb3IgJHt0YXJnZXROaWNrbmFtZX1gLCB7XG4gICAgICAgIHRhcmdldEZvdW5kOiAhIXRhcmdldFVzZXIsXG4gICAgICAgIHRhcmdldFJvb206IHRhcmdldFVzZXI/LnJvb20sXG4gICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBvbmxpbmVVc2Vyc0luUm9vbTogQXJyYXkuZnJvbShvbmxpbmVVc2Vycy52YWx1ZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5yb29tID09PSBzb2NrZXQucm9vbSlcbiAgICAgICAgICAubWFwKHUgPT4gKHsgbmlja25hbWU6IHUubmlja25hbWUsIHJvb206IHUucm9vbSB9KSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXRhcmdldFVzZXIpIHtcbiAgICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgbWVzc2FnZSB3aXRoIG1vcmUgY29udGV4dFxuICAgICAgICBjb25zdCBvbmxpbmVVc2Vyc0luU2VuZGVyUm9vbSA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20pXG4gICAgICAgICAgLm1hcCh1ID0+IHUubmlja25hbWUpO1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBgVXNlciAnJHt0YXJnZXROaWNrbmFtZX0nIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBjaGFubmVsLiBBdmFpbGFibGUgdXNlcnM6ICR7b25saW5lVXNlcnNJblNlbmRlclJvb20uam9pbignLCAnKSB8fCAnbm9uZSd9YCxcbiAgICAgICAgICBjb2RlOiAnVEFSR0VUX1VTRVJfTk9UX0lOX1JPT00nLFxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgICAgYXZhaWxhYmxlVXNlcnM6IG9ubGluZVVzZXJzSW5TZW5kZXJSb29tLFxuICAgICAgICAgIHNlbmRlclJvb206IHNvY2tldC5yb29tXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBtZXNzYWdlIG9iamVjdFxuICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgYXV0aG9yOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICB0ZXh0OiB0cmltbWVkVGV4dCxcbiAgICAgICAgdHlwZTogJ3ByaXZhdGUnLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5pY2tuYW1lXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICAgICAgYXV0aG9yOiBtZXNzYWdlLmF1dGhvcixcbiAgICAgICAgcm9vbTogbWVzc2FnZS5jaGFubmVsLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHQsXG4gICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICAgICAgdGFyZ2V0OiBtZXNzYWdlLnRhcmdldCxcbiAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJ1xuICAgICAgfTtcblxuICAgICAgLy8gU2VuZCB0byB0YXJnZXQgdXNlciB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICBjb25zdCB0YXJnZXRTb2NrZXRJZCA9IEFycmF5LmZyb20ob25saW5lVXNlcnMua2V5cygpKS5maW5kKFxuICAgICAgICBpZCA9PiBvbmxpbmVVc2Vycy5nZXQoaWQpLm5pY2tuYW1lID09PSB0YXJnZXROaWNrbmFtZVxuICAgICAgKTtcblxuICAgICAgaWYgKHRhcmdldFNvY2tldElkKSB7XG4gICAgICAgIGlvLnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCdwcml2YXRlX21lc3NhZ2UnLCBtZXNzYWdlRGF0YSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgdG8gdGFyZ2V0ICR7dGFyZ2V0Tmlja25hbWV9YCwge1xuICAgICAgICAgIHRhcmdldFNvY2tldElkOiB0YXJnZXRTb2NrZXRJZCxcbiAgICAgICAgICBzZW5kZXI6IHNvY2tldC5uaWNrbmFtZSxcbiAgICAgICAgICByb29tOiBzb2NrZXQucm9vbSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFRhcmdldCB1c2VyICR7dGFyZ2V0Tmlja25hbWV9IGZvdW5kIGluIG9ubGluZVVzZXJzIGJ1dCBzb2NrZXQgSUQgbm90IGZvdW5kYCwge1xuICAgICAgICAgIHRhcmdldE5pY2tuYW1lLFxuICAgICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICAgIG9ubGluZVVzZXJzQ291bnQ6IG9ubGluZVVzZXJzLnNpemUsXG4gICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLl9pZFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTWVzc2FnZSBzdGlsbCBzYXZlZCB0byBkYXRhYmFzZSBmb3IgbGF0ZXIgZGVsaXZlcnkgaWYgdXNlciByZWNvbm5lY3RzXG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgY29uZmlybWF0aW9uIHRvIHNlbmRlciAod2l0aG91dCB0YXJnZXQgZm9yIHByaXZhY3kpXG4gICAgICBzb2NrZXQuZW1pdCgncHJpdmF0ZV9tZXNzYWdlJywge1xuICAgICAgICBhdXRob3I6IG1lc3NhZ2UuYXV0aG9yLFxuICAgICAgICByb29tOiBtZXNzYWdlLnJvb20sXG4gICAgICAgIHRleHQ6IG1lc3NhZ2UudGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgICB0YXJnZXQ6IG51bGwsIC8vIEhpZGUgdGFyZ2V0IGZyb20gc2VuZGVyJ3MgY29uZmlybWF0aW9uXG4gICAgICAgIHN0YXR1czogJ3NlbnQnXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFByaXZhdGUgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseWAsIHtcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0Tmlja25hbWUsXG4gICAgICAgIHJvb206IHNvY2tldC5yb29tLFxuICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuX2lkLFxuICAgICAgICBtZXNzYWdlTGVuZ3RoOiB0cmltbWVkVGV4dC5sZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2VuZGluZyBwcml2YXRlIG1lc3NhZ2U6Jywge1xuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc2VuZGVyOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgIHRhcmdldDogZGF0YS50byxcbiAgICAgICAgcm9vbTogc29ja2V0LnJvb20sXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICB9KTtcbiAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIHByaXZhdGUgbWVzc2FnZScsXG4gICAgICAgIGNvZGU6ICdQUklWQVRFX01FU1NBR0VfRkFJTEVEJ1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTcGVha2luZ1xuICBzb2NrZXQub24oJ3NwZWFraW5nJywgKGRhdGEpID0+IHtcbiAgICB1cGRhdGVIZWFydGJlYXQoKTtcbiAgICBzb2NrZXQudG8oc29ja2V0LnJvb20pLmVtaXQoJ3NwZWFraW5nJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzcGVha2luZzogZGF0YS5zcGVha2luZyB9KTtcbiAgfSk7XG5cbiAgLy8gVm9pY2UgY2hhbm5lbCBldmVudHNcbiAgc29ja2V0Lm9uKCdqb2luX3ZvaWNlX2NoYW5uZWwnLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgIGNvbnN0IHsgY2hhbm5lbElkIH0gPSBkYXRhO1xuICAgIGlmICghY2hhbm5lbElkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgLy8gVmVyaWZ5IGNoYW5uZWwgZXhpc3RzIGFuZCBpcyB2b2ljZVxuICAgICAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IENoYW5uZWwuZmluZE9uZSh7IGlkOiBjaGFubmVsSWQsIHR5cGU6ICd2b2ljZScgfSk7XG4gICAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnVm9pY2UgY2hhbm5lbCBub3QgZm91bmQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdm9pY2UgY2hhbm5lbCBpZiBub3QgZXhpc3RzXG4gICAgICBpZiAoIXZvaWNlQ2hhbm5lbHMuaGFzKGNoYW5uZWxJZCkpIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5zZXQoY2hhbm5lbElkLCBuZXcgTWFwKCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFubmVsUGVlcnMgPSB2b2ljZUNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgICAvLyBOb3RpZnkgb3RoZXJzIGluIHRoZSBjaGFubmVsXG4gICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2pvaW5lZF92b2ljZScsIHsgbmlja25hbWU6IHNvY2tldC5uaWNrbmFtZSwgc29ja2V0SWQ6IHNvY2tldC5pZCB9KTtcblxuICAgICAgLy8gQWRkIHNvY2tldCB0byB2b2ljZSBjaGFubmVsIHJvb21cbiAgICAgIHNvY2tldC5qb2luKGNoYW5uZWxJZCk7XG4gICAgICBjaGFubmVsUGVlcnMuc2V0KHNvY2tldC5pZCwgeyBwZWVyQ29ubmVjdGlvbjogbnVsbCwgc3RyZWFtOiBudWxsIH0pO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlcidzIHZvaWNlIGNoYW5uZWwgc3RhdHVzXG4gICAgICBzb2NrZXQudm9pY2VDaGFubmVsID0gY2hhbm5lbElkO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gam9pbmVkIHZvaWNlIGNoYW5uZWwgJHtjaGFubmVsSWR9YCk7XG4gICAgICBzb2NrZXQuZW1pdCgndm9pY2Vfam9pbmVkJywgeyBjaGFubmVsSWQgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBqb2luaW5nIHZvaWNlIGNoYW5uZWw6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ3ZvaWNlX2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGpvaW4gdm9pY2UgY2hhbm5lbCcgfSk7XG4gICAgfVxuICB9KTtcblxuICBzb2NrZXQub24oJ2xlYXZlX3ZvaWNlX2NoYW5uZWwnLCAoKSA9PiB7XG4gICAgdXBkYXRlSGVhcnRiZWF0KCk7XG4gICAgaWYgKCFzb2NrZXQudm9pY2VDaGFubmVsKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGFubmVsSWQgPSBzb2NrZXQudm9pY2VDaGFubmVsO1xuICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICBpZiAoY2hhbm5lbFBlZXJzKSB7XG4gICAgICBjaGFubmVsUGVlcnMuZGVsZXRlKHNvY2tldC5pZCk7XG4gICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgdm9pY2VDaGFubmVscy5kZWxldGUoY2hhbm5lbElkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb3RoZXJzXG4gICAgc29ja2V0LnRvKGNoYW5uZWxJZCkuZW1pdCgndXNlcl9sZWZ0X3ZvaWNlJywgeyBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lLCBzb2NrZXRJZDogc29ja2V0LmlkIH0pO1xuXG4gICAgc29ja2V0LmxlYXZlKGNoYW5uZWxJZCk7XG4gICAgc29ja2V0LnZvaWNlQ2hhbm5lbCA9IG51bGw7XG5cbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB2b2ljZSBjaGFubmVsICR7Y2hhbm5lbElkfWApO1xuICAgIHNvY2tldC5lbWl0KCd2b2ljZV9sZWZ0Jyk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2Vfb2ZmZXInLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgb2ZmZXIsIHRhcmdldFNvY2tldElkIH0gPSBkYXRhO1xuICAgIHNvY2tldC50byh0YXJnZXRTb2NrZXRJZCkuZW1pdCgndm9pY2Vfb2ZmZXInLCB7XG4gICAgICBvZmZlcixcbiAgICAgIGZyb206IHNvY2tldC5pZCxcbiAgICAgIGZyb21OaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgfSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigndm9pY2VfYW5zd2VyJywgKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IGFuc3dlciwgdGFyZ2V0U29ja2V0SWQgfSA9IGRhdGE7XG4gICAgc29ja2V0LnRvKHRhcmdldFNvY2tldElkKS5lbWl0KCd2b2ljZV9hbnN3ZXInLCB7XG4gICAgICBhbnN3ZXIsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICBzb2NrZXQub24oJ2ljZV9jYW5kaWRhdGUnLCAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgY2FuZGlkYXRlLCB0YXJnZXRTb2NrZXRJZCB9ID0gZGF0YTtcbiAgICBzb2NrZXQudG8odGFyZ2V0U29ja2V0SWQpLmVtaXQoJ2ljZV9jYW5kaWRhdGUnLCB7XG4gICAgICBjYW5kaWRhdGUsXG4gICAgICBmcm9tOiBzb2NrZXQuaWQsXG4gICAgICBmcm9tTmlja25hbWU6IHNvY2tldC5uaWNrbmFtZVxuICAgIH0pO1xuICB9KTtcblxuICAvLyBEaXNjb25uZWN0XG4gIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGFzeW5jICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gZGlzY29ubmVjdGVkYCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcklkID0gc29ja2V0LnVzZXJJZDtcblxuICAgICAgLy8gRGVjcmVhc2UgY29ubmVjdGlvbiBjb3VudCBmb3IgdGhpcyB1c2VyXG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWF4KDAsIGN1cnJlbnRDb3VudCAtIDEpO1xuICAgICAgICB1c2VyQ29ubmVjdGlvbnMuc2V0KHVzZXJJZCwgbmV3Q291bnQpO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKGBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBkaXNjb25uZWN0ZWQgKHJlbWFpbmluZyBjb25uZWN0aW9uczogJHtuZXdDb3VudH0pYCwge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4gICAgICAgICAgY29ubmVjdGlvbnNMZWZ0OiBuZXdDb3VudFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTGVhdmUgdm9pY2UgY2hhbm5lbCBpZiBpbiBvbmVcbiAgICAgIGlmIChzb2NrZXQudm9pY2VDaGFubmVsKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IHNvY2tldC52b2ljZUNoYW5uZWw7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxQZWVycyA9IHZvaWNlQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG5cbiAgICAgICAgaWYgKGNoYW5uZWxQZWVycykge1xuICAgICAgICAgIGNoYW5uZWxQZWVycy5kZWxldGUoc29ja2V0LmlkKTtcbiAgICAgICAgICBpZiAoY2hhbm5lbFBlZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHZvaWNlQ2hhbm5lbHMuZGVsZXRlKGNoYW5uZWxJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm90aWZ5IG90aGVyc1xuICAgICAgICBzb2NrZXQudG8oY2hhbm5lbElkKS5lbWl0KCd1c2VyX2xlZnRfdm9pY2UnLCB7IG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsIHNvY2tldElkOiBzb2NrZXQuaWQgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzb2NrZXQucm9vbSkge1xuICAgICAgICBzb2NrZXQubGVhdmUoc29ja2V0LnJvb20pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBsZWF2ZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IGxlYXZlTWVzc2FnZSA9IG5ldyBNZXNzYWdlKHtcbiAgICAgICAgICBhdXRob3I6ICdTeXN0ZW0nLFxuICAgICAgICAgIGNoYW5uZWw6IHNvY2tldC5yb29tLFxuICAgICAgICAgIHRleHQ6IGAke3NvY2tldC5uaWNrbmFtZX0gbGVmdCB0aGUgY2hhbm5lbC5gLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBsZWF2ZU1lc3NhZ2Uuc2F2ZSgpO1xuXG4gICAgICAgIGlvLnRvKHNvY2tldC5yb29tKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGF1dGhvcjogbGVhdmVNZXNzYWdlLmF1dGhvcixcbiAgICAgICAgICByb29tOiBsZWF2ZU1lc3NhZ2UuY2hhbm5lbCxcbiAgICAgICAgICB0ZXh0OiBsZWF2ZU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB0eXBlOiBsZWF2ZU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IGxlYXZlTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIG9ubGluZSB1c2VycyBsaXN0XG4gICAgICAgIGNvbnN0IHJvb21Vc2VycyA9IEFycmF5LmZyb20ob25saW5lVXNlcnMudmFsdWVzKCkpXG4gICAgICAgICAgLmZpbHRlcih1ID0+IHUucm9vbSA9PT0gc29ja2V0LnJvb20gJiYgdS51c2VySWQgIT09IHNvY2tldC51c2VySWQpXG4gICAgICAgICAgLm1hcCh1ID0+ICh7IG5pY2tuYW1lOiB1Lm5pY2tuYW1lLCByb2xlOiB1LnJvbGUgfSkpO1xuICAgICAgICBpby50byhzb2NrZXQucm9vbSkuZW1pdCgnb25saW5lX3VzZXJzJywgcm9vbVVzZXJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGZyb20gdHJhY2tpbmdcbiAgICAgIG9ubGluZVVzZXJzLmRlbGV0ZShzb2NrZXQuaWQpO1xuXG4gICAgICAvLyBMb2cgY3VycmVudCBjb25uZWN0aW9ucyBhZnRlciBkaXNjb25uZWN0XG4gICAgICBsb2dnZXIuaW5mbyhgQWZ0ZXIgZGlzY29ubmVjdCwgYWN0aXZlIHNvY2tldCBjb25uZWN0aW9uczogJHtvbmxpbmVVc2Vycy5zaXplfWApO1xuXG4gICAgICAvLyBVcGRhdGUgdXNlciBzdGF0dXMgaW4gZGF0YWJhc2UgaWYgdGhpcyB3YXMgdGhlIGxhc3QgY29ubmVjdGlvblxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdDb25uZWN0aW9ucyA9IHVzZXJDb25uZWN0aW9ucy5nZXQodXNlcklkKSB8fCAwO1xuICAgICAgICBpZiAocmVtYWluaW5nQ29ubmVjdGlvbnMgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xuICAgICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCflIQgVXNlciAke3NvY2tldC5uaWNrbmFtZX0gc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgc3RhdHVzIHNldCB0byBvZmZsaW5lIChsYXN0IGNvbm5lY3Rpb24pYCwge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBuaWNrbmFtZTogc29ja2V0Lm5pY2tuYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVXBkYXRlIGxhc3RBY3RpdmUgYnV0IGtlZXAgc3RhdHVzIG9ubGluZVxuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBVc2VyICR7c29ja2V0Lm5pY2tuYW1lfSBzdGlsbCBvbmxpbmUgKCR7cmVtYWluaW5nQ29ubmVjdGlvbnN9IGNvbm5lY3Rpb25zIGxlZnQpYCk7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFVzZXIgcmVtYWlucyBvbmxpbmVgLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiBzb2NrZXQubmlja25hbWUsXG4gICAgICAgICAgICBjb25uZWN0aW9uc0xlZnQ6IHJlbWFpbmluZ0Nvbm5lY3Rpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGRpc2Nvbm5lY3QgaGFuZGxlcjonLCBlcnJvcik7XG4gICAgfVxuIH0pO1xufSk7XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgYW5kIHN0YXJ0IHNlcnZlciAoZHVwbGljYXRlIHJlbW92ZWQpXG5jb25zdCBpbml0aWFsaXplU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgY2hhbm5lbHMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGNvbnN0IGRlZmF1bHRDaGFubmVscyA9IFtcbiAgICAgIHsgaWQ6ICdnZW5lcmFsJywgbmFtZTogJ0dlbmVyYWwnLCB0eXBlOiAndGV4dCcsIGNyZWF0ZWRCeTogJ3N5c3RlbScgfSxcbiAgICAgIHsgaWQ6ICd2b2ljZS1jaGF0JywgbmFtZTogJ1ZvaWNlIENoYXQnLCB0eXBlOiAndm9pY2UnLCBjcmVhdGVkQnk6ICdzeXN0ZW0nIH1cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBjaGFubmVsRGF0YSBvZiBkZWZhdWx0Q2hhbm5lbHMpIHtcbiAgICAgIGF3YWl0IENoYW5uZWwuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgeyBpZDogY2hhbm5lbERhdGEuaWQgfSxcbiAgICAgICAgY2hhbm5lbERhdGEsXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbygnRGVmYXVsdCBjaGFubmVscyBpbml0aWFsaXplZCcpO1xuXG4gICAgLy8gU3RhcnQgc2VydmVyXG4gICAgY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMTtcbiAgICBzZXJ2ZXIubGlzdGVuKFBPUlQsICcwLjAuMC4wJywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd25cbnByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1JlY2VpdmVkIFNJR0lOVCwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIuaW5mbygnUmVjZWl2ZWQgU0lHVEVSTSwgc2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Li4uJyk7XG4gIGF3YWl0IGNsb3NlREIoKTtcbiAgaW8uY2xvc2UoKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKCdTZXJ2ZXIgc2h1dCBkb3duJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn0pO1xuXG4vLyBPcHRpbWl6ZSBjcml0aWNhbCBzZXJ2ZXIgZnVuY3Rpb25zXG5jb25zdCBvcHRpbWl6ZWRJbml0aWFsaXplRGF0YWJhc2UgPSBhc3luY09wdGltaXplKGluaXRpYWxpemVTZXJ2ZXIsIHtcbiAgY29uY3VycmVuY3k6IDEsXG4gIHRpbWVvdXQ6IDYwMDAwLFxuICBzbG93VGhyZXNob2xkOiAxMDAwMFxufSk7XG5cbi8vIFN0YXJ0IHRoZSBzZXJ2ZXIgd2l0aCBhc3luYyBvcHRpbWl6YXRpb25cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gIG9wdGltaXplZEluaXRpYWxpemVEYXRhYmFzZSgpLmNhdGNoKGVyciA9PiB7XG4gICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgZXJyb3IgZHVyaW5nIHNlcnZlciBzdGFydHVwOicsIGVycik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9KTtcbn1cblxuLy8gTWVtb3J5IGNsZWFudXAgb24gbG9uZy1ydW5uaW5nIG9wZXJhdGlvbnNcbnNldEludGVydmFsKCgpID0+IHtcbiAgaWYgKGdsb2JhbC5nYykge1xuICAgIGdsb2JhbC5nYygpO1xuICAgIGxvZ2dlci5kZWJ1ZygnTWFudWFsIGdhcmJhZ2UgY29sbGVjdGlvbiB0cmlnZ2VyZWQnKTtcbiAgfVxufSwgMzAwMDAwKTsgLy8gRXZlcnkgNSBtaW51dGVzXG5cbi8vIEhhbmRsZSB1bmNhdWdodCBleGNlcHRpb25zIHdpdGggY2lyY3VpdCBicmVha2VyIHByb3RlY3Rpb25cbnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgKGVycm9yKSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5jYXVnaHQgRXhjZXB0aW9uOicsIGVycm9yKTtcbiAgLy8gRG9uJ3QgZXhpdCBpbW1lZGlhdGVseSwgbGV0IGNpcmN1aXQgYnJlYWtlciBoYW5kbGUgcmVjb3ZlcnlcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKGV4dGVybmFsU2VydmljZUJyZWFrZXIuZGF0YWJhc2VCcmVha2VyLmZhaWx1cmVDb3VudCA+IDEwKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ011bHRpcGxlIHVuY2F1Z2h0IGV4Y2VwdGlvbnMgZGV0ZWN0ZWQsIGZvcmNpbmcgZ3JhY2VmdWwgc2h1dGRvd24nKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH0sIDEwMDApO1xufSk7XG5cbi8vIEhhbmRsZSB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG5wcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIFJlamVjdGlvbiBhdDonLCBwcm9taXNlLCAncmVhc29uOicsIHJlYXNvbik7XG4gIC8vIERvbid0IGV4aXQsIGp1c3QgbG9nIGFuZCBsZXQgY2lyY3VpdCBicmVha2VyIGhhbmRsZVxufSk7XG5cbi8vIEdyYWNlZnVsIHNodXRkb3duIHdpdGggcmVzb3VyY2UgY2xlYW51cFxucHJvY2Vzcy5vbignU0lHVEVSTScsIGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmluZm8oJ1NJR1RFUk0gcmVjZWl2ZWQsIHN0YXJ0aW5nIGdyYWNlZnVsIHNodXRkb3duLi4uJyk7XG5cbiAgdHJ5IHtcbiAgICAvLyBDbG9zZSBleHRlcm5hbCBzZXJ2aWNlIGNvbm5lY3Rpb25zXG4gICAgY29uc3QgY2lyY3VpdFN0YXR1cyA9IGdldENpcmN1aXRCcmVha2VyU3RhdHVzZXMoKTtcbiAgICBsb2dnZXIuaW5mbygnQ2lyY3VpdCBicmVha2VyIGZpbmFsIHN0YXR1czonLCBjaXJjdWl0U3RhdHVzKTtcblxuICAgIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgcmVzb3VyY2VzXG4gICAgYXdhaXQgY2xvc2VEQigpO1xuXG4gICAgLy8gTG9nIGZpbmFsIG1ldHJpY3NcbiAgICBjb25zdCBmaW5hbE1ldHJpY3MgPSBwZXJmb3JtYW5jZU1vbml0b3IuZ2V0RGV0YWlsZWRTdGF0cygpO1xuXG4gICAgbG9nZ2VyLmluZm8oJ0ZpbmFsIHBlcmZvcm1hbmNlIG1ldHJpY3M6Jywge1xuICAgICAgdXB0aW1lOiBmaW5hbE1ldHJpY3MudXB0aW1lLFxuICAgICAgdG90YWxSZXF1ZXN0czogZmluYWxNZXRyaWNzLmVuZHBvaW50U3RhdHNcbiAgICAgICAgPyBPYmplY3QudmFsdWVzKGZpbmFsTWV0cmljcy5lbmRwb2ludFN0YXRzKS5yZWR1Y2UoKGFjYywgZW5kcG9pbnQpID0+XG4gICAgICAgICAgICBhY2MgKyAoZW5kcG9pbnQuY291bnQgfHwgMCksIDApXG4gICAgICAgIDogMCxcbiAgICAgIG1lbW9yeVBlYWs6IGZpbmFsTWV0cmljcy5tZW1vcnk/LmhlYXBUb3RhbCB8fCAwXG4gICAgfSk7XG5cbiAgICBpby5jbG9zZSgoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbygnU2VydmVyIGdyYWNlZnVsIHNodXRkb3duIGNvbXBsZXRlJyk7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkdXJpbmcgZ3JhY2VmdWwgc2h1dGRvd246JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufSk7XG5cbi8vIFBlcmlvZGljIGhlYWx0aCBzZWxmLWFzc2Vzc21lbnRcbnNldEludGVydmFsKCgpID0+IHtcbiAgY29uc3QgaGVhbHRoRGF0YSA9IHBlcmZvcm1hbmNlTW9uaXRvci5nZXRIZWFsdGhEYXRhKCk7XG5cbiAgLy8gU2VsZi1tb25pdG9yIGNyaXRpY2FsIG1ldHJpY3NcbiAgaWYgKGhlYWx0aERhdGEucmVxdWVzdHMuYXZlcmFnZVJlc3BvbnNlVGltZSA+IDUwMDApIHtcbiAgICBsb2dnZXIud2Fybign8J+aqCBTZWxmLW1vbml0b3I6IEhpZ2ggYXZlcmFnZSByZXNwb25zZSB0aW1lIGRldGVjdGVkJywge1xuICAgICAgYXZnVGltZTogYCR7aGVhbHRoRGF0YS5yZXF1ZXN0cy5hdmVyYWdlUmVzcG9uc2VUaW1lfW1zYCxcbiAgICAgIHRocmVzaG9sZDogJzUwMDBtcycsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGhlYWx0aERhdGEubWVtb3J5LnVzYWdlUGVyY2VudCA+IDAuOSkge1xuICAgIGxvZ2dlci53YXJuKCfwn5qoIFNlbGYtbW9uaXRvcjogSGlnaCBtZW1vcnkgdXNhZ2UgZGV0ZWN0ZWQnLCB7XG4gICAgICB1c2FnZTogaGVhbHRoRGF0YS5tZW1vcnkucGVyY2VudGFnZSxcbiAgICAgIHRocmVzaG9sZDogJzkwJScsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuXG4gICAgLy8gVHJpZ2dlciBwcm9hY3RpdmUgY2xlYW51cFxuICAgIGlmIChnbG9iYWwuZ2MpIHtcbiAgICAgIGdsb2JhbC5nYygpO1xuICAgICAgbG9nZ2VyLmluZm8oJ/Cfp7kgUHJvYWN0aXZlIGdhcmJhZ2UgY29sbGVjdGlvbiB0cmlnZ2VyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBjaXJjdWl0IGJyZWFrZXIgc3RhdHVzXG4gIGNvbnN0IGNpcmN1aXRTdGF0dXMgPSBnZXRDaXJjdWl0QnJlYWtlclN0YXR1c2VzKCk7XG4gIGlmIChjaXJjdWl0U3RhdHVzLmRhdGFiYXNlPy5zdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgbG9nZ2VyLndhcm4oJ/CfmqggU2VsZi1tb25pdG9yOiBEYXRhYmFzZSBjaXJjdWl0IGJyZWFrZXIgaXMgT1BFTicsIGNpcmN1aXRTdGF0dXMuZGF0YWJhc2UpO1xuICB9XG5cbiAgaWYgKGNpcmN1aXRTdGF0dXMucmVkaXM/LnN0YXRlID09PSAnb3BlbicpIHtcbiAgICBsb2dnZXIud2Fybign8J+aqCBTZWxmLW1vbml0b3I6IFJlZGlzIGNpcmN1aXQgYnJlYWtlciBpcyBPUEVOJywgY2lyY3VpdFN0YXR1cy5yZWRpcyk7XG4gIH1cblxufSwg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