# =====================================
# CHAT-JS PRODUCTION ENVIRONMENT VARIABLES
# =====================================
# Copy this file to .env.production and fill in the values
# Never commit actual secrets to version control!

# =====================================
# GCP CONFIGURATION
# =====================================
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=europe-west1
GCP_SERVICE_ACCOUNT_KEY_PATH=secrets/gcp-service-account.json

# =====================================
# DATABASE (MongoDB Atlas or Cloud SQL)
# =====================================
NODE_ENV=production
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/chat-js-prod?retryWrites=true&w=majority
MONGODB_USERNAME=your-mongodb-username
MONGODB_PASSWORD=your-mongodb-password
MONGODB_DB_NAME=chat-js-production
MONGODB_CONNECTION_POOL_SIZE=10
MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000

# =====================================
# AUTHENTICATION & SECURITY
# =====================================
JWT_SECRET=your-very-secure-jwt-secret-256-bits-minimum
JWT_EXPIRATION=24h
BCRYPT_SALT_ROUNDS=12

# =====================================
# CORS & SECURITY
# =====================================
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
TRUST_PROXY=true
SECURE_COOKIES=true

# =====================================
# APPLICATION CONFIG
# =====================================
PORT=8080
HOST=0.0.0.0
API_BASE_URL=https://api.yourdomain.com
CLIENT_URL=https://yourdomain.com

# =====================================
# EMAIL SERVICE
# =====================================
EMAIL_SERVICE=gmail
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=your-email@gmail.com

# =====================================
# CLOUD SERVICES
# =====================================
# Google Cloud Storage (optional - for file uploads)
GCS_BUCKET_NAME=chat-js-prod-uploads

# Redis (optional - for session management)
REDIS_URL=redis://localhost:6379
# For Memorystore (Redis) on GCP:
# REDIS_URL=redis://username:password@region-memorystore-redis-id.region.memorystore.googleapis.com:6379

# =====================================
# TURN SERVER (WebRTC)
# =====================================
TURN_SECRET=your-turn-secret-key
TURN_SERVER_CONFIG=/etc/coturn/turnserver.conf
TURN_EXTERNAL_IP=your.public.external.ip
TURN_PORT_MIN=49152
TURN_PORT_MAX=65535

# =====================================
# MONITORS (Sentry, New Relic)
# =====================================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=Chat-JS-Production

# =====================================
# LOGGING
# =====================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_STACK_DRIVER=true

# =====================================
# RATE LIMITING (Production optimized)
# =====================================
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=3
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX=60
GENERAL_RATE_LIMIT_WINDOW_MS=3600000
GENERAL_RATE_LIMIT_MAX=500

# =====================================
# PERFORMANCE & OPTIMIZATION
# =====================================
COMPRESSION_LEVEL=6
CACHE_TTL=300
MAX_PAYLOAD_SIZE=10mb
SOCKET_TIMEOUT=60000
HEARTBEAT_INTERVAL=30000
CONNECTION_CLEANUP_INTERVAL=60000

# =====================================
# MONITORING & HEALTH CHECKS
# =====================================
HEALTH_CHECK_PORT=8800
METRICS_ENABLED=true
TRACING_ENABLED=true

# =====================================
# CI/CD & DEPLOYMENT
# =====================================
CLOUD_RUN_SERVICE_NAME=chat-js-backend
CLOUD_RUN_MEMORY=2Gi
CLOUD_RUN_CPU=2
CLOUD_RUN_MAX_INSTANCES=20
CLOUD_RUN_MIN_INSTANCES=1

# =====================================
# BACKUP & RECOVERY
# =====================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30